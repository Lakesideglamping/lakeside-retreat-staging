<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=yes">
    <meta http-equiv="cache-control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="expires" content="0">
    <meta name="cache-buster-v2-new" content="v2-force-override-20250824-1145">
    <meta name="force-reload" content="true">
    <script>
        // AGGRESSIVE CACHE BUSTING
        console.log('üîÑ FORCE CACHE CLEAR - V2 SYSTEM OVERRIDE');
        if ('serviceWorker' in navigator) {
            caches.keys().then(names => names.forEach(name => caches.delete(name)));
        }
        localStorage.clear();
        sessionStorage.clear();
    </script>
<meta http-equiv="X-Content-Type-Options" content="nosniff">
<meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
<!-- Content Security Policy - Allows necessary inline styles and event handlers -->
<meta http-equiv="Content-Security-Policy" content="
    default-src 'self'; 
    script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://cdnjs.cloudflare.com https://www.clarity.ms https://js.stripe.com; 
    style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com; 
    font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com; 
    img-src 'self' data: https: blob:; 
    connect-src 'self' https: wss:;
    media-src 'self' https:;
    object-src 'none';
    base-uri 'self';
    form-action 'self';
    worker-src 'self';
    child-src 'self';">
    <title>Luxury Glamping Dome Accommodation in Cromwell, on Lake Dunstan by Lakeside Retreat </title>
    
    <!-- Critical CSS - Inline for performance -->
    <style>
      /* Critical above-the-fold styles */
      html { margin: 0; padding: 0; }
      body { font-family: 'Montreal', sans-serif; margin: 0; padding: 0; line-height: 1.6; background: #FAF4F5; }
      .hero { min-height: 100vh; background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); }
      .nav { position: fixed; top: 0; width: 100%; z-index: 50; background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); }
      .text-4xl { font-size: 2.25rem; line-height: 2.5rem; }
      .text-white { color: #ffffff; }
      .font-bold { font-weight: 700; }
      .mb-6 { margin-bottom: 1rem; }
    </style>
    
    <!-- Enhanced SEO Meta Tags -->
    <meta name="description" content="Experience New Zealand's first energy-positive luxury accommodation on Lake Dunstan. Just 55min from Queenstown, 30min from Wanaka. Geodesic domes & lakeside cottage with private spas, 16.72kW solar system, direct cycle trail access. Book your sustainable Central Otago escape today. ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ 4.9/5 from 127 reviews.">
    <meta name="keywords" content="Central Otago accommodation, Queenstown alternative accommodation, Wanaka alternative accommodation, Lake Dunstan glamping, solar powered glamping NZ">
    <meta name="author" content="Stephen & Sandy - Lakeside Retreat">
    
    <!-- Advanced SEO meta tags -->
    <meta name="language" content="en-NZ">
    <meta name="revisit-after" content="3 days">
    <meta name="distribution" content="web">
    <meta name="rating" content="general">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="bingbot" content="index, follow">
    
    <!-- Geographic Targeting (CRITICAL for local SEO) -->
    <meta name="geo.region" content="NZ-OTA">
    <meta name="geo.placename" content="Cromwell, Central Otago, New Zealand">
    <meta name="geo.position" content="-45.038710, 169.197693">
    <meta name="ICBM" content="-45.038710, 169.197693">
    
    <!-- Mobile optimization -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#753742">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://lakesideretreat.co.nz/">
    <meta property="og:title" content="Central Otago Luxury Accommodation | Lake Dunstan Glamping Domes">
    <meta property="og:description" content="Luxury glamping domes and cottage in Central Otago wine country with Lake Dunstan views. Grid-tied solar powered, 300m to cycle trail, near Cromwell.">
    <meta property="og:site_name" content="Lakeside Retreat">
    <meta property="og:image" content="https://lakesideretreat.co.nz/images/vineyard.jpeg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Luxury glamping dome with panoramic Lake Dunstan views in Central Otago wine country">
    <meta property="og:locale" content="en_NZ">
    
    <!-- Twitter Cards for Social Sharing -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://lakesideretreat.co.nz/">
    <meta name="twitter:title" content="Central Otago Luxury Accommodation | Lake Dunstan Glamping">
    <meta name="twitter:description" content="Luxury glamping domes with Lake Dunstan views in Central Otago wine country. Grid-tied solar powered, 300m to cycle trail. 4.9‚òÖ rated sustainable accommodation.">
    <meta name="twitter:image" content="images/dome-pinot-hero.jpeg">
    <meta name="twitter:image:alt" content="Luxury glamping dome with panoramic Lake Dunstan views in Central Otago wine country near Cromwell">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://lakesideretreat.co.nz/">
    
    <!-- Multilingual Support -->
    <link rel="alternate" hreflang="en-nz" href="https://lakesideretreat.co.nz/">
    <link rel="alternate" hreflang="en-au" href="https://lakesideretreat.co.nz/">
    <link rel="alternate" hreflang="en" href="https://lakesideretreat.co.nz/">
    
    <!-- Performance Optimizations -->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="dns-prefetch" href="//images.unsplash.com">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Montreal:wght@300;400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <!-- Enhanced Performance Optimizations -->
    <link rel="preconnect" href="https://images.unsplash.com" crossorigin>
    <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>

    <!-- Resource hints for better loading -->
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">

    <!-- Enhanced viewport for better mobile experience -->
    <meta name="HandheldFriendly" content="true">
    <meta name="MobileOptimized" content="width">
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montreal:wght@300;400;500;600;700&family=Roboto:wght@400;500;600;700&display=swap" rel="stylesheet">
 <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-M6TC9MB5CR"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-M6TC9MB5CR', {
        'enhanced_ecommerce': true,
        'send_page_view': true,
        'custom_map': {
          'custom_parameter_1': 'accommodation_type',
          'custom_parameter_2': 'booking_source'
        }
      });
      
      // Enhanced tracking for accommodation bookings
      function trackBookingIntent(accommodationType) {
        gtag('event', 'booking_intent', {
          'accommodation_type': accommodationType,
          'page_location': window.location.href
        });
      }
      
      // Wine tour interest tracking
      function trackWineTourInterest() {
        gtag('event', 'wine_tour_interest', {
          'content_category': 'central_otago_activities'
        });
      }
    </script>

    <!-- Search Console Verification - Add your verification code when available -->
    <!-- <meta name="google-site-verification" content=""> -->
  <!-- Clarity Analytics for heat mapping -->
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "sxhpz96ywu");
    </script>
    
    <!-- Performance monitoring -->
    <script>
      // Core Web Vitals monitoring
      new PerformanceObserver((entryList) => {
        for (const entry of entryList.getEntries()) {
          if (entry.entryType === 'navigation') {
            gtag('event', 'page_load_time', {
              'event_category': 'Performance',
              'event_label': 'Navigation',
              'value': Math.round(entry.loadEventEnd - entry.loadEventStart)
            });
          }
        }
      }).observe({entryTypes: ['navigation']});
    </script>

<!-- Service Worker for Enhanced Caching -->
<script>
// Register service worker for caching and offline support
if ('serviceWorker' in navigator && 'caches' in window) {
    window.addEventListener('load', () => {
        // Simple service worker for caching static assets
        const swCode = `
            const CACHE_NAME = 'lakeside-retreat-v1';
            const urlsToCache = [
                '/',
                '/index.html',
                'https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap',
                'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css'
            ];
            
            self.addEventListener('install', (event) => {
                event.waitUntil(
                    caches.open(CACHE_NAME)
                        .then((cache) => cache.addAll(urlsToCache))
                );
            });
            
            self.addEventListener('fetch', (event) => {
                event.respondWith(
                    caches.match(event.request)
                        .then((response) => {
                            return response || fetch(event.request);
                        }
                    )
                );
            });
        `;
        
        // Create and register service worker
        const blob = new Blob([swCode], { type: 'application/javascript' });
        const swUrl = URL.createObjectURL(blob);
        
        navigator.serviceWorker.register(swUrl)
            .then(() => {}) // Console statement removed for production
            .catch(() => {}); // Console statement removed for production
    });
}

// Enhanced WebP detection and image optimization
function detectWebPSupport() {
    const webP = new Image();
    webP.onload = webP.onerror = () => {
        document.documentElement.classList.add(webP.height === 2 ? 'webp' : 'no-webp');
    };
    webP.src = 'data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA';
}
</script>

<script>
// Initialize optimizations
document.addEventListener('DOMContentLoaded', () => {
    detectWebPSupport();
    
    // Optimize images with lazy loading
    if ('IntersectionObserver' in window) {
        const imageObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    if (img.dataset.src) {
                        img.src = img.dataset.src;
                        img.classList.remove('lazy');
                        imageObserver.unobserve(img);
                    }
                }
            });
        });
        
        // Observe images with data-src attribute
        document.querySelectorAll('img[data-src]').forEach(img => {
            imageObserver.observe(img);
        });
    }
});
</script>
</head>
<body>
 
    <!-- COMPREHENSIVE STRUCTURED DATA -->
    <!-- Main Business Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LodgingBusiness",
      "@id": "https://lakesideretreat.co.nz/#organization",
      "name": "Lakeside Retreat Central Otago",
      "alternateName": "Lakeside Glamping",
      "description": "Central Otago's premier luxury glamping accommodation on Lake Dunstan with solar power system, Powerwall, direct Otago Rail Trail access, and proximity to 30+ wineries",
      "url": "https://lakesideretreat.co.nz/",
      "logo": "https://lakesideretreat.co.nz/images/logo.png",
      "image": [
        "https://lakesideretreat.co.nz/images/dome-pinot-exterior.jpg",
        "https://lakesideretreat.co.nz/images/dome-rose-spa1.jpg",
        "https://lakesideretreat.co.nz/images/lakeside-cottage-lake-view.jpg"
      ],
      "telephone": "+64-21-368-682",
      "email": "info@lakesideretreat.co.nz",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "96 Smiths Way, Mount Pisa",
        "addressLocality": "Cromwell",
        "addressRegion": "Otago",
        "postalCode": "9310",
        "addressCountry": "NZ"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": -45.038710,
        "longitude": 169.197693
      },
      "openingHoursSpecification": {
        "@type": "OpeningHoursSpecification",
        "dayOfWeek": [
          "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"
        ],
        "opens": "08:00",
        "closes": "20:00"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.9",
        "reviewCount": "127",
        "bestRating": "5",
        "worstRating": "1"
      },
      "amenityFeature": [
        {
          "@type": "LocationFeatureSpecification",
          "name": "Commercial-Grade Solar System",
          "value": "16.72kW Solar Array with 38 x 440W Helios Panels"
        },
        {
          "@type": "LocationFeatureSpecification", 
          "name": "Energy Storage System",
          "value": "Signergy Battery Storage)"
        },
        {
          "@type": "LocationFeatureSpecification",
          "name": "Smart Energy Management",
          "value": "20kW Hybrid Inverter with Real-time Monitoring"
        },
        {
          "@type": "LocationFeatureSpecification",
          "name": "Energy Independence",
          "value": "Energy-Positive Operations Contributing to NZ Grid"
        },
        {
          "@type": "LocationFeatureSpecification",
          "name": "Private Hot Tub",
          "value": true
        },
        {
          "@type": "LocationFeatureSpecification",
          "name": "Lake Access",
          "value": "Direct Lake Dunstan access"
        },
        {
          "@type": "LocationFeatureSpecification",
          "name": "Cycle Trail Access",
          "value": "Otago Rail Trail - 300 metre walk"
        },
        {
          "@type": "LocationFeatureSpecification",
          "name": "Wine Country Location",
          "value": "15+ wineries within 15km"
        }
      ],
      "starRating": {
        "@type": "Rating",
        "ratingValue": "5"
      },
      "priceRange": "$$$",
      "currenciesAccepted": "NZD",
      "paymentAccepted": "Cash, Credit Card, Debit Card",
      "checkinTime": "15:00",
      "checkoutTime": "10:00",
      "petsAllowed": "Lakeside Cottage only",
      "smokingAllowed": false,
      "numberOfRooms": "3",
      "maximumAttendeeCapacity": "6",
      "hasMap": "https://maps.google.com/?q=-45.038710,169.197693",
      "sameAs": [
        "https://www.facebook.com/lakesideretreat",
        "https://www.instagram.com/lakesideretreat",
        "https://www.airbnb.com/h/lakesideretreat",
        "https://www.booking.com/hotel/nz/lakeside-retreat.html"
      ]
    }
    </script>

    <!-- Organization Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Lakeside Retreat Central Otago",
      "alternateName": "Lakeside Retreat",
      "url": "https://lakesideretreat.co.nz",
      "logo": "https://lakesideretreat.co.nz/images/logo.png",
      "foundingDate": "2019",
      "founder": {
        "@type": "Person",
        "name": "Stephen & Sandy"
      },
      "description": "Sustainable luxury accommodation specialists in Central Otago, pioneering grid-tied solar tourism experiences",
      "knowsAbout": [
        "Solar Energy Systems",
        "Sustainable Tourism", 
        "Central Otago Wine Region",
        "Otago Rail Trail",
        "Lake Dunstan Activities",
        "Eco Glamping"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+64-21-368-682",
        "contactType": "customer service",
        "availableLanguage": ["English"],
        "areaServed": "NZ"
      },
      "sameAs": [
        "https://www.facebook.com/lakesideretreat",
        "https://www.instagram.com/lakesideretreat",
        "https://www.tripadvisor.com/lakesideretreat",
        "https://www.booking.com/lakesideretreat"
      ]
    }
    </script>

    <!-- FAQ Schema Markup for SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "Where is Lakeside Retreat located in Central Otago?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Lakeside Retreat is located at 96 Smiths Way, Mount Pisa, just 12km from Cromwell town centre. We're positioned directly on Lake Dunstan in the heart of Central Otago wine country, with the cycle trail just 300m from our accommodation."
        }
      },{
        "@type": "Question",
        "name": "What type of accommodation do you offer in Central Otago?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "We offer luxury glamping domes and a family cottage, all with Lake Dunstan and mountains view. Dome Pinot (50sqm) and Dome Ros√© (40sqm) are perfect for couples, while our Lakeside Cottage accommodates families with direct lake access. All accommodation is powered by grid-tied solar with battery backup."
        }
      },{
        "@type": "Question",
        "name": "How close are you to Central Otago wineries?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "We're located in the heart of Central Otago wine country with 15+ wineries within 15km. Our own vineyard setting puts you amongst award-winning Pinot Noir producers, with many cellar doors accessible by bike via the cycle trail."
        }
      },{
        "@type": "Question",
        "name": "How does your 16.72kW solar power system work?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Our 16.72kW grid-tied solar system with 16kWh Signergy battery provides clean energy while maintaining 100% reliability for guests. Being grid-tied means you'll never experience power outages, while we contribute excess renewable energy back to New Zealand's grid."
        }
      },{
        "@type": "Question",
        "name": "Can I access the Otago Rail Trail from your accommodation?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes! The famous Otago Rail Trail is just a 300-metre walk from our domes. You can easily access the Cromwell to Clyde section, rent bikes in Cromwell, and arrange luggage transfers. It's perfect for wine country cycling and exploring Central Otago's heritage."
        }
      },{
        "@type": "Question",
        "name": "What activities are available on Lake Dunstan?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Lake Dunstan offers kayaking, paddleboarding, fishing, and scenic walks right from our doorstep. The lake is perfect for photography, bird watching, and water sports. The Cromwell Gorge walks provide stunning views and heritage sites."
        }
      }]
    }
    </script>

    <!-- Breadcrumb Schema Markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Central Otago Accommodation",
        "item": "https://lakesideretreat.co.nz/"
      },{
        "@type": "ListItem", 
        "position": 2,
        "name": "Lake Dunstan Accommodation",
        "item": "https://lakesideretreat.co.nz/#accommodations"
      },{
        "@type": "ListItem",
        "position": 3,
        "name": "Cromwell Wine Country Activities", 
        "item": "https://lakesideretreat.co.nz/#explore"
      }]
    }
    </script>

    <!-- Website Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Lakeside Retreat Central Otago",
      "url": "https://lakesideretreat.co.nz",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://lakesideretreat.co.nz/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      },
      "sameAs": [
        "https://www.facebook.com/lakesideretreat",
        "https://www.instagram.com/lakesideretreat"
      ]
    }
    </script>

    <!-- Blog Collection Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Blog",
      "name": "Central Otago Wine Country & Solar Energy Blog",
      "description": "Expert guides for Central Otago wine country, sustainable travel, and renewable energy tourism",
      "url": "https://lakesideretreat.co.nz/blog",
      "author": {
        "@type": "Organization",
        "name": "Lakeside Retreat Central Otago"
      },
      "publisher": {
        "@type": "Organization",
        "name": "Lakeside Retreat Central Otago",
        "logo": {
          "@type": "ImageObject",
          "url": "https://lakesideretreat.co.nz/images/logo.png"
        }
      },
      "inLanguage": "en-NZ"
    }
    </script>

    <!-- Security and Performance optimization -->
    <script src="security-fixes-immediate.js"></script>
    <script src="secure-payment-integration.js"></script>
    <script>
      // WebP support detection
      function supportsWebP() {
        return new Promise(resolve => {
          const webP = new Image();
          webP.onload = webP.onerror = () => resolve(webP.height === 2);
          webP.src = 'data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA';
        });
      }
      
      supportsWebP().then(supported => {
        document.documentElement.classList.add(supported ? 'webp' : 'no-webp');
        
        // Progressive image loading for mobile
        if (supported) {
          implementProgressiveImageLoading();
        }
        
        // Initialize lazy loading for images
        if ('IntersectionObserver' in window) {
          const imageObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                const img = entry.target;
                if (img.dataset.src) {
                  img.src = img.dataset.src;
                  img.classList.remove('lazy');
                  imageObserver.unobserve(img);
                }
              }
            });
          }, {
            rootMargin: '50px 0px',
            threshold: 0.01
          });
          
          // Apply lazy loading to images below the fold
          document.querySelectorAll('img[data-src]').forEach(img => {
            imageObserver.observe(img);
          });
        }
      });
      
      function implementProgressiveImageLoading() {
        // Convert JPEG images to WebP format dynamically for supported browsers
        document.querySelectorAll('img[src*=".jpeg"], img[src*=".jpg"]').forEach(img => {
          const webpSrc = img.src.replace(/\.(jpe?g)$/i, '.webp');
          
          // Test if WebP version exists
          const testImg = new Image();
          testImg.onload = () => {
            img.src = webpSrc;
          };
          testImg.onerror = () => {
            // Keep original if WebP doesn't exist
          };
          testImg.src = webpSrc;
        });
      }
      
      // Service Worker for caching
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js');
      }
      
      // Initialize security on page load
      document.addEventListener('DOMContentLoaded', function() {
        // Initialize secure frontend functions
        if (window.SecureFrontend) {
          window.SecureFrontend.logSecurityEvent('page_loaded', {
            url: window.location.href,
            timestamp: new Date().toISOString()
          });
        }
      });
    </script>
    
    <style>
        :root {
            /* Color System */
            --primary: linear-gradient(135deg, #753742 0%, #1e4040 100%);
            --secondary: linear-gradient(135deg, #7a8471 0%, #6b7562 100%);
            --accent: linear-gradient(135deg, #753742 0%, #7a8471 100%);
            --brand-teal: #753742;
            --brand-teal-light: #4a7c7c;
            --brand-teal-dark: #1e4040;
            --brand-sage: #7a8471;
            --light-teal: rgba(45, 90, 90, 0.1);
            --dark: #0f172a;
            --light: #f8fafc;
            --white: #ffffff;
            --text: #302E41;
            --text-light: #64748b;
            --text-muted: #94a3b8;
            --border: #e2e8f0;
            --border-light: #f1f5f9;
            --shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-sm: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            
            /* Typography Scale */
            --font-size-xs: 0.75rem;    /* 12px */
            --font-size-sm: 0.875rem;   /* 14px */
            --font-size-base: 1rem;     /* 16px */
            --font-size-lg: 1.125rem;   /* 18px */
            --font-size-xl: 1.25rem;    /* 20px */
            --font-size-2xl: 1.5rem;    /* 24px */
            --font-size-3xl: 2rem;      /* 32px */
            --font-size-4xl: 2.5rem;    /* 40px */
            --font-size-5xl: 3rem;      /* 48px */
            
            /* Font Weights */
            --font-weight-normal: 400;
            --font-weight-medium: 500;
            --font-weight-semibold: 600;
            --font-weight-bold: 700;
            
            /* Line Heights */
            --line-height-tight: 1.25;
            --line-height-normal: 1.5;
            --line-height-relaxed: 1.625;
            
            /* Spacing Scale */
            --space-1: 0.25rem;   /* 4px */
            --space-2: 0.5rem;    /* 8px */
            --space-3: 0.75rem;   /* 12px */
            --space-4: 1rem;      /* 16px */
            --space-5: 1.25rem;   /* 20px */
            --space-6: 1.5rem;    /* 24px */
            --space-8: 2rem;      /* 32px */
            --space-10: 2.5rem;   /* 40px */
            --space-12: 3rem;     /* 48px */
            --space-16: 4rem;     /* 64px */
            --space-20: 5rem;     /* 80px */
            
            /* Border Radius */
            --radius: 15px;
            --radius-sm: 8px;
            --radius-lg: 20px;
            --radius-xl: 24px;
            
            /* Transitions */
            --transition: all 0.3s ease;
            --transition-fast: all 0.15s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Typography System */
        .text-xs { font-size: var(--font-size-xs); }
        .text-sm { font-size: var(--font-size-sm); }
        .text-base { font-size: var(--font-size-base); }
        .text-lg { font-size: var(--font-size-lg); }
        .text-xl { font-size: var(--font-size-xl); }
        .text-2xl { font-size: var(--font-size-2xl); }
        .text-3xl { font-size: var(--font-size-3xl); }
        .text-4xl { font-size: var(--font-size-4xl); }
        .text-5xl { font-size: var(--font-size-5xl); }

        .font-normal { font-weight: var(--font-weight-normal); }
        .font-medium { font-weight: var(--font-weight-medium); }
        .font-semibold { font-weight: var(--font-weight-semibold); }
        .font-bold { font-weight: var(--font-weight-bold); }

        .leading-tight { line-height: var(--line-height-tight); }
        .leading-normal { line-height: var(--line-height-normal); }
        .leading-relaxed { line-height: var(--line-height-relaxed); }

        .text-brand { color: var(--brand-teal); }
        .text-dark { color: var(--dark); }
        .text-base-color { color: var(--text); }
        .text-light { color: var(--text-light); }
        .text-muted { color: var(--text-muted); }

        /* Spacing System */
        .p-4 { padding: var(--space-4); } .p-6 { padding: var(--space-6); }
        .p-8 { padding: var(--space-8); } .p-12 { padding: var(--space-12); }

        .py-4 { padding-top: var(--space-4); padding-bottom: var(--space-4); }
        .py-6 { padding-top: var(--space-6); padding-bottom: var(--space-6); }
        .py-8 { padding-top: var(--space-8); padding-bottom: var(--space-8); }
        .py-12 { padding-top: var(--space-12); padding-bottom: var(--space-12); }
        .py-16 { padding-top: var(--space-16); padding-bottom: var(--space-16); }

        .px-4 { padding-left: var(--space-4); padding-right: var(--space-4); }
        .px-6 { padding-left: var(--space-6); padding-right: var(--space-6); }
        .px-8 { padding-left: var(--space-8); padding-right: var(--space-8); }

        .mb-2 { margin-bottom: var(--space-2); } .mb-4 { margin-bottom: var(--space-4); }
        .mb-6 { margin-bottom: var(--space-6); } .mb-8 { margin-bottom: var(--space-8); }
        .mb-12 { margin-bottom: var(--space-12); }

        .mt-4 { margin-top: var(--space-4); } .mt-6 { margin-top: var(--space-6); }
        .mt-8 { margin-top: var(--space-8); }

        /* Border Radius System */
        .rounded { border-radius: var(--radius); }
        .rounded-sm { border-radius: var(--radius-sm); }
        .rounded-lg { border-radius: var(--radius-lg); }
        .rounded-xl { border-radius: var(--radius-xl); }

        /* Shadow System */
        .shadow { box-shadow: var(--shadow); }
        .shadow-sm { box-shadow: var(--shadow-sm); }
        .shadow-lg { box-shadow: var(--shadow-lg); }

        /* Performance: Lazy Loading */
        img.lazy {
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        img.lazy.loaded {
            opacity: 1;
        }
        
        /* Image aspect ratio containers */
        .image-container {
            position: relative;
            overflow: hidden;
            background: var(--border-light);
        }
        
        .image-container::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 40px;
            height: 40px;
            margin: -20px 0 0 -20px;
            border: 3px solid var(--border);
            border-radius: 50%;
            border-top-color: var(--brand-teal);
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        body {
            font-family: 'Montreal', sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: var(--light);
            overflow-x: hidden;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Navigation */
        .navbar {
            background: transparent;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            z-index: 10;
            border-bottom: none;
            transition: all 0.3s ease;
        }

        .nav-container {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 2rem;
        }

        /* Navigation Styles */
        .logo {
            margin-right: 0.25rem;
            font-family: 'Montreal', sans-serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--brand-teal);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo-icon {
            width: auto;
            height: 3.0rem;
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            fill: var(--brand-teal);
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            text-decoration: none;
            color: #753742;
            font-weight: 500;
            transition: color 0.3s ease;
            cursor: pointer;
        }

        .nav-link:hover, .nav-link.active {
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text);
        }

        /* Mobile Navigation */
        .mobile-nav {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            z-index: 1001;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 2rem;
        }

        .mobile-nav.active {
            display: flex;
        }

        .mobile-nav .nav-link {
            font-size: 1.5rem;
            padding: 1rem;
        }

        .close-mobile-menu {
            position: absolute;
            top: 2rem;
            right: 2rem;
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: var(--brand-teal);
        }

        /* Search Overlay */
        .search-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .search-overlay.active {
            display: flex;
        }

        .search-container {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }

        .search-results {
            max-height: 300px;
            overflow-y: auto;
        }

        .search-result {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .search-result:hover {
            background: var(--light);
        }

        .close-search {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Cookie Consent */
        .cookie-consent {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--dark);
            color: white;
            padding: 1rem;
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .cookie-consent.active {
            display: flex;
        }

        /* Social Proof Notifications */
        .social-proof {
            position: fixed;
            bottom: 2rem;
            left: 2rem;
            background: white;
            border-radius: 10px;
            padding: 1rem 1.5rem;
            box-shadow: var(--shadow);
            z-index: 999;
            transform: translateX(-120%);
            transition: transform 0.5s ease;
            max-width: 300px;
        }

        .social-proof.show {
            transform: translateX(0);
        }

        /* Skeleton Loading */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Main Content */
        main {
            margin-top: 0;
        }

        .page {
            display: none;
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }

        .page.active {
            display: block;
        }

        /* Hero Section with Fixed Background Attachment */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url('PLACEHOLDER_HERO_IMAGE') center/cover;
            background-attachment: fixed;
            background-repeat: no-repeat;
            color: white;
            padding: 0;
            margin: 0;
            text-align: center;
            position: relative;
            overflow: hidden;
            min-height: 100vh;
            display: flex;
            align-items: center;
            will-change: transform;
        }

        /* Parallax Layer System */
        .parallax-container {
            position: relative;
            overflow: hidden;
            will-change: transform;
        }

        .parallax-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 120%;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            will-change: transform;
        }

        .parallax-layer-bg {
            background-attachment: fixed;
            z-index: 1;
        }

        .parallax-layer-mid {
            z-index: 2;
            opacity: 0.8;
        }

        .parallax-layer-front {
            z-index: 3;
            opacity: 0.6;
        }

        /* Section Transitions with Parallax */
        .section-transition {
            position: relative;
            min-height: 70vh;
            background-attachment: fixed;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            width: 100%;
        }

        .hero h1 {
            font-family: 'Roboto', sans-serif;
            font-size: 3.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.2;
        }

        .hero .tagline {
            font-size: 1.4rem;
            font-weight: 600;
            letter-spacing: 2px;
            margin-bottom: 1rem;
            color: var(--brand-teal);
            text-transform: uppercase;
        }

        .hero p {
            font-size: 1.25rem;
            margin-bottom: 2rem;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            opacity: 0.9;
            line-height: 1.7;
        }

        /* Buttons */
        .btn {
            display: inline-block;
            padding: 1rem 2rem;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #8b2635 0%, #6b1a26 100%);
            color: white;
            box-shadow: var(--shadow);
            border: 2px solid #8b2635;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #a02d3f 0%, #8b2635 100%);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(139, 38, 53, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #7a8471 0%, #6b7562 100%);
            color: white;
            box-shadow: var(--shadow);
            border: 2px solid #7a8471;
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #8a9480 0%, #7a8471 100%);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(122, 132, 113, 0.3);
        }

        .btn-outline {
            background: transparent;
            color: var(--text);
            border: 2px solid var(--border);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
            border-color: transparent;
        }

        /* Sections */
        .section {
            padding: 4rem 0;
        }

        .section-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-title {
            font-family: 'Roboto', sans-serif;
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section-subtitle {
            font-size: 1.1rem;
            opacity: 0.7;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Grid */
        .grid {
            display: grid;
            gap: 2rem;
        }

        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        .grid-3 {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }

        .grid-4 {
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(30px);
        }

        .card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-lg);
        }

        .card-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .card-image:hover {
            transform: scale(1.05);
        }

        .card-content {
            padding: 2rem;
        }

        .card-title {
            font-family: 'Roboto', sans-serif;
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .card-text {
            margin-bottom: 1.5rem;
            opacity: 0.8;
        }

        /* Amenities Grid */
        .amenities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .amenity-category {
            background: #FAF4F5;
            padding: 1rem;
            border-radius: 10px;
            border-left: 3px solid var(--brand-teal);
        }

        .amenity-category h5 {
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--dark);
            font-size: 0.9rem;
        }

        .amenity-category ul {
            list-style: none;
            padding: 0;
        }

        .amenity-category li {
            margin-bottom: 0.25rem;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
        }

        .amenity-category li i {
            color: #10b981;
            margin-right: 0.5rem;
            font-size: 0.7rem;
        }

        /* Stats */
        .stats {
            display: flex;
            justify-content: space-around;
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--shadow);
            margin: 2rem 0;
        }

        .stat {
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.7;
            margin-top: 0.5rem;
        }

        /* STREAMLINED 3-BUTTON BOOKING MODAL STYLES */
        .booking-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            overflow-y: auto;
        }

        .booking-modal.active {
            display: flex;
        }

        .booking-modal-content {
            background: white;
            border-radius: 20px;
            max-width: 700px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .booking-modal-header {
            background: var(--primary);
            color: white;
            padding: 2rem;
            border-radius: 20px 20px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .booking-modal-header h2 {
            font-family: 'Roboto', sans-serif;
            font-size: 2rem;
            margin: 0;
        }

        .close-booking-modal {
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            padding: 0;
        }

        .booking-modal-body {
            padding: 2rem;
        }

        .booking-step {
            display: none;
        }

        .booking-step.active {
            display: block;
        }


        .booking-form-group {
            margin-bottom: 1.5rem;
        }

        .booking-form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--brand-teal);
        }

        .booking-form-input, .booking-form-select {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .booking-form-input:focus, .booking-form-select:focus {
            outline: none;
            border-color: var(--brand-teal);
        }

        .booking-form-input.error, .booking-form-select.error {
            border-color: #dc2626;
            background-color: #fef2f2;
        }

        .booking-form-input.error:focus, .booking-form-select.error:focus {
            border-color: #dc2626;
        }

        .form-error-message {
            color: #dc2626;
            font-size: 0.85rem;
            margin-top: 0.25rem;
            display: none;
        }

        .form-error-message.show {
            display: block;
        }

        /* Image Loading Optimization */
        .card-image.lazy {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        .card-image {
            transition: opacity 0.3s ease;
            will-change: opacity;
        }
        
        .card-image.loaded {
            opacity: 1;
        }
        
        /* WebP Progressive Enhancement */
        .webp .hero-background {
            background-image: url('images/hero-background.webp');
        }
        
        .no-webp .hero-background {
            background-image: url('images/hero-background.jpg');
        }
        
        /* Mobile Parallax Optimizations */
        @media (max-width: 768px) {
            /* Disable background-attachment: fixed on mobile for better performance */
            .hero {
                background-attachment: scroll !important;
            }

            /* Responsive Hero Images - Mobile Large (481px - 768px) */
            .hero-main {
                background-image: linear-gradient(rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.1)), url('images/MobileLarge/Vineyard768x1024.jpeg') !important;
            }

            .hero-main .parallax-layer-bg {
                background-image: none !important;
            }
        }

        /* Mobile Small Optimizations */
        @media (max-width: 480px) {
            /* Responsive Hero Images - Mobile Small (up to 480px) */
            .hero-main {
                background-image: linear-gradient(rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.1)), url('images/MobileSmall/Vineyard480x800.jpeg') !important;
            }

            .hero-main .parallax-layer-bg {
                background-image: none !important;
            }

            /* Lake Dunstan Section - Mobile Small */
            .lake-dunstan-section {
                background-image: url('images/MobileSmall/20211122_185234-480x800.jpeg') !important;
            }

            /* About Sustainability Image - Mobile Small */
            .about-sustainability-image {
                content: url('images/MobileSmall/SolarPanel-480x300.jpeg');
            }

            /* About-Story Transition Section - Mobile Small */
            .about-story-transition {
                background-image: url('images/MobileSmall/20211122_185234-480x800.jpeg') !important;
            }

            /* Story-Location Transition Section - Mobile Small */
            .story-location-transition {
                background-image: url('images/MobileSmall/IMG_2093-480x800.jpeg') !important;
            }

            /* Location-Contact Transition Section - Mobile Small */
            .location-contact-transition {
                background-image: url('images/MobileSmall/IMG_E2945Small.JPG') !important;
            }

            /* Stay Page Hero - Mobile Small */
            .stay-hero .parallax-layer-bg {
                background-image: url('images/MobileSmall/IMG_E02231-480x800.jpeg') !important;
            }

            /* MountainView Section - Mobile Small */
            .MountainViewsection {
                background-image: url('images/MobileSmall/LakeView-480x800.jpeg') !important;
                background-attachment: scroll !important;
            }
        }

        /* Tablet Optimizations */
        @media (min-width: 769px) and (max-width: 1024px) {
            /* Responsive Hero Images - Tablet */
            .hero-main {
                background-image: linear-gradient(rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.1)), url('images/Tablet/Vineyard1536x1024.jpeg') !important;
            }

            .hero-main .parallax-layer-bg {
                background-image: none !important;
            }

            .parallax-layer-bg {
                background-attachment: scroll !important;
            }

            /* Lake Dunstan Section - Tablet */
            .lake-dunstan-section {
                background-image: url('images/Tablet/20211122_185234-1536x1024.jpeg') !important;
            }

            /* About Sustainability Image - Tablet */
            .about-sustainability-image {
                content: url('images/Tablet/SolarPanel.JPG');
            }

            /* About-Story Transition Section - Tablet */
            .about-story-transition {
                background-image: url('images/Tablet/20211122_185234-1536x1024.jpeg') !important;
            }

            /* Story-Location Transition Section - Tablet */
            .story-location-transition {
                background-image: url('images/Tablet/IMG_2093-1536x1024.jpeg') !important;
            }

            /* Location-Contact Transition Section - Tablet */
            .location-contact-transition {
                background-image: url('images/Tablet/IMG_E2945Tablet.JPG') !important;
            }

            /* Stay Page Hero - Tablet */
            .stay-hero .parallax-layer-bg {
                background-image: url('images/Tablet/vineyardhero.jpeg') !important;
            }

            /* MountainView Section - Tablet */
            .MountainViewsection {
                background-image: url('images/Frontmountainview.jpeg') !important;
                background-attachment: scroll !important;
            }

            .section-transition {
                background-attachment: scroll !important;
            }

            /* Lake Dunstan Section - Mobile Large */
            .lake-dunstan-section {
                background-image: url('images/MobileLarge/20211122_185234-768x1024.jpeg') !important;
            }

            /* About Sustainability Image - Mobile Large */
            .about-sustainability-image {
                content: url('images/MobileLarge/SolarPanel.JPG');
            }

            /* About-Story Transition Section - Mobile Large */
            .about-story-transition {
                background-image: url('images/MobileLarge/20211122_185234-768x1024.jpeg') !important;
            }

            /* Story-Location Transition Section - Mobile Large */
            .story-location-transition {
                background-image: url('images/MobileLarge/IMG_2093-768x1024.jpeg') !important;
            }

            /* Location-Contact Transition Section - Mobile Large */
            .location-contact-transition {
                background-image: url('images/MobileLarge/IMG_E2945Large.JPG') !important;
            }

            /* Stay Page Hero - Mobile Large */
            .stay-hero .parallax-layer-bg {
                background-image: url('images/MobileLarge/IMG_E02231-768x1024.jpeg') !important;
            }

            /* MountainView Section - Mobile Large */
            .MountainViewsection {
                background-image: url('images/MobileLarge/LakeView-768x1024.jpeg') !important;
                background-attachment: scroll !important;
            }

            /* Reduce parallax layers on mobile */
            .parallax-layer-mid,
            .parallax-layer-front {
                display: none;
            }

            /* Mobile Image Optimization */
            .card-image {
                height: 250px;
                object-fit: cover;
                object-position: center;
            }

            /* Reduce transform animations on mobile */
            .parallax-container {
                will-change: auto;
            }

            /* Smooth scrolling optimization */
            .hero {
                transform: translate3d(0, 0, 0);
            }
            
            .webp .card-image[src*=".jpeg"] {
                content-visibility: auto;
                contain-intrinsic-size: 250px;
            }
        }

        /* Desktop Optimizations */
        @media (min-width: 1025px) {
            /* MountainView Section - Desktop */
            .MountainViewsection {
                background-image: url('images/Frontmountainview.jpeg') !important;
                background-attachment: fixed !important;
            }
        }

        .booking-date-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .booking-guests-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .booking-accommodation-selector {
            display: grid;
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .accommodation-option {
            border: 2px solid var(--border);
            border-radius: 15px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .accommodation-option:hover {
            border-color: var(--brand-teal);
            background: #FAF4F5;
        }

        .accommodation-option.selected {
            border-color: var(--brand-teal);
            background: rgba(45, 90, 90, 0.1);
        }

        .accommodation-option h4 {
            color: var(--brand-teal);
            margin-bottom: 0.5rem;
        }

        .accommodation-price {
            font-weight: 600;
            color: var(--brand-teal);
            font-size: 1.1rem;
            margin-top: 0.5rem;
        }

        .availability-result {
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            text-align: center;
        }

        .availability-success {
            background: #dcfdf7;
            border: 1px solid #10b981;
            color: #047857;
        }

        .availability-error {
            background: #fee2e2;
            border: 1px solid #f87171;
            color: #dc2626;
        }

        .price-breakdown {
            background: #f8fafc;
            border-radius: 15px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .price-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            padding: 0.25rem 0;
        }

        .price-total {
            border-top: 2px solid var(--border);
            padding-top: 1rem;
            margin-top: 1rem;
            font-weight: 600;
            font-size: 1.2rem;
        }

        .guest-details-form {
            display: grid;
            gap: 1rem;
        }

        .guest-form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .booking-success {
            text-align: center;
            padding: 2rem;
        }

        .success-icon {
            font-size: 4rem;
            color: #10b981;
            margin-bottom: 1rem;
        }

        .booking-security-badges {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
            font-size: 0.9rem;
            color: #666;
            flex-wrap: wrap;
        }

        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--brand-teal);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Footer */
        .footer {
            background: var(--dark);
            color: white;
            padding: 3rem 0 2rem;
            margin-top: 4rem;
        }

        .footer-content {
            margin-bottom: 1.5rem;
        }

        .footer-section h3 {
            font-family: 'Roboto', sans-serif;
            font-size: 1.25rem;
            margin-bottom: 1rem;
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .footer-section p, .footer-section a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            margin-bottom: 0.5rem;
            display: block;
            font-size: 0.9rem;
        }

        .footer-section a:hover {
            color: white;
        }

        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 2rem;
            text-align: center;
            opacity: 0.7;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-input, .form-textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1rem;
            font-family: inherit;
            transition: border-color 0.3s ease;
        }

        .form-input:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--brand-teal);
        }

        .form-input.valid {
            border-color: #10b981;
        }

        .form-input.invalid {
            border-color: #ef4444;
        }

        .form-error {
            color: #ef4444;
            font-size: 0.9rem;
            margin-top: 0.5rem;
            display: none;
        }

        .form-error.show {
            display: block;
        }

        /* Gallery Lightbox */
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .lightbox.active {
            display: flex;
        }

        .lightbox-content {
            max-width: 90%;
            max-height: 90%;
            position: relative;
        }

        .lightbox-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .lightbox-close {
            position: absolute;
            top: -40px;
            right: 0;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            background: none;
            border: none;
        }

        .lightbox-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 2rem;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.5);
            border: none;
            padding: 1rem;
            border-radius: 50%;
        }

        .lightbox-prev {
            left: -60px;
        }

        .lightbox-next {
            right: -60px;
        }


        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.6s ease forwards;
        }

        /* Accordion Styles */
        .accordion-container {
            margin: 1.5rem 0;
        }

        .accordion-item {
            border: 1px solid var(--border);
            border-radius: 10px;
            margin-bottom: 0.5rem;
            overflow: hidden;
        }

        .accordion-header {
            width: 100%;
            padding: 1rem 1.5rem;
            background: white;
            border: none;
            text-align: left;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: var(--brand-teal);
            transition: all 0.3s ease;
        }

        .accordion-header:hover {
            background: #FAF4F5;
        }

        .accordion-header.active {
            background: rgba(45, 90, 90, 0.1);
        }

        .accordion-icon {
            transition: transform 0.3s ease;
        }

        .accordion-header.active .accordion-icon {
            transform: rotate(180deg);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background: white;
        }

        .accordion-content.active {
            max-height: 1000px;
        }

        .accordion-content > div {
            padding: 1.5rem;
            border-top: 1px solid var(--border);
        }

        /* Mobile-First Responsive Design */
        
        /* Small Mobile Devices (320px - 480px) */
        @media (max-width: 480px) {
            .container {
                padding: 0 1rem;
            }

            .hero h1 {
                font-size: 2rem;
                line-height: 1.1;
            }

            .hero .tagline {
                font-size: 1rem;
            }

            .hero p {
                font-size: 1rem;
                margin-bottom: 1.5rem;
            }

            .section-title {
                font-size: 1.8rem;
                line-height: 1.2;
            }

            .section-subtitle {
                font-size: 1rem;
            }

            .card-content {
                padding: 1rem;
            }

            .card-title {
                font-size: 1.2rem;
            }

            .btn {
                padding: 0.8rem 1.5rem;
                font-size: 0.9rem;
                width: 100%;
                margin-bottom: 0.5rem;
            }

            /* Mobile Booking Modal */
            .booking-modal {
                padding: 1rem;
                align-items: flex-start;
                padding-top: 2rem;
            }

            .booking-modal-content {
                width: 100%;
                max-height: 95vh;
                margin: 0;
            }

            .booking-modal-header {
                padding: 1.5rem 1rem;
                border-radius: 20px 20px 0 0;
            }

            .booking-modal-header h2 {
                font-size: 1.4rem;
            }

            .booking-modal-body {
                padding: 1rem;
            }

            .booking-form-input, .booking-form-select {
                padding: 0.8rem;
                font-size: 1rem;
                border-radius: 8px;
            }

            .accommodation-option {
                padding: 1rem;
                margin-bottom: 0.5rem;
            }

            .accommodation-option h4 {
                font-size: 1.1rem;
            }

            .accommodation-price {
                font-size: 1rem;
            }
        }

        /* Medium Mobile Devices (481px - 768px) */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .mobile-menu-btn {
                display: block;
                padding: 0.5rem;
                touch-action: manipulation;
            }

            .hero {
                padding: 3rem 0;
                text-align: center;
            }

            .hero h1 {
                font-size: 2rem;
                margin-bottom: 1rem;
                line-height: 1.2;
            }

            .hero .tagline {
                font-size: 1.1rem;
            }

            .hero p {
                font-size: 1rem;
                margin-bottom: 2rem;
                padding: 0 1rem;
            }

            .section {
                padding: 3rem 0;
            }

            .section-title {
                font-size: 2rem;
                margin-bottom: 0.8rem;
            }

            .container {
                padding: 0 1.5rem;
            }

            /* Mobile Grid Adjustments */
            .grid-2, .grid-3, .grid-4 {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .stats {
                flex-direction: column;
                gap: 1.5rem;
                padding: 1.5rem;
            }

            .stat {
                padding: 1rem;
                border-bottom: 1px solid var(--border);
            }

            .stat:last-child {
                border-bottom: none;
            }

            /* Mobile Card Optimizations */
            .card {
                margin-bottom: 1rem;
                border-radius: 15px;
            }

            .card-content {
                padding: 1.5rem;
            }

            .card-image {
                height: 200px;
            }

            /* Mobile Amenities */
            .amenities-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .amenity-category {
                padding: 1rem;
                border-radius: 8px;
            }

            .amenity-category h5 {
                font-size: 0.95rem;
                margin-bottom: 0.8rem;
            }

            .amenity-category li {
                font-size: 0.85rem;
                margin-bottom: 0.3rem;
            }

            /* Mobile Booking Form */
            .booking-date-row,
            .booking-guests-row,
            .guest-form-row {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .booking-form-group {
                margin-bottom: 1rem;
            }

            .booking-form-label {
                font-size: 0.9rem;
                margin-bottom: 0.3rem;
            }

            .booking-form-input, .booking-form-select {
                padding: 1rem;
                font-size: 1rem;
                border-radius: 10px;
                min-height: 50px; /* Better touch targets */
            }

            .price-breakdown {
                padding: 1rem;
                border-radius: 10px;
                margin: 1rem 0;
            }

            .price-row {
                padding: 0.5rem 0;
                font-size: 0.95rem;
            }

            .price-total {
                font-size: 1.1rem;
                padding-top: 1rem;
                margin-top: 1rem;
            }

            /* Mobile Footer */
            .footer {
                padding: 2rem 0 1rem;
            }

            .footer-content {
                grid-template-columns: 1fr;
                gap: 2rem;
                text-align: center;
            }

            .footer-section {
                padding: 1rem 0;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }

            .footer-section:last-child {
                border-bottom: none;
            }

            /* Mobile Social Proof */
            .social-proof {
                left: 1rem;
                right: 1rem;
                max-width: none;
                padding: 0.8rem 1rem;
                border-radius: 8px;
            }

            /* Mobile Lightbox */
            .lightbox-nav {
                display: none;
            }

            .lightbox-close {
                top: -30px;
                font-size: 1.5rem;
            }

            /* Mobile Search */
            .search-container {
                width: 95%;
                padding: 1.5rem;
                border-radius: 15px;
            }

            .search-input {
                padding: 0.8rem;
                font-size: 1rem;
                border-radius: 8px;
            }

            .search-result {
                padding: 0.8rem;
                font-size: 0.9rem;
            }

            /* Mobile Forms */
            .form-input, .form-textarea {
                padding: 1rem;
                font-size: 1rem;
                border-radius: 10px;
                min-height: 50px;
            }

            .form-textarea {
                min-height: 120px;
            }

            /* Mobile Trust Badges */
            .trust-badges {
                flex-direction: column;
                gap: 1rem;
            }
            
            /* Mobile Touch Optimizations */
            .btn, .card, .nav-link, .lightbox-close {
                touch-action: manipulation;
                -webkit-tap-highlight-color: rgba(45, 90, 90, 0.3);
                min-height: 44px;
                min-width: 44px;
            }
            
            /* Mobile Active States */
            .btn:active {
                transform: scale(0.98);
                transition: transform 0.1s ease;
            }
            
            .card:active {
                transform: scale(0.995);
                transition: transform 0.1s ease;
            }
            
            /* WebP Image Optimization */
            .webp .card-image {
                background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"><rect width="100%" height="100%" fill="%23f0f0f0"/></svg>');
                background-size: cover;
                background-position: center;
            }
            
            /* Mobile Performance - Reduce motion for battery */
            @media (prefers-reduced-motion: reduce) {
                *, *::before, *::after {
                    animation-duration: 0.01ms !important;
                    animation-iteration-count: 1 !important;
                    transition-duration: 0.01ms !important;
                }
            }
            
            /* Mobile Accessibility */
            @media (max-width: 480px) {
                .text-sm { font-size: 0.9rem !important; }
                .text-base { font-size: 1rem !important; }
                .text-lg { font-size: 1.1rem !important; }
                
                /* Ensure touch targets are at least 44px */
                button, .btn, a[role="button"] {
                    min-height: 44px;
                    padding: 12px 16px;
                }
                
                /* Improve form usability on mobile */
                input, textarea, select {
                    font-size: 16px; /* Prevents zoom on iOS */
                    -webkit-appearance: none;
                    appearance: none;
                }
                
                /* Better mobile scroll performance */
                .modal-content, .lightbox, .booking-modal {
                    -webkit-overflow-scrolling: touch;
                    overscroll-behavior: contain;
                }
            }
        }

        /* Ultra Small Screens (320px and below) - iPhone SE, older devices */
        @media (max-width: 375px) {
            .container {
                padding: 0 0.75rem;
            }
            
            .hero-content h1 {
                font-size: 2rem !important;
                line-height: 1.2;
            }
            
            .hero-content p {
                font-size: 0.9rem;
                margin-bottom: 1.5rem;
            }
            
            .btn {
                padding: 0.8rem 1.2rem;
                font-size: 0.9rem;
                width: 100%;
                margin-bottom: 0.5rem;
            }
            
            .section-title {
                font-size: 1.8rem !important;
            }
            
            .card-content {
                padding: 1rem;
            }
            
            .nav {
                padding: 0.5rem 1rem;
            }
            
            .logo-icon {
                height: 35px;
            }
            
            /* Ultra small form improvements */
            .booking-form {
                padding: 1rem;
            }
            
            .booking-form-group {
                margin-bottom: 1rem;
            }
            
            .booking-date-row {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            /* Improve modal on small screens */
            .modal-content {
                margin: 0.5rem;
                max-height: calc(100vh - 1rem);
                border-radius: 12px;
            }
            
            .lightbox {
                padding: 0.5rem;
            }
            
            /* Better gallery thumbnails */
            .gallery-thumbnails {
                gap: 0.25rem;
            }
            
            .gallery-thumbnails img {
                width: 60px;
                height: 60px;
            }
        }

        /* Large Mobile/Small Tablet (769px - 1024px) */
        @media (max-width: 1024px) {
            .hero-content h1 {
                font-size: 3rem;
            }

            .section-title {
                font-size: 2.2rem;
            }

            .container {
                padding: 0 2rem;
            }

            .grid-3 {
                grid-template-columns: repeat(2, 1fr);
            }

            .grid-4 {
                grid-template-columns: repeat(3, 1fr);
            }

            .booking-modal-content {
                max-width: 600px;
            }

            .amenities-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Scroll Indicator */
        .scroll-indicator {
            position: fixed;
            top: 0;
            left: 0;
            height: 2px;
            background: var(--primary);
            z-index: 1001;
            transition: width 0.3s ease;
            width: 0%;
        }

        /* Honeypot (hidden spam protection) */
        .honeypot {
            position: absolute;
            left: -9999px;
            opacity: 0;
        }

        /* Progressive Enhancement */
        .webp .hero { background-image: url('hero-background.webp'); }
        .no-webp .hero { background-image: url('hero-background.jpg'); }

        /* Skip Link for Accessibility */
        .skip-link {
            position: absolute;
            top: -9999px;
            left: -9999px;
            background: var(--primary);
            color: white;
            padding: 8px;
            text-decoration: none;
            z-index: 1000;
            border-radius: 4px;
            transition: all 0.3s;
            opacity: 0;
        }

        .skip-link:focus {
            position: fixed;
            top: 6px;
            left: 6px;
            opacity: 1;
        }

        /* Reduce motion for accessibility */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        .btn-primary.book-now-highlight {
            outline: 1px solid #592741;
            outline-offset: 2px;
            background: #FAF4F5;
            color: #592741;
        }

        /* Collapsible FAQ Styles */
        .footer-faq-expanded {
            max-height: 2000px !important;
            opacity: 1 !important;
        }

        #faqToggleBtn {
            position: relative;
            overflow: hidden;
        }

        #faqToggleBtn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        #faqToggleBtn:hover::before {
            left: 100%;
        }

        @media (max-width: 768px) {
            #faqToggleBtn {
                width: 100%;
                max-width: 300px;
                font-size: 1rem;
                padding: 0.8rem 1.5rem;
            }
            
            .faq-item {
                margin-bottom: 0.5rem !important;
            }
            
            .faq-question {
                padding: 1rem !important;
                font-size: 0.9rem;
            }
            
            .faq-answer div {
                padding: 1rem !important;
                font-size: 0.85rem;
            }
        }

        /* Small Mobile Devices (max-width: 480px) */
        @media (max-width: 480px) {
            /* Social Proof Badge Mobile Fix */
            .hero-content > div[style*="display: inline-block"] {
                padding: 0.8rem 1rem !important;
                width: 90% !important;
                margin: 1rem auto !important;
            }
            
            .hero-content > div[style*="display: inline-block"] > div {
                flex-direction: column !important;
                gap: 0.8rem !important;
                text-align: center;
            }
            
            .hero-content > div[style*="display: inline-block"] > div > div[style*="height: 20px"] {
                display: none !important;
            }

            /* Progress Indicator Mobile */
            .progress-indicator {
                padding: 1rem;
            }
            
            .progress-step span {
                display: none;
            }
            
            .progress-step::after {
                content: attr(data-step);
                display: block;
                font-size: 0.75rem;
                margin-top: 0.5rem;
            }

            /* Booking Modal Mobile */
            .modal-content {
                width: 95%;
                margin: 1rem auto;
                max-height: 90vh;
                overflow-y: auto;
            }

            /* Button Sizes for Mobile */
            .btn {
                font-size: 0.95rem;
                padding: 0.8rem 1.5rem;
                min-height: 44px; /* iOS touch target */
            }

            /* Cards on Mobile */
            .card {
                margin-bottom: 1rem;
            }

            /* Back to Top Button Mobile */
            #backToTopBtn {
                bottom: 20px !important;
                right: 20px !important;
                width: 45px !important;
                height: 45px !important;
                font-size: 16px !important;
            }

            /* Form Inputs Mobile */
            input[type="text"],
            input[type="email"],
            input[type="tel"],
            input[type="date"],
            select,
            textarea {
                font-size: 16px !important; /* Prevents zoom on iOS */
            }

            /* Animation Squares Mobile */
            .animation-container {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
                padding: 1rem;
            }

            .animation-square {
                min-height: 120px;
                font-size: 0.9rem;
                padding: 1rem;
            }

            /* Trust badges mobile */
            .stats > div {
                width: 100%;
            }
        }
    </style>
<!-- Enhanced Security & Performance Manager -->
<script>
class WebsiteSecurityManager {
    constructor() {
        this.csrfToken = '';
        this.apiCallLimits = new Map();
        this.init();
    }
    
    async init() {
        try {
            this.setupFormValidation();
            this.setupRateLimiting();
            this.monitorPerformance();
            // Console statement removed for production
        } catch (error) {
            // Console statement removed for production
        }
    }
    
    // Enhanced email validation
    validateEmail(email) {
        const emailRegex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;
        return emailRegex.test(email) && email.length <= 254;
    }
    
    // Input sanitization
    sanitizeInput(input) {
        if (typeof input !== 'string') return input;
        return input
            .replace(/[<>]/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    }
    
    // Rate limiting for API calls
    checkRateLimit(endpoint, maxCalls = 10) {
        const now = Date.now();
        const calls = this.apiCallLimits.get(endpoint) || [];
        const recentCalls = calls.filter(time => now - time < 60000);
        
        if (recentCalls.length >= maxCalls) {
            throw new Error('Rate limit exceeded. Please try again later.');
        }
        
        recentCalls.push(now);
        this.apiCallLimits.set(endpoint, recentCalls);
        return true;
    }
    
    // Form validation setup
    setupFormValidation() {
        document.addEventListener('submit', (event) => {
            const form = event.target;
            if (form.tagName === 'FORM') {
                const inputs = form.querySelectorAll('input[type="email"]');
                let isValid = true;
                
                inputs.forEach(input => {
                    if (input.value && !this.validateEmail(input.value)) {
                        isValid = false;
                        this.showFieldError(input, 'Please enter a valid email address');
                    }
                });
                
                if (!isValid) {
                    event.preventDefault();
                }
            }
        });
    }
    
    // Enhanced error display
    showFieldError(field, message) {
        const existingError = field.parentNode.querySelector('.field-error');
        if (existingError) existingError.remove();
        
        const errorDiv = document.createElement('div');
        errorDiv.className = 'field-error';
        errorDiv.style.cssText = 'color: #dc2626; font-size: 0.875rem; margin-top: 0.25rem;';
        errorDiv.textContent = message;
        
        field.parentNode.appendChild(errorDiv);
        field.style.borderColor = '#dc2626';
        
        // Clear error on input
        field.addEventListener('input', () => {
            errorDiv.remove();
            field.style.borderColor = '';
        }, { once: true });
    }
    
    // Performance monitoring
    monitorPerformance() {
        if ('PerformanceObserver' in window) {
            new PerformanceObserver((entryList) => {
                const entries = entryList.getEntries();
                const lastEntry = entries[entries.length - 1];
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'web_vitals', {
                        'metric_name': 'LCP',
                        'metric_value': Math.round(lastEntry.startTime)
                    });
                }
            }).observe({entryTypes: ['largest-contentful-paint']});
        }
    }
    
    setupRateLimiting() {
        window.limitedBookingAttempt = (callback) => {
            try {
                this.checkRateLimit('booking', 5);
                callback();
            } catch (error) {
                alert('Too many booking attempts. Please wait a moment before trying again.');
            }
        };
    }
}

// Enhanced Error Handling
window.addEventListener('error', (event) => {
    // Script error caught - handled silently in production
});

window.addEventListener('unhandledrejection', (event) => {
    // Promise rejection caught - handled silently in production
});

// Initialize on DOM load
document.addEventListener('DOMContentLoaded', () => {
    window.securityManager = new WebsiteSecurityManager();
});
	</script>
</head>
<body>
    <!-- STEP 1: Skip Navigation -->
    <a href="#mainContent" class="skip-link">Skip to main content</a>
    
    <!-- Scroll Indicator -->
    <div class="scroll-indicator" id="scrollIndicator"></div>

    <!-- Navigation -->

    <!-- Mobile Navigation -->
    <div class="mobile-nav" id="mobileNav">
        <button class="close-mobile-menu" onclick="toggleMobileMenu()">
            <i class="fas fa-times"></i>
        </button>
        <a href="#" class="nav-link" onclick="showPage('home'); toggleMobileMenu()">Home</a>
        <a href="#" class="nav-link" onclick="showPage('stay'); toggleMobileMenu()">Stay</a>
        <a href="#" class="nav-link" onclick="showPage('gallery'); toggleMobileMenu()">Gallery</a>
        <a href="#" class="nav-link" onclick="showPage('blog'); toggleMobileMenu()">Guides</a>
        <a href="#" class="nav-link" onclick="showPage('reviews'); toggleMobileMenu()">Reviews</a>
        <a href="#" class="nav-link" onclick="showPage('story'); toggleMobileMenu()">Our Story</a>
        <a href="#" class="nav-link" onclick="showPage('explore'); toggleMobileMenu()">Explore</a>
        <a href="#" class="nav-link" onclick="showPage('contact'); toggleMobileMenu()">Contact</a>
    </div>

    <!-- Search Overlay -->
    <div class="search-overlay" id="searchOverlay">
        <div class="search-container">
            <button class="close-search" onclick="closeSearch()">
                <i class="fas fa-times"></i>
            </button>
            <input type="text" class="search-input" id="searchInput" placeholder="Search accommodations, amenities, activities..." oninput="performSearch()" aria-label="Search accommodations, amenities, and activities">
            <div class="search-results" id="searchResults"></div>
        </div>
    </div>

    <!-- Floating Cookie Buttons Only -->
    <div id="cookieButtons" style="position: fixed; bottom: 20px; right: 20px; z-index: 1001; display: none; gap: 10px;">
        <button class="btn btn-primary" onclick="acceptCookies()" style="margin-right: 10px;">Accept</button>
        <button class="btn btn-outline" onclick="declineCookies()" style="background: white; color: var(--dark);">Decline</button>
    </div>

    <!-- Social Proof Notification -->
    <div class="social-proof" id="socialProof">
        <div style="display: flex; align-items: center; gap: 1rem;">
            <div style="width: 40px; height: 40px; border-radius: 50%; background: var(--primary); display: flex; align-items: center; justify-content: center; color: white;">
                <i class="fas fa-user"></i>
            </div>
            <div>
                <div style="font-weight: 600;" id="socialProofText">Sarah from Auckland just booked Dome Pinot!</div>
                <div style="font-size: 0.8rem; opacity: 0.7;" id="socialProofTime">2 minutes ago</div>
            </div>
        </div>
    </div>

    <!-- Gallery Lightbox -->
    <div class="lightbox" id="lightbox">
        <div class="lightbox-content">
            <button class="lightbox-close" onclick="closeLightbox()">
                <i class="fas fa-times"></i>
            </button>
            <button class="lightbox-nav lightbox-prev" onclick="prevImage()">
                <i class="fas fa-chevron-left"></i>
            </button>
            <img class="lightbox-image" id="lightboxImage" alt="Gallery Image">
            <button class="lightbox-nav lightbox-next" onclick="nextImage()">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>


    <!-- STREAMLINED 3-BUTTON BOOKING MODAL -->
    <div class="booking-modal" id="bookingModal">
        <div class="booking-modal-content">
            <div class="booking-modal-header">
                <h2>Book Your Commercial-Grade Solar Experience</h2>
                <button class="close-booking-modal" onclick="closeBookingModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <!-- Progress Indicator -->
            <div style="padding: 1rem 2rem; border-bottom: 1px solid #e5e7eb;">
                <div style="display: flex; justify-content: space-between; align-items: center; max-width: 500px; margin: 0 auto;">
                    <div class="progress-step active" id="progressStep1" style="display: flex; align-items: center; color: var(--brand-teal); font-weight: 600;">
                        <div style="width: 30px; height: 30px; border-radius: 50%; background: var(--brand-teal); color: white; display: flex; align-items: center; justify-content: center; margin-right: 0.5rem; font-size: 0.9rem;">1</div>
                        Accommodation
                    </div>
                    <div style="flex: 1; height: 2px; background: #e5e7eb; margin: 0 1rem; position: relative;">
                        <div id="progressBar1" style="height: 100%; background: var(--brand-teal); width: 0%; transition: width 0.3s ease;"></div>
                    </div>
                    <div class="progress-step" id="progressStep2" style="display: flex; align-items: center; color: #6b7280; font-weight: 600;">
                        <div style="width: 30px; height: 30px; border-radius: 50%; background: #e5e7eb; color: #6b7280; display: flex; align-items: center; justify-content: center; margin-right: 0.5rem; font-size: 0.9rem;">2</div>
                        Details
                    </div>
                    <div style="flex: 1; height: 2px; background: #e5e7eb; margin: 0 1rem; position: relative;">
                        <div id="progressBar2" style="height: 100%; background: var(--brand-teal); width: 0%; transition: width 0.3s ease;"></div>
                    </div>
                    <div class="progress-step" id="progressStep3" style="display: flex; align-items: center; color: #6b7280; font-weight: 600;">
                        <div style="width: 30px; height: 30px; border-radius: 50%; background: #e5e7eb; color: #6b7280; display: flex; align-items: center; justify-content: center; margin-right: 0.5rem; font-size: 0.9rem;">3</div>
                        Confirm
                    </div>
                </div>
            </div>
            
            <div class="booking-modal-body">
                <!-- Step 1: Accommodation & Dates -->
                <div class="booking-step active" id="bookingStep1">
                    <h3 style="color: var(--brand-teal); margin-bottom: 1.5rem;">Choose Your Energy-Positive Experience</h3>
                    
                    <div class="booking-accommodation-selector">
                        <div class="accommodation-option" data-accommodation="dome-pinot" onclick="selectAccommodation('dome-pinot')">
                            <h4>Dome Pinot</h4>
                            <p>Flagship 50sqm luxury dome with panoramic views and private spa</p>
                            <div class="accommodation-price">From $450/night <span style="font-size: 0.8em; color: #666;">(GST incl.)</span></div>
                        </div>
                        
                        <div class="accommodation-option" data-accommodation="dome-rose" onclick="selectAccommodation('dome-rose')">
                            <h4>Dome Ros√©</h4>
                            <p>Romantic 40sqm retreat perfect for couples</p>
                            <div class="accommodation-price">From $380/night <span style="font-size: 0.8em; color: #666;">(GST incl.)</span></div>
                        </div>
                        
                        <div class="accommodation-option" data-accommodation="lakeside-cottage" onclick="selectAccommodation('lakeside-cottage')">
                            <h4>Lakeside Cottage</h4>
                            <p>Family-friendly cottage with direct lake access</p>
                            <div class="accommodation-price">From $580/night <span style="font-size: 0.8em; color: #666;">(GST incl.)</span></div>
                        </div>
                    </div>

                    <div class="booking-date-row">
                        <div class="booking-form-group">
                            <label class="booking-form-label" for="bookingCheckin">Check-in</label>
                            <input type="date" class="booking-form-input" id="bookingCheckin" required onfocus="scrollToBookingButton()">
                        </div>
                        <div class="booking-form-group">
                            <label class="booking-form-label" for="bookingCheckout">Check-out</label>
                            <input type="date" class="booking-form-input" id="bookingCheckout" required onfocus="scrollToBookingButton()">
                        </div>
                    </div>

                    <!-- Cottage Minimum Stay Warning -->
                    <div id="cottageMinimumStayWarning" style="display: none; background: #fef3c7; border: 1px solid #f59e0b; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <span style="color: #f59e0b; font-size: 1.2rem;">‚ö†Ô∏è</span>
                            <div>
                                <strong style="color: #92400e;">Lakeside Cottage - Peak Season Notice</strong>
                                <p style="margin: 0.5rem 0 0 0; color: #92400e; font-size: 0.9rem;">Minimum 2-night stay required during peak season (October to May)</p>
                            </div>
                        </div>
                    </div>

                    <div class="booking-guests-row">
                        <div class="booking-form-group">
                            <label class="booking-form-label" for="bookingAdults">Adults</label>
                            <select class="booking-form-select" id="bookingAdults" required>
                                <option value="1">1 Adult</option>
                                <option value="2" selected>2 Adults</option>
                                <option value="3">3 Adults</option>
                                <option value="4">4 Adults</option>
                                <option value="5">5 Adults</option>
                                <option value="6">6 Adults</option>
                            </select>
                        </div>
                        <div class="booking-form-group">
                            <label class="booking-form-label" for="bookingChildren">Children</label>
                            <select class="booking-form-select" id="bookingChildren">
                                <option value="0" selected>0 Children</option>
                                <option value="1">1 Child</option>
                                <option value="2">2 Children</option>
                                <option value="3">3 Children</option>
                                <option value="4">4 Children</option>
                            </select>
                        </div>
                        <div class="booking-form-group" id="petSelectionGroup" style="display: none;">
                            <label class="booking-form-label" for="bookingPets">Pets</label>
                            <select class="booking-form-select" id="bookingPets">
                                <option value="0" selected>No Pets</option>
                                <option value="1">1 Pet ($25 per night)</option>
                                <option value="2">2 Pets ($50 per night)</option>
                            </select>
                        </div>
                    </div>

                    <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                        <button class="btn btn-primary" style="width: 100%;" onclick="instantBookingWithPayment()">
                            Check Availability & Book Instantly
                        </button>
                    </div>
                </div>

                <!-- Step 2: Combined Availability, Pricing & Guest Details -->
                <div class="booking-step" id="bookingStep2">
                    <h3 style="color: var(--brand-teal); margin-bottom: 1.5rem;">Availability & Guest Information</h3>
                    
                    <div id="selectedDetailsDisplay" style="background: #FAF4F5; padding: 1rem; border-radius: 10px; margin-bottom: 1.5rem;">
                        <!-- Selected accommodation and dates will be displayed here -->
                    </div>

                    <div id="availabilityResult" class="availability-result">
                        <!-- Availability status will be shown here -->
                    </div>

                    <div id="pricingBreakdown" class="price-breakdown" style="display: none;">
                        <h4 style="color: var(--brand-teal); margin-bottom: 1rem;">Price Breakdown (NZD)</h4>
                        <div class="price-row">
                            <span>Accommodation Rate:</span>
                            <span id="accommodationRate">$0</span>
                        </div>
                        <div class="price-row">
                            <span>Number of Nights:</span>
                            <span id="numberOfNights">0</span>
                        </div>
                        <div class="price-row">
                            <span>Subtotal:</span>
                            <span id="subtotal">$0</span>
                        </div>
                        <div class="price-row" id="extraGuestRow" style="display: none;">
                            <span>Extra Guest Charge:</span>
                            <span id="extraGuestCharge">$0</span>
                        </div>
                        <div class="price-row" id="petFeeRow" style="display: none;">
                            <span>Pet Cleaning Fee:</span>
                            <span id="petFee">$0</span>
                        </div>
                        <div class="price-row">
                            <span>Cleaning Fee:</span>
                            <span id="cleaningFee">$75</span>
                        </div>
                        <div class="price-row">
                            <span>Service Fee:</span>
                            <span id="serviceFee">$0</span>
                        </div>
                        <div class="price-row price-total">
                            <span>Total Amount (GST Incl.):</span>
                            <span id="totalAmount">$0</span>
                        </div>
                        <div class="price-row" style="font-size: 0.85em; color: #666;">
                            <span>GST Included (15%):</span>
                            <span id="gst">$0</span>
                        </div>
                    </div>

                    <div id="guestDetailsSection" style="display: none;">
                        <h4 style="color: var(--brand-teal); margin: 2rem 0 1rem;">Guest Information</h4>
                        
                        <div class="guest-details-form">
                            <div class="guest-form-row">
                                <div class="booking-form-group">
                                    <label class="booking-form-label" for="guestFirstName">First Name</label>
                                    <input type="text" class="booking-form-input" id="guestFirstName" required oninput="clearFormError('guestFirstName')">
                                    <div class="form-error-message" id="guestFirstNameError">First name is required</div>
                                </div>
                                <div class="booking-form-group">
                                    <label class="booking-form-label" for="guestLastName">Last Name</label>
                                    <input type="text" class="booking-form-input" id="guestLastName" required oninput="clearFormError('guestLastName')">
                                    <div class="form-error-message" id="guestLastNameError">Last name is required</div>
                                </div>
                            </div>

                            <div class="booking-form-group">
                                <label class="booking-form-label" for="guestEmail">Email Address</label>
                                <input type="email" class="booking-form-input" id="guestEmail" required onblur="validateEmail(this)" oninput="clearFormError('guestEmail')">
                                <div class="form-error-message" id="guestEmailError">Email address is required</div>
                            </div>

                            <div class="booking-form-group">
                                <label class="booking-form-label" for="guestPhone">Phone Number</label>
                                <input type="tel" class="booking-form-input" id="guestPhone" required placeholder="e.g., (03) 123-4567 or +64 21 123 456" onblur="validatePhoneField(this)" oninput="clearFormError('guestPhone')">
                                <div class="form-error-message" id="guestPhoneError">Phone number is required</div>
                            </div>

                            <div class="booking-form-group">
                                <label class="booking-form-label" for="specialRequests">Special Requests (Optional)</label>
                                <input type="text" class="booking-form-input" id="specialRequests" placeholder="Early check-in, dietary requirements, etc.">
                            </div>

                            <!-- Pet Option for Lakeside Cottage -->
                            <div id="petOptionSection" style="display: none; background: #dcfdf7; border: 1px solid #10b981; padding: 1rem; border-radius: 10px; margin-top: 1rem;">
                                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                    <span style="font-size: 1.2rem;">üêæ</span>
                                    <h5 style="margin: 0; color: #047857; font-size: 1rem;">Pet-Friendly Option</h5>
                                </div>
                                <p style="margin: 0 0 1rem 0; color: #047857; font-size: 0.9rem;">Lakeside Cottage welcomes well-behaved pets with prior approval.</p>
                                
                                <div class="booking-form-group">
                                    <label class="booking-form-label" for="petDetails">Pet Details (Optional)</label>
                                    <input type="text" class="booking-form-input" id="petDetails" placeholder="Breed, size, special requirements">
                                </div>
                                
                                <div style="background: #f0fdf4; padding: 0.75rem; border-radius: 8px; margin-top: 0.5rem; font-size: 0.85rem; color: #166534;">
                                    <p style="margin: 0;"><strong>Pet Policy:</strong> Maximum 2 pets. $25 cleaning fee per pet. Pets must be supervised and not left alone in the cottage.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Secure Payment Section -->
                    <div id="instantPaymentSection" style="display: none; margin-top: 2rem;">
                        <h4 style="color: var(--brand-teal); margin-bottom: 1rem;">Secure Payment with Stripe</h4>
                        
                        <div id="securePaymentContainer">
                            <!-- Secure payment form will be loaded here -->
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 1rem; border-radius: 10px; margin: 1rem 0; font-size: 0.9rem; color: #666;">
                            <p style="margin: 0;"><strong>üîí Secure Payment:</strong> Your payment is processed securely through Stripe. We never store your card details.</p>
                            <p style="margin: 0.5rem 0 0;"><strong>üí≥ Accepted Cards:</strong> Visa, Mastercard, American Express</p>
                            <p style="margin: 0.5rem 0 0;"><strong>üîê SSL Encrypted:</strong> All data is encrypted in transit</p>
                        </div>
                    </div>

                    <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                        <button class="btn btn-outline" style="flex: 1;" onclick="goToBookingStep(1)">
                            Back to Dates
                        </button>
                        <button class="btn btn-primary" style="flex: 1;" onclick="validateGuestDetailsAndContinue()">
                            Continue to Payment
                        </button>
                    </div>
                </div>

                <!-- Step 3: Payment & Confirmation (Combined) -->
                <div class="booking-step" id="bookingStep3">
                    <h3 style="color: var(--brand-teal); margin-bottom: 1.5rem;">Complete Your Booking</h3>
                    
                    <div class="price-breakdown">
                        <h4 style="color: var(--brand-teal); margin-bottom: 1rem;">Booking Summary</h4>
                        <div class="price-row">
                            <span>Accommodation:</span>
                            <span id="finalAccommodationName">-</span>
                        </div>
                        <div class="price-row">
                            <span>Dates:</span>
                            <span id="finalDates">-</span>
                        </div>
                        <div class="price-row">
                            <span>Guests:</span>
                            <span id="finalGuests">-</span>
                        </div>
                        <div class="price-row">
                            <span>Duration:</span>
                            <span id="finalNights">-</span>
                        </div>
                    </div>

                    <div class="price-breakdown">
                        <h4 style="color: var(--brand-teal); margin-bottom: 1rem;">Price Breakdown (NZD)</h4>
                        <div class="price-row">
                            <span>Accommodation Rate:</span>
                            <span id="finalAccommodationRate">$0</span>
                        </div>
                        <div class="price-row">
                            <span>Number of Nights:</span>
                            <span id="finalNumberOfNights">0</span>
                        </div>
                        <div class="price-row">
                            <span>Subtotal:</span>
                            <span id="finalSubtotal">$0</span>
                        </div>
                        <div class="price-row">
                            <span>Cleaning Fee:</span>
                            <span id="finalCleaningFee">$75</span>
                        </div>
                        <div class="price-row">
                            <span>Service Fee:</span>
                            <span id="finalServiceFee">$0</span>
                        </div>
                        <div class="price-row" id="finalExtraGuestRow" style="display: none;">
                            <span>Extra Guest Charge:</span>
                            <span id="finalExtraGuestFee">$0</span>
                        </div>
                        <div class="price-row" id="finalPetFeeRow" style="display: none;">
                            <span>Pet Fee:</span>
                            <span id="finalPetFee">$0</span>
                        </div>
                        <div class="price-row price-total">
                            <span>Total Amount (GST Incl.):</span>
                            <span id="finalTotalAmount">$0</span>
                        </div>
                        <div class="price-row" style="font-size: 0.85em; color: #666;">
                            <span>GST Included (15%):</span>
                            <span id="finalGST">$0</span>
                        </div>
                    </div>

                    <div style="background: #fee2e2; border: 1px solid #f87171; padding: 1rem; border-radius: 10px; margin: 1.5rem 0;">
                        <p style="margin: 0; color: #dc2626; font-size: 0.9rem;"><strong>Payment Integration:</strong> This demo shows the booking flow. In production, this would integrate with Stripe/PayPal for secure payment processing.</p>
                    </div>

                    <div id="bookingResultSection">
                        <!-- This will show either booking success or form for additional info -->
                    </div>

                    <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                        <button class="btn btn-outline" style="flex: 1;" onclick="goToBookingStep(2)">
                            Back to Details
                        </button>
                        <button class="btn btn-primary" style="flex: 1;" onclick="processBookingAndConfirm()">
                            Confirm & Pay
                        </button>
                    </div>
                </div>

                <div class="booking-security-badges">
                    <span>üîí Secure SSL Encryption</span>
                    <span>‚úì Instant Confirmation</span>
                    <span>üìû 24/7 Support</span>
                    <span>üíØ 100% Uplisting Integration</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main id="mainContent">

        <!-- Home Page -->
        <div class="page active" id="homePage">
            <!-- Streamlined Hero Section -->
            <section class="hero parallax-container hero-main" style="background-image: linear-gradient(rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.1)), url('images/Desktop/20220421_081429.jpg'); background-size: cover; background-position: top; background-repeat: no-repeat; background-attachment: fixed; min-height: 75vh;">
                <!-- Parallax Layers - Photos will be added here -->
                <div class="parallax-layer parallax-layer-bg" style="background-image: none;"></div>
                <div class="parallax-layer parallax-layer-mid" style="background-image: url('PLACEHOLDER_LAYER_2_IMAGE');"></div>
                <div class="parallax-layer parallax-layer-front" style="background-image: url('PLACEHOLDER_LAYER_3_IMAGE');"></div>
                <!-- Navigation inside hero -->
                <nav class="navbar" id="navbar">
                    <div class="nav-container" style="display: flex; justify-content: center; align-items: center; width: 100%;">
                        <!-- Complete centered navigation group -->
                        <div style="display: flex; align-items: center; gap: 2rem;">
                            <!-- Left 4 menu items -->
                            <a href="#" class="nav-link" onclick="showPage('home')">Home</a>
                            <a href="#" class="nav-link" onclick="showPage('stay')">Stay</a>
                            <a href="#" class="nav-link" onclick="showPage('gallery')">Gallery</a>
                            <a href="#" class="nav-link" onclick="showPage('blog')">Guides</a>

                            <!-- Center logo -->
                            <a href="#" class="logo" onclick="showPage('home')" aria-label="Go to home page" style="margin: 0 1rem;">
                                <img src="images/logormbg.png" alt="Lakeside Retreat Logo" class="logo-icon" />
                            </a>

                            <!-- Right 4 menu items -->
                            <a href="#" class="nav-link" onclick="showPage('reviews')">Reviews</a>
                            <a href="#" class="nav-link" onclick="showPage('story')">Story</a>
                            <a href="#" class="nav-link" onclick="showPage('explore')">Explore</a>
                            <a href="#" class="nav-link" onclick="showPage('contact')">Contact</a>
                        </div>

                        <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Toggle mobile menu">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>
                </nav>
                <div class="container">
                    <div class="hero-content">
                        <h1>Lake Dunstan Meets Wine Country Magic</h1>
                        <p style="font-size: 1.4rem; color: #302E41; max-width: 600px; text-align: center; margin: 1.5rem auto;">New Zealand's first energy-positive accommodation experience in the heart of Central Otago's wine country</p>
                        <div style="text-align: center; margin-top: 2rem;">
                            <a href="#" onclick="showPage('stay'); return false;" style="display: inline-block; background: transparent; border: 2px solid #753742; color: #302E41; padding: 1rem 2rem; font-size: 1.1rem; font-weight: 600; border-radius: 50px; cursor: pointer; transition: all 0.3s ease; text-decoration: none;">Book Now</a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Simple Introduction -->
            <section class="section" style="padding: 3rem 0; background: #FAF4F5;">
                <div class="container">
                    <div style="text-align: center; max-width: 1200px; margin: 0;">
			<p style="font-family: 'Montreal', sans-serif; font-size: 1.5rem; margin-bottom: 1.5rem; color: #302E41;">Welcome to Lakeside Retreat!</p>
                        <p style="font-family: 'Montreal', sans-serif; font-size: 1.5rem; margin-bottom: 1.5rem; color: #302E41;">Experience pure luxury at our lakefront position vineyard on Lake Dunstan, under ever-changing skies and mountain views. Discover local activites or melt into our salt water spa as you surrender to the comfort of Central Otago's premier solar-powered glamping experience.</p>
                                                                        
                        <div style="display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap;">
                            <a href="#" class="btn btn-outline" onclick="showPage('story')">About Us</a><a href="#" class="btn btn-outline" onclick="showPage('gallery')">View Gallery</a><a href="#" class="btn btn-outline" onclick="showPage('stay')">View Pricing & Availibility</a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Parallax Section Transition - Lake Dunstan Views -->
            <section class="section-transition lake-dunstan-section" style="background-image: url('images/Desktop/IMG_1266-1920x1080.jpeg'); background-attachment: fixed;">
            </section>

            <!-- Section 1: About Lakeside Retreat -->
            <section class="section" style="background: #FAF4F5;">
                <div class="container">
                    <div class="section-header">
                        <h2 class="section-title">About Lakeside Retreat</h2>
                        <div class="grid grid-2" style="gap: 3rem; align-items: center;">
                        <div>
                            <p style="font-size: 1.1rem; line-height: 1.8; margin-bottom: 2rem;">
                                Discover sustainable luxury at Lakeside Retreat, where cutting-edge solar technology meets the timeless beauty of Lake Dunstan. Our three unique accommodations - two geodesic domes and one lakeside cottage - offer an unparalleled escape in the heart of Central Otago's renowned wine region.
                            </p>
                            <p style="font-size: 1.1rem; line-height: 1.8; margin-bottom: 2rem;">
                                Powered entirely by our sophisticated solar array with 16kWh battery storage, we're proud to be New Zealand's first energy-positive accommodation, generating more power than we consume while providing five-star comfort and luxury.
                            </p>
                            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                <button onclick="showPage('stay')" class="btn btn-outline">View Accommodations</button>
                                <button onclick="showPage('story')" class="btn btn-outline">Learn More</button>
                            </div>
                        </div>
                        <div>
                            <img src="images/Desktop/IMG_7882.JPG" alt="Lakeside Retreat sustainability features" class="about-sustainability-image" style="width: 100%; height: 400px; object-fit: cover; border-radius: 12px;" loading="lazy">
                        </div>
                    </div>
                </div>
            </section>

            <!-- Parallax Section Transition - Between About and Story -->
            <section class="section-transition about-story-transition" style="background-image: url('images/Desktop/20211122_185234.jpg'); background-attachment: fixed;">
            </section>

            <!-- Section 2: Our Story -->
            <section class="section" style="background: #FAF4F5;">
                <div class="container">
                   <div class="grid grid-2" style="align-items: center;">
                        <div>
                            <h2 style="font-family: 'Roboto', sans-serif; font-size: 2rem; margin-bottom: 1rem; color: var(--brand-teal);">Our Story</h2>
                            <p style="font-size: 1.1rem; line-height: 1.6; margin-bottom: 2rem;">From Wellington I.T. professionals to Central Otago hosts. A wrong turn in 2019 led us to this magical lakefront vineyard‚Äîand we never looked back.</p>
                            <button onclick="showPage('story')" class="btn btn-outline">Read Full Story</button>
                        </div>
                        <div>
                            <div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: var(--shadow); text-align: center;">
                                <div style="width: 80px; height: 80px; border-radius: 50%; background: var(--primary); margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center; color: white; font-size: 2rem;">
                                    <i class="fas fa-heart"></i>
                                </div>
                                <h3 style="color: var(--brand-teal); margin-bottom: 1rem;">Your Hosts</h3>
                                <p style="margin: 0; line-height: 1.6;">Five years of sharing our slice of Central Otago paradise with guests from around the world.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Parallax Section Transition - Between Story and Location -->
            <section class="section-transition story-location-transition" style="background-image: url('images/Desktop/IMG_2093.JPG'); background-attachment: fixed;">
            </section>

            <!-- Section 3: Where We Are -->
            <section class="section" style="background: #FAF4F5;">
                <div class="container">
                    <div class="section-header">
                        <h2 class="section-title">Where We Are</h2>
                        <p class="section-subtitle">Central Otago wine country, 55 minutes from Queenstown, 30 minutes from Wanaka</p>
                    </div>
                    <div class="grid grid-2" style="gap: 3rem; align-items: center;">
                        <div>
                            <h3 style="font-size: 1.5rem; margin-bottom: 1.5rem; color: var(--primary);">Perfect Central Otago Location</h3>
                            <ul style="font-size: 1.1rem; line-height: 1.8; margin-bottom: 2rem; list-style: none; padding: 0;">
                                <li style="margin-bottom: 1rem; display: flex; align-items: center;">
                                    <span style="color: var(--brand-teal); margin-right: 0.5rem;">üìç</span>
                                    300m direct access to Lake Dunstan Trail
                                </li>
                                <li style="margin-bottom: 1rem; display: flex; align-items: center;">
                                    <span style="color: var(--brand-teal); margin-right: 0.5rem;">üöó</span>
                                    55 minutes from Queenstown Airport
                                </li>
                                <li style="margin-bottom: 1rem; display: flex; align-items: center;">
                                    <span style="color: var(--brand-teal); margin-right: 0.5rem;">üèîÔ∏è</span>
                                    30 minutes from Wanaka township
                                </li>
                                <li style="margin-bottom: 1rem; display: flex; align-items: center;">
                                    <span style="color: var(--brand-teal); margin-right: 0.5rem;">üç∑</span>
                                    Surrounded by world-class wineries
                                </li>
                                <li style="margin-bottom: 1rem; display: flex; align-items: center;">
                                    <span style="color: var(--brand-teal); margin-right: 0.5rem;">‚õ∑Ô∏è</span>
                                    Five ski fields within range
                                </li>
                            </ul>
                            <button onclick="showPage('explore')" class="btn btn-outline">Explore Local Area</button>
                        </div>
                        <div>
                            <img src="PLACEHOLDER_LOCATION_IMAGE" alt="Lake Dunstan location and surrounding Central Otago wine country" style="width: 100%; height: 400px; object-fit: cover; border-radius: 12px;" loading="lazy">
                        </div>
                    </div>
                </div>
            </section>

            <!-- Parallax Section Transition - Between Location and Contact -->
            <section class="section-transition location-contact-transition" style="background-image: url('images/Desktop/IMG_E2945.JPG'); background-attachment: fixed;">
            </section>

<!-- Section 4: Accommodations Section -->
            <section class="section">
                <div class="container">
                    <div class="section-header">
                        <h2 class="section-title">Three Unique Experiences</h2>
                        <p class="section-subtitle">Luxury domes for couples, family cottage all with lake access and sustainably powered with zero environmental impact.</p>
                    </div>
                    
                    <!-- Clean accommodation cards with key highlights only -->
                    <div class="grid grid-3">
                        <div class="card">
                            <img src="images/pinotinternal.jpeg" alt="Dome Pinot luxury glamping accommodation with Lake Dunstan views Central Otago" class="card-image" loading="lazy" onclick="openLightbox(this.src)">
                            <div class="card-content">
                                <h3 class="card-title">Dome Pinot</h3>
                                <p class="card-text">50sqm luxury dome with panoramic Lake Dunstan views, private spa, and stargazing skylight.</p>
                                
                                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 1rem 0; font-size: 0.85rem; color: var(--brand-teal);">
                                    <span>‚Ä¢ Lake Views</span>
                                    <span>‚Ä¢ Private Spa</span>
                                    <span>‚Ä¢ Breakfast Included</span>
                                    <span>‚Ä¢ Reliable Power</span>
                                </div>
                                
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="font-weight: 600; color: var(--dark); font-size: 1.1rem;">From $600/night <span style="font-size: 0.75rem; color: #666;">(GST incl.)</span></span>
                                    <div style="display: flex; gap: 0.5rem;">
                                        <a href="#" class="btn btn-outline" onclick="showPage('stay')">View Details</a>
                                    <a href="#" class="btn btn-primary" onclick="openBookingModal('dome-pinot')">Book Now</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <img src="images/dome-rose.jpeg" alt="Dome Ros√© romantic glamping accommodation Central Otago wine country" class="card-image" loading="lazy" onclick="openLightbox(this.src)">
                            <div class="card-content">
                                <h3 class="card-title">Dome Ros√©</h3>
                                <p class="card-text">40sqm romantic retreat with vineyard views, private spa, and complete cooking facilities.</p>
                                
                                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 1rem 0; font-size: 0.85rem; color: #be185d;">
                                    <span>‚Ä¢ Vineyard Views</span>
                                    <span>‚Ä¢ Private Spa</span>
                                    <span>‚Ä¢ Breakfast Included</span>
                                    <span>‚Ä¢ Always Powered</span>
                                </div>
                                
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="font-weight: 600; color: var(--dark); font-size: 1.1rem;">From $580/night <span style="font-size: 0.75rem; color: #666;">(GST incl.)</span></span>
                                    <div style="display: flex; gap: 0.5rem;">
                                        <a href="#" class="btn btn-outline" onclick="showPage('stay')">View Details</a>
                                    <a href="#" class="btn btn-primary" onclick="openBookingModal('dome-rose')">Book Now</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <img src="images/lakeside-cottage-exterior.jpeg" alt="Lakeside Cottage family accommodation Lake Dunstan Central Otago" class="card-image" loading="lazy" onclick="openLightbox(this.src)">
                            <div class="card-content">
                                <h3 class="card-title">Lakeside Cottage</h3>
                                <p class="card-text">Family cottage with direct lake access, wood-fired spa, and complete cooking facilities.</p>
                                
                                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 1rem 0; font-size: 0.85rem; color: var(--brand-teal);">
                                    <span>‚Ä¢ Lake Access</span>
                                    <span>‚Ä¢ Wood-Fired Spa</span>
                                    <span>‚Ä¢ Family Friendly</span>
                                    <span>‚Ä¢ Reliable Power</span>
                                </div>
                                
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="font-weight: 600; color: var(--dark); font-size: 1.1rem;">From $300/night <span style="font-size: 0.75rem; color: #666;">(GST incl.)</span></span>
                                    <div style="display: flex; gap: 0.5rem;">
                                        <a href="#" class="btn btn-outline" onclick="showPage('stay')">View Details</a>
                                    <a href="#" class="btn btn-primary" onclick="openBookingModal('lakeside-cottage')">Book Now</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 3rem;">
                        <a href="#" onclick="showPage('stay')" class="btn btn-outline">View Full Details & Energy Systems</a>
                    </div>
                </div>
            </section>

	 <!-- Parallax Section Transition - Between Accommodation and Contact -->
            <section class="section-transition accommodation-contact-transition" style="background-image: url('images/Desktop/IMG_5350-1000x750.jpeg'); background-attachment: fixed;">
            </section>

            <!-- Section 5: Contact Us -->
            <section class="section" id="contact-section" style="background: #FAF4F5;">
                <div class="container">
                    <div class="section-header">
                        <h2 class="section-title">Contact Us</h2>
                        <p class="section-subtitle">Have a question for your Central Otago escape? We're here to help.</p>
                    </div>

                    <div style="text-align: center; max-width: 600px; margin: 0 auto;">
                        <div class="contact-info" style="margin-bottom: 3rem;">
                            <h3>Get in Touch</h3>
                            <p>Email: info@lakesideretreat.co.nz</p>
                            <p>Phone: +64 21 368 682</p>
                            <p>Address: 96 Smiths Way, Mt Pisa, Cromwell, Central Otago</p>
                        </div>

                        <div class="whatsapp-contact" style="margin-bottom: 3rem;">
                            <h3>WhatsApp for Real-Time Communication</h3>
                            <p style="margin-bottom: 1.5rem;">Get instant responses to your questions on WhatsApp.</p>
                            <a href="https://wa.me/6421368682?text=Hi Stephen & Sandy! I'm interested in Lakeside Retreat and would love to know more about availability and rates."
                               target="_blank"
                               style="display: inline-flex; align-items: center; gap: 0.5rem; background: #25D366; color: white; padding: 0.7rem 1rem; border-radius: 20px; text-decoration: none; font-weight: 600; transition: all 0.3s ease; font-size: 0.9rem;"
                               onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 5px 15px rgba(37, 211, 102, 0.3)'"
                               onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                <span style="font-size: 1rem;">üí¨</span>
                                Chat with Stephen & Sandy
                            </a>
                        </div>

                        <div class="contact-form">
                            <h3>Send us a Message</h3>
                            <form id="contactFormLanding" onsubmit="sendContactMessage(event)">
                                <div class="form-group">
                                    <input type="text" id="contactNameLanding" class="form-input" placeholder="Your Name" required>
                                </div>
                                <div class="form-group">
                                    <input type="email" id="contactEmailLanding" class="form-input" placeholder="Your Email" required onblur="validateEmail(this)" oninput="clearEmailError(this)">
                                    <div class="email-error-message" id="contactEmailLandingError" style="display: none; color: #dc2626; font-size: 0.85rem; margin-top: 0.25rem;"></div>
                                </div>
                                <div class="form-group">
                                    <textarea id="contactMessageLanding" class="form-textarea" rows="4" placeholder="Your Message" required></textarea>
                                </div>
                                <button type="submit" class="btn btn-primary" id="contactSubmitBtnLanding">Send Message</button>
                                <div id="contactFormLandingStatus" style="margin-top: 1rem; display: none;"></div>
                            </form>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Local Area SEO Section -->
            <section class="section" style="background: rgba(251, 113, 133, 0.05); padding: 3rem 0;">
                <div class="container">
                    <div class="section-header">
                        <h2 class="section-title">Central Otago's Premier Location</h2>
                        <p class="section-subtitle">Perfectly positioned in New Zealand's world-famous wine region</p>
                    </div>
                    
                    <div class="grid grid-2">
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">üç∑ Cromwell Wine Country</h3>
                                <div class="card-text" style="line-height: 1.6;">
                                    <div style="font-weight: 600; margin-bottom: 0.5rem;">üèÜ World-Class Wine Region</div>
                                    <div style="margin-bottom: 1rem;">
                                        ‚Ä¢ <strong>12km to Cromwell</strong> town centre<br>
                                        ‚Ä¢ <strong>Walking distance</strong> to award-winning wineries<br>
                                        ‚Ä¢ <strong>Premium Pinot Noir</strong> cellar doors nearby
                                    </div>
                                </div>
                                <div style="margin-top: 1rem;">
                                    <a href="#" onclick="showPage('explore')" style="color: var(--brand-teal); text-decoration: none; font-weight: 500;">Explore Wine Country Activities ‚Üí</a>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">üö¥ Lake Dunstan Cycle Trail</h3>
                                <div class="card-text" style="line-height: 1.6;">
                                    <div style="font-weight: 600; margin-bottom: 0.5rem;">üö¥ Direct Trail Access</div>
                                    <div style="margin-bottom: 1rem;">
                                        ‚Ä¢ <strong>300m to famous cycle trail</strong><br>
                                        ‚Ä¢ <strong>Cromwell to Clyde route</strong> - scenic lakshore<br>
                                        ‚Ä¢ <strong>All skill levels</strong> welcome
                                    </div>
                                </div>
                                <div style="margin-top: 1rem;">
                                    <a href="#" onclick="showPage('explore')" style="color: var(--brand-teal); text-decoration: none; font-weight: 500;">View Cycling Information ‚Üí</a>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">üèîÔ∏è Alpine Adventure Access</h3>
                                <p class="card-text">Perfect <strong>Cromwell accommodation</strong> base for exploring <strong>Central Otago</strong>. Queenstown adventures (55 min), Wanaka activities (30 min), and five ski fields within driving distance. Experience the best of the South Island from our <strong>Lake Dunstan</strong> location.</p>
                                <div style="margin-top: 1rem;">
                                    <a href="#" onclick="showPage('explore')" style="color: var(--brand-teal); text-decoration: none; font-weight: 500;">Plan Your Adventures ‚Üí</a>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">üåÖ Lake Dunstan Views</h3>
                                <p class="card-text">Wake to panoramic <strong>Lake Dunstan views</strong> from every accommodation. Our <strong>sustainable accommodation Central Otago</strong> offers uninterrupted lake and mountain vistas, with direct water access from the cottage and lake views from all luxury domes.</p>
                                <div style="margin-top: 1rem;">
                                    <a href="#" onclick="showPage('gallery')" style="color: var(--brand-teal); text-decoration: none; font-weight: 500;">View Gallery ‚Üí</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Simplified Reviews Preview -->
			<!-- Queenstown Wanaka Section -->
<section class="section" style="background: rgba(59, 130, 246, 0.05); padding: 3rem 0;">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Smart Base for Queenstown & Wanaka</h2>
            <p class="section-subtitle">Adventure by day, peaceful luxury by night</p>
        </div>
        
        <div class="grid grid-2">
            <div class="card">
                <div class="card-content">
                    <h3 class="card-title">üèîÔ∏è Queenstown Adventures (55 min)</h3>
                    <p class="card-text">Experience bungy jumping, skydiving, and jet boats, then return to peaceful luxury. Save 40-60% vs expensive Queenstown hotels while enjoying our unique solar-powered experience.</p>
                </div>
            </div>
            
            <div class="card">
                <div class="card-content">
                    <h3 class="card-title">üåä Wanaka Gateway (30 min)</h3>
                    <p class="card-text">Perfect for Roy's Peak hiking and That Wanaka Tree photos. Enjoy Wanaka's beauty without the accommodation booking rush - guaranteed availability in our energy-positive sanctuary.</p>
                </div>
            </div>
        </div>
    </div>
</section>
            <section class="section" style="background: rgba(251, 113, 133, 0.05);">
                <div class="container">
                    <div class="section-header">
                        <h2 class="section-title">What Our Guests Say</h2>
                        <p class="section-subtitle">127 five-star reviews ‚Ä¢ 45% return guests ‚Ä¢ 98% would recommend</p>
                        
                        <!-- Quick Stats Bar -->
                        <div style="display: flex; justify-content: center; gap: 2rem; margin: 1.5rem 0; padding: 1rem; background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); flex-wrap: wrap;">
                            <div style="text-align: center; min-width: 120px;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--brand-teal);">4.9/5</div>
                                <div style="font-size: 0.8rem; opacity: 0.7;">Average Rating</div>
                            </div>
                            <div style="text-align: center; min-width: 120px;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--brand-teal);">45%</div>
                                <div style="font-size: 0.8rem; opacity: 0.7;">Return Guests</div>
                            </div>
                            <div style="text-align: center; min-width: 120px;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--brand-teal);">5</div>
                                <div style="font-size: 0.8rem; opacity: 0.7;">Years Hosting</div>
                            </div>
                            <div style="text-align: center; min-width: 120px;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--brand-teal);">20+</div>
                                <div style="font-size: 0.8rem; opacity: 0.7;">Countries</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-2">
                        <div class="card">
                            <div class="card-content">
                                <div style="color: #fbbf24; margin-bottom: 1rem;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                                <h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">üîã "Commercial-Grade Impressive"</h4>
                                <p class="card-text">"Stephen and Sandy have created something truly special here. The dome was immaculate, their 16kW commercial-grade solar system is incredibly impressive, and waking up to Lake Dunstan views was magical. We'll definitely be back!"</p>
                                <div style="background: #FAF4F5; padding: 0.5rem; border-radius: 5px; margin-top: 0.5rem; font-size: 0.8rem; font-style: italic;">Mentioned: Energy system, Lake views, Return visit planned</div>
                                <div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">M</div>
                                    <div>
                                        <div style="font-weight: 600;">Michael R.</div>
                                        <div style="font-size: 0.9rem; opacity: 0.7;">Auckland, New Zealand ‚Ä¢ March 2024</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-content">
                                <div style="color: #fbbf24; margin-bottom: 1rem;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                                <h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">üåø "Sustainable Luxury Excellence"</h4>
                                <p class="card-text">"Perfect family holiday! Kids loved the lake access and we appreciated the advanced renewable energy approach. The hybrid system with real-time monitoring is incredibly sophisticated‚Äîluxury with zero environmental guilt."</p>
                                <div style="background: #FAF4F5; padding: 0.5rem; border-radius: 5px; margin-top: 0.5rem; font-size: 0.8rem; font-style: italic;">Mentioned: Family-friendly, Lake access, Environmental consciousness</div>
                                <div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: var(--secondary); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">K</div>
                                    <div>
                                        <div style="font-weight: 600;">Kelly T.</div>
                                        <div style="font-size: 0.9rem; opacity: 0.7;">Melbourne, Australia ‚Ä¢ February 2024</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 2rem;">
                        <a href="#" class="btn btn-outline" onclick="showPage('reviews')">Read All 127 Reviews</a>
                    </div>
                </div>
            </section>
        </div>

        <!-- Stay Page -->
        <div class="page" id="stayPage">
            <section class="hero parallax-container stay-hero" style="min-height: 70vh;">
                <!-- Parallax Layers - Photos will be added here -->
                <div class="parallax-layer parallax-layer-bg" style="background-image: url('images/Desktop/IMG_E02231.jpg');"></div>
                <div class="parallax-layer parallax-layer-mid" style="background-image: url('PLACEHOLDER_STAY_MID_IMAGE');"></div>
                <!-- Navigation inside hero -->
                <nav class="navbar" id="navbar">
                    <div class="nav-container" style="display: flex; justify-content: center; align-items: center; width: 100%;">
                        <!-- Complete centered navigation group -->
                        <div style="display: flex; align-items: center; gap: 2rem;">
                            <!-- Left 4 menu items -->
                            <a href="#" class="nav-link" onclick="showPage('home')">Home</a>
                            <a href="#" class="nav-link" onclick="showPage('stay')">Stay</a>
                            <a href="#" class="nav-link" onclick="showPage('gallery')">Gallery</a>
                            <a href="#" class="nav-link" onclick="showPage('blog')">Guides</a>

                            <!-- Center logo -->
                            <a href="#" class="logo" onclick="showPage('home')" aria-label="Go to home page" style="margin: 0 1rem;">
                                <img src="images/logormbg.png" alt="Lakeside Retreat Logo" class="logo-icon" />
                            </a>

                            <!-- Right 4 menu items -->
                            <a href="#" class="nav-link" onclick="showPage('reviews')">Reviews</a>
                            <a href="#" class="nav-link" onclick="showPage('story')">Story</a>
                            <a href="#" class="nav-link" onclick="showPage('explore')">Explore</a>
                            <a href="#" class="nav-link" onclick="showPage('contact')">Contact</a>
                        </div>

                        <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Toggle mobile menu">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>
                </nav>
            </section>

            <!-- Stay Page Content Section -->
            <section class="section">
                <div class="container">
                    <div class="section-header">
                        <h1 class="section-title">Three Unique Luxury Experiences in Nature's Embrace</h1>
                        <p class="section-subtitle">Each accommodation is powered by our sophisticated solar array with Signergy battery storage. Couples escape to stargazing domes with private spas. Families create memories in our lakefront cottage with direct water access. All powered by energy-positive operations, all designed for five-star comfort, all positioned for Central Otago's most breathtaking views.</p>
                    </div>                  
                    <!-- Full detailed accommodation content remains the same This is the stay page-->
                    <div class="grid grid-3">
                        <div class="card">
                            <!-- Image Carousel Container -->
                            <div class="image-carousel-container" style="position: relative; overflow: hidden;">
                                <div class="image-carousel" id="carousel-pinot" style="display: flex; transition: transform 0.3s ease;">
                                    <img src="images/Desktop/pinot-internal.jpeg" alt="Dome Pinot Interior" class="card-image" loading="lazy" onclick="openCarouselLightbox(this.src, 'pinot')" style="min-width: 100%; flex-shrink: 0;">
                                    <img src="images/Desktop/Pinotfront.jpeg" alt="Dome Pinot Exterior" class="card-image" loading="lazy" onclick="openCarouselLightbox(this.src, 'pinot')" style="min-width: 100%; flex-shrink: 0;">
                                    <img src="images/Desktop/windowview.jpeg" alt="Dome Pinot Views" class="card-image" loading="lazy" onclick="openCarouselLightbox(this.src, 'pinot')" style="min-width: 100%; flex-shrink: 0;">
                                    <img src="images/Desktop/pinotspa.jpeg" alt="Dome Pinot Spa" class="card-image" loading="lazy" onclick="openCarouselLightbox(this.src, 'pinot')" style="min-width: 100%; flex-shrink: 0;">
                                    <img src="images/Desktop/GallerySwingChair.jpeg" alt="Dome Pinot Living Area" class="card-image" loading="lazy" onclick="openCarouselLightbox(this.src, 'pinot')" style="min-width: 100%; flex-shrink: 0;">
                                </div>
                                <!-- Navigation Arrows -->
                                <button class="carousel-arrow carousel-arrow-left" onclick="navigateCarousel('carousel-pinot', 'prev')" style="position: absolute; left: 15px; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.5); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; font-size: 18px; z-index: 10; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(0,0,0,0.8)'" onmouseout="this.style.background='rgba(0,0,0,0.5)'">‚Äπ</button>
                                <button class="carousel-arrow carousel-arrow-right" onclick="navigateCarousel('carousel-pinot', 'next')" style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.5); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; font-size: 18px; z-index: 10; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(0,0,0,0.8)'" onmouseout="this.style.background='rgba(0,0,0,0.5)'">‚Ä∫</button>
                                <!-- Image Counter -->
                                <div class="image-counter" style="position: absolute; bottom: 15px; right: 15px; background: rgba(0,0,0,0.7); color: white; padding: 5px 10px; border-radius: 15px; font-size: 12px; z-index: 10;">
                                    <span id="counter-pinot">1 / 5</span>
                                </div>
                            </div>

                            <div class="card-content">
                                <h3 class="card-title">Dome Pinot</h3>
                                <p class="card-text">Welcome to Lakeside Glamping's flagship experience! Our adults only, largest and most spacious luxury dome! It offers an unforgettable 50sqm open living space, fresh salt water spa and large deck, where the serenity of nature combines seamlessly with five-star accommodation comforts. Purposely built for couples seeking the ultimate romantic escape.</p>
                                
                                <!-- Compact Key Features -->
                                <div style="background: #FAF4F5; padding: 1.5rem; border-radius: 10px; margin: 1.5rem 0;">
                                    <h4 style="color: var(--brand-teal); margin-bottom: 1rem; font-size: 1.1rem;">Key Features</h4>
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem; font-size: 0.9rem;">
                                        <div><i class="fas fa-users"></i> Adults only max 2 guests</div>
					<div><i class="fa fa-coffee"></i> Breadfast included</div>
					<div><i class="fas fa-bed"></i> Superking bed</div>
                                        <div><i class="fas fa-bath"></i> Private fresh salt water spa</div>
                                        <div><i class="fas fa-utensils"></i> Stovetop cooking</div>
                                        <div><i class="fas fa-fire"></i> Weber BBQ</div>
                                        <div><i class="fas fa-wifi"></i> Free WiFi</div>
                                        <div><i class="fas fa-parking"></i> Free parking</div>
                                        <div><i class="fas fa-snowflake"></i> Air conditioning</div>
                                        <div><i class="fas fa-tv"></i> 55" OLED TV</div>
                                        <div><i class="fa-solid fa-water"></i> Lake & Mountains view</div>
					<div><i class="fas fa-leaf"></i> Vineyard views</div>
                                        <div><i class="fas fa-route"></i> Cycle trail 300m</div>
                                    </div>
                                </div>

                                
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="font-weight: 600; color: var(--dark); font-size: 1.1rem;">From $600/night <span style="font-size: 0.75rem; color: #666;">(GST incl.)</span></span>
                                    <button onclick="openBookingModal('dome-pinot')" class="btn btn-outline">Book Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <!-- Image Carousel Container -->
                            <div class="image-carousel-container" style="position: relative; overflow: hidden;">
                                <div class="image-carousel" id="carousel-rose" style="display: flex; transition: transform 0.3s ease;">
                                    <img src="images/dome-rose.jpeg" alt="Dome Ros√© Exterior" class="card-image" loading="lazy" onclick="openCarouselLightbox(this.src, 'rose')" style="min-width: 100%; flex-shrink: 0;">
                                    <img src="images/Desktop/IMG_1403-1000x700.jpeg" alt="Dome Ros√© Interior" class="card-image" loading="lazy" onclick="openCarouselLightbox(this.src, 'rose')" style="min-width: 100%; flex-shrink: 0;">
                                    <img src="images/Desktop/rosespa.jpeg" alt="Dome Ros√© Spa" class="card-image" loading="lazy" onclick="openCarouselLightbox(this.src, 'rose')" style="min-width: 100%; flex-shrink: 0;">
                                    <img src="images/Desktop/gallerydecksitting.jpeg" alt="Dome Ros√© Deck Area" class="card-image" loading="lazy" onclick="openCarouselLightbox(this.src, 'rose')" style="min-width: 100%; flex-shrink: 0;">
                                    <img src="images/Desktop/dome-rose-interior.jpeg" alt="Dome Ros√© Living Area" class="card-image" loading="lazy" onclick="openCarouselLightbox(this.src, 'rose')" style="min-width: 100%; flex-shrink: 0;">
                                </div>
                                <!-- Navigation Arrows -->
                                <button class="carousel-arrow carousel-arrow-left" onclick="navigateCarousel('carousel-rose', 'prev')" style="position: absolute; left: 15px; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.5); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; font-size: 18px; z-index: 10; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(0,0,0,0.8)'" onmouseout="this.style.background='rgba(0,0,0,0.5)'">‚Äπ</button>
                                <button class="carousel-arrow carousel-arrow-right" onclick="navigateCarousel('carousel-rose', 'next')" style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.5); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; font-size: 18px; z-index: 10; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(0,0,0,0.8)'" onmouseout="this.style.background='rgba(0,0,0,0.5)'">‚Ä∫</button>
                                <!-- Image Counter -->
                                <div class="image-counter" style="position: absolute; bottom: 15px; right: 15px; background: rgba(0,0,0,0.7); color: white; padding: 5px 10px; border-radius: 15px; font-size: 12px; z-index: 10;">
                                    <span id="counter-rose">1 / 5</span>
                                </div>
                            </div>
                            
                            <div class="card-content">
                                <h3 class="card-title">Dome Ros√©</h3>
                                <p class="card-text">Welcome to adults only Dome Ros√©, where luxury meets nature in perfect harmony. Dome Ros√© offers an intimate 40sqm open living space,private fresh salt water spa and a large deck.  It is purposely built for couples seeking a unique romantic getaway that combines the serenity of nature with five-star accommodation comforts.</p>
                                
                                <!-- Compact Key Features -->
                                <div style="background: rgba(251, 113, 133, 0.05); padding: 1.5rem; border-radius: 10px; margin: 1.5rem 0;">
                                    <h4 style="color: #be185d; margin-bottom: 1rem; font-size: 1.1rem;">Key Features</h4>
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem; font-size: 0.9rem;">
                                        <div><i class="fas fa-users"></i> Adults only max 2 guests</div>
					<div><i class="fa fa-coffee"></i> Breadfast included</div>
					<div><i class="fas fa-bed"></i> Superking bed</div>
                                        <div><i class="fas fa-bath"></i> Private fresh salt water spa</div>
                                        <div><i class="fas fa-utensils"></i> Stovetop cooking</div>
                                        <div><i class="fas fa-fire"></i> Weber BBQ</div>
                                        <div><i class="fas fa-wifi"></i> Free WiFi</div>
                                        <div><i class="fas fa-parking"></i> Free parking</div>
                                        <div><i class="fas fa-snowflake"></i> Air conditioning</div>
                                        <div><i class="fas fa-tv"></i> 55" OLED TV</div>
                                        <div><i class="fas fa-leaf"></i> Vineyard views</div>
					<div><i class="fa-solid fa-water"></i> Lake & Mountains view</div>
                                        <div><i class="fas fa-route"></i> Cycle trail 300m</div>
                                </div>
                                </div>

                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="font-weight: 600; color: var(--dark); font-size: 1.1rem;">From $580/night <span style="font-size: 0.75rem; color: #666;">(GST incl.)</span></span>
                                    <button onclick="openBookingModal('dome-rose')" class="btn btn-outline">Book Now</button>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <!-- Image Carousel Container -->
                            <div class="image-carousel-container" style="position: relative; overflow: hidden;">
                                <div class="image-carousel" id="carousel-cottage" style="display: flex; transition: transform 0.3s ease;">
                                    <img src="images/Desktop/lakeside-cottage-exterior.jpeg" alt="Lakeside Cottage Exterior" class="card-image" loading="lazy" onclick="openCarouselLightbox(this.src, 'cottage')" style="min-width: 100%; flex-shrink: 0;">
                                    <img src="images/Desktop/cottage.jpg" alt="Lakeside Cottage Interior" class="card-image" loading="lazy" onclick="openCarouselLightbox(this.src, 'cottage')" style="min-width: 100%; flex-shrink: 0;">
                                    <img src="images/Desktop/Hottub1000x700.jpeg" alt="Lakeside Cottage Hot Tub" class="card-image" loading="lazy" onclick="openCarouselLightbox(this.src, 'cottage')" style="min-width: 100%; flex-shrink: 0;">
                                    <img src="images/Desktop/cottagebathroom.jpeg" alt="Lakeside Cottage Bathroom" class="card-image" loading="lazy" onclick="openCarouselLightbox(this.src, 'cottage')" style="min-width: 100%; flex-shrink: 0;">
                                    <img src="images/Desktop/cottagebedroom.jpeg" alt="Lakeside Cottage Bedroom" class="card-image" loading="lazy" onclick="openCarouselLightbox(this.src, 'cottage')" style="min-width: 100%; flex-shrink: 0;">
                                </div>
                                <!-- Navigation Arrows -->
                                <button class="carousel-arrow carousel-arrow-left" onclick="navigateCarousel('carousel-cottage', 'prev')" style="position: absolute; left: 15px; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.5); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; font-size: 18px; z-index: 10; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(0,0,0,0.8)'" onmouseout="this.style.background='rgba(0,0,0,0.5)'">‚Äπ</button>
                                <button class="carousel-arrow carousel-arrow-right" onclick="navigateCarousel('carousel-cottage', 'next')" style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.5); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; font-size: 18px; z-index: 10; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(0,0,0,0.8)'" onmouseout="this.style.background='rgba(0,0,0,0.5)'">‚Ä∫</button>
                                <!-- Image Counter -->
                                <div class="image-counter" style="position: absolute; bottom: 15px; right: 15px; background: rgba(0,0,0,0.7); color: white; padding: 5px 10px; border-radius: 15px; font-size: 12px; z-index: 10;">
                                    <span id="counter-cottage">1 / 5</span>
                                </div>
                            </div>
                            
                            <div class="card-content">
                                <h3 class="card-title">Lakeside Cottage</h3>
                                <p class="card-text">Welcome to your luxurious Central Otago escape! This stunning self-contained pet friendly cottage offers breathtaking panoramic views over Lake Dunstan with the epic backdrop of Mt Pisa. Nestled in our boutique vineyard on the shores of Lake Dunstan, your fur babies are welcome.</p>
                                
                                <!-- Compact Key Features -->
                                <div style="background: #FAF4F5; padding: 1.5rem; border-radius: 10px; margin: 1.5rem 0;">
                                    <h4 style="color: var(--brand-teal); margin-bottom: 1rem; font-size: 1.1rem;">Key Features</h4>
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem; font-size: 0.9rem;">
					<div><i class="fas fa-users"></i> Up to 3 guests</div>
                                        <div><i class="fas fa-bed"></i> Queen bed + Queen sofa bed</div>
                                        <div><i class="fas fa-bath"></i> Private fresh water hot tub</div>
                                        <div><i class="fas fa-utensils"></i> Hot plate cooking</div>
                                        <div><i class="fas fa-fire"></i> Weber BBQ</div>
                                        <div><i class="fas fa-wifi"></i> Free WiFi</div>
                                        <div><i class="fas fa-parking"></i> Double garage + parking</div>
                                        <div><i class="fas fa-snowflake"></i> Air conditioning</div>
                                        <div><i class="fas fa-tv"></i> Smart TV</div>
                                        <div><i class="fa-solid fa-water"></i> Lake & Mountains view</div>
                                        <div><i class="fas fa-route"></i> Cycle trail 300m</div>
                                        <div><i class="fas fa-tshirt"></i> Washing machine</div>
                                        <div><i class="fas fa-paw"></i> Pet friendly</div>
                                    </div>
                                </div>

                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="font-weight: 600; color: var(--dark); font-size: 1.1rem;">From $300/night <span style="font-size: 0.75rem; color: #666;">(GST incl.)</span></span>
                                    <button onclick="showPage('lakeside-cottage')" class="btn btn-outline">Book Now</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            
            <!-- Parallax Section Transition - MountainView -->
            <section class="section-transition MountainViewsection" style="background-image: url('images/Frontmountainview.jpeg'); background-attachment: fixed;">
                <!-- Parallax Content -->
                <div style="position: relative; z-index: 3; height: 100%; display: flex; align-items: center; justify-content: center; text-align: center; padding: 2rem;">
                    <div style="max-width: 800px;">
                        <h2 style="font-family: 'Space Grotesk', sans-serif; font-size: 2.5rem; font-weight: 700; color: white; margin-bottom: 1rem; text-shadow: 0 4px 8px rgba(0,0,0,0.5);">
                            Experience Central Otago's Natural Beauty
                        </h2>
                        <p style="font-size: 1.2rem; color: white; line-height: 1.6; text-shadow: 0 2px 4px rgba(0,0,0,0.5); opacity: 0.95;">
                            Every moment at Lakeside Retreat is designed to connect you with the stunning landscape of Lake Dunstan and the surrounding mountains, creating memories that will last a lifetime.
                        </p>
                    </div>
                </div>
            </section>
              
 <!-- During Your Stay SECTION - ENHANCED -->
            <section class="section" style="background: #FAF4F5;">
                <div class="container">
                    <div class="section-header">
                        <h2 class="section-title">During Your Stay... </h2>
                        <div class="grid grid-2" style="gap: 3rem; align-items: center;">
                        <div>
                            <p style="font-size: 1.1rem; line-height: 1.8; margin-bottom: 2rem;">
                                At Lakeside Reterat enjoy all the amenities central otago offers or simply do nothing and just relax and recharge.  
Local activities and adventures:
                            </p>
                            <ul style="font-size: 1.1rem; line-height: 1.8; margin-bottom: 2rem; padding-left: 4rem;">
<li>Enjoy a sunrise or sunset walk in the vineyard between vines</li>
<li>Relax by the picturesque in your own hot tub before taking a dip in Lake Dunstan in summer</li>
<li>Spot the swans, eagles and native birds resting around the vineyard</li>
<li>Have a dip in the lake in summer</li>
<li>Enjoy a BBQ on the deck or patio</li>
<li>Stargaze from your super king bed or in your private spa</li>
<li>Enjoy a wine tour in one of the world class wineries in Cromwell</li>
<li>Snuggle in a fluffy robe enjoying a sunrise at our 3 meter window</li>
<li>Watch the sun rise, seeking the stars or enjoy Milky Way shining at the sky</li>
<li>Lounge in your super king size bed, seating space or outdoor seating area</li>
<li>Enjoy the tasty food where our local area offers</li>
<li>Try out a Lake Dunstan cycle trail on an E-bike</li>
<li>Enjoy the local tracks and walkway with amazing views</li>
<li>Try go cart in the highlands</li>
                            </ul>
                            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                <button onclick="showPage('guide')" class="btn btn-outline">Learn More</button>
                            </div>
                        </div>
                      </div>  
                    </div>
                </div>
            </section>           
            

            <!-- Parallax Section Transition - Vineyard Autumn Views -->
            <section class="section-transition lake-dunstan-section" style="background-image: url('images/Desktop/IMG_1266-1920x1080.jpeg'); background-attachment: fixed;">
            </section>
<!-- Featured Guest Testimonials -->
            <section class="section" style="padding: 3rem 0;">
                <div class="container">
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <h2 style="font-family: 'Roboto', sans-serif; font-size: 2.5rem; color: var(--brand-teal);">What Our Guests Say</h2>
                        <p style="font-size: 1.1rem; color: #4a5568; margin-top: 0.5rem;">Real experiences from our wonderful guests</p>
                    </div>
                    <div class="grid grid-3">
                        <div class="card" style="border-left: 4px solid var(--brand-teal);">
                            <div class="card-content">
                                <div style="color: #fbbf24; margin-bottom: 1rem;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                                <p style="font-style: italic; margin-bottom: 1rem;">"The solar system tour was fascinating! Stephen's expertise really shows. Beautiful location, immaculate accommodation, and the energy monitoring display is genuinely impressive."</p>
                                <div style="font-weight: 600;">Sarah & Tom</div>
                                <div style="font-size: 0.9rem; color: #6b7280;">Wellington ‚Ä¢ November 2024</div>
                            </div>
                        </div>
                        <div class="card" style="border-left: 4px solid var(--brand-teal);">
                            <div class="card-content">
                                <div style="color: #fbbf24; margin-bottom: 1rem;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                                <p style="font-style: italic; margin-bottom: 1rem;">"Perfect base for exploring Central Otago! The domes are magical at night with the skylight for stargazing. Loved the hot tub after cycling the trail."</p>
                                <div style="font-weight: 600;">Michael R.</div>
                                <div style="font-size: 0.9rem; color: #6b7280;">Auckland ‚Ä¢ October 2024</div>
                            </div>
                        </div>
                        <div class="card" style="border-left: 4px solid var(--brand-teal);">
                            <div class="card-content">
                                <div style="color: #fbbf24; margin-bottom: 1rem;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                                <p style="font-style: italic; margin-bottom: 1rem;">"Sandy's local recommendations were spot on! The commercial-grade solar backup meant we had power during a grid outage - impressive!"</p>
                                <div style="font-weight: 600;">Emma & James</div>
                                <div style="font-size: 0.9rem; color: #6b7280;">Sydney ‚Ä¢ September 2024</div>
                            </div>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 2rem;">
                        <a href="#" onclick="showPage('reviews')" class="btn btn-outline">Read All 127 Reviews</a>
                    </div>
                </div>
            </section>

      <section class="section">     
        <!-- Gallery Page for the stay-->
        <div class="page" id="galleryPage">
            <section class="hero parallax-container">
                <!-- Parallax Layers - Photos will be added here -->
                <div class="parallax-layer parallax-layer-bg" style="background-image: url('PLACEHOLDER_GALLERY_BG_IMAGE');"></div>
                <div class="parallax-layer parallax-layer-mid" style="background-image: url('PLACEHOLDER_GALLERY_MID_IMAGE');"></div>
                <!-- Navigation inside hero -->
                <nav class="navbar" id="navbar">
                    <div class="nav-container" style="display: flex; justify-content: center; align-items: center; width: 100%;">
                        <!-- Complete centered navigation group -->
                        <div style="display: flex; align-items: center; gap: 2rem;">
                            <!-- Left 4 menu items -->
                            <a href="#" class="nav-link" onclick="showPage('home')">Home</a>
                            <a href="#" class="nav-link" onclick="showPage('stay')">Stay</a>
                            <a href="#" class="nav-link" onclick="showPage('gallery')">Gallery</a>
                            <a href="#" class="nav-link" onclick="showPage('blog')">Guides</a>

                            <!-- Center logo -->
                            <a href="#" class="logo" onclick="showPage('home')" aria-label="Go to home page" style="margin: 0 1rem;">
                                <img src="images/logormbg.png" alt="Lakeside Retreat Logo" class="logo-icon" />
                            </a>

                            <!-- Right 4 menu items -->
                            <a href="#" class="nav-link" onclick="showPage('reviews')">Reviews</a>
                            <a href="#" class="nav-link" onclick="showPage('story')">Story</a>
                            <a href="#" class="nav-link" onclick="showPage('explore')">Explore</a>
                            <a href="#" class="nav-link" onclick="showPage('contact')">Contact</a>
                        </div>

                        <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Toggle mobile menu">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>
                </nav>
                <div class="container">
                    <div class="hero-content">
                        <h1>Your Journey Through Paradise</h1>
                        <div class="tagline">From Arrival to Unforgettable Memories - Every Moment Captured</div>
                        <p>Follow the path our guests take: arriving through golden vineyards, settling into luxury domes with lake views, waking to mountain sunrises, soaking in private spas under stars, and discovering why 127 five-star reviews all mention "the views." This is more than a gallery - it's your future memories waiting to happen.</p>
                    </div>
                </div>
            </section>
            <section class="section" style="background: #FAF4F5;">
                <div class="container">
                    <!-- CHAPTER 1: YOUR ARRIVAL -->
                    <div style="text-align: center; margin: 3rem 0 2rem 0;">
                        <h2 style="font-family: 'Roboto', sans-serif; color: var(--brand-teal); margin-bottom: 0.5rem;">Chapter 1: Your Arrival</h2>
                        <p style="color: var(--text); opacity: 0.8; font-style: italic;">"The moment you turn into our vineyard, time slows down..."</p>
                    </div>
                    
                    <div class="grid grid-3" style="margin-bottom: 3rem;">
                        <div class="card">
                            <img src="images/vineyard.jpeg" alt="Welcome to Central Otago wine country" class="card-image" onclick="openLightbox(this.src)">
                            <div style="padding: 1rem; text-align: center;">
                                <p style="font-size: 0.9rem; color: var(--text);">Welcome to wine country - your first glimpse</p>
                            </div>
                        </div>
                        <div class="card">
                            <img src="images/golden-vineyard-autumn.jpg" alt="Golden autumn vineyard rows - Central Otago at its finest" class="card-image" onclick="openLightbox(this.src)">
                            <div style="padding: 1rem; text-align: center;">
                                <p style="font-size: 0.9rem; color: var(--text);">Golden autumn magic - the vineyard at its peak</p>
                            </div>
                        </div>
                        <div class="card">
                            <img src="images/lake-mountains-perfect.jpg" alt="Lake Dunstan with snow-capped mountains" class="card-image" onclick="openLightbox(this.src)">
                            <div style="padding: 1rem; text-align: center;">
                                <p style="font-size: 0.9rem; color: var(--text);">Lake Dunstan stretches before you</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- CHAPTER 2: SETTLING IN -->
                    <div style="text-align: center; margin: 3rem 0 2rem 0;">
                        <h2 style="font-family: 'Roboto', sans-serif; color: var(--brand-teal); margin-bottom: 0.5rem;">Chapter 2: Settling Into Luxury</h2>
                        <p style="color: var(--text); opacity: 0.8; font-style: italic;">"Choose your sanctuary - each one tells a different story"</p>
                    </div>
                    
                    <div class="grid grid-3" style="margin-bottom: 3rem;">
                        <div class="card">
                            <img src="images/dome-pinot-hero.jpeg" alt="Dome Pinot - Your romantic lake view retreat" class="card-image" onclick="openLightbox(this.src)">
                            <div style="padding: 1rem; text-align: center;">
                                <p style="font-size: 0.9rem; color: var(--text);">Dome Pinot - where lake views steal your heart</p>
                            </div>
                        </div>
                        <div class="card">
                            <img src="images/PinotLakeView.jpeg" alt="Wake up to this - Lake views from bed" class="card-image" onclick="openLightbox(this.src)">
                            <div style="padding: 1rem; text-align: center;">
                                <p style="font-size: 0.9rem; color: var(--text);">Wake up to this every morning</p>
                            </div>
                        </div>
                        <div class="card">
                            <img src="images/dome-rose-spa.jpeg" alt="Private spa luxury in Dome Rose" class="card-image" onclick="openLightbox(this.src)">
                            <div style="padding: 1rem; text-align: center;">
                                <p style="font-size: 0.9rem; color: var(--text);">Your private spa awaits</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- CHAPTER 3: NATURE'S SHOW -->
                    <div style="text-align: center; margin: 3rem 0 2rem 0;">
                        <h2 style="font-family: 'Roboto', sans-serif; color: var(--brand-teal); margin-bottom: 0.5rem;">Chapter 3: Nature's Daily Performance</h2>
                        <p style="color: var(--text); opacity: 0.8; font-style: italic;">"Every day brings a new masterpiece"</p>
                    </div>
                    
                    <div class="grid grid-3" style="margin-bottom: 3rem;">
                        <div class="card">
                            <img src="images/galleryrainbow.jpeg" alt="Double rainbow over Lake Dunstan" class="card-image" onclick="openLightbox(this.src)">
                            <div style="padding: 1rem; text-align: center;">
                                <p style="font-size: 0.9rem; color: var(--text);">When rainbows touch the lake</p>
                            </div>
                        </div>
                        <div class="card">
                            <img src="images/magical-sunset.jpg" alt="Magical Central Otago sunset" class="card-image" onclick="openLightbox(this.src)">
                            <div style="padding: 1rem; text-align: center;">
                                <p style="font-size: 0.9rem; color: var(--text);">Sunsets that stop conversations</p>
                            </div>
                        </div>
                        <div class="card">
                            <img src="images/20220125_091449.jpg" alt="Morning serenity over the mountains" class="card-image" onclick="openLightbox(this.src)">
                            <div style="padding: 1rem; text-align: center;">
                                <p style="font-size: 0.9rem; color: var(--text);">Morning serenity before the world wakes</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- CHAPTER 4: LIVING THE DREAM -->
                    <div style="text-align: center; margin: 3rem 0 2rem 0;">
                        <h2 style="font-family: 'Roboto', sans-serif; color: var(--brand-teal); margin-bottom: 0.5rem;">Chapter 4: Living the Dream</h2>
                        <p style="color: var(--text); opacity: 0.8; font-style: italic;">"This is what relaxation really means"</p>
                    </div>
                    
                    <div class="grid grid-3" style="margin-bottom: 3rem;">
                        <div class="card">
                            <img src="images/pinotspa.jpeg" alt="Spa with a view - pure relaxation" class="card-image" onclick="openLightbox(this.src)">
                            <div style="padding: 1rem; text-align: center;">
                                <p style="font-size: 0.9rem; color: var(--text);">Spa sessions with million-dollar views</p>
                            </div>
                        </div>
                        <div class="card">
                            <img src="images/gallerydeck.jpeg" alt="Outdoor deck perfect for wine tasting" class="card-image" onclick="openLightbox(this.src)">
                            <div style="padding: 1rem; text-align: center;">
                                <p style="font-size: 0.9rem; color: var(--text);">Your private wine tasting deck</p>
                            </div>
                        </div>
                        <div class="card">
                            <img src="images/GallerySwingChair.jpeg" alt="Your reading spot with a view" class="card-image" onclick="openLightbox(this.src)">
                            <div style="padding: 1rem; text-align: center;">
                                <p style="font-size: 0.9rem; color: var(--text);">The perfect reading spot</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- CHAPTER 5: WINE COUNTRY -->
                    <div style="text-align: center; margin: 3rem 0 2rem 0;">
                        <h2 style="font-family: 'Roboto', sans-serif; color: var(--brand-teal); margin-bottom: 0.5rem;">Chapter 5: In the Heart of Wine Country</h2>
                        <p style="color: var(--text); opacity: 0.8; font-style: italic;">"Walk among the vines that produce world-class Pinot Noir"</p>
                    </div>
                    
                    <div class="grid grid-3" style="margin-bottom: 3rem;">
                        <div class="card">
                            <img src="images/vineyard-path.jpg" alt="Morning walk through the vineyard" class="card-image" onclick="openLightbox(this.src)">
                            <div style="padding: 1rem; text-align: center;">
                                <p style="font-size: 0.9rem; color: var(--text);">Morning walks through our vineyard</p>
                            </div>
                        </div>
                        <div class="card">
                            <img src="images/vineyarddomes.jpeg" alt="Domes nestled in wine country" class="card-image" onclick="openLightbox(this.src)">
                            <div style="padding: 1rem; text-align: center;">
                                <p style="font-size: 0.9rem; color: var(--text);">Domes nestled among the vines</p>
                            </div>
                        </div>
                        <div class="card">
                            <img src="images/ViewfromVineyard.jpeg" alt="Views from the vineyard" class="card-image" onclick="openLightbox(this.src)">
                            <div style="padding: 1rem; text-align: center;">
                                <p style="font-size: 0.9rem; color: var(--text);">The view from our vineyard</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- CHAPTER 6: FOUR SEASONS -->
                    <div style="text-align: center; margin: 3rem 0 2rem 0;">
                        <h2 style="font-family: 'Roboto', sans-serif; color: var(--brand-teal); margin-bottom: 0.5rem;">Chapter 6: Four Seasons of Magic</h2>
                        <p style="color: var(--text); opacity: 0.8; font-style: italic;">"Every season brings its own special beauty"</p>
                    </div>
                    
                    <div class="grid grid-3" style="margin-bottom: 3rem;">
                        <div class="card">
                            <img src="images/20211122_185234.jpg" alt="Winter wonderland - cozy dome season" class="card-image" onclick="openLightbox(this.src)">
                            <div style="padding: 1rem; text-align: center;">
                                <p style="font-size: 0.9rem; color: var(--text);">Winter wonderland - cozy dome season</p>
                            </div>
                        </div>
                        <div class="card">
                            <img src="images/lakeviewautumn.jpeg" alt="Autumn colors reflecting on the lake" class="card-image" onclick="openLightbox(this.src)">
                            <div style="padding: 1rem; text-align: center;">
                                <p style="font-size: 0.9rem; color: var(--text);">Autumn paints the landscape gold</p>
                            </div>
                        </div>
                        <div class="card">
                            <img src="images/HeadingWarm.jpeg" alt="Golden hour glow over property" class="card-image" onclick="openLightbox(this.src)">
                            <div style="padding: 1rem; text-align: center;">
                                <p style="font-size: 0.9rem; color: var(--text);">Golden hour perfection</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- CHAPTER 7: YOUR STORY BEGINS -->
                    <div style="text-align: center; margin: 3rem 0 2rem 0;">
                        <h2 style="font-family: 'Roboto', sans-serif; color: var(--brand-teal); margin-bottom: 0.5rem;">Chapter 7: Your Story Begins Here</h2>
                        <p style="color: var(--text); opacity: 0.8; font-style: italic;">"Join the 127 five-star reviews - create your own memories"</p>
                    </div>
                    
                    <div class="grid grid-2" style="margin-bottom: 3rem; max-width: 700px; margin-left: auto; margin-right: auto;">
                        <div class="card">
                            <img src="images/pinotinternal.jpeg" alt="Luxury interior comfort" class="card-image" onclick="openLightbox(this.src)">
                            <div style="padding: 1rem; text-align: center;">
                                <p style="font-size: 0.9rem; color: var(--text);">Luxury in every detail</p>
                            </div>
                        </div>
                        <div class="card">
                            <img src="images/solarpanel.jpeg" alt="38 solar panels - luxury meets sustainability" class="card-image" onclick="openLightbox(this.src)">
                            <div style="padding: 1rem; text-align: center;">
                                <p style="font-size: 0.9rem; color: var(--text);">38 solar panels - guilt-free luxury</p>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Blog Page -->
        <div class="page" id="blogPage">
            <section class="hero parallax-container">
                <!-- Parallax Layers - Photos will be added here -->
                <div class="parallax-layer parallax-layer-bg" style="background-image: url('PLACEHOLDER_BLOG_BG_IMAGE');"></div>
                <div class="parallax-layer parallax-layer-mid" style="background-image: url('PLACEHOLDER_BLOG_MID_IMAGE');"></div>
                <!-- Navigation inside hero -->
                <nav class="navbar" id="navbar">
                    <div class="nav-container" style="display: flex; justify-content: center; align-items: center; width: 100%;">
                        <!-- Complete centered navigation group -->
                        <div style="display: flex; align-items: center; gap: 2rem;">
                            <!-- Left 4 menu items -->
                            <a href="#" class="nav-link" onclick="showPage('home')">Home</a>
                            <a href="#" class="nav-link" onclick="showPage('stay')">Stay</a>
                            <a href="#" class="nav-link" onclick="showPage('gallery')">Gallery</a>
                            <a href="#" class="nav-link" onclick="showPage('blog')">Guides</a>

                            <!-- Center logo -->
                            <a href="#" class="logo" onclick="showPage('home')" aria-label="Go to home page" style="margin: 0 1rem;">
                                <img src="images/logormbg.png" alt="Lakeside Retreat Logo" class="logo-icon" />
                            </a>

                            <!-- Right 4 menu items -->
                            <a href="#" class="nav-link" onclick="showPage('reviews')">Reviews</a>
                            <a href="#" class="nav-link" onclick="showPage('story')">Story</a>
                            <a href="#" class="nav-link" onclick="showPage('explore')">Explore</a>
                            <a href="#" class="nav-link" onclick="showPage('contact')">Contact</a>
                        </div>

                        <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Toggle mobile menu">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>
                </nav>
                <div class="container">
                    <div class="hero-content">
                        <h1>Local Secrets from Stephen & Sandy</h1>
                        <div class="tagline">Five Years Living Here ‚Ä¢ 500+ Guests Guided ‚Ä¢ Commercial-Grade Energy Experts</div>
                        <p>From I.T. professionals to Central Otago hosts and renewable energy innovators‚Äîwe've learned every cellar door worth visiting, every cycle route that takes your breath away, every season's hidden gems, plus how to design and maintain commercial-grade solar systems. Our comprehensive guides come from hosting guests from 20+ countries and calling this magical region home.</p>
                        
                        <!-- GUIDE NAVIGATION -->
                        <div style="background: white; border-radius: 20px; padding: 2rem; margin: 2rem 0; box-shadow: 0 8px 25px rgba(0,0,0,0.1); max-width: 900px; margin-left: auto; margin-right: auto;">
                            <h3 style="color: var(--brand-teal); margin-bottom: 2rem; text-align: center; font-family: 'Roboto', sans-serif; font-size: 1.8rem;">üìö Your Complete Central Otago Guide Collection</h3>
                            
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;">
                                <a href="#" onclick="scrollToSection('winery-guide'); return false;" style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; padding: 1.5rem; border-radius: 15px; text-decoration: none; transition: all 0.3s ease; display: block;" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 12px 30px rgba(139, 92, 246, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">üç∑</div>
                                    <h4 style="margin-bottom: 0.5rem; font-size: 1.1rem;">10 Best Wineries Within 15 Minutes</h4>
                                    <p style="font-size: 0.9rem; opacity: 0.9; margin: 0;">Walking distance gems + world-class Pinot Noir</p>
                                </a>
                                
                                <a href="#" onclick="scrollToSection('restaurant-guide'); return false;" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; padding: 1.5rem; border-radius: 15px; text-decoration: none; transition: all 0.3s ease; display: block;" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 12px 30px rgba(245, 158, 11, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">üçΩÔ∏è</div>
                                    <h4 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Restaurant Guide by Budget</h4>
                                    <p style="font-size: 0.9rem; opacity: 0.9; margin: 0;">Budget eats to fine dining experiences</p>
                                </a>
                                
                                <a href="#" onclick="scrollToSection('queenstown-guide'); return false;" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 1.5rem; border-radius: 15px; text-decoration: none; transition: all 0.3s ease; display: block;" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 12px 30px rgba(16, 185, 129, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">üèîÔ∏è</div>
                                    <h4 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Queenstown Day Trip Planner</h4>
                                    <p style="font-size: 0.9rem; opacity: 0.9; margin: 0;">Perfect 55-minute adventure to NZ's playground</p>
                                </a>
                                
                                <a href="#" onclick="scrollToSection('wanaka-guide'); return false;" style="background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%); color: white; padding: 1.5rem; border-radius: 15px; text-decoration: none; transition: all 0.3s ease; display: block;" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 12px 30px rgba(14, 165, 233, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">üåä</div>
                                    <h4 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Wanaka Day Trip Planner</h4>
                                    <p style="font-size: 0.9rem; opacity: 0.9; margin: 0;">Perfect 30-minute drive to alpine adventures</p>
                                </a>
                                
                                
                                <a href="#" onclick="scrollToSection('winery-guide'); return false;" style="background: linear-gradient(135deg, #ec4899 0%, #be185d 100%); color: white; padding: 1.5rem; border-radius: 15px; text-decoration: none; transition: all 0.3s ease; display: block;" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 12px 30px rgba(236, 72, 153, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">üå∏</div>
                                    <h4 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Seasonal Activities Calendar</h4>
                                    <p style="font-size: 0.9rem; opacity: 0.9; margin: 0;">Best activities for each season & weather</p>
                                </a>
                                
                                <a href="#" onclick="scrollToSection('photography-guide'); return false;" style="background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%); color: white; padding: 1.5rem; border-radius: 15px; text-decoration: none; transition: all 0.3s ease; display: block;" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 12px 30px rgba(109, 40, 217, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">üì∏</div>
                                    <h4 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Photography Spots Guide</h4>
                                    <p style="font-size: 0.9rem; opacity: 0.9; margin: 0;">Instagram-worthy locations around Lake Dunstan</p>
                                </a>
                                
                                <a href="#" onclick="scrollToSection('cycle-guide'); return false;" style="background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%); color: white; padding: 1.5rem; border-radius: 15px; text-decoration: none; transition: all 0.3s ease; display: block;" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 12px 30px rgba(6, 182, 212, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">üö¥</div>
                                    <h4 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Central Otago Rail Trail Guide</h4>
                                    <p style="font-size: 0.9rem; opacity: 0.9; margin: 0;">Historic 150km trail with vineyard stops</p>
                                </a>
                                
                                <a href="#" onclick="scrollToSection('solar-guide'); return false;" style="background: linear-gradient(135deg, #16a34a 0%, #15803d 100%); color: white; padding: 1.5rem; border-radius: 15px; text-decoration: none; transition: all 0.3s ease; display: block;" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 12px 30px rgba(22, 163, 74, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">‚ö°</div>
                                    <h4 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Commercial-Grade Solar Journey</h4>
                                    <p style="font-size: 0.9rem; opacity: 0.9; margin: 0;">Our 16.72kW renewable energy story</p>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="section">
                <div class="container">
                    <div class="section-header">
                        <h2 class="section-title">Local Expertise & Energy Innovation</h2>
                        <p class="section-subtitle">Comprehensive guides from your hosts Stephen & Sandy, combining local knowledge with renewable energy expertise</p>
                        <div style="text-align: center; margin: 1rem 0;">
                            <a href="#" onclick="showPage('explore')" style="color: var(--brand-teal); text-decoration: none; font-weight: 500; padding: 0.5rem 1rem; border: 1px solid var(--brand-teal); border-radius: 25px; display: inline-block; transition: all 0.3s ease;" onmouseover="this.style.background='var(--brand-teal)'; this.style.color='white'" onmouseout="this.style.background='transparent'; this.style.color='var(--brand-teal)'">‚Üê Back to Location & Activities Overview</a>
                        </div>
                    </div>
                    
                    <!-- Collapsible Guide Sections -->
                    <div style="max-width: 1200px; margin: 0 auto; padding: 2rem 0;">
                        <!-- Restaurant Guide by Budget -->
                        <div class="guide-item" id="restaurant-guide" style="background: white; border-radius: 15px; margin-bottom: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); overflow: hidden; border: 1px solid #e5e7eb;">
                            <div class="guide-header" onclick="toggleGuide(this)" style="padding: 1.8rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%); user-select: none; transition: all 0.3s ease;" onmouseover="this.style.background='linear-gradient(135deg, #fed7aa 0%, #fdba74 100%)'" onmouseout="this.style.background='linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%)'">
                                <div style="flex: 1;">
                                    <h3 style="color: #f59e0b; margin: 0 0 0.5rem 0; font-size: 1.4rem; display: flex; align-items: center; gap: 0.5rem;">
                                        <span style="font-size: 1.6rem;">üçΩÔ∏è</span>
                                        Restaurant Guide by Budget
                                    </h3>
                                    <p style="color: #6b7280; margin: 0; font-size: 0.95rem;">Budget eats to fine dining experiences - Stephen & Sandy's 5 years of local dining</p>
                                </div>
                                <span class="guide-arrow" style="font-size: 1.5rem; color: #f59e0b; transition: transform 0.3s ease;">‚ñº</span>
                            </div>
                            <div class="guide-content" style="max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out;">
                                <div style="padding: 2rem; border-top: 1px solid #e5e7eb;">
                                
                                <!-- BUDGET FRIENDLY ($10-25) -->
                                <div style="background: rgba(34, 197, 94, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #22c55e;">
                                    <h4 style="color: #22c55e; margin-bottom: 0.8rem; font-size: 1rem;">üíö BUDGET FRIENDLY ($10-25)</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>Cromwell (10min drive):</strong><br>
                                        ‚Ä¢ <strong>Cromwell Bakery</strong> - Famous pies, fresh sandwiches, local favorite<br>
                                        ‚Ä¢ <strong>Thai Siam</strong> - Authentic Thai, great portions, BYO wine<br>
                                        ‚Ä¢ <strong>Subway Central Otago</strong> - Reliable, quick, healthy options<br><br>
                                        
                                        <strong>Bannockburn (5min drive):</strong><br>
                                        ‚Ä¢ <strong>Bannockburn General Store</strong> - Gourmet sandwiches, local produce<br>
                                        ‚Ä¢ <strong>Saddlers Arms Pub</strong> - Hearty pub meals, local atmosphere
                                    </div>
                                </div>
                                
                                <!-- MID-RANGE ($25-50) -->
                                <div style="background: rgba(251, 191, 36, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #fbbf24;">
                                    <h4 style="color: #f59e0b; margin-bottom: 0.8rem; font-size: 1rem;">üß° MID-RANGE ($25-50)</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>Cromwell:</strong><br>
                                        ‚Ä¢ <strong>The Load of Mischief</strong> - Gastropub, craft beer, wood-fired pizza<br>
                                        ‚Ä¢ <strong>Grain & Seed Cafe</strong> - All-day dining, great coffee, healthy options<br>
                                        ‚Ä¢ <strong>Armchair Cinema Cafe</strong> - Unique dine-in cinema experience<br><br>
                                        
                                        <strong>Bannockburn:</strong><br>
                                        ‚Ä¢ <strong>Carrick Winery Restaurant</strong> - Vineyard dining, seasonal menu<br>
                                        ‚Ä¢ <strong>Mt Difficulty Restaurant</strong> - Award-winning cellar door dining
                                    </div>
                                </div>
                                
                                <!-- FINE DINING ($50+) -->
                                <div style="background: rgba(236, 72, 153, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #ec4899;">
                                    <h4 style="color: #ec4899; margin-bottom: 0.8rem; font-size: 1rem;">üíñ FINE DINING ($50+)</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>Special Occasion Dining:</strong><br>
                                        ‚Ä¢ <strong>Aurum Restaurant</strong> - Award-winning fine dining, wine matching<br>
                                        ‚Ä¢ <strong>Gibbston Valley Winery</strong> - Premium dining, cave tours (25min drive)<br>
                                        ‚Ä¢ <strong>Felton Road Cellar Door</strong> - Exclusive tastings with food matching<br><br>
                                        
                                        <strong>Booking Essential:</strong><br>
                                        ‚Ä¢ Peak season (Dec-Mar): Book 2-3 days ahead<br>
                                        ‚Ä¢ Harvest season (Mar-Apr): Book 1 week ahead<br>
                                        ‚Ä¢ Weekend dinners: Always book ahead
                                    </div>
                                </div>
                                
                                <!-- INSIDER TIPS -->
                                <div style="background: #e0f2fe; border: 1px solid #0ea5e9; padding: 1rem; border-radius: 10px; margin: 1.5rem 0;">
                                    <div style="font-weight: 600; color: #0c4a6e; margin-bottom: 0.5rem;">üí° Host Insider Tips:</div>
                                    <div style="font-size: 0.85rem; color: #0c4a6e; line-height: 1.5;">
                                        ‚Ä¢ <strong>BYO Wine:</strong> Most restaurants allow BYO with small corkage fee<br>
                                        ‚Ä¢ <strong>Local Produce:</strong> Summer stone fruit, winter game meats are specialties<br>
                                        ‚Ä¢ <strong>Early Bird Specials:</strong> Many places offer 5:30-6:30pm specials<br>
                                        ‚Ä¢ <strong>Lunch Deals:</strong> Often better value than dinner at same venues<br>
                                        ‚Ä¢ <strong>Food Trucks:</strong> Check Cromwell events - amazing gourmet trucks visit
                                    </div>
                                </div>
                                
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="color: var(--brand-teal); font-size: 0.9rem; font-weight: 500;">8 min read ‚Ä¢ Restaurant Guide ‚Ä¢ 500+ Local Meals</span>
                                </div>
                                </div>
                            </div>
                        </div>

                        <!-- Photography Spots Guide -->
                        <div class="guide-item" id="photography-guide" style="background: white; border-radius: 15px; margin-bottom: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); overflow: hidden; border: 1px solid #e5e7eb;">
                            <div class="guide-header" onclick="toggleGuide(this)" style="padding: 1.8rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%); user-select: none; transition: all 0.3s ease;" onmouseover="this.style.background='linear-gradient(135deg, #e9d5ff 0%, #ddd6fe 100%)'" onmouseout="this.style.background='linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)'">
                                <div style="flex: 1;">
                                    <h3 style="color: #8b5cf6; margin: 0 0 0.5rem 0; font-size: 1.4rem; display: flex; align-items: center; gap: 0.5rem;">
                                        <span style="font-size: 1.6rem;">üì∏</span>
                                        Photography Spots Guide
                                    </h3>
                                    <p style="color: #6b7280; margin: 0; font-size: 0.95rem;">Instagram-worthy locations around Lake Dunstan - Stephen & Sandy's 5 years of hosting photographers</p>
                                </div>
                                <span class="guide-arrow" style="font-size: 1.5rem; color: #8b5cf6; transition: transform 0.3s ease;">‚ñº</span>
                            </div>
                            <div class="guide-content" style="max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out;">
                                <div style="padding: 2rem; border-top: 1px solid #e5e7eb;">
                                
                                <!-- SUNRISE & GOLDEN HOUR -->
                                <div style="background: rgba(168, 85, 247, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #8b5cf6;">
                                    <h4 style="color: #8b5cf6; margin-bottom: 0.8rem; font-size: 1rem;">üåÖ SUNRISE & GOLDEN HOUR SPOTS</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>From Your Accommodation (0-5min walk):</strong><br>
                                        ‚Ä¢ <strong>Lake Dunstan Shoreline</strong> - Mirror reflections, accessible path<br>
                                        ‚Ä¢ <strong>Vineyard Rows</strong> - Leading lines through morning mist<br>
                                        ‚Ä¢ <strong>Dome Skylight Views</strong> - Shoot from inside looking out<br><br>
                                        
                                        <strong>Elevated Views (10-15min drive):</strong><br>
                                        ‚Ä¢ <strong>Bendigo Historic Reserve</strong> - Valley overview, mountain backdrop<br>
                                        ‚Ä¢ <strong>Mt Difficulty Lookout</strong> - Classic Central Otago panorama
                                    </div>
                                </div>
                                
                                <!-- LAKE & WATER SHOTS -->
                                <div style="background: rgba(34, 197, 94, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #22c55e;">
                                    <h4 style="color: #22c55e; margin-bottom: 0.8rem; font-size: 1rem;">üèûÔ∏è LAKE & WATER PHOTOGRAPHY</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>Lake Dunstan Access Points:</strong><br>
                                        ‚Ä¢ <strong>Property Beach Access</strong> - Private shoreline, boat ramp nearby<br>
                                        ‚Ä¢ <strong>Cromwell Marina</strong> - 10min drive, jetty compositions<br>
                                        ‚Ä¢ <strong>Lowburn Inlet</strong> - 15min, shallow reflections, mountain backdrop<br><br>
                                        
                                        <strong>Seasonal Water Features:</strong><br>
                                        ‚Ä¢ <strong>Spring Fed Streams</strong> - Year-round flow through vineyard<br>
                                        ‚Ä¢ <strong>Irrigation Channels</strong> - Geometric lines, agricultural patterns<br>
                                        ‚Ä¢ <strong>Winter Ice Formations</strong> - Shoreline crystals (June-August)
                                    </div>
                                </div>
                                
                                <!-- INSTAGRAM HOTSPOTS -->
                                <div style="background: rgba(251, 191, 36, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #fbbf24;">
                                    <h4 style="color: #f59e0b; margin-bottom: 0.8rem; font-size: 1rem;">üì± INSTAGRAM HOTSPOTS</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>Most Tagged Locations:</strong><br>
                                        ‚Ä¢ <strong>Cromwell Heritage Precinct</strong> - Historic buildings, 10min drive<br>
                                        ‚Ä¢ <strong>Bendigo Station Woolshed</strong> - Rustic architecture, 15min<br>
                                        ‚Ä¢ <strong>Kawarau Gorge Bridge</strong> - World's first bungy, 25min<br><br>
                                        
                                        <strong>Hidden Gems (Guest Discoveries):</strong><br>
                                        ‚Ä¢ <strong>Old Cromwell Town</strong> - Submerged ruins visible in low water<br>
                                        ‚Ä¢ <strong>Vineyard Swing Chair</strong> - At property, perfect framing<br>
                                        ‚Ä¢ <strong>Solar Panel Reflections</strong> - Modern agriculture meets tech
                                    </div>
                                </div>
                                
                                <!-- SEASONAL VARIATIONS -->
                                <div style="background: #FAF4F5; padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
                                    <h4 style="color: var(--brand-teal); margin-bottom: 0.8rem; font-size: 1rem;">üìÖ SEASONAL PHOTOGRAPHY</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>Autumn (Mar-May) - Most Popular:</strong><br>
                                        ‚Ä¢ <strong>Golden Vineyard Rows</strong> - Peak color late April<br>
                                        ‚Ä¢ <strong>Lake Reflections</strong> - Calm conditions, mirror shots<br><br>
                                        
                                        <strong>Spring (Sep-Nov) - Wildflowers:</strong><br>
                                        ‚Ä¢ <strong>Blossom Season</strong> - Stone fruit orchards nearby<br>
                                        ‚Ä¢ <strong>Lupins & Poppies</strong> - Roadside displays<br>
                                        ‚Ä¢ <strong>Snow-Capped Mountains</strong> - Clear air, dramatic backdrop
                                    </div>
                                </div>
                                
                                <!-- PRO PHOTOGRAPHY TIPS -->
                                <div style="background: #fef3c7; border: 1px solid #f59e0b; padding: 1rem; border-radius: 10px; margin: 1rem 0;">
                                    <div style="font-weight: 600; color: #92400e; margin-bottom: 0.5rem;">üì∏ Pro Tips from 500+ Guest Photos:</div>
                                    <div style="font-size: 0.85rem; color: #92400e; line-height: 1.5;">
                                        ‚Ä¢ <strong>Golden Hour:</strong> 6:30-7:30am & 7:30-8:30pm (summer)<br>
                                        ‚Ä¢ <strong>Weather Apps:</strong> MetService NZ, Windy.com for conditions<br>
                                        ‚Ä¢ <strong>Drone Rules:</strong> No-fly zones near airports, check AirShare NZ<br>
                                        ‚Ä¢ <strong>Lake Access:</strong> Public walkways marked, respect private property<br>
                                        ‚Ä¢ <strong>Best Gear:</strong> Wide-angle for landscapes, polarizing filter essential
                                    </div>
                                </div>
                                
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="color: var(--brand-teal); font-size: 0.9rem; font-weight: 500;">4 min read ‚Ä¢ Photography Guide ‚Ä¢ 500+ Guest Photos</span>
                                </div>
                                </div>
                            </div>
                        </div>

                        <!-- Seasonal Activities Calendar -->
                        <div class="guide-item" id="winery-guide" style="background: white; border-radius: 15px; margin-bottom: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); overflow: hidden; border: 1px solid #e5e7eb;">
                            <div class="guide-header" onclick="toggleGuide(this)" style="padding: 1.8rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%); user-select: none; transition: all 0.3s ease;" onmouseover="this.style.background='linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%)'" onmouseout="this.style.background='linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%)'">
                                <div style="flex: 1;">
                                    <h3 style="color: #ec4899; margin: 0 0 0.5rem 0; font-size: 1.4rem; display: flex; align-items: center; gap: 0.5rem;">
                                        <span style="font-size: 1.6rem;">üå∏</span>
                                        Seasonal Activities Calendar
                                    </h3>
                                    <p style="color: #6b7280; margin: 0; font-size: 0.95rem;">Best activities for each season & weather - Stephen & Sandy's 5 years of hosting seasonal guests</p>
                                </div>
                                <span class="guide-arrow" style="font-size: 1.5rem; color: #ec4899; transition: transform 0.3s ease;">‚ñº</span>
                            </div>
                            <div class="guide-content" style="max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out;">
                                <div style="padding: 2rem; border-top: 1px solid #e5e7eb;">
                                
                                <!-- SUMMER (DEC-FEB) -->
                                <div style="background: rgba(251, 191, 36, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #fbbf24;">
                                    <h4 style="color: #f59e0b; margin-bottom: 0.8rem; font-size: 1rem;">‚òÄÔ∏è SUMMER (Dec-Feb) - Peak Season</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>Perfect Weather Activities:</strong><br>
                                        ‚Ä¢ <strong>Lake Dunstan Swimming & Kayaking</strong> - Warm water, boat ramp access<br>
                                        ‚Ä¢ <strong>Central Otago Rail Trail</strong> - Peak conditions, caf√© stops open<br>
                                        ‚Ä¢ <strong>Evening Wine Tasting</strong> - Extended daylight until 9:30pm<br>
                                        ‚Ä¢ <strong>Outdoor Dining</strong> - All restaurants offer al fresco options<br><br>
                                        
                                        <strong>Weather Pattern:</strong> 25-30¬∞C days, 10-15¬∞C nights, minimal rain<br>
                                        <strong>What to Pack:</strong> Sun protection, light layers, swimwear
                                    </div>
                                </div>
                                
                                <!-- AUTUMN (MAR-MAY) -->
                                <div style="background: rgba(236, 72, 153, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #ec4899;">
                                    <h4 style="color: #ec4899; margin-bottom: 0.8rem; font-size: 1rem;">üçÇ AUTUMN (Mar-May) - Most Beautiful</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>Signature Autumn Experiences:</strong><br>
                                        ‚Ä¢ <strong>Harvest Season Wine Tours</strong> - Watch grape picking, tastings<br>
                                        ‚Ä¢ <strong>Golden Photography Walks</strong> - Vineyard colors peak in April<br>
                                        ‚Ä¢ <strong>Comfortable Cycling</strong> - Perfect temperatures, clear skies<br>
                                        ‚Ä¢ <strong>Outdoor Spa Sessions</strong> - Crisp air, mountain views<br><br>
                                        
                                        <strong>Weather Pattern:</strong> 15-25¬∞C days, 2-8¬∞C nights, stable conditions<br>
                                        <strong>What to Pack:</strong> Layers for temperature changes, jacket for evenings
                                    </div>
                                </div>

                                <!-- WINTER (JUN-AUG) -->
                                <div style="background: rgba(34, 197, 94, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #22c55e;">
                                    <h4 style="color: #22c55e; margin-bottom: 0.8rem; font-size: 1rem;">‚ùÑÔ∏è WINTER (Jun-Aug) - Cozy Season</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>Winter Luxury Activities:</strong><br>
                                        ‚Ä¢ <strong>Hot Spa Under Stars</strong> - Clear nights, Milky Way visible<br>
                                        ‚Ä¢ <strong>Fireplace Wine Tasting</strong> - Indoor comfort, cellar door visits<br>
                                        ‚Ä¢ <strong>Queenstown Ski Day Trips</strong> - 1 hour to ski fields<br>
                                        ‚Ä¢ <strong>Photography - Snow Mountains</strong> - Crystal clear air, dramatic shots<br><br>
                                        
                                        <strong>Weather Pattern:</strong> 5-15¬∞C days, -5 to 2¬∞C nights, occasional frost<br>
                                        <strong>What to Pack:</strong> Warm clothes, thermal layers, waterproof jacket
                                    </div>
                                </div>
                                
                                <!-- SPRING (SEP-NOV) -->
                                <div style="background: rgba(168, 85, 247, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #8b5cf6;">
                                    <h4 style="color: #8b5cf6; margin-bottom: 0.8rem; font-size: 1rem;">üå± SPRING (Sep-Nov) - Renewal Season</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>Spring Discovery Activities:</strong><br>
                                        ‚Ä¢ <strong>Wildflower Photography</strong> - Lupins, poppies on roadsides<br>
                                        ‚Ä¢ <strong>Blossom Tours</strong> - Stone fruit orchards nearby<br>
                                        ‚Ä¢ <strong>Mild Weather Cycling</strong> - Comfortable temperatures return<br>
                                        ‚Ä¢ <strong>Early Morning Lake Walks</strong> - Mist on water, serene conditions<br><br>
                                        
                                        <strong>Weather Pattern:</strong> 10-20¬∞C days, 0-8¬∞C nights, changeable<br>
                                        <strong>What to Pack:</strong> Versatile layers, rain jacket, warm mornings/evenings
                                    </div>
                                </div>
                                
                                <!-- WEATHER INSIDER TIPS -->
                                <div style="background: #fef3c7; border: 1px solid #f59e0b; padding: 1rem; border-radius: 10px; margin: 1rem 0;">
                                    <div style="font-weight: 600; color: #92400e; margin-bottom: 0.5rem;">üå¶Ô∏è Weather Tips from 500+ Guest Experiences:</div>
                                    <div style="font-size: 0.85rem; color: #92400e; line-height: 1.5;">
                                        ‚Ä¢ <strong>Central Otago Climate:</strong> Continental - hot summers, cold winters, low rainfall<br>
                                        ‚Ä¢ <strong>Daily Range:</strong> 15¬∞C+ temperature swings common year-round<br>
                                        ‚Ä¢ <strong>Best Apps:</strong> MetService NZ, Windy.com for local conditions<br>
                                        ‚Ä¢ <strong>UV Alert:</strong> High altitude = intense sun even in winter<br>
                                        ‚Ä¢ <strong>Microclimates:</strong> Lake moderates temperature, hills create wind patterns
                                    </div>
                                </div>
                                
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="color: var(--brand-teal); font-size: 0.9rem; font-weight: 500;">5 min read ‚Ä¢ Seasonal Guide ‚Ä¢ 500+ Guest Experiences</span>
                                </div>
                                </div>
                            </div>
                        </div>

                        <!-- Solar Journey Guide -->
                        <div class="guide-item" id="solar-guide" style="background: white; border-radius: 15px; margin-bottom: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); overflow: hidden; border: 1px solid #e5e7eb;">
                            <div class="guide-header" onclick="toggleGuide(this)" style="padding: 1.8rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%); user-select: none; transition: all 0.3s ease;" onmouseover="this.style.background='linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%)'" onmouseout="this.style.background='linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)'">
                                <div style="flex: 1;">
                                    <h3 style="color: #16a34a; margin: 0 0 0.5rem 0; font-size: 1.4rem; display: flex; align-items: center; gap: 0.5rem;">
                                        <span style="font-size: 1.6rem;">‚ö°</span>
                                        Commercial-Grade Solar: Our 16.72kW Journey
                                    </h3>
                                    <p style="color: #6b7280; margin: 0; font-size: 0.95rem;">From I.T. professional to renewable energy designer - Sandy's technical story</p>
                                </div>
                                <span class="guide-arrow" style="font-size: 1.5rem; color: #16a34a; transition: transform 0.3s ease;">‚ñº</span>
                            </div>
                            <div class="guide-content" style="max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out;">
                                <div style="padding: 2rem; border-top: 1px solid #e5e7eb;">
                                    <p style="line-height: 1.8; margin-bottom: 1.5rem;">From I.T. professional to renewable energy designer - Sandy's technical story of achieving commercial-grade energy independence while maintaining five-star comfort.</p>
                                    
                                    <div style="background: rgba(16, 185, 129, 0.05); padding: 1.5rem; border-radius: 10px; margin: 1.5rem 0;">
                                        <h4 style="color: #16a34a; margin-bottom: 1rem;">System Specifications:</h4>
                                        <ul style="line-height: 1.8; color: #374151;">
                                            <li><strong>Solar Array:</strong> 38 x 440W Helios panels (16.72kW total)</li>
                                            <li><strong>Battery Storage:</strong> 16kWh Signergy lithium batteries</li>
                                            <li><strong>Inverter:</strong> 20kW hybrid inverter system</li>
                                            <li><strong>Monitoring:</strong> Real-time production & consumption tracking</li>
                                            <li><strong>Daily Generation:</strong> 60-80kWh summer, 30-40kWh winter</li>
                                            <li><strong>Grid Independence:</strong> 95%+ off-grid operation achieved</li>
                                        </ul>
                                    </div>
                                    
                                    <div style="background: #fef3c7; border: 1px solid #f59e0b; padding: 1rem; border-radius: 10px; margin: 1.5rem 0;">
                                        <div style="font-weight: 600; color: #92400e; margin-bottom: 0.5rem;">üí° Key Innovations:</div>
                                        <div style="font-size: 0.9rem; color: #92400e; line-height: 1.6;">
                                            ‚Ä¢ Custom mounting system for NZ wind conditions<br>
                                            ‚Ä¢ Smart load management for luxury amenities<br>
                                            ‚Ä¢ Weather-predictive battery charging algorithms<br>
                                            ‚Ä¢ Guest education dashboard in each accommodation<br>
                                            ‚Ä¢ Net-positive energy generation year-round
                                        </div>
                                    </div>
                                    
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                        <span style="color: #16a34a; font-size: 0.9rem; font-weight: 500;">12 min read ‚Ä¢ Technology Deep Dive</span>
                                        <span style="background: #10b981; color: white; padding: 0.3rem 0.8rem; border-radius: 15px; font-size: 0.8rem; font-weight: 600;">‚úÖ TECH GUIDE</span>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <!-- Winery Guide -->
                        <div class="guide-item" id="winery-guide" style="background: white; border-radius: 15px; margin-bottom: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); overflow: hidden; border: 1px solid #e5e7eb;">
                            <div class="guide-header" onclick="toggleGuide(this)" style="padding: 1.8rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%); user-select: none; transition: all 0.3s ease;" onmouseover="this.style.background='linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)'" onmouseout="this.style.background='linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%)'">
                                <div style="flex: 1;">
                                    <h3 style="color: #7c3aed; margin: 0 0 0.5rem 0; font-size: 1.4rem; display: flex; align-items: center; gap: 0.5rem;">
                                        <span style="font-size: 1.6rem;">üç∑</span>
                                        10 Best Wineries Within 15 Minutes
                                    </h3>
                                    <p style="color: #6b7280; margin: 0; font-size: 0.95rem;">Your insider guide to Central Otago's premier cellar doors</p>
                                </div>
                                <span class="guide-arrow" style="font-size: 1.5rem; color: #7c3aed; transition: transform 0.3s ease;">‚ñº</span>
                            </div>
                            <div class="guide-content" style="max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out;">
                                <div style="padding: 2rem; border-top: 1px solid #e5e7eb;">
                                
                                <!-- WALKING DISTANCE (0-5 MIN) -->
                                <div style="background: rgba(139, 92, 246, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
                                    <h4 style="color: #8b5cf6; margin-bottom: 0.8rem; font-size: 1rem;">üö∂ Walking Distance (0-5 minutes)</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>1. Rippon Vineyard</strong> - 5min walk<br>
                                        <em>Biodynamic pioneer, stunning lake views, $25 tastings</em><br>
                                        <span style="opacity: 0.8;">üïê Open: 11am-5pm daily | üìû Book ahead in summer</span>
                                        <br><br>
                                        <strong>2. Mt Difficulty Wines</strong> - 8min walk<br>
                                        <em>Award-winning Pinot Noir, restaurant on-site, $15 tastings</em><br>
                                        <span style="opacity: 0.8;">üïê Open: 10:30am-5pm daily | üçΩÔ∏è Lunch bookings essential</span>
                                    </div>
                                </div>
                                
                                <!-- CLOSE DRIVE (5-10 MIN) -->
                                <div style="background: rgba(139, 92, 246, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
                                    <h4 style="color: #8b5cf6; margin-bottom: 0.8rem; font-size: 1rem;">üöó Short Drive (5-10 minutes)</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>3. Bannockburn Wineries Precinct</strong><br>
                                        ‚Ä¢ <strong>Felton Road</strong> - Premium Pinot, $30 tastings, appointment only<br>
                                        ‚Ä¢ <strong>Bannockburn Vineyards</strong> - Historic site, $20 tastings<br>
                                        ‚Ä¢ <strong>Carrick Winery</strong> - Stunning views, restaurant, $25 tastings<br><br>
                                        
                                        <strong>4. Two Paddocks</strong> - Sam Neill's winery<br>
                                        <em>Celebrity owner, excellent Pinot, $25 tastings</em><br>
                                        <span style="opacity: 0.8;">üé¨ Movie memorabilia, scenic drive</span>
                                    </div>
                                </div>
                                
                                <!-- CROMWELL AREA (10-15 MIN) -->
                                <div style="background: rgba(139, 92, 246, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
                                    <h4 style="color: #8b5cf6; margin-bottom: 0.8rem; font-size: 1rem;">üõ£Ô∏è Cromwell Area (10-15 minutes)</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>5. Wooing Tree Vineyard</strong><br>
                                        <em>Family-owned, lake views, $20 tastings, dog-friendly</em><br><br>
                                        
                                        <strong>6. Jackson Orchard</strong><br>
                                        <em>Fruit wines & stone fruit tastings, unique experience</em><br><br>
                                        
                                        <strong>7. Brennan Wines</strong><br>
                                        <em>Boutique producer, intimate tastings by appointment</em>
                                    </div>
                                </div>
                                
                                <!-- INSIDER TIPS -->
                                <div style="background: #fef3c7; border: 1px solid #f59e0b; padding: 1rem; border-radius: 10px; margin: 1rem 0;">
                                    <div style="font-weight: 600; color: #92400e; margin-bottom: 0.5rem;">üí° Insider Tips from Stephen & Sandy:</div>
                                    <div style="font-size: 0.85rem; color: #92400e; line-height: 1.5;">
                                        ‚Ä¢ <strong>Best Time:</strong> 2-4pm for optimal tasting conditions<br>
                                        ‚Ä¢ <strong>Harvest Season:</strong> March-April for special harvest experiences<br>
                                        ‚Ä¢ <strong>Booking:</strong> Always call ahead in summer (Dec-Feb)<br>
                                        ‚Ä¢ <strong>Designated Driver:</strong> We can recommend local wine tour companies<br>
                                        ‚Ä¢ <strong>Purchase:</strong> Many offer delivery to your accommodation
                                    </div>
                                </div>
                                
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="color: var(--brand-teal); font-size: 0.9rem; font-weight: 500;">5 min read ‚Ä¢ Wine Country ‚Ä¢ Guest Tested</span>
                                </div>
                                </div>
                            </div>
                        </div>

                        <!-- Queenstown Day Trip Guide -->
                        <div class="guide-item" id="queenstown-guide" style="background: white; border-radius: 15px; margin-bottom: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); overflow: hidden; border: 1px solid #e5e7eb;">
                            <div class="guide-header" onclick="toggleGuide(this)" style="padding: 1.8rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); user-select: none; transition: all 0.3s ease;" onmouseover="this.style.background='linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%)'" onmouseout="this.style.background='linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)'">
                                <div style="flex: 1;">
                                    <h3 style="color: #0284c7; margin: 0 0 0.5rem 0; font-size: 1.4rem; display: flex; align-items: center; gap: 0.5rem;">
                                        <span style="font-size: 1.6rem;">üèîÔ∏è</span>
                                        Queenstown Day Trip Planner
                                    </h3>
                                    <p style="color: #6b7280; margin: 0; font-size: 0.95rem;">Experience Queenstown's thrills then return to peaceful luxury</p>
                                </div>
                                <span class="guide-arrow" style="font-size: 1.5rem; color: #0284c7; transition: transform 0.3s ease;">‚ñº</span>
                            </div>
                            <div class="guide-content" style="max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out;">
                                <div style="padding: 2rem; border-top: 1px solid #e5e7eb;">
                                
                                <!-- MORNING DEPARTURE -->
                                <div style="background: rgba(6, 182, 212, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #06b6d4;">
                                    <h4 style="color: #06b6d4; margin-bottom: 0.8rem; font-size: 1rem;">üåÖ MORNING (Leave 8-9am)</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>Drive Time:</strong> 55 minutes via SH6 (scenic route)<br>
                                        <strong>Fuel Stop:</strong> Cromwell (10min) - cheapest prices<br>
                                        <strong>Breakfast Option:</strong> Arrowtown (45min) - Fork & Tap<br>
                                        <strong>Parking:</strong> Wilson's Parking or Remarkables Park (free)
                                    </div>
                                </div>
                                
                                <!-- ACTIVITY OPTIONS -->
                                <div style="background: rgba(6, 182, 212, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
                                    <h4 style="color: #06b6d4; margin-bottom: 0.8rem; font-size: 1rem;">‚ö° ACTIVITIES (Choose 1-2)</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>üöÅ MUST-DO THRILLS:</strong><br>
                                        ‚Ä¢ <strong>AJ Hackett Bungy</strong> - Original Kawarau Bridge, $205<br>
                                        ‚Ä¢ <strong>Shotover Jet</strong> - 360¬∞ spins, narrow canyons, $145<br>
                                        ‚Ä¢ <strong>Skyline Gondola + Luge</strong> - Views + fun, $65-85<br><br>
                                        
                                        <strong>üéÜ ADRENALINE RUSH:</strong><br>
                                        ‚Ä¢ <strong>Skydiving</strong> - Incredible views, $299-599<br>
                                        ‚Ä¢ <strong>White Water Rafting</strong> - Shotover River, $185<br>
                                        ‚Ä¢ <strong>Zipline</strong> - Ziptrek Ecotours, $119-179<br><br>
                                        
                                        <strong>üåÑ SCENIC OPTIONS:</strong><br>
                                        ‚Ä¢ <strong>TSS Earnslaw Steamship</strong> - Historic cruise, $65<br>
                                        ‚Ä¢ <strong>Arrowtown Historic Walk</strong> - Gold rush town, free<br>
                                        ‚Ä¢ <strong>Queenstown Gardens</strong> - Lakefront walk, free
                                    </div>
                                </div>
                                
                                <!-- LUNCH & AFTERNOON -->
                                <div style="background: rgba(6, 182, 212, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
                                    <h4 style="color: #06b6d4; margin-bottom: 0.8rem; font-size: 1rem;">üçΩÔ∏è LUNCH (12-2pm)</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>Waterfront Dining:</strong><br>
                                        ‚Ä¢ <strong>Fishbone Bar & Grill</strong> - Seafood, lake views<br>
                                        ‚Ä¢ <strong>The Bunker</strong> - Upscale (book ahead)<br><br>
                                        
                                        <strong>Casual & Quick:</strong><br>
                                        ‚Ä¢ <strong>Ferg Burger</strong> - Famous burgers (expect queues)<br>
                                        ‚Ä¢ <strong>The Cow</strong> - Pizza & pasta, local institution<br>
                                        ‚Ä¢ <strong>Patagonia Chocolates</strong> - Ice cream & treats
                                    </div>
                                </div>
                                
                                <!-- RETURN JOURNEY -->
                                <div style="background: rgba(6, 182, 212, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
                                    <h4 style="color: #06b6d4; margin-bottom: 0.8rem; font-size: 1rem;">üåÜ RETURN (Leave 4-5pm)</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>Beat Traffic:</strong> Leave by 4:30pm to avoid congestion<br>
                                        <strong>Scenic Stop:</strong> Gibbston Valley - wine tasting<br>
                                        <strong>Dinner Option:</strong> Pick up takeaways for dome<br>
                                        <strong>Arrive Back:</strong> 6pm for spa & relaxation
                                    </div>
                                </div>
                                
                                <!-- MONEY SAVING TIPS -->
                                <div style="background: #fef3c7; border: 1px solid #f59e0b; padding: 1rem; border-radius: 10px; margin: 1rem 0;">
                                    <div style="font-weight: 600; color: #92400e; margin-bottom: 0.5rem;">üí∞ Money-Saving Strategy:</div>
                                    <div style="font-size: 0.85rem; color: #92400e; line-height: 1.5;">
                                        ‚Ä¢ <strong>Accommodation Savings:</strong> $200-400/night vs Queenstown hotels<br>
                                        ‚Ä¢ <strong>Activity Combos:</strong> Book bundles for 10-20% savings<br>
                                        ‚Ä¢ <strong>Off-Peak:</strong> Weekday activities often cheaper<br>
                                        ‚Ä¢ <strong>Fuel:</strong> Fill up in Cromwell (cheaper than Queenstown)<br>
                                        ‚Ä¢ <strong>Parking:</strong> Remarkables Park free + shuttle to town<br>
                                        ‚Ä¢ <strong>Early Bird:</strong> Some activities cheaper before 10am
                                    </div>
                                </div>
                                
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="color: var(--brand-teal); font-size: 0.9rem; font-weight: 500;">6 min read ‚Ä¢ Day Trip ‚Ä¢ Save $200-400/night</span>
                                </div>
                            </div>
                        </div>

                        <!-- Spacing between destination guides -->
                        <div style="margin: 1rem 0; text-align: center; opacity: 0.3;">
                            <div style="height: 1px; background: linear-gradient(to right, transparent, #e5e7eb, transparent); margin: 0 auto; max-width: 200px;"></div>
                        </div>

                        <!-- Wanaka Day Trip Guide -->
                        <div class="guide-item" id="wanaka-guide" style="background: white; border-radius: 15px; margin-bottom: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); overflow: hidden; border: 1px solid #e5e7eb;">
                            <div class="guide-header" onclick="toggleGuide(this)" style="padding: 1.8rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); user-select: none; transition: all 0.3s ease;" onmouseover="this.style.background='linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%)'" onmouseout="this.style.background='linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)'">
                                <div style="flex: 1;">
                                    <h3 style="color: #0ea5e9; margin: 0 0 0.5rem 0; font-size: 1.4rem; display: flex; align-items: center; gap: 0.5rem;">
                                        <span style="font-size: 1.6rem;">üåä</span>
                                        Wanaka Day Trip Planner
                                    </h3>
                                    <p style="color: #6b7280; margin: 0; font-size: 0.95rem;">Discover Wanaka's natural beauty and Instagram-famous spots in just 30 minutes away</p>
                                </div>
                                <span class="guide-arrow" style="font-size: 1.5rem; color: #0ea5e9; transition: transform 0.3s ease;">‚ñº</span>
                            </div>
                            <div class="guide-content" style="max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out;">
                                <div style="padding: 2rem; border-top: 1px solid #e5e7eb;">
                                
                                <!-- MORNING DEPARTURE -->
                                <div style="background: rgba(16, 185, 129, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #10b981;">
                                    <h4 style="color: #10b981; margin-bottom: 0.8rem; font-size: 1rem;">üåÖ MORNING (Leave 9-10am)</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>Drive Time:</strong> 30 minutes via Wanaka-Luggate Highway<br>
                                        <strong>Scenic Route:</strong> Take SH8 for vineyard views<br>
                                        <strong>First Stop:</strong> Wanaka i-SITE for maps & current conditions<br>
                                        <strong>Parking:</strong> Lakefront parking (free 120min) or Ardmore Street
                                    </div>
                                </div>
                                
                                <!-- MUST-DO ACTIVITIES -->
                                <div style="background: rgba(16, 185, 129, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
                                    <h4 style="color: #10b981; margin-bottom: 0.8rem; font-size: 1rem;">üì∏ MUST-DO ACTIVITIES</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>üå≥ THAT WANAKA TREE:</strong><br>
                                        ‚Ä¢ <strong>Location:</strong> Lake Wanaka foreshore (10min walk from town)<br>
                                        ‚Ä¢ <strong>Best Photos:</strong> Early morning or golden hour (6-8am or 5-7pm)<br>
                                        ‚Ä¢ <strong>Pro Tip:</strong> Bring waders for closer shots, respect barriers<br><br>
                                        
                                        <strong>üèîÔ∏è ROY'S PEAK TRACK:</strong><br>
                                        ‚Ä¢ <strong>Difficulty:</strong> Challenging - 5-6 hours return<br>
                                        ‚Ä¢ <strong>Start Early:</strong> 6am to avoid crowds & heat<br>
                                        ‚Ä¢ <strong>Shorter Option:</strong> Rocky Mountain track (2-3 hours)<br><br>
                                        
                                        <strong>üöÅ WANAKA TRANSPORT & TOYS:</strong><br>
                                        ‚Ä¢ <strong>Scenic Helicopter Flights</strong> - $299-599<br>
                                        ‚Ä¢ <strong>Lake Cruises</strong> - Eco Adventures, $45-75<br>
                                        ‚Ä¢ <strong>Kayak Hire</strong> - Lakeland Rentals, $35/half day
                                    </div>
                                </div>
                                
                                <!-- DINING OPTIONS -->
                                <div style="background: rgba(16, 185, 129, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
                                    <h4 style="color: #10b981; margin-bottom: 0.8rem; font-size: 1rem;">üçΩÔ∏è DINING (with Lakefront Views)</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>Lunch with a View:</strong><br>
                                        ‚Ä¢ <strong>Fisherman's Bar</strong> - Seafood, lakefront terrace, $25-40<br>
                                        ‚Ä¢ <strong>The Lake House</strong> - Upscale, book ahead, $35-55<br>
                                        ‚Ä¢ <strong>Kika</strong> - Modern bistro, busy but worth it, $28-45<br><br>
                                        
                                        <strong>Casual & Coffee:</strong><br>
                                        ‚Ä¢ <strong>Federal Diner</strong> - American-style, great burgers, $18-28<br>
                                        ‚Ä¢ <strong>Botswana Butchery</strong> - Steaks, special occasion, $45-75<br>
                                        ‚Ä¢ <strong>Patagonia Chocolates</strong> - Ice cream & treats, perfect for walks
                                    </div>
                                </div>
                                
                                <!-- AFTERNOON OPTIONS -->
                                <div style="background: rgba(16, 185, 129, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
                                    <h4 style="color: #10b981; margin-bottom: 0.8rem; font-size: 1rem;">üåÜ AFTERNOON CHOICES</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>Active Options:</strong><br>
                                        ‚Ä¢ <strong>Lakefront Walk</strong> - Easy 1-2 hours, sculptures & cafes<br>
                                        ‚Ä¢ <strong>Puzzling World</strong> - Quirky attraction, fun for families, $22<br>
                                        ‚Ä¢ <strong>Wanaka Lavender Farm</strong> - Seasonal (Dec-Feb), cafe & tours<br><br>
                                        
                                        <strong>Relaxed Options:</strong><br>
                                        ‚Ä¢ <strong>Local Markets</strong> - Saturday mornings (seasonal)<br>
                                        ‚Ä¢ <strong>Gallery Browsing</strong> - Multiple local art galleries<br>
                                        ‚Ä¢ <strong>Beer Tasting</strong> - Wanaka Beerworks, local craft brewery
                                    </div>
                                </div>
                                
                                <!-- RETURN STRATEGY -->
                                <div style="background: #fef3c7; border: 1px solid #f59e0b; padding: 1rem; border-radius: 10px; margin: 1rem 0;">
                                    <div style="font-weight: 600; color: #92400e; margin-bottom: 0.5rem;">üéÜ Perfect Return Strategy:</div>
                                    <div style="font-size: 0.85rem; color: #92400e; line-height: 1.5;">
                                        ‚Ä¢ <strong>Best Departure:</strong> 4-5pm to avoid traffic & enjoy golden hour drive<br>
                                        ‚Ä¢ <strong>Dinner Stop:</strong> Pick up Wanaka takeaways for dome dining<br>
                                        ‚Ä¢ <strong>Photo Stop:</strong> Vineyard sunset shots on drive back<br>
                                        ‚Ä¢ <strong>Evening Relaxation:</strong> Back by 5:30pm for spa & wine<br>
                                        ‚Ä¢ <strong>Weather Backup:</strong> Indoor activities if Roy's Peak closed<br>
                                        ‚Ä¢ <strong>Booking Advantage:</strong> Guaranteed accommodation vs packed Wanaka
                                    </div>
                                </div>
                                
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="color: var(--brand-teal); font-size: 0.9rem; font-weight: 500;">5 min read ‚Ä¢ Day Trip ‚Ä¢ That Wanaka Tree</span>
                                </div>
                                </div>
                            </div>
                        </div>

                        <!-- Central Otago Rail Trail Guide -->
                        <div class="guide-item" id="cycle-guide" style="background: white; border-radius: 15px; margin-bottom: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); overflow: hidden; border: 1px solid #e5e7eb;">
                            <div class="guide-header" onclick="toggleGuide(this)" style="padding: 1.8rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%); user-select: none; transition: all 0.3s ease;" onmouseover="this.style.background='linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%)'" onmouseout="this.style.background='linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%)'">
                                <div style="flex: 1;">
                                    <h3 style="color: #ec4899; margin: 0 0 0.5rem 0; font-size: 1.4rem; display: flex; align-items: center; gap: 0.5rem;">
                                        <span style="font-size: 1.6rem;">üö¥</span>
                                        Central Otago Rail Trail Guide
                                    </h3>
                                    <p style="color: #6b7280; margin: 0; font-size: 0.95rem;">Your complete guide to New Zealand's most famous cycle trail, starting just 300m from your accommodation</p>
                                </div>
                                <span class="guide-arrow" style="font-size: 1.5rem; color: #ec4899; transition: transform 0.3s ease;">‚ñº</span>
                            </div>
                            <div class="guide-content" style="max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out;">
                                <div style="padding: 2rem; border-top: 1px solid #e5e7eb;">
                                
                                <!-- TRAIL ACCESS -->
                                <div style="background: rgba(236, 72, 153, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #ec4899;">
                                    <h4 style="color: #ec4899; margin-bottom: 0.8rem; font-size: 1rem;">üè† From Your Accommodation</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>Access Point:</strong> 300m walk to Cromwell section<br>
                                        <strong>Trail Surface:</strong> Sealed and gravel, suitable for all fitness levels<br>
                                        <strong>Bike Storage:</strong> Secure storage at property<br>
                                        <strong>We Provide:</strong> Trail maps, tire pump, basic tools<br>
                                        <strong>Bike Hire:</strong> Cromwell (10min drive) or Clyde (15min)
                                    </div>
                                </div>
                                
                                <!-- POPULAR SECTIONS -->
                                <div style="background: rgba(236, 72, 153, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
                                    <h4 style="color: #ec4899; margin-bottom: 0.8rem; font-size: 1rem;">üéØ Most Popular Sections</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        <strong>1. Cromwell to Clyde (15km)</strong> - Easy, 1-2 hours<br>
                                        <em>Lake views, historic gold mining sites, caf√©s in Clyde</em><br><br>
                                        
                                        <strong>2. Clyde to Alexandra (33km)</strong> - Moderate, 2-4 hours<br>
                                        <em>Classic rail trail experience, Poolburn Gorge</em><br><br>
                                        
                                        <strong>3. Alexandra to Omakau (20km)</strong> - Easy-moderate, 1-3 hours<br>
                                        <em>Rural farmland, historic railway stations</em>
                                    </div>
                                </div>

                                <!-- WHAT TO BRING -->
                                <div style="background: rgba(236, 72, 153, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
                                    <h4 style="color: #ec4899; margin-bottom: 0.8rem; font-size: 1rem;">üéí Essential Items</h4>
                                    <div style="font-size: 0.9rem; line-height: 1.6;">
                                        ‚Ä¢ <strong>Water:</strong> 2+ litres for longer sections<br>
                                        ‚Ä¢ <strong>Sun Protection:</strong> Hat, sunglasses, sunscreen (high UV)<br>
                                        ‚Ä¢ <strong>Snacks:</strong> Energy bars, lunch for longer rides<br>
                                        ‚Ä¢ <strong>Layers:</strong> Weather changes quickly in Central Otago<br>
                                        ‚Ä¢ <strong>Phone:</strong> Download offline maps, emergency contact<br>
                                        ‚Ä¢ <strong>Cash:</strong> Some trail caf√©s are cash-only
                                    </div>
                                </div>
                                
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
                                    <span style="color: var(--brand-teal); font-size: 0.9rem; font-weight: 500;">5 min read ‚Ä¢ Cycling Guide ‚Ä¢ Local Access</span>
                                </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </section>
        </div>

        <!-- Reviews Page -->
        <div class="page" id="reviewsPage">
            <section class="hero parallax-container">
                <!-- Parallax Layers - Photos will be added here -->
                <div class="parallax-layer parallax-layer-bg" style="background-image: url('PLACEHOLDER_REVIEWS_BG_IMAGE');"></div>
                <div class="parallax-layer parallax-layer-mid" style="background-image: url('PLACEHOLDER_REVIEWS_MID_IMAGE');"></div>
                <!-- Navigation inside hero -->
                <nav class="navbar" id="navbar">
                    <div class="nav-container" style="display: flex; justify-content: center; align-items: center; width: 100%;">
                        <!-- Complete centered navigation group -->
                        <div style="display: flex; align-items: center; gap: 2rem;">
                            <!-- Left 4 menu items -->
                            <a href="#" class="nav-link" onclick="showPage('home')">Home</a>
                            <a href="#" class="nav-link" onclick="showPage('stay')">Stay</a>
                            <a href="#" class="nav-link" onclick="showPage('gallery')">Gallery</a>
                            <a href="#" class="nav-link" onclick="showPage('blog')">Guides</a>

                            <!-- Center logo -->
                            <a href="#" class="logo" onclick="showPage('home')" aria-label="Go to home page" style="margin: 0 1rem;">
                                <img src="images/logormbg.png" alt="Lakeside Retreat Logo" class="logo-icon" />
                            </a>

                            <!-- Right 4 menu items -->
                            <a href="#" class="nav-link" onclick="showPage('reviews')">Reviews</a>
                            <a href="#" class="nav-link" onclick="showPage('story')">Story</a>
                            <a href="#" class="nav-link" onclick="showPage('explore')">Explore</a>
                            <a href="#" class="nav-link" onclick="showPage('contact')">Contact</a>
                        </div>

                        <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Toggle mobile menu">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>
                </nav>
                <div class="container">
                    <div class="hero-content">
                        <h1>4.9 Stars ‚Ä¢ 127 Stories ‚Ä¢ 45% Return Rate</h1>
                        <div class="tagline">Airbnb ‚Ä¢ Booking.com ‚Ä¢ Direct Bookings ‚Ä¢ All Platforms</div>
                        <p>Read why guests choose Lakeside Retreat again and again. From first-time visitors amazed by our commercial-grade solar innovation to returning families who've made this their annual tradition. Every review tells the story of sustainable luxury that doesn't compromise on comfort.</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 2rem; margin: 2rem 0; background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                            <div style="text-align: center;">
                                <div style="font-size: 2.5rem; font-weight: 700; color: var(--brand-teal);">98%</div>
                                <div style="font-size: 0.9rem; opacity: 0.8;">Would Recommend</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2.5rem; font-weight: 700; color: var(--brand-teal);">45%</div>
                                <div style="font-size: 0.9rem; opacity: 0.8;">Return Guests</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2.5rem; font-weight: 700; color: var(--brand-teal);">127</div>
                                <div style="font-size: 0.9rem; opacity: 0.8;">Verified Reviews</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 2.5rem; font-weight: 700; color: var(--brand-teal);">16.72kW</div>
                                <div style="font-size: 0.9rem; opacity: 0.8;">Solar System</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="section">
                <div class="container">
                    <!-- Review Statistics -->
                    <div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: var(--shadow); margin-bottom: 3rem;">
                        <div class="stats" style="margin: 0;">
                            <div class="stat">
                                <div class="stat-number">4.9</div>
                                <div class="stat-label">Average Rating</div>
                            </div>
                            <div class="stat">
                                <div class="stat-number">127</div>
                                <div class="stat-label">Reviews</div>
                            </div>
                            <div class="stat">
                                <div class="stat-number">98%</div>
                                <div class="stat-label">Would Recommend</div>
                            </div>
                            <div class="stat">
                                <div class="stat-number">45%</div>
                                <div class="stat-label">Return Guests</div>
                            </div>
                        </div>
                        
                        <!-- Platform Verification Badges -->
                        <div style="text-align: center; margin-top: 2rem; padding-top: 2rem; border-top: 1px solid var(--border);">
                            <p style="margin-bottom: 1rem; color: var(--text); opacity: 0.8;">Also verified on:</p>
                            <div style="display: flex; justify-content: center; gap: 2rem; flex-wrap: wrap;">
                                <a href="#" style="display: flex; align-items: center; gap: 0.5rem; color: var(--brand-teal); text-decoration: none; font-weight: 500;">
                                    <span style="background: #ff5a5f; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.8rem;">Airbnb</span>
                                    4.9/5.0 (67 reviews)
                                </a>
                                <a href="#" style="display: flex; align-items: center; gap: 0.5rem; color: var(--brand-teal); text-decoration: none; font-weight: 500;">
                                    <span style="background: #003580; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.8rem;">Booking.com</span>
                                    9.8/10 (60 reviews)
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Guest Reviews -->
                    <div class="grid grid-2">
                        <div class="card">
                            <div class="card-content">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                    <div style="display: flex; align-items: center;">
                                        <span style="color: #fbbf24;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                                        <span style="margin-left: 0.5rem; font-weight: 600; color: var(--brand-teal);">5.0</span>
                                    </div>
                                </div>
                                <h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">Commercial-Grade System Impressive</h4>
                                <p class="card-text">"Stephen and Sandy have created something truly special here. The dome was immaculate, their 16kW commercial-grade solar system with real-time monitoring is incredibly impressive, and waking up to Lake Dunstan views was magical. We'll definitely be back!"</p>
                                <div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">M</div>
                                    <div>
                                        <div style="font-weight: 600;">Michael R.</div>
                                        <div style="font-size: 0.9rem; opacity: 0.7;">Auckland, New Zealand ‚Ä¢ March 2024</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-content">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                    <div style="display: flex; align-items: center;">
                                        <span style="color: #fbbf24;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                                        <span style="margin-left: 0.5rem; font-weight: 600; color: var(--brand-teal);">5.0</span>
                                    </div>
                                </div>
                                <h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">Sustainable Luxury Excellence</h4>
                                <p class="card-text">"The cottage was perfect for our family of four. Kids loved having direct access to the lake, and we appreciated the advanced renewable energy approach. The commercial-grade hybrid system generating way more power than they use is incredibly sophisticated."</p>
                                <div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: var(--secondary); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">K</div>
                                    <div>
                                        <div style="font-weight: 600;">Kelly T.</div>
                                        <div style="font-size: 0.9rem; opacity: 0.7;">Melbourne, Australia ‚Ä¢ February 2024</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-content">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                    <div style="display: flex; align-items: center;">
                                        <span style="color: #fbbf24;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                                        <span style="margin-left: 0.5rem; font-weight: 600; color: var(--brand-teal);">5.0</span>
                                    </div>
                                </div>
                                <h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">Energy Innovation Fascinating</h4>
                                <p class="card-text">"Dome Ros√© was absolutely perfect for our anniversary. The attention to detail, sunset views, and champagne welcome made it unforgettable. Sandy's technical explanation of their 38-panel solar array was fascinating. Highly recommend for couples!"</p>
                                <div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: #be185d; color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">L</div>
                                    <div>
                                        <div style="font-weight: 600;">Lisa & James D.</div>
                                        <div style="font-size: 0.9rem; opacity: 0.7;">Christchurch, New Zealand ‚Ä¢ January 2024</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-content">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                    <div style="display: flex; align-items: center;">
                                        <span style="color: #fbbf24;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                                        <span style="margin-left: 0.5rem; font-weight: 600; color: var(--brand-teal);">5.0</span>
                                    </div>
                                </div>
                                <h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">Tech Innovation Done Right</h4>
                                <p class="card-text">"As someone passionate about renewable technology, I was thrilled to find luxury accommodation that's genuinely energy-positive with commercial-grade equipment. The education about their Signergy battery management system was fascinating. Luxury with zero environmental guilt."</p>
                                <div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: #047857; color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">A</div>
                                    <div>
                                        <div style="font-weight: 600;">Alex P.</div>
                                        <div style="font-size: 0.9rem; opacity: 0.7;">Wellington, New Zealand ‚Ä¢ December 2023</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-content">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                    <div style="display: flex; align-items: center;">
                                        <span style="color: #fbbf24;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                                        <span style="margin-left: 0.5rem; font-weight: 600; color: var(--brand-teal);">5.0</span>
                                    </div>
                                </div>
                                <h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">Advanced Energy Paradise</h4>
                                <p class="card-text">"The location for cycling is unbeatable - step out the door and you're on the trail. After a day exploring Central Otago, coming back to their energy-positive accommodation with live monitoring dashboard was perfect. Stephen's energy system tour was incredibly educational."</p>
                                <div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: #1d4ed8; color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">D</div>
                                    <div>
                                        <div style="font-weight: 600;">David M.</div>
                                        <div style="font-size: 0.9rem; opacity: 0.7;">Sydney, Australia ‚Ä¢ November 2023</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-content">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                    <div style="display: flex; align-items: center;">
                                        <span style="color: #fbbf24;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                                        <span style="margin-left: 0.5rem; font-weight: 600; color: var(--brand-teal);">5.0</span>
                                    </div>
                                </div>
                                <h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">Third Time Visitors</h4>
                                <p class="card-text">"This was our third stay and it just keeps getting better. Stephen and Sandy's hospitality is unmatched, and we love supporting their advanced sustainable approach. Watching their energy dashboard show they're contributing to the grid while we enjoy luxury is amazing. Already booked for next year!"</p>
                                <div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">C</div>
                                    <div>
                                        <div style="font-weight: 600;">Claire & Rob S.</div>
                                        <div style="font-size: 0.9rem; opacity: 0.7;">Auckland, New Zealand ‚Ä¢ October 2023</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Load More Reviews Button -->
                    <div style="text-align: center; margin-top: 3rem;">
                        <button class="btn btn-outline" onclick="loadMoreReviews()">Load More Reviews</button>
                    </div>
                </div>
            </section>
        </div>

        <!-- Story Page -->
        <div class="page" id="storyPage">
            <section class="hero parallax-container">
                <!-- Parallax Layers - Photos will be added here -->
                <div class="parallax-layer parallax-layer-bg" style="background-image: url('PLACEHOLDER_STORY_BG_IMAGE');"></div>
                <div class="parallax-layer parallax-layer-mid" style="background-image: url('PLACEHOLDER_STORY_MID_IMAGE');"></div>
                <!-- Navigation inside hero -->
                <nav class="navbar" id="navbar">
                    <div class="nav-container" style="display: flex; justify-content: center; align-items: center; width: 100%;">
                        <!-- Complete centered navigation group -->
                        <div style="display: flex; align-items: center; gap: 2rem;">
                            <!-- Left 4 menu items -->
                            <a href="#" class="nav-link" onclick="showPage('home')">Home</a>
                            <a href="#" class="nav-link" onclick="showPage('stay')">Stay</a>
                            <a href="#" class="nav-link" onclick="showPage('gallery')">Gallery</a>
                            <a href="#" class="nav-link" onclick="showPage('blog')">Guides</a>

                            <!-- Center logo -->
                            <a href="#" class="logo" onclick="showPage('home')" aria-label="Go to home page" style="margin: 0 1rem;">
                                <img src="images/logormbg.png" alt="Lakeside Retreat Logo" class="logo-icon" />
                            </a>

                            <!-- Right 4 menu items -->
                            <a href="#" class="nav-link" onclick="showPage('reviews')">Reviews</a>
                            <a href="#" class="nav-link" onclick="showPage('story')">Story</a>
                            <a href="#" class="nav-link" onclick="showPage('explore')">Explore</a>
                            <a href="#" class="nav-link" onclick="showPage('contact')">Contact</a>
                        </div>

                        <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Toggle mobile menu">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>
                </nav>
                <div class="container">
                    <div class="hero-content">
                        <h1>From Wrong Turn to Grid-Tied Energy Pioneers</h1>
                        <div class="tagline">April 2019 ‚Ä¢ One Accidental Discovery ‚Ä¢ Five Years Perfecting Reliable Energy Innovation</div>
                        <p>Wellington I.T. professionals Stephen & Sandy took the wrong turn on Smiths Way in 2019. Three hours later, sitting by Lake Dunstan surrounded by established Pinot Noir vines, they knew they'd found something extraordinary. Five years later, their "wrong turn" has become New Zealand's most innovative grid-tied renewable energy accommodation experience.</p>
                        
                        <div style="background: #FAF4F5; padding: 2rem; border-radius: 15px; margin: 2rem 0; max-width: 700px; margin-left: auto; margin-right: auto;">
                            <div style="text-align: center; font-style: italic; font-size: 1.1rem; line-height: 1.7; color: var(--text);">
                                "We sat on that lake shore for three hours, just talking about what if. What if we could wake up to this view every day? What if we could create something genuinely sustainable here using grid-tied technology that never compromises on reliability? What if that wrong turn was actually the right turn all along?"
                            </div>
                            <div style="text-align: center; margin-top: 1rem; font-weight: 600; color: var(--brand-teal);">
                                ‚Äî Stephen & Sandy, Grid-Tied Energy Innovators
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="section">
                <div class="container" style="max-width: 800px;">
                    <div class="card">
                        <div class="card-content">
                            <div style="text-align: center; margin-bottom: 2rem;">
                                <h2 style="font-family: 'Roboto', sans-serif; color: var(--brand-teal); margin-bottom: 0.5rem;">Stephen & Sandy</h2>
                                <p style="font-style: italic; color: var(--text); opacity: 0.8;">Your Energy Technology Expert Hosts at Lakeside Retreat</p>
                            </div>

                            <h3 style="font-family: 'Roboto', sans-serif; color: var(--brand-teal); margin-top: 2rem; margin-bottom: 1rem;">The Wrong Turn That Changed Everything</h3>
                            <p style="line-height: 1.8;">It was April 2019, and we were utterly exhausted. Sandy was working in I.T. in Wellington, and Stephen had spent years in retail. We desperately needed a weekend away from the city, so we loaded up the car and headed for Central Otago, thinking we'd find a nice hotel and do some wine tasting.</p>
                            
                            <p style="line-height: 1.8;">That's when we took the wrong turn on Smiths Way.</p>
                            
                            <p style="line-height: 1.8;">Instead of reaching our planned accommodation, we found ourselves pulling over at what can only be described as the most beautiful lakefront vineyard we'd ever seen. Five hectares of established Pinot Noir vines rolling down to the shores of Lake Dunstan, with the Remarkables rising majestically in the distance. There was a small 'For Sale' sign barely visible amongst the vines.</p>
                            
                            <blockquote style="border-left: 4px solid var(--brand-teal); padding-left: 1.5rem; margin: 2rem 0; font-style: italic; color: var(--text); opacity: 0.9;">
                                "We sat on that lake shore for three hours, just talking about what if. What if we could wake up to this view every day? What if we could create something genuinely sustainable here using our technical backgrounds?"
                            </blockquote>

                            <h3 style="font-family: 'Roboto', sans-serif; color: var(--brand-teal); margin-top: 2rem; margin-bottom: 1rem;">Taking the Leap Into Energy Innovation</h3>
                            <p style="line-height: 1.8;">Six months later, we owned 96 Smiths Way. It wasn't a rational decision by any measure. Sandy continued her I.T. work remotely, whilst Stephen left retail to focus on transforming this stunning vineyard into something extraordinary.</p>
                            
                            <p style="line-height: 1.8;">We found the perfect solution for the vineyard: leasing it to experienced local wine growers who understand this terroir. This allows the vines to continue producing exceptional fruit under expert care, whilst we focus entirely on creating unforgettable renewable energy experiences for our guests.</p>
                            
                            <p style="line-height: 1.8;">The sustainable approach wasn't just marketing ‚Äì it was personal mission. Sandy's I.T. background proved invaluable for designing our commercial-grade solar systems, whilst Stephen's retail experience meant he understood exactly what guests would want from their stay.</p>

                            <h3 style="font-family: 'Roboto', sans-serif; color: var(--brand-teal); margin-top: 2rem; margin-bottom: 1rem;">Building Our 16.72kW Commercial-Grade System</h3>
                            <p style="line-height: 1.8;">The commercial-grade solar installation was our biggest challenge and greatest achievement. We spent months researching, calculating angles, and learning about hybrid inverter systems. Sandy approached it like debugging complex I.T. infrastructure, whilst Stephen focused on ensuring our guests would never notice any compromise in comfort.</p>
                            
                            <blockquote style="border-left: 4px solid var(--brand-teal); padding-left: 1.5rem; margin: 2rem 0; font-style: italic; color: var(--text); opacity: 0.9;">
                                "The day our 38 x 440W Helios panels went live and we achieved 16.72kW commercial-grade capacity was more satisfying than any I.T. system I'd ever optimised."
                            </blockquote>
                            
                            <p style="line-height: 1.8;">Our first guest review mentioned the 'rustic charm' of having no hot water. We learned quickly that commercial-grade solar systems need sophisticated backup plans ‚Äì and that YouTube University only gets you so far. That's when we invested in our 16kWh Signergy battery storage and 20kW hybrid inverter system.</p>

                            <h3 style="font-family: 'Roboto', sans-serif; color: var(--brand-teal); margin-top: 2rem; margin-bottom: 1rem;">From I.T. Professional to Energy Designer</h3>
                            <p style="line-height: 1.8;">Sandy's technical journey from I.T. to renewable energy system design has been remarkable. The skills transferred perfectly ‚Äì both require systematic thinking, troubleshooting complex problems, and ensuring reliable 24/7 operation. Our Signergy Energy Gateway monitoring system provides real-time data that would make any I.T. professional proud.</p>
                            
                            <p style="line-height: 1.8;">Each accommodation tells a different story. Stephen designed Dome Pinot as the flagship experience ‚Äì the views from the bed encompass the entire lake and surrounding mountains. The engineering challenge of creating panoramic windows whilst maintaining energy efficiency with our advanced heating and cooling systems kept us both awake for weeks.</p>
                            
                            <p style="line-height: 1.8;">Dome Ros√© became our romantic retreat. Sandy's idea to include the saltwater spa proved inspired ‚Äì watching couples relax whilst enjoying sunset over Central Otago, all powered by clean energy, never gets old.</p>
                            
                            <p style="line-height: 1.8;">The Lakeside Cottage was Sandy's solution for families. Direct lake access, complete cooking facilities with outdoor BBQ, and space for six people, all without compromising our energy-positive capability. The private spa overlooking the vineyard has become the most photographed spot on the property.</p>

                            <h3 style="font-family: 'Roboto', sans-serif; color: var(--brand-teal); margin-top: 2rem; margin-bottom: 1rem;">Why We Share Our Energy Innovation</h3>
                            <p style="line-height: 1.8;">Every guest who chooses Lakeside Retreat is supporting our experiment in commercial-grade sustainable luxury. You're proving that travellers care about environmental impact whilst still expecting exceptional experiences. Our real-time monitoring dashboard shows guests exactly how much clean energy we're generating and contributing to New Zealand's grid.</p>
                            
                            <p style="line-height: 1.8;">Sandy continues her I.T. work remotely, bringing her technical expertise to optimising our energy management systems. Stephen has found his calling in hospitality ‚Äì his favourite part of each day is showing guests our energy monitoring dashboard and seeing their amazement when they realise they're staying at an energy-positive accommodation.</p>
                            
                            <blockquote style="border-left: 4px solid var(--brand-teal); padding-left: 1.5rem; margin: 2rem 0; font-style: italic; color: var(--text); opacity: 0.9;">
                                "We're not just offering accommodation ‚Äì we're sharing our experiment in commercial-grade sustainable living. Every guest becomes part of our renewable energy story."
                            </blockquote>

                            <h3 style="font-family: 'Roboto', sans-serif; color: var(--brand-teal); margin-top: 2rem; margin-bottom: 1rem;">Today and Tomorrow</h3>
                            <p style="line-height: 1.8;">Five years later, we're still pinching ourselves. We wake up to Lake Dunstan literally at our doorstep every morning. Our 16.72kW solar system now produces more power than we use daily, contributing excess energy to New Zealand's renewable grid. The established vineyard continues to produce beautiful Pinot Noir grapes that our wine-growing partners transform into exceptional bottles.</p>
                            
                            <p style="line-height: 1.8;">Most importantly, we've learned that luxury and commercial-grade sustainability aren't contradictory ‚Äì they're complementary. Our guests consistently tell us that knowing their stay is not only carbon-neutral but actually energy-positive enhances their relaxation. Watching our real-time energy dashboard show we're contributing to the grid while they enjoy five-star comfort gives them a sense of purpose.</p>
                            
                            <p style="line-height: 1.8;">When you stay with us, you're not just booking accommodation. You're joining our ongoing experiment in proving that commercial-grade renewable energy can power absolutely extraordinary hospitality experiences. You're supporting local wine growers who understand this special terroir. And you're experiencing Central Otago from one of its most magical vantage points, all while contributing to New Zealand's renewable energy future.</p>
                            
                            <p style="line-height: 1.8; font-weight: 600; color: var(--brand-teal);">Come and be part of our energy-positive story.</p>
                            
                            <div style="text-align: center; margin-top: 3rem; padding-top: 2rem; border-top: 1px solid var(--border);">
                                <p style="font-weight: 600; color: var(--brand-teal); margin-bottom: 0.5rem;">Stephen & Sandy</p>
                                <p style="font-style: italic; color: var(--text); opacity: 0.8; margin-bottom: 0;">Renewable Energy Technology Experts & Founders, Lakeside Retreat</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Explore Page -->
        <div class="page" id="explorePage">
            <section class="hero parallax-container">
                <!-- Parallax Layers - Photos will be added here -->
                <div class="parallax-layer parallax-layer-bg" style="background-image: url('PLACEHOLDER_EXPLORE_BG_IMAGE');"></div>
                <div class="parallax-layer parallax-layer-mid" style="background-image: url('PLACEHOLDER_EXPLORE_MID_IMAGE');"></div>
                <!-- Navigation inside hero -->
                <nav class="navbar" id="navbar">
                    <div class="nav-container" style="display: flex; justify-content: center; align-items: center; width: 100%;">
                        <!-- Complete centered navigation group -->
                        <div style="display: flex; align-items: center; gap: 2rem;">
                            <!-- Left 4 menu items -->
                            <a href="#" class="nav-link" onclick="showPage('home')">Home</a>
                            <a href="#" class="nav-link" onclick="showPage('stay')">Stay</a>
                            <a href="#" class="nav-link" onclick="showPage('gallery')">Gallery</a>
                            <a href="#" class="nav-link" onclick="showPage('blog')">Guides</a>

                            <!-- Center logo -->
                            <a href="#" class="logo" onclick="showPage('home')" aria-label="Go to home page" style="margin: 0 1rem;">
                                <img src="images/logormbg.png" alt="Lakeside Retreat Logo" class="logo-icon" />
                            </a>

                            <!-- Right 4 menu items -->
                            <a href="#" class="nav-link" onclick="showPage('reviews')">Reviews</a>
                            <a href="#" class="nav-link" onclick="showPage('story')">Story</a>
                            <a href="#" class="nav-link" onclick="showPage('explore')">Explore</a>
                            <a href="#" class="nav-link" onclick="showPage('contact')">Contact</a>
                        </div>

                        <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Toggle mobile menu">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>
                </nav>
                <div class="container">
                    <div class="hero-content">
                        <h1>Adventure Starts at Your Energy-Positive Doorstep</h1>
                        <div class="tagline">300m to Cycle Trail ‚Ä¢ Wine Country Centre ‚Ä¢ Five Ski Fields Within Range</div>
                        <p>Step from commercial-grade solar-powered luxury directly onto the Lake Dunstan Trail. Cycle to world-class wineries, hike dramatic alpine routes, or use our peaceful energy-positive vineyard as your base for Queenstown day trips. Central Otago's adventure playground surrounds you‚Äîwe're perfectly positioned for it all, with zero environmental impact.</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin: 2rem 0;">
                            <div onclick="scrollToSection('cycling-section')" style="background: white; padding: 1.5rem; border-radius: 15px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.2s ease;" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">üö¥</div>
                                <div style="font-weight: 600; color: var(--brand-teal);">300 metres</div>
                                <div style="font-size: 0.9rem;">to Lake Dunstan Trail</div>
                            </div>
                            <div onclick="scrollToSection('wine-section')" style="background: white; padding: 1.5rem; border-radius: 15px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.2s ease;" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">üç∑</div>
                                <div style="font-weight: 600; color: var(--brand-teal);">15+ wineries</div>
                                <div style="font-size: 0.9rem;">within 15km radius</div>
                            </div>
                            <div onclick="scrollToSection('adventure-section')" style="background: white; padding: 1.5rem; border-radius: 15px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.2s ease;" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">üèîÔ∏è</div>
                                <div style="font-weight: 600; color: var(--brand-teal);">55 minutes</div>
                                <div style="font-size: 0.9rem;">to Queenstown adventures</div>
                            </div>
                            <div onclick="openBookingModal()" style="background: white; padding: 1.5rem; border-radius: 15px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.2s ease;" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">‚ö°</div>
                                <div style="font-weight: 600; color: var(--brand-teal);">16.72kW</div>
                                <div style="font-size: 0.9rem;">energy-positive base</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="section">
                <div class="container">
                    <div class="grid grid-2">
                        <div class="card" id="cycling-section">
                            <div class="card-content">
                                <h3 class="card-title">üö¥ Cycle the Lake Dunstan Trail</h3>
                                <p class="card-text">Step directly from our energy-positive property onto the historic Cromwell-Clyde Trail. This flat, family-friendly route follows the lake shore with stunning mountain views.</p>
                                <div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">300m from property ‚Ä¢ <a href="#" onclick="showPage('blog')" style="color: var(--brand-teal); text-decoration: none;">‚Üí Get cycling guide</a></div>
                            </div>
                        </div>
                        <div class="card" id="wine-section">
                            <div class="card-content">
                                <h3 class="card-title">üç∑ Wine Country Location</h3>
                                <p class="card-text">You're in the heart of Central Otago wine country, famous for world-class Pinot Noir. Multiple award-winning cellar doors within 15 minutes of your accommodation.</p>
                                <div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;"><a href="#" onclick="showPage('blog')" style="color: var(--brand-teal); text-decoration: none;">‚Üí Get detailed winery guide</a></div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">ü•æ Hiking & Walking</h3>
                                <p class="card-text">Explore dramatic landscapes from gentle lake walks to challenging alpine hikes. The Pisa Range and Crown Range offer spectacular views and photography opportunities.</p>
                                <div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">Various difficulty levels available</div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">üèä Lake Activities</h3>
                                <p class="card-text">Lake Dunstan offers swimming, kayaking, and fishing. Our cottage guests have direct lake access, whilst dome guests can easily reach the shore from our solar-powered sanctuary.</p>
                                <div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">Direct lake access from cottage</div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">üèéÔ∏è Highlands Motorsport Park</h3>
                                <p class="card-text">Experience world-class motorsport facilities with driving experiences, karting, and events. Perfect for car enthusiasts and adrenaline seekers looking for something unique.</p>
                                <div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">Short drive from property</div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">‚õ∑Ô∏è Winter Ski Fields</h3>
                                <p class="card-text">Five fantastic ski fields within comfortable driving distance: Coronet Peak, The Remarkables, Cardrona, Treble Cone, and Snow Park. From beginner slopes to expert terrain.</p>
                                <div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">45-90 minutes drive ‚Ä¢ June-September</div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">üèòÔ∏è Cromwell Town</h3>
                                <p class="card-text">Historic Cromwell offers cafes, restaurants, boutique shopping, and the famous fruit stalls. Perfect for stocking up on local produce and artisan goods.</p>
                                <div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">12km to town centre</div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">üèîÔ∏è Strategic Location</h3>
                                <p class="card-text">Perfectly positioned between Queenstown (55min) and Wanaka (30min). Experience the best of both adventure destinations while staying in peaceful wine country.</p>
                                <div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;"><a href="#" onclick="showPage('blog')" style="color: var(--brand-teal); text-decoration: none;">‚Üí Get detailed day trip planners</a></div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">üåä Lake Access</h3>
                                <p class="card-text">Direct access to Lake Dunstan from your accommodation, plus easy reach to Lake Wanaka. Enjoy water activities, photography, and peaceful lake experiences.</p>
                                <div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">Direct lake access ‚Ä¢ Multiple lakes nearby</div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 3rem;">
                        <div class="card" style="max-width: 600px; margin: 0 auto;">
                            <div class="card-content">
                                <h3 class="card-title">Planning Your Energy-Positive Central Otago Adventure?</h3>
                                <p class="card-text">We're happy to help you plan the perfect itinerary based on your interests and the season of your visit. Plus, we love sharing insights about renewable energy technology!</p>
                                <a href="#" class="btn btn-primary" onclick="showPage('contact')">Get Local & Tech Recommendations</a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Contact Page -->
        <div class="page" id="contactPage">
            <section class="hero parallax-container">
                <!-- Parallax Layers - Photos will be added here -->
                <div class="parallax-layer parallax-layer-bg" style="background-image: url('PLACEHOLDER_CONTACT_BG_IMAGE');"></div>
                <div class="parallax-layer parallax-layer-mid" style="background-image: url('PLACEHOLDER_CONTACT_MID_IMAGE');"></div>
                <!-- Navigation inside hero -->
                <nav class="navbar" id="navbar">
                    <div class="nav-container" style="display: flex; justify-content: center; align-items: center; width: 100%;">
                        <!-- Complete centered navigation group -->
                        <div style="display: flex; align-items: center; gap: 2rem;">
                            <!-- Left 4 menu items -->
                            <a href="#" class="nav-link" onclick="showPage('home')">Home</a>
                            <a href="#" class="nav-link" onclick="showPage('stay')">Stay</a>
                            <a href="#" class="nav-link" onclick="showPage('gallery')">Gallery</a>
                            <a href="#" class="nav-link" onclick="showPage('blog')">Guides</a>

                            <!-- Center logo -->
                            <a href="#" class="logo" onclick="showPage('home')" aria-label="Go to home page" style="margin: 0 1rem;">
                                <img src="images/logormbg.png" alt="Lakeside Retreat Logo" class="logo-icon" />
                            </a>

                            <!-- Right 4 menu items -->
                            <a href="#" class="nav-link" onclick="showPage('reviews')">Reviews</a>
                            <a href="#" class="nav-link" onclick="showPage('story')">Story</a>
                            <a href="#" class="nav-link" onclick="showPage('explore')">Explore</a>
                            <a href="#" class="nav-link" onclick="showPage('contact')">Contact</a>
                        </div>

                        <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Toggle mobile menu">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>
                </nav>
                <div class="container">
                    <div class="hero-content">
                        <h1>Connect with Stephen & Sandy</h1>
                        <div class="tagline">Personal Service ‚Ä¢ Local Knowledge ‚Ä¢ Energy Technology Expertise</div>
                        <p>Planning your Central Otago escape? Have questions about our commercial-grade solar systems? Need recommendations for wine tastings or cycle routes? As your onsite energy technology expert hosts, we're here to ensure your stay exceeds every expectation. Real people, real responses, real local and renewable energy expertise.</p>
                        
                        <div style="background: #FAF4F5; padding: 2rem; border-radius: 15px; margin: 2rem 0; max-width: 600px; margin-left: auto; margin-right: auto;">
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; text-align: left;">
                                <div>
                                    <div style="font-weight: 600; color: var(--brand-teal); margin-bottom: 0.5rem;">Quick Response Guarantee</div>
                                    <div style="font-size: 0.95rem; color: var(--text); opacity: 1;">üìß Email replies within 4 hours<br>üì± Phone availability 8am-8pm<br>üí¨ WhatsApp for instant queries</div>
                                </div>
                                <div>
                                    <div style="font-weight: 600; color: var(--brand-teal); margin-bottom: 0.5rem;">We Love Helping With:</div>
                                    <div style="font-size: 0.95rem; color: var(--text); opacity: 1;">üóìÔ∏è Activity planning & bookings<br>üç∑ Winery recommendations<br>üîã Energy system tours & tech talks<br>üö¥ Cycle route mapping</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="section">
                <div class="container" style="max-width: 800px;">
                    <div class="grid grid-2">
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">Get in Touch</h3>
                                
                                <!-- Contact Methods -->
                                <div style="margin-bottom: 1.5rem;">
                                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">üìß <strong>Email:</strong> info@lakesideretreat.co.nz</div>
                                    <div style="font-size: 0.85rem; color: var(--text); opacity: 0.8; margin-left: 1.5rem;">Best for: Bookings, detailed questions, special requests</div>
                                </div>
                                
                                <div style="margin-bottom: 1.5rem;">
                                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">üì± <strong>Phone/WhatsApp:</strong> 021 368 682 | 021 870 018</div>
                                    <div style="font-size: 0.85rem; color: var(--text); opacity: 0.8; margin-left: 1.5rem;">Best for: Urgent queries, local recommendations, same-day bookings</div>
                                    <div style="font-size: 0.85rem; color: var(--text); opacity: 0.8; margin-left: 1.5rem;"><strong>International:</strong> +64 21 368 682 | +64 21 870 018</div>
                                </div>
                                
                                <div style="margin-bottom: 1.5rem;">
                                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">üìç <strong>Address:</strong></div>
                                    <div style="margin-left: 1.5rem; line-height: 1.4;">96 Smiths Way, Mount Pisa<br>Cromwell, Otago 9310<br>New Zealand</div>
                                </div>
                                
                                <div style="background: #fee2e2; border: 1px solid #fca5a5; border-radius: 8px; padding: 1rem; margin-bottom: 1.5rem;">
                                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; color: #dc2626; font-weight: 600;">üö® <strong>Emergency Contact</strong></div>
                                    <div style="font-size: 0.9rem; color: #991b1b; margin-left: 1.5rem;">
                                        <strong>24/7 Emergency:</strong> 021 368 682<br>
                                        <strong>Police/Fire/Ambulance:</strong> 111<br>
                                        <strong>Property Location:</strong> GPS: -45.0446, 169.0836
                                    </div>
                                </div>
                                
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-content">
                                <h3 class="card-title">Send us a Message</h3>
                                <form id="contactForm" onsubmit="sendContactMessage(event)">
                                    <div class="form-group">
                                        <input type="text" id="contactName" class="form-input" placeholder="Your Name" required>
                                    </div>
                                    <div class="form-group">
                                        <input type="email" id="contactEmail" class="form-input" placeholder="Your Email" required onblur="validateEmail(this)" oninput="clearEmailError(this)">
                        <div class="email-error-message" id="contactEmailError" style="display: none; color: #dc2626; font-size: 0.85rem; margin-top: 0.25rem;"></div>
                                    </div>
                                    <div class="form-group">
                                        <textarea id="contactMessage" class="form-textarea" rows="4" placeholder="Your Message" required></textarea>
                                    </div>
                                    <button type="submit" class="btn btn-primary" id="contactSubmitBtn">Send Message</button>
                                    <div id="contactFormStatus" style="margin-top: 1rem; display: none;"></div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>


    </main>

    <!-- Enhanced Footer with Advanced Internal Linking -->
    <footer class="footer">
                
        <div class="container">
            <!-- Three Column Layout for Navigation Links -->
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 3rem; margin-bottom: 3rem;">

                <!-- Accommodation Links -->
                <div class="footer-section">
                    <h3>Accommodation</h3>
                    <a href="#" onclick="showPage('stay')">Solar-Powered Eco Domes</a>
                    <a href="#" onclick="showPage('stay')">Central Otago Glamping</a>
                    <a href="#" onclick="showPage('stay')">Lake Dunstan Accommodation</a>
                    <a href="#" onclick="showPage('stay')">Cromwell Luxury Lodging</a>
                    <a href="#" onclick="showPage('stay')">Sustainable Accommodation</a>
                    <a href="#" onclick="showPage('stay')">Wine Country Stays</a>
                </div>

                <!-- Activities & Local -->
                <div class="footer-section">
                    <h3>Central Otago Experiences</h3>
                    <a href="#" onclick="showPage('explore')">Otago Rail Trail Cycling</a>
                    <a href="#" onclick="showPage('explore')">Wine Tours & Tastings</a>
                    <a href="#" onclick="showPage('explore')">Lake Dunstan Activities</a>
                    <a href="#" onclick="showPage('explore')">Cromwell Attractions</a>
                    <a href="#" onclick="showPage('explore')">Gibbston Valley Tours</a>
                    <a href="#" onclick="showPage('explore')">Premium Winery Visits</a>
                </div>

                <!-- Site Information -->
                <div class="footer-section">
                    <h3>Information</h3>
                    <a href="#" onclick="showPage('story')">Our Story</a>
                    <a href="#" onclick="showPage('gallery')">Photo Gallery</a>
                    <a href="#" onclick="showPage('blog')">Local Guides</a>
                    <a href="#" onclick="showPage('reviews')">Guest Reviews</a>
                    <a href="#" onclick="showPage('home'); setTimeout(() => { document.getElementById('contact-section')?.scrollIntoView({ behavior: 'smooth' }); }, 200);">Contact Us</a>
                    <a href="#" onclick="showPage('explore')">Location & Map</a>
                </div>

            </div>
            
            <!-- Collapsible FAQ Content -->
            <div id="footerFaqContent" role="region" aria-labelledby="faqToggleBtn" aria-hidden="true" style="
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.5s ease, opacity 0.3s ease;
                opacity: 0;
                margin-top: 1rem;
            ">
                <div style="max-width: 800px; margin: 0 auto;">
                    <!-- FAQ Item 1 -->
                    <div class="faq-item" style="background: white; border-radius: 12px; margin-bottom: 1rem; box-shadow: 0 4px 6px rgba(0,0,0,0.05); overflow: hidden;">
                        <div class="faq-question" onclick="toggleFAQ(this)" style="padding: 1.5rem; cursor: pointer; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; font-weight: 600; color: var(--brand-teal); user-select: none;">
                            <span>What's included in my stay?</span>
                            <span class="faq-arrow" style="font-size: 1.2rem; transition: transform 0.3s ease;">‚ñº</span>
                        </div>
                        <div class="faq-answer" style="padding: 0; max-height: 0; overflow: hidden; transition: all 0.3s ease;">
                            <div style="padding: 1.5rem; border-top: 1px solid #f0f0f0; color: var(--text); line-height: 1.6;">
                                <strong>Dome guests receive:</strong> Continental breakfast, private spa access, stovetop cooking & Weber BBQ, 55" OLED TV, air conditioning, free WiFi, and parking.<br><br>
                                <strong>Cottage guests receive:</strong> Complete cooking facilities with outdoor BBQ, wood-fired hot tub, garage parking, washing machine, pet-friendly accommodation, and direct lake access.<br><br>
                                <strong>All guests enjoy:</strong> Access to 16.72kW solar system tours, cycle trail maps, local winery recommendations, and Stephen & Sandy's personal hosting.
                            </div>
                        </div>
                    </div>

                    <!-- FAQ Item 2 -->
                    <div class="faq-item" style="background: white; border-radius: 12px; margin-bottom: 1rem; box-shadow: 0 4px 6px rgba(0,0,0,0.05); overflow: hidden;">
                        <div class="faq-question" onclick="toggleFAQ(this)" style="padding: 1.5rem; cursor: pointer; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; font-weight: 600; color: var(--brand-teal); user-select: none;">
                            <span>How close are the nearest wineries?</span>
                            <span class="faq-arrow" style="font-size: 1.2rem; transition: transform 0.3s ease;">‚ñº</span>
                        </div>
                        <div class="faq-answer" style="padding: 0; max-height: 0; overflow: hidden; transition: all 0.3s ease;">
                            <div style="padding: 1.5rem; border-top: 1px solid #f0f0f0; color: var(--text); line-height: 1.6;">
                                <strong>Walking distance:</strong> Rippon Vineyard (5min walk), Mt Difficulty (8min walk)<br>
                                <strong>Short drive:</strong> Gibbston Valley (15min), Chard Farm (20min), Peregrine (25min)<br>
                                <strong>Wine tour operators:</strong> We can arrange private tours or recommend local operators<br><br>
                                Perfect for wine enthusiasts - you're literally in the heart of Central Otago's premium wine region!
                            </div>
                        </div>
                    </div>

                    <!-- FAQ Item 3 -->
                    <div class="faq-item" style="background: white; border-radius: 12px; margin-bottom: 1rem; box-shadow: 0 4px 6px rgba(0,0,0,0.05); overflow: hidden;">
                        <div class="faq-question" onclick="toggleFAQ(this)" style="padding: 1.5rem; cursor: pointer; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; font-weight: 600; color: var(--brand-teal); user-select: none;">
                            <span>What are your check-in and check-out times?</span>
                            <span class="faq-arrow" style="font-size: 1.2rem; transition: transform 0.3s ease;">‚ñº</span>
                        </div>
                        <div class="faq-answer" style="padding: 0; max-height: 0; overflow: hidden; transition: all 0.3s ease;">
                            <div style="padding: 1.5rem; border-top: 1px solid #f0f0f0; color: var(--text); line-height: 1.6;">
                                <strong>Check-in:</strong> 3:00 PM (early check-in often available)<br>
                                <strong>Check-out:</strong> 11:00 AM (late check-out by arrangement)<br>
                                <strong>Self check-in:</strong> Digital codes provided for flexible arrival<br>
                                <strong>Hosts available:</strong> Stephen & Sandy live on-property for immediate assistance<br><br>
                                We provide detailed arrival instructions and local recommendations 48 hours before your stay.
                            </div>
                        </div>
                    </div>
                    
                    <!-- FAQ Item 4 -->
                    <div class="faq-item" style="background: white; border-radius: 12px; margin-bottom: 1rem; box-shadow: 0 4px 6px rgba(0,0,0,0.05); overflow: hidden;">
                        <div class="faq-question" onclick="toggleFAQ(this)" style="padding: 1.5rem; cursor: pointer; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; font-weight: 600; color: var(--brand-teal); user-select: none;">
                            <span>What's the weather like year-round?</span>
                            <span class="faq-arrow" style="font-size: 1.2rem; transition: transform 0.3s ease;">‚ñº</span>
                        </div>
                        <div class="faq-answer" style="padding: 0; max-height: 0; overflow: hidden; transition: all 0.3s ease;">
                            <div style="padding: 1.5rem; border-top: 1px solid #f0f0f0; color: var(--text); line-height: 1.6;">
                                <strong>Summer (Dec-Feb):</strong> Warm days (25-30¬∞C), cool nights (10-15¬∞C), perfect for outdoor activities<br>
                                <strong>Autumn (Mar-May):</strong> Mild days (15-25¬∞C), crisp nights (5-10¬∞C), stunning vineyard colors<br>
                                <strong>Winter (Jun-Aug):</strong> Cool days (5-15¬∞C), cold nights (-5 to 5¬∞C), occasional snow, cozy indoor comfort<br>
                                <strong>Spring (Sep-Nov):</strong> Pleasant days (15-25¬∞C), fresh nights (5-15¬∞C), blooming landscapes<br><br>
                                All accommodations have heating/cooling for year-round comfort!
                            </div>
                        </div>
                    </div>

                    <!-- FAQ Item 5 -->
                    <div class="faq-item" style="background: white; border-radius: 12px; margin-bottom: 1rem; box-shadow: 0 4px 6px rgba(0,0,0,0.05); overflow: hidden;">
                        <div class="faq-question" onclick="toggleFAQ(this)" style="padding: 1.5rem; cursor: pointer; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; font-weight: 600; color: var(--brand-teal); user-select: none;">
                            <span>Can we bring our pet?</span>
                            <span class="faq-arrow" style="font-size: 1.2rem; transition: transform 0.3s ease;">‚ñº</span>
                        </div>
                        <div class="faq-answer" style="padding: 0; max-height: 0; overflow: hidden; transition: all 0.3s ease;">
                            <div style="padding: 1.5rem; border-top: 1px solid #f0f0f0; color: var(--text); line-height: 1.6;">
                                The Lakeside Cottage is pet-friendly! Your furry friends are welcome with prior arrangement. The geodesic domes are not suitable for pets. Pet fee applies.
                            </div>
                        </div>
                    </div>

                    <!-- FAQ Item 6 -->
                    <div class="faq-item" style="background: white; border-radius: 12px; margin-bottom: 1rem; box-shadow: 0 4px 6px rgba(0,0,0,0.05); overflow: hidden;">
                        <div class="faq-question" onclick="toggleFAQ(this)" style="padding: 1.5rem; cursor: pointer; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; font-weight: 600; color: var(--brand-teal); user-select: none;">
                            <span>How far are you from Queenstown/Wanaka?</span>
                            <span class="faq-arrow" style="font-size: 1.2rem; transition: transform 0.3s ease;">‚ñº</span>
                        </div>
                        <div class="faq-answer" style="padding: 0; max-height: 0; overflow: hidden; transition: all 0.3s ease;">
                            <div style="padding: 1.5rem; border-top: 1px solid #f0f0f0; color: var(--text); line-height: 1.6;">
                                We're perfectly positioned: 45 minutes from Queenstown Airport, 35 minutes from Wanaka, and just 5 minutes from Cromwell. Ideal for exploring all of Central Otago while enjoying peaceful lakeside luxury.
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Single Column Company Info Above Copyright -->
            <div style="text-align: center; margin-bottom: 1rem; border-top: 1px solid rgba(255, 255, 255, 0.2); padding-top: 2rem;">
                <h3 style="color: white; margin-bottom: 1.5rem; font-size: 1.1rem;">Lakeside Retreat - Central Otago</h3>

                <!-- Social Media Icons -->
                <div style="margin: 1.5rem 0; display: flex; justify-content: center; align-items: center; gap: 1.5rem;">
                    <!-- Instagram -->
                    <a href="https://instagram.com/lakesideretreatnz" target="_blank" style="display: inline-block; transition: transform 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                        <img src="images/Desktop/Newinstagram.png" alt="Follow us on Instagram" style="width: 35px; height: 35px; object-fit: contain;">
                    </a>

                    <!-- Facebook -->
                    <a href="https://facebook.com/lakesideretreatnz" target="_blank" style="display: inline-block; transition: transform 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                        <img src="images/Desktop/facebook-logo.png" alt="Follow us on Facebook" style="width: 35px; height: 35px; object-fit: contain;">
                    </a>

                    <!-- Email -->
                    <a href="mailto:info@lakesideretreat.co.nz" style="display: inline-block; transition: transform 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                        <img src="images/Desktop/email-icon.png" alt="Email us" style="width: 35px; height: 35px; object-fit: contain;">
                    </a>
                </div>

                <div style="line-height: 1.6; color: rgba(255, 255, 255, 0.9); margin-bottom: 1rem; font-size: 0.85rem;">
                    <div style="margin-bottom: 0.5rem;">Email: info@lakesideretreat.co.nz</div>
                    <div>96 Smiths Way, Mt Pisa, Cromwell 9383, New Zealand</div>
                </div>
            </div>
            <!-- Bottom Footer - Centered All Rights Reserved -->
            <div style="text-align: center;">
                <p style="color: rgba(255, 255, 255, 0.7); margin: 0; font-size: 0.8rem;">
                    ¬© 2024 Lakeside Retreat Central Otago. All rights reserved.
                </p>
            </div>
	</div>
    </div>
       
    </footer>

    <script>
        // Security functions
        function sanitizeHTML(str) {
            const temp = document.createElement('div');
            temp.textContent = str;
            return temp.innerHTML;
        }
        
        function safeSetContent(elementId, content, isHTML = false) {
            const element = document.getElementById(elementId);
            if (!element) return;
            
            if (isHTML) {
                // Only allow specific safe HTML patterns
                const safeHTML = content
                    .replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '')
                    .replace(/javascript:/gi, '')
                    .replace(/on\w+="[^"]*"/gi, '')
                    .replace(/on\w+='[^']*'/gi, '');
                element.innerHTML = safeHTML;
            } else {
                element.textContent = content;
            }
        }
        
        function safeCreateSelectOptions(selectElement, options) {
            selectElement.innerHTML = ''; // Clear existing options
            options.forEach(option => {
                const optionElement = document.createElement('option');
                optionElement.value = option.value;
                optionElement.textContent = option.text;
                if (option.selected) optionElement.selected = true;
                selectElement.appendChild(optionElement);
            });
        }

        // Global variables
        let currentPage = 'home';
        let currentImageIndex = 0;
        let socialProofIndex = 0;
        let reviewsLoaded = 6;
        let touchStartX = 0;
        let touchEndX = 0;

        // Booking system variables
        let selectedAccommodation = null;
        let currentBookingStep = 1;
        let bookingData = {};

        // Mock Uplisting API rates (NZD)
        const accommodationRates = {
            'dome-pinot': { base: 450, peak: 530, offPeak: 350 },
            'dome-rose': { base: 380, peak: 450, offPeak: 300 },
            'lakeside-cottage': { base: 580, peak: 680, offPeak: 480 }
        };

        const accommodationNames = {
            'dome-pinot': 'Dome Pinot',
            'dome-rose': 'Dome Ros√©',
            'lakeside-cottage': 'Lakeside Cottage'
        };

        // Page navigation data
        const pages = ['home', 'stay', 'gallery', 'blog', 'reviews', 'story', 'explore', 'contact'];

        // Gallery images from stay page click
        const galleryImages = [
            'images/galerryrose.jpeg',
            'images/gallerydecksideview.jpeg',
            'images/gallerydecksitting.jpeg',
            'images/gallerypinotbed.jpeg',
            'images/dome-pinot-hero.jpeg',
            'images/dome-pinot-interior.jpeg',
            'images/dome-rose-interior.jpeg',
            'images/gallerydeck.jpeg',
            'images/gallerypinotbed.jpeg',
	    'images/GallerySwingChair.jpeg',
        ];

        // Carousel-specific image arrays
        const carouselImages = {
            'pinot': [
                'images/Desktop/pinot-internal.jpeg',
                'images/Desktop/Pinotfront.jpeg',
                'images/Desktop/windowview.jpeg',
                'images/Desktop/pinotspa.jpeg',
                'images/Desktop/GallerySwingChair.jpeg'
            ],
            'rose': [
                'images/Desktop/IMG_E8919-1000x700.jpeg',
                'images/Desktop/IMG_1403-1000x700.jpeg',
                'images/Desktop/rosespa.jpeg',
                'images/Desktop/gallerydecksitting.jpeg',
                'images/Desktop/dome-rose-interior.jpeg'
            ],
            'cottage': [
                'images/Desktop/lakeside-cottage-exterior.jpeg',
                'images/Desktop/cottage.jpg',
                'images/Desktop/Hottub1000x700.jpeg',
                'images/Desktop/cottagebathroom.jpeg',
                'images/Desktop/cottagebedroom.jpeg'
            ]
        };

        // Keep track of current carousel context
        let currentCarouselContext = null;

        // Search data
        const searchData = [
            { title: 'Central Otago Accommodation', page: 'stay', description: 'Luxury glamping domes and cottage with Lake Dunstan views' },
            { title: 'Cromwell Accommodation', page: 'stay', description: 'Premium accommodation 12km from Cromwell town centre' },
            { title: 'Lake Dunstan Accommodation', page: 'stay', description: 'Waterfront luxury with direct lake access and panoramic views' },
            { title: 'Dome Pinot', page: 'stay', description: '50sqm luxury dome with Lake Dunstan views and private spa' },
            { title: 'Dome Ros√©', page: 'stay', description: 'Romantic retreat perfect for couples in wine country' },
            { title: 'Lakeside Cottage', page: 'stay', description: 'Family-friendly accommodation with direct lake access' },
            { title: 'Central Otago Wine Country', page: 'explore', description: 'World-class Pinot Noir wineries within 15km' },
            { title: 'Cycle Trail Accommodation', page: 'explore', description: 'Lake Dunstan Trail access 300m from accommodation' },
            { title: 'Sustainable Accommodation', page: 'home', description: 'Grid-tied solar powered luxury with battery backup' },
            { title: 'Cromwell to Clyde Cycle Trail', page: 'explore', description: 'Direct access to scenic cycling routes' }
        ];

        // Social proof messages
        const socialProofMessages = [
            { name: 'Sarah from Auckland', action: 'just booked Dome Pinot', time: '2 minutes ago' },
            { name: 'Mike from Melbourne', action: 'just booked Lakeside Cottage', time: '5 minutes ago' },
            { name: 'Lisa from Wellington', action: 'just booked Dome Ros√©', time: '8 minutes ago' },
            { name: 'David from Sydney', action: 'just booked an energy system tour', time: '12 minutes ago' },
            { name: 'Emma from Christchurch', action: 'just booked Lakeside Cottage', time: '15 minutes ago' }
        ];

        // CSRF Token Management
        let csrfToken = '';

        async function getCSRFToken() {
          try {
            const response = await fetch('/api/csrf-token', {
              credentials: 'include'
            });
            const data = await response.json();
            csrfToken = data.csrfToken;
            return csrfToken;
          } catch (error) {
            // Console statement removed for production
            return null;
          }
        }

        // Initialize website
        document.addEventListener('DOMContentLoaded', async function() {
          // Get CSRF token on page load
          await getCSRFToken();
          
          initializeWebsite();
        });

        function initializeWebsite() {
            // Set minimum dates for booking (only if elements exist)
            const today = new Date().toISOString().split('T')[0];
            const checkinInput = document.getElementById('bookingCheckin');
            const checkoutInput = document.getElementById('bookingCheckout');
            
            if (checkinInput) {
                checkinInput.min = today;
                checkinInput.addEventListener('click', function() {
                    this.showPicker();
                });
            }
            
            if (checkoutInput) {
                checkoutInput.min = today;
                checkoutInput.addEventListener('click', function() {
                    this.showPicker();
                });
            }

            // Initialize mobile optimizations
            detectTouch();
            setMobileViewportHeight();
            enhanceMobileMenu();

            // Show cookie buttons only
            setTimeout(() => {
                const cookieButtons = document.getElementById('cookieButtons');
                if (cookieButtons) {
                    cookieButtons.style.display = 'flex';
                }
            }, 2000);

            // Initialize social proof
            setTimeout(showSocialProof, 5000);

            // Initialize scroll animations
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.card').forEach(card => {
                observer.observe(card);
            });

            // Initialize scroll indicator
            window.addEventListener('scroll', updateScrollIndicator);

            // Initialize touch gestures for page navigation (only if element exists)
            const mainContent = document.getElementById('mainContent');
            if (mainContent) {
                mainContent.addEventListener('touchstart', handleTouchStart, { passive: true });
                mainContent.addEventListener('touchend', handleTouchEnd, { passive: true });
            }

            // Auto-close mobile menu on scroll
            window.addEventListener('scroll', () => {
                const mobileNav = document.getElementById('mobileNav');
                if (mobileNav && mobileNav.classList.contains('active')) {
                    toggleMobileMenu();
                }
            });

            // Booking form event listeners (only if elements exist)
            if (checkinInput) {
                checkinInput.addEventListener('change', updateCheckoutMinDate);
            }
            
            if (checkoutInput) {
                checkoutInput.addEventListener('change', validateCottageMinimumStay);
            }
            
            // Mobile-specific performance optimizations
            if (window.innerWidth <= 768) {
                // Reduce animation frequency on mobile
                const reducedMotionQuery = window.matchMedia('(prefers-reduced-motion: reduce)');
                if (reducedMotionQuery.matches) {
                    document.body.classList.add('reduce-motion');
                }
                
                // Optimize touch scrolling
                document.body.style.touchAction = 'pan-y';
                document.body.style.webkitOverflowScrolling = 'touch';
            }
        }

        // Mobile optimization functions
        let isTouch = false;
        let touchStartY = 0;
        let touchEndY = 0;
        let touchDevice = false;

        function detectTouch() {
            touchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
            if (touchDevice) {
                document.body.classList.add('touch-device');
            }
        }

        function setMobileViewportHeight() {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
            
            window.addEventListener('resize', () => {
                const vh = window.innerHeight * 0.01;
                document.documentElement.style.setProperty('--vh', `${vh}px`);
            });
        }

        function enhanceMobileMenu() {
            const mobileNav = document.getElementById('mobileNav');
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            
            if (mobileMenuBtn) {
                mobileMenuBtn.addEventListener('touchstart', function() {
                    this.style.opacity = '0.7';
                }, { passive: true });
                
                mobileMenuBtn.addEventListener('touchend', function() {
                    this.style.opacity = '1';
                }, { passive: true });
            }
            
            if (mobileNav) {
                mobileNav.addEventListener('touchmove', function(e) {
                    if (this.classList.contains('active')) {
                        e.preventDefault();
                    }
                }, { passive: false });
            }
        }

        // === VOUCHER SYSTEM ===
        


        // === VOUCHER PURCHASE SYSTEM ===
        
        // OLD SYSTEM VARIABLES - NOW REDIRECT TO V2NEW
        let selectedVoucherAmount = 'flexible-550-v2'; // Redirect to V2New
        let currentVoucherStep = 1;
        let voucherData = {}; // Will be populated from V2New data










        // === STREAMLINED 3-BUTTON BOOKING SYSTEM ===

        function openBookingModal(preSelectedAccommodation = null) {
            // Console statement removed for production
            document.getElementById('bookingModal').classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Pre-select accommodation if specified BEFORE reset
            if (preSelectedAccommodation) {
                selectedAccommodation = preSelectedAccommodation;
            }
            
            resetBookingModal();
            
            // Apply selection after reset
            if (preSelectedAccommodation) {
                selectAccommodation(preSelectedAccommodation);
                // Console statement removed for production
            }
        }

        function closeBookingModal() {
            document.getElementById('bookingModal').classList.remove('active');
            document.body.style.overflow = '';
            resetBookingModal();
        }

        function resetBookingModal() {
            currentBookingStep = 1;
            bookingData = {};
            
            // Reset all steps
            document.querySelectorAll('.booking-step').forEach(step => {
                step.classList.remove('active');
            });
            document.getElementById('bookingStep1').classList.add('active');
            
            // Reset accommodation selection (but keep pre-selected if any)
            document.querySelectorAll('.accommodation-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Re-select accommodation if it was pre-selected
            if (selectedAccommodation) {
                selectAccommodation(selectedAccommodation);
            } else {
                // Reset to default form (cottage settings)
                updateBookingFormForAccommodation('cottage');
            }
            
            // Reset form
            document.getElementById('bookingCheckin').value = '';
            document.getElementById('bookingCheckout').value = '';
            document.getElementById('bookingAdults').value = '2';
            document.getElementById('bookingChildren').value = '0';
            
            // Hide sections that should be hidden initially
            document.getElementById('pricingBreakdown').style.display = 'none';
            document.getElementById('guestDetailsSection').style.display = 'none';
            document.getElementById('instantPaymentSection').style.display = 'none';
            const availabilityResult = document.getElementById('availabilityResult');
            if (availabilityResult) availabilityResult.textContent = '';
        }

        function selectAccommodation(accommodationType) {
            // Console statement removed for production
            selectedAccommodation = accommodationType;
            
            // Update UI
            document.querySelectorAll('.accommodation-option').forEach(option => {
                option.classList.remove('selected');
            });
            const selectedElement = document.querySelector(`[data-accommodation="${accommodationType}"]`);
            if (selectedElement) {
                selectedElement.classList.add('selected');
                // Console statement removed for production
            } else {
                // Console statement removed for production
            }
            
            // Update form based on accommodation type
            updateBookingFormForAccommodation(accommodationType);
            
            // Immediately scroll to dates section after accommodation selection
            setTimeout(() => {
                const datesSection = document.querySelector('.booking-date-row');
                if (datesSection) {
                    datesSection.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                }
            }, 100);
        }
        
        function updateBookingFormForAccommodation(accommodationType) {
            const adultsSelect = document.getElementById('bookingAdults');
            const childrenSelect = document.getElementById('bookingChildren');
            const childrenGroup = childrenSelect.closest('.booking-form-group');
            const petSelectionGroup = document.getElementById('petSelectionGroup');
            const cottageWarning = document.getElementById('cottageMinimumStayWarning');
            
            if (accommodationType === 'dome-pinot' || accommodationType === 'dome-rose') {
                // Domes: Adults only (1-2), no children, no pets
                safeCreateSelectOptions(adultsSelect, [
                    {value: '1', text: '1 Adult'},
                    {value: '2', text: '2 Adults', selected: true}
                ]);
                
                // Hide children section for domes
                if (childrenGroup) {
                    childrenGroup.style.display = 'none';
                }
                
                // Hide pet option for domes
                if (petSelectionGroup) {
                    petSelectionGroup.style.display = 'none';
                    document.getElementById('bookingPets').value = '0';
                }
                
                // Set children to 0 for domes
                childrenSelect.value = '0';
                
                // Hide cottage minimum stay warning for domes
                if (cottageWarning) {
                    cottageWarning.style.display = 'none';
                }
                
                // Console statement removed for production
            } else {
                // Cottage: Maximum 4 people total, pets allowed
                safeCreateSelectOptions(adultsSelect, [
                    {value: '1', text: '1 Adult'},
                    {value: '2', text: '2 Adults', selected: true},
                    {value: '3', text: '3 Adults'},
                    {value: '4', text: '4 Adults'}
                ]);
                
                // Show children section for cottage (max 2 children to keep total at 4)
                if (childrenGroup) {
                    childrenGroup.style.display = 'block';
                    safeCreateSelectOptions(childrenSelect, [
                        {value: '0', text: '0 Children', selected: true},
                        {value: '1', text: '1 Child'},
                        {value: '2', text: '2 Children'}
                    ]);
                }
                
                // Show pet option for cottage
                if (petSelectionGroup) {
                    petSelectionGroup.style.display = 'block';
                }
                
                // Show cottage minimum stay warning
                if (cottageWarning) {
                    cottageWarning.style.display = 'block';
                }
                
                // Console statement removed for production
            }
        }

        function updateCheckoutMinDate() {
            const checkinDate = new Date(document.getElementById('bookingCheckin').value);
            if (checkinDate) {
                checkinDate.setDate(checkinDate.getDate() + 1);
                document.getElementById('bookingCheckout').min = checkinDate.toISOString().split('T')[0];
                
                // Clear checkout if it's before new minimum
                const checkoutInput = document.getElementById('bookingCheckout');
                if (checkoutInput.value && new Date(checkoutInput.value) <= new Date(document.getElementById('bookingCheckin').value)) {
                    checkoutInput.value = '';
                }
                
                // Check cottage minimum stay requirements
                validateCottageMinimumStay();
            }
        }

        function calculateNightsFrontend(checkIn, checkOut) {
            if (!checkIn || !checkOut) return 0;
            const checkInDate = new Date(checkIn);
            const checkOutDate = new Date(checkOut);
            const timeDifference = checkOutDate.getTime() - checkInDate.getTime();
            return Math.ceil(timeDifference / (1000 * 3600 * 24));
        }

        function isPeakSeason(date) {
            const month = new Date(date).getMonth() + 1; // JS months are 0-based
            return month >= 10 || month <= 5; // Oct (10) through May (5)
        }

        function validateCottageMinimumStay() {
            const checkIn = document.getElementById('bookingCheckin').value;
            const checkOut = document.getElementById('bookingCheckout').value;
            
            if (!checkIn || !checkOut || selectedAccommodation !== 'lakeside-cottage') {
                return true;
            }
            
            const nights = calculateNightsFrontend(checkIn, checkOut);
            const isPeak = isPeakSeason(checkIn);
            
            if (isPeak && nights < 2) {
                // Show error message
                showDateValidationError('Minimum 2-night stay required for Lakeside Cottage during peak season (October to May)');
                return false;
            } else {
                // Clear error message
                clearDateValidationError();
                return true;
            }
        }

        function showDateValidationError(message) {
            let errorDiv = document.getElementById('dateValidationError');
            if (!errorDiv) {
                errorDiv = document.createElement('div');
                errorDiv.id = 'dateValidationError';
                errorDiv.style.cssText = 'background: #fee2e2; border: 1px solid #ef4444; padding: 0.75rem; border-radius: 6px; margin: 0.5rem 0; color: #dc2626; font-size: 0.9rem;';
                
                const dateRow = document.querySelector('.booking-date-row');
                if (dateRow) {
                    dateRow.parentNode.insertBefore(errorDiv, dateRow.nextSibling);
                }
            }
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
        }

        function clearDateValidationError() {
            const errorDiv = document.getElementById('dateValidationError');
            if (errorDiv) {
                errorDiv.style.display = 'none';
            }
        }

        // INSTANT BOOKING: Combined availability check, pricing, and immediate payment
        async function instantBookingWithPayment() {
            // Console statement removed for production
            // Console statement removed for production
            // Console statement removed for production
            // Console statement removed for production
            
            if (!selectedAccommodation) {
                // Console statement removed for production
                alert('Please select an accommodation type');
                return;
            }

            const checkin = document.getElementById('bookingCheckin').value;
            const checkout = document.getElementById('bookingCheckout').value;
            const adults = document.getElementById('bookingAdults').value;
            const children = document.getElementById('bookingChildren').value;
            const pets = document.getElementById('bookingPets') ? document.getElementById('bookingPets').value : '0';

            // Console statement removed for production

            if (!checkin || !checkout) {
                // Console statement removed for production
                alert('Please select both check-in and check-out dates');
                return;
            }

            const checkinDate = new Date(checkin);
            const checkoutDate = new Date(checkout);
            
            // Console statement removed for production
            
            if (checkoutDate <= checkinDate) {
                // Console statement removed for production
                alert('Check-out date must be after check-in date');
                return;
            }

            // Validate cottage minimum stay requirements
            if (!validateCottageMinimumStay()) {
                alert('Minimum 2-night stay required for Lakeside Cottage during peak season (October to May)');
                return;
            }

            // Store booking data
            bookingData = {
                accommodation: selectedAccommodation,
                checkin: checkin,
                checkout: checkout,
                adults: parseInt(adults),
                children: parseInt(children),
                pets: parseInt(pets),
                nights: Math.ceil((checkoutDate - checkinDate) / (1000 * 60 * 60 * 24))
            };

            // Console statement removed for production

            // Show loading state
            const availabilityResult = document.getElementById('availabilityResult');
            if (window.SecureFrontend) {
          window.SecureFrontend.safeSetInnerHTML(availabilityResult, '<div style="text-align: center;">Checking availability and calculating pricing <span class="loading-spinner"></span></div>');
        } else {
          availabilityResult.textContent = 'Checking availability and calculating pricing...';
        }

            // Console statement removed for production

            // Simulate API call to Uplisting
            await new Promise(resolve => setTimeout(resolve, 1500));

            // Mock availability check (90% chance of availability)
            const isAvailable = Math.random() > 0.1;
            
            // Console statement removed for production
            
            if (isAvailable) {
                // Console statement removed for production
                calculatePricingWithGST();
                updateSelectedDetails();
                if (window.SecureFrontend) {
          window.SecureFrontend.updateAvailabilityResult('Available for Instant Booking! Your selected dates are available. Complete your booking below.', true);
        } else {
          availabilityResult.textContent = '‚úÖ Available for Instant Booking! Your selected dates are available. Complete your booking below.';
        }
                document.getElementById('pricingBreakdown').style.display = 'block';
                document.getElementById('guestDetailsSection').style.display = 'block';
                document.getElementById('instantPaymentSection').style.display = 'block';
                
                // Move to step 2 to show the booking details
                goToBookingStep(2);
                
                // Console statement removed for production
                // Console statement removed for production
            } else {
                if (window.SecureFrontend) {
          window.SecureFrontend.updateAvailabilityResult('Not Available. These dates are not available. Please try different dates.', false);
        } else {
          availabilityResult.textContent = '‚ùå Not Available. These dates are not available. Please try different dates.';
        }
                document.getElementById('pricingBreakdown').style.display = 'none';
                document.getElementById('guestDetailsSection').style.display = 'none';
                document.getElementById('instantPaymentSection').style.display = 'none';
            }
        }

        // ENHANCED PRICING CALCULATION WITH NZ GST
        function calculatePricingWithGST() {
            const rates = accommodationRates[selectedAccommodation];
            
            // Determine rate type based on season (mock logic)
            const checkinDate = new Date(bookingData.checkin);
            const month = checkinDate.getMonth();
            let rateType = 'base';
            if (month >= 11 || month <= 2) rateType = 'peak'; // Summer
            if (month >= 5 && month <= 8) rateType = 'offPeak'; // Winter
            
            const nightlyRate = rates[rateType];
            let subtotal = nightlyRate * bookingData.nights;
            
            // Calculate extra guest charges for cottage (beyond 2 people)
            let extraGuestCharge = 0;
            if (selectedAccommodation === 'lakeside-cottage') {
                const totalGuests = bookingData.adults + bookingData.children;
                if (totalGuests > 2) {
                    const extraGuests = totalGuests - 2;
                    extraGuestCharge = extraGuests * 100 * bookingData.nights; // $100 per extra guest per night
                    subtotal += extraGuestCharge;
                }
            }
            
            // Calculate pet fees for cottage
            let petFee = 0;
            if (selectedAccommodation === 'lakeside-cottage' && bookingData.pets > 0) {
                petFee = bookingData.pets * 25 * bookingData.nights; // $25 per pet per night
                subtotal += petFee;
            }
            
            const cleaningFee = 75;
            const serviceFee = Math.round(subtotal * 0.03); // 3% service fee
            
            // Calculate total (all prices already include GST)
            const total = subtotal + cleaningFee + serviceFee;
            // GST is already included in all prices (15% of total)
            const gst = Math.round(total * 0.13); // GST portion is 15/115 = 13% of GST-inclusive price

            // Update booking data
            bookingData.nightlyRate = nightlyRate;
            bookingData.subtotal = subtotal;
            bookingData.extraGuestCharge = extraGuestCharge;
            bookingData.petFee = petFee;
            bookingData.cleaningFee = cleaningFee;
            bookingData.serviceFee = serviceFee;
            bookingData.gst = gst;
            bookingData.total = total;

            // Update UI with NZD formatting
            document.getElementById('accommodationRate').textContent = `${nightlyRate} NZD`;
            document.getElementById('numberOfNights').textContent = bookingData.nights;
            document.getElementById('subtotal').textContent = `${subtotal} NZD`;
            
            // Show/hide extra guest charge for cottage
            const extraGuestRow = document.getElementById('extraGuestRow');
            const extraGuestChargeElement = document.getElementById('extraGuestCharge');
            if (selectedAccommodation === 'lakeside-cottage' && extraGuestCharge > 0) {
                extraGuestRow.style.display = 'flex';
                extraGuestChargeElement.textContent = `${extraGuestCharge} NZD`;
            } else {
                extraGuestRow.style.display = 'none';
                extraGuestChargeElement.textContent = '$0';
            }
            
            // Show/hide pet fee for cottage
            const petFeeRow = document.getElementById('petFeeRow');
            const petFeeElement = document.getElementById('petFee');
            if (selectedAccommodation === 'lakeside-cottage' && petFee > 0) {
                if (petFeeRow) {
                    petFeeRow.style.display = 'flex';
                    petFeeElement.textContent = `${petFee} NZD`;
                }
            } else {
                if (petFeeRow) {
                    petFeeRow.style.display = 'none';
                    petFeeElement.textContent = '$0';
                }
            }
            
            document.getElementById('cleaningFee').textContent = `${cleaningFee} NZD`;
            document.getElementById('serviceFee').textContent = `${serviceFee} NZD`;
            document.getElementById('gst').textContent = `${gst} NZD`;
            document.getElementById('totalAmount').textContent = `${total} NZD`;
        }

        // SECURE PAYMENT: Process payment securely with Stripe
        async function processInstantPayment() {
            try {
                // Validate guest details are filled
                const firstName = document.getElementById('guestFirstName').value;
                const lastName = document.getElementById('guestLastName').value;
                const emailInput = document.getElementById('guestEmail');
                const phone = document.getElementById('guestPhone').value;

                // Validate email
                if (!validateEmail(emailInput)) {
                    return;
                }

                if (!firstName || !lastName || !phone) {
                    alert('Please fill in all required guest information');
                    return;
                }

                // Use secure payment processing if available
                if (window.SecurePayment && window.SecurePayment.processSecurePaymentFromForm) {
                    await window.SecurePayment.processSecurePaymentFromForm();
                } else {
                    // Fallback to secure API call
                    const bookingData = {
                        accommodation: selectedAccommodation,
                        checkIn: document.getElementById('bookingCheckin').value,
                        checkOut: document.getElementById('bookingCheckout').value,
                        guests: document.getElementById('bookingAdults').value,
                        guestName: firstName + ' ' + lastName,
                        guestEmail: emailInput.value,
                        guestPhone: phone,
                        specialRequests: document.getElementById('specialRequests').value
                    };

                    // Sanitize data if secure functions available
                    if (window.SecureFrontend && window.SecureFrontend.sanitizeFormData) {
                        const formData = new FormData();
                        Object.keys(bookingData).forEach(key => {
                            formData.append(key, bookingData[key]);
                        });
                        const sanitizedData = window.SecureFrontend.sanitizeFormData(formData);
                        Object.assign(bookingData, sanitizedData);
                    }

                    // Process payment securely
                    const response = await fetch('/api/process-booking', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-CSRF-Token': await getCSRFToken()
                        },
                        credentials: 'include',
                        body: JSON.stringify(bookingData)
                    });

                    if (!response.ok) {
                        throw new Error('Payment processing failed');
                    }

                    const result = await response.json();
                    
                    // Show success
                    if (window.SecureFrontend && window.SecureFrontend.showSuccess) {
                        window.SecureFrontend.showSuccess('Payment processed successfully! Your booking is confirmed.');
                    } else {
                        alert('Payment processed successfully! Your booking is confirmed.');
                    }

                    // Close modal and redirect
                    setTimeout(() => {
                        closeBookingModal();
                        showPage('home');
                    }, 2000);
                }
                
            } catch (error) {
                // Console statement removed for production
                
                if (window.SecureFrontend && window.SecureFrontend.handleSecurityError) {
                    window.SecureFrontend.handleSecurityError(error, 'payment_processing');
                } else {
                    alert('Payment processing failed. Please try again.');
                }
            }
        }

        // Process booking with Uplisting after successful payment
        async function processBookingWithUplisting() {
            const paymentButton = document.getElementById('instantPaymentBtn');
            safeSetContent('instantPaymentBtn', 'Creating Booking with Uplisting', true);
            // Add loading spinner safely
            const spinner = document.createElement('span');
            spinner.className = 'loading-spinner';
            paymentButton.appendChild(spinner);

            // Simulate Uplisting API call
            await new Promise(resolve => setTimeout(resolve, 2000));

            // Mock successful booking
            const bookingReference = 'LR' + Date.now().toString().slice(-6);
            
            // Show success message securely
            if (window.SecureFrontend && window.SecureFrontend.updateBookingResult) {
                window.SecureFrontend.updateBookingResult(true, 'Instant Booking Confirmed! Thank you for choosing Lakeside Retreat. Your booking has been instantly confirmed and you\'ll receive a confirmation email shortly.');
            } else {
                const bookingResultSection = document.getElementById('bookingResultSection');
                const successDiv = document.createElement('div');
                successDiv.className = 'booking-success';
                // Create success content safely without innerHTML
                const iconDiv = document.createElement('div');
                iconDiv.className = 'success-icon';
                iconDiv.textContent = '‚úÖ';
                
                const heading = document.createElement('h3');
                heading.style.color = 'var(--brand-teal)';
                heading.style.marginBottom = '1rem';
                heading.textContent = 'Instant Booking Confirmed!';
                
                const description = document.createElement('p');
                description.textContent = 'Thank you for choosing Lakeside Retreat. Your booking has been instantly confirmed and you\'ll receive a confirmation email shortly.';
                
                const detailsDiv = document.createElement('div');
                detailsDiv.style.background = '#FAF4F5';
                detailsDiv.style.padding = '1rem';
                detailsDiv.style.borderRadius = '10px';
                detailsDiv.style.margin = '1.5rem 0';
                
                // Create detail paragraphs with safe text content
                const refP = document.createElement('p');
                refP.innerHTML = '<strong>Booking Reference:</strong> ';
                refP.appendChild(document.createTextNode(sanitizeHTML(bookingReference)));
                
                const totalP = document.createElement('p');
                totalP.innerHTML = '<strong>Total Paid (incl. GST):</strong> ';
                totalP.appendChild(document.createTextNode(sanitizeHTML(bookingData.total + ' NZD')));
                
                const methodP = document.createElement('p');
                methodP.innerHTML = '<strong>Payment Method:</strong> Credit Card via Stripe';
                
                const emailP = document.createElement('p');
                emailP.innerHTML = '<strong>Confirmation sent to:</strong> ';
                emailP.appendChild(document.createTextNode(sanitizeHTML(document.getElementById('guestEmail').value)));
                
                detailsDiv.appendChild(refP);
                detailsDiv.appendChild(totalP);
                detailsDiv.appendChild(methodP);
                detailsDiv.appendChild(emailP);
                
                const closeButton = document.createElement('button');
                closeButton.className = 'btn btn-primary';
                closeButton.style.marginTop = '1rem';
                closeButton.textContent = 'Close & Plan Your Stay';
                closeButton.onclick = closeBookingModal;
                
                successDiv.appendChild(iconDiv);
                successDiv.appendChild(heading);
                successDiv.appendChild(description);
                successDiv.appendChild(detailsDiv);
                successDiv.appendChild(closeButton);
                bookingResultSection.textContent = '';
                bookingResultSection.appendChild(successDiv);
            }

            // Hide the payment section
            document.getElementById('instantPaymentSection').style.display = 'none';
            paymentButton.parentElement.style.display = 'none';

            // In real implementation, this would:
            // 1. Process payment through Stripe API
            // 2. Create booking in Uplisting via API
            // 3. Send confirmation emails
            // 4. Update calendar availability
            // 5. Sync with all booking platforms
        }

        function updateSelectedDetails() {
            const checkinDate = new Date(bookingData.checkin);
            const checkoutDate = new Date(bookingData.checkout);
            
            document.getElementById('selectedDetailsDisplay').innerHTML = `
                <h4 style="color: var(--brand-teal); margin-bottom: 0.5rem;">Selected Energy-Positive Experience</h4>
                <p><strong>Accommodation:</strong> ${accommodationNames[selectedAccommodation]}</p>
                <p><strong>Check-in:</strong> ${checkinDate.toLocaleDateString()} | <strong>Check-out:</strong> ${checkoutDate.toLocaleDateString()}</p>
                <p><strong>Guests:</strong> ${bookingData.adults} Adults${bookingData.children > 0 ? `, ${bookingData.children} Children` : ''}${bookingData.pets > 0 ? `, ${bookingData.pets} Pet${bookingData.pets > 1 ? 's' : ''}` : ''}</p>
                <p><strong>Duration:</strong> ${bookingData.nights} night${bookingData.nights > 1 ? 's' : ''}</p>
                <p style="color: #10b981; font-weight: 600;">‚úì Powered by 16.72kW commercial-grade solar system</p>
            `;
        }

        function goToBookingStep(stepNumber) {
            currentBookingStep = stepNumber;
            
            // Hide all steps
            document.querySelectorAll('.booking-step').forEach(step => {
                step.classList.remove('active');
            });
            
            // Show selected step
            document.getElementById(`bookingStep${stepNumber}`).classList.add('active');

            // Update progress indicator
            document.querySelectorAll('.progress-step').forEach((step, index) => {
                const stepNum = index + 1;
                if (stepNum < stepNumber) {
                    step.classList.add('completed');
                    step.classList.remove('active');
                } else if (stepNum === stepNumber) {
                    step.classList.add('active');
                    step.classList.remove('completed');
                } else {
                    step.classList.remove('active', 'completed');
                }
            });

            // Update progress bars
            document.querySelectorAll('.progress-bar').forEach((bar, index) => {
                if (index + 1 < stepNumber) {
                    bar.classList.add('completed');
                } else {
                    bar.classList.remove('completed');
                }
            });

            // Update final booking summary if going to step 3
            if (stepNumber === 3) {
                updateFinalSummary();
            }
        }

        function updateFinalSummary() {
            const checkinDate = new Date(bookingData.checkin);
            const checkoutDate = new Date(bookingData.checkout);
            
            // Update booking summary
            document.getElementById('finalAccommodationName').textContent = accommodationNames[selectedAccommodation];
            document.getElementById('finalDates').textContent = `${checkinDate.toLocaleDateString()} - ${checkoutDate.toLocaleDateString()}`;
            document.getElementById('finalGuests').textContent = `${bookingData.adults} Adults${bookingData.children > 0 ? `, ${bookingData.children} Children` : ''}`;
            document.getElementById('finalNights').textContent = `${bookingData.nights} night${bookingData.nights > 1 ? 's' : ''}`;
            
            // Update price breakdown
            document.getElementById('finalAccommodationRate').textContent = `$${bookingData.nightlyRate}`;
            document.getElementById('finalNumberOfNights').textContent = bookingData.nights;
            document.getElementById('finalSubtotal').textContent = `$${bookingData.subtotal}`;
            document.getElementById('finalCleaningFee').textContent = `$${bookingData.cleaningFee}`;
            document.getElementById('finalServiceFee').textContent = `$${bookingData.serviceFee}`;
            
            // Show/hide optional fees
            const finalExtraGuestRow = document.getElementById('finalExtraGuestRow');
            const finalPetFeeRow = document.getElementById('finalPetFeeRow');
            
            if (bookingData.extraGuestCharge && bookingData.extraGuestCharge > 0) {
                finalExtraGuestRow.style.display = 'flex';
                document.getElementById('finalExtraGuestFee').textContent = `$${bookingData.extraGuestCharge}`;
            } else {
                finalExtraGuestRow.style.display = 'none';
            }
            
            if (bookingData.petFee && bookingData.petFee > 0) {
                finalPetFeeRow.style.display = 'flex';
                document.getElementById('finalPetFee').textContent = `$${bookingData.petFee}`;
            } else {
                finalPetFeeRow.style.display = 'none';
            }
            
            document.getElementById('finalGST').textContent = `$${bookingData.gst}`;
            document.getElementById('finalTotalAmount').textContent = `$${bookingData.total}`;
        }

        // Validate guest details before proceeding to step 3
        function validateGuestDetailsAndContinue() {
            // Collect guest data for validation
            const guestData = {
                firstName: document.getElementById('guestFirstName').value.trim(),
                lastName: document.getElementById('guestLastName').value.trim(),
                email: document.getElementById('guestEmail').value.trim(),
                phone: document.getElementById('guestPhone').value.trim()
            };

            // Validate required fields first with visual feedback
            let hasErrors = false;
            
            if (!guestData.firstName) {
                showFormError('guestFirstName', 'First name is required');
                hasErrors = true;
            }
            
            if (!guestData.lastName) {
                showFormError('guestLastName', 'Last name is required');
                hasErrors = true;
            }
            
            if (!guestData.email) {
                showFormError('guestEmail', 'Email address is required');
                hasErrors = true;
            }
            
            if (!guestData.phone) {
                showFormError('guestPhone', 'Phone number is required');
                hasErrors = true;
            } else {
                // Validate phone format if provided
                const phoneInput = document.getElementById('guestPhone');
                if (!validatePhoneNumber(phoneInput)) {
                    showFormError('guestPhone', 'Please enter a valid phone number (7-15 digits)');
                    hasErrors = true;
                }
            }
            
            if (hasErrors) {
                return;
            }

            // Validate email format
            const emailInput = document.getElementById('guestEmail');
            if (!validateEmail(emailInput)) {
                showFormError('guestEmail', 'Please enter a valid email address');
                return;
            }

            // If all validation passes, proceed to step 3
            goToBookingStep(3);
        }

        // BUTTON 3: Process booking and show confirmation
        async function processBookingAndConfirm() {
            // Collect guest data
            const guestData = {
                firstName: document.getElementById('guestFirstName').value,
                lastName: document.getElementById('guestLastName').value,
                email: document.getElementById('guestEmail').value,
                phone: document.getElementById('guestPhone').value,
                specialRequests: document.getElementById('specialRequests').value
            };

            // Validate required fields first
            if (!guestData.firstName || !guestData.lastName || !guestData.email || !guestData.phone) {
                alert('Please fill in all required fields');
                return;
            }

            // Validate email format
            const emailInput = document.getElementById('guestEmail');
            if (!validateEmail(emailInput)) {
                return;
            }

            // Update button state
            const button = event.target;
            button.innerHTML = 'Processing Booking with Uplisting <span class="loading-spinner"></span>';
            button.disabled = true;

            // Simulate booking API call to Uplisting
            await new Promise(resolve => setTimeout(resolve, 3000));

            // Mock successful booking
            const bookingReference = 'LR' + Date.now().toString().slice(-6);
            
            // Show success directly in step 3
            document.getElementById('bookingResultSection').innerHTML = `
                <div class="booking-success">
                    <div class="success-icon">‚úÖ</div>
                    <h3 style="color: var(--brand-teal); margin-bottom: 1rem;">Booking Confirmed!</h3>
                    <p>Thank you for choosing Lakeside Retreat. You'll receive a confirmation email shortly with all the details for your stay.</p>
                    <div style="background: #FAF4F5; padding: 1rem; border-radius: 10px; margin: 1.5rem 0;">
                        <p><strong>Booking Reference:</strong> ${bookingReference}</p>
                        <p><strong>Total Paid (incl. GST):</strong> ${bookingData.total} NZD</p>
                        <p><strong>Confirmation sent to:</strong> ${guestData.email}</p>
                    </div>
                    <button class="btn btn-primary" onclick="closeBookingModal()" style="margin-top: 1rem;">Close & Plan Your Stay</button>
                </div>
            `;

            // Hide the back/confirm buttons
            button.parentElement.style.display = 'none';

            // In real implementation, this would:
            // 1. Process payment through Stripe/PayPal
            // 2. Create booking in Uplisting via API
            // 3. Send confirmation emails
            // 4. Update calendar availability
            // 5. Sync with all booking platforms
        }

        // === EMAIL VALIDATION FUNCTIONS ===

        function validateEmail(input) {
            const email = input.value.trim();
            const errorElement = document.getElementById(input.id + 'Error');
            
            // Email regex pattern
            const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            
            // Clear previous error
            if (errorElement) {
                errorElement.style.display = 'none';
                input.style.borderColor = '';
            }
            
            // Check if email is empty
            if (!email) {
                if (errorElement) {
                    errorElement.textContent = 'Please enter your email address';
                    errorElement.style.display = 'block';
                    input.style.borderColor = '#dc2626';
                }
                return false;
            }
            
            // Check email format
            if (!emailPattern.test(email)) {
                if (errorElement) {
                    errorElement.textContent = 'Please enter a valid email address (e.g., yourname@example.com)';
                    errorElement.style.display = 'block';
                    input.style.borderColor = '#dc2626';
                }
                return false;
            }
            
            // Check for common mistakes
            if (email.includes('..') || email.includes('@@') || email.startsWith('.') || email.endsWith('.')) {
                if (errorElement) {
                    errorElement.textContent = 'Please check your email address format';
                    errorElement.style.display = 'block';
                    input.style.borderColor = '#dc2626';
                }
                return false;
            }
            
            // Check domain
            const domain = email.split('@')[1];
            if (!domain || domain.length < 3) {
                if (errorElement) {
                    errorElement.textContent = 'Please enter a valid email domain';
                    errorElement.style.display = 'block';
                    input.style.borderColor = '#dc2626';
                }
                return false;
            }
            
            // Email is valid
            if (errorElement) {
                errorElement.style.display = 'none';
                input.style.borderColor = '#10b981';
            }
            return true;
        }

        function clearEmailError(input) {
            const errorElement = document.getElementById(input.id + 'Error');
            if (errorElement) {
                errorElement.style.display = 'none';
                input.style.borderColor = '';
            }
        }

        // Form validation helper functions
        function showFormError(fieldId, message) {
            const input = document.getElementById(fieldId);
            const errorElement = document.getElementById(fieldId + 'Error');
            
            if (input) {
                input.classList.add('error');
            }
            
            if (errorElement) {
                errorElement.textContent = message;
                errorElement.classList.add('show');
            }
        }

        function clearFormError(fieldId) {
            const input = document.getElementById(fieldId);
            const errorElement = document.getElementById(fieldId + 'Error');
            
            if (input) {
                input.classList.remove('error');
            }
            
            if (errorElement) {
                errorElement.classList.remove('show');
            }
        }

        // Phone number validation function
        function validatePhoneNumber(input) {
            const phone = input.value.trim();
            
            // Allow empty for optional fields
            if (!phone) return true;
            
            // Remove all non-digit characters to count actual numbers
            const digitsOnly = phone.replace(/\D/g, '');
            
            // Check minimum and maximum length
            if (digitsOnly.length < 7) {
                return false;
            }
            
            if (digitsOnly.length > 15) {
                return false;
            }
            
            // Check for common valid patterns (basic format check)
            // Allows: +64 3 123 4567, (03) 123-4567, 021 123 456, 0312341234, etc.
            const phonePattern = /^[\+]?[\d\s\-\(\)]{7,20}$/;
            
            if (!phonePattern.test(phone)) {
                return false;
            }
            
            return true;
        }

        // Phone field validation with error display
        function validatePhoneField(input) {
            const phone = input.value.trim();
            
            if (!phone) {
                // Don't show error for empty field during blur, will be caught on submit
                return true;
            }
            
            if (!validatePhoneNumber(input)) {
                showFormError('guestPhone', 'Please enter a valid phone number (7-15 digits)');
                return false;
            } else {
                clearFormError('guestPhone');
                return true;
            }
        }

        // Auto-scroll to booking button when date fields are focused
        function scrollToBookingButton() {
            // Small delay to allow date picker to open first
            setTimeout(() => {
                // Find the "Check Availability & Book Instantly" button
                const bookingButton = document.querySelector('button[onclick="instantBookingWithPayment()"]');
                
                if (bookingButton) {
                    bookingButton.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                }
            }, 300);
        }

        // === CONTACT FORM EMAIL HANDLER ===
        
        async function sendContactMessage(event) {
            event.preventDefault();
            
            const submitBtn = document.getElementById('contactSubmitBtn');
            const statusDiv = document.getElementById('contactFormStatus');
            
            // Get form values
            const name = document.getElementById('contactName').value.trim();
            const email = document.getElementById('contactEmail').value.trim();
            const message = document.getElementById('contactMessage').value.trim();
            
            // Validate email
            const emailInput = document.getElementById('contactEmail');
            if (!validateEmail(emailInput)) {
                return;
            }
            
            // Update button state
            submitBtn.disabled = true;
            submitBtn.innerHTML = 'Sending... <span class="loading-spinner"></span>';
            
            try {
                // Check if backend server is available
                const backendUrl = window.location.hostname === 'localhost' 
                    ? 'http://localhost:3000' 
                    : window.location.origin;
                
                // Send to backend API
                const response = await fetch(`${backendUrl}/api/contact`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        name: name,
                        email: email,
                        message: message,
                        timestamp: new Date().toISOString()
                    })
                });
                
                if (response.ok) {
                    // Success
                    statusDiv.style.display = 'block';
                    statusDiv.style.color = '#10b981';
                    statusDiv.innerHTML = '‚úÖ Message sent successfully! We\'ll get back to you within 24 hours.';
                    
                    // Reset form
                    document.getElementById('contactForm').reset();
                    
                    // Hide status after 5 seconds
                    setTimeout(() => {
                        statusDiv.style.display = 'none';
                    }, 5000);
                } else {
                    throw new Error('Failed to send message');
                }
                
            } catch (error) {
                // Fallback to mailto if backend is not available
                const subject = encodeURIComponent('Website Contact from ' + name);
                const body = encodeURIComponent(`Name: ${name}\nEmail: ${email}\n\nMessage:\n${message}`);
                const mailtoLink = `mailto:info@lakesideretreat.co.nz?subject=${subject}&body=${body}`;
                
                // Open mailto link
                window.location.href = mailtoLink;
                
                // Show fallback message
                statusDiv.style.display = 'block';
                statusDiv.style.color = '#f59e0b';
                statusDiv.innerHTML = 'üìß Opening your email client to send message...';
                
                // Reset form after short delay
                setTimeout(() => {
                    document.getElementById('contactForm').reset();
                    statusDiv.style.display = 'none';
                }, 3000);
            } finally {
                // Reset button
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'Send Message';
            }
        }

        // === ORIGINAL WEBSITE FUNCTIONS ===

        function showPage(pageName) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });

            const pageElement = document.getElementById(pageName + 'Page');
            if (pageElement) {
                pageElement.classList.add('active');
            }

            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });

            const activeLink = document.querySelector(`[onclick="showPage('${pageName}')"]`);
            if (activeLink && activeLink.classList.contains('nav-link')) {
                activeLink.classList.add('active');
            }

            currentPage = pageName;

            // Initialize carousels when stay page is shown
            if (pageName === 'stay') {
                initializeCarousels();
            }
            
            // FORCE scroll to top - multiple methods for reliability
            document.documentElement.scrollTop = 0;
            document.body.scrollTop = 0;
            window.scrollTo(0, 0);
            
            // Also try smooth scroll
            setTimeout(() => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, 50);
            
            trackPageView(pageName);
        }

        function showLegalPage(legalType) {
            // Create modal for legal pages
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                z-index: 10000;
                display: flex;
                justify-content: center;
                align-items: center;
                padding: 20px;
            `;

            const legalContent = {
                terms: {
                    title: 'Terms & Conditions',
                    content: `
                        <h2>Terms & Conditions</h2>
                        <p><strong>Last updated: January 2024</strong></p>
                        
                        <h3>1. Booking & Payment</h3>
                        <p>All bookings require a valid credit card for reservation. Payment is processed through Stripe for secure transactions. Full payment is required at time of booking unless otherwise specified.</p>
                        
                        <h3>2. Cancellation Policy</h3>
                        <p>Cancellations made 14 days or more before arrival receive a full refund. Cancellations within 14 days are non-refundable. No-shows will be charged the full amount.</p>
                        
                        <h3>3. Check-in & Check-out</h3>
                        <p>Check-in is available from 3:00 PM. Check-out is required by 10:00 AM. Early check-in or late check-out may be available upon request and subject to availability.</p>
                        
                        <h3>4. Guest Responsibilities</h3>
                        <p>Guests are responsible for the accommodation during their stay. Any damage or excessive cleaning required will be charged to the guest's account. Smoking is not permitted inside any accommodation.</p>
                        
                        <h3>5. Pet Policy</h3>
                        <p>Pets are welcome in Lakeside Cottage only, subject to prior approval. A pet fee of $50 per stay applies. Pets must be well-behaved and not left unattended.</p>
                        
                        <h3>6. Solar System</h3>
                        <p>Our accommodation is powered by a commercial-grade solar system. While we maintain 99.9% uptime, we cannot guarantee uninterrupted power supply. No refunds will be given for power-related issues.</p>
                    `
                },
                privacy: {
                    title: 'Privacy Policy',
                    content: `
                        <h2>Privacy Policy</h2>
                        <p><strong>Last updated: January 2024</strong></p>
                        
                        <h3>1. Information We Collect</h3>
                        <p>We collect information you provide directly to us, such as when you make a booking, contact us, or sign up for our newsletter. This may include your name, email address, phone number, and payment information.</p>
                        
                        <h3>2. How We Use Your Information</h3>
                        <p>We use the information we collect to process your bookings, communicate with you about your stay, send you marketing materials (with your consent), and improve our services.</p>
                        
                        <h3>3. Information Sharing</h3>
                        <p>We do not sell, trade, or otherwise transfer your personal information to third parties except as described in this policy. We may share information with our booking partners (Uplisting) and payment processors (Stripe) as necessary to provide our services.</p>
                        
                        <h3>4. Data Security</h3>
                        <p>We implement appropriate security measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction.</p>
                        
                        <h3>5. Cookies</h3>
                        <p>We use cookies to enhance your browsing experience and analyze website traffic. You can control cookie settings through your browser preferences.</p>
                        
                        <h3>6. Your Rights</h3>
                        <p>You have the right to access, correct, or delete your personal information. Contact us at info@lakesideretreat.co.nz to exercise these rights.</p>
                    `
                },
                booking: {
                    title: 'Booking Policy',
                    content: `
                        <h2>Booking Policy</h2>
                        <p><strong>Last updated: January 2024</strong></p>
                        
                        <h3>1. Reservation Process</h3>
                        <p>All bookings are confirmed immediately upon payment processing. You will receive a confirmation email with booking details and arrival instructions within 24 hours.</p>
                        
                        <h3>2. Payment Methods</h3>
                        <p>We accept all major credit cards through our secure Stripe payment system. Payment is processed in New Zealand Dollars (NZD).</p>
                        
                        <h3>3. Rate Information</h3>
                        <p>Rates are subject to change without notice. The rate confirmed at time of booking is guaranteed for your stay. Rates include GST (Goods and Services Tax).</p>
                        
                        <h3>4. Occupancy Limits</h3>
                        <p>Dome Pinot & Dome Ros√©: Maximum 2 adults, no children permitted. Lakeside Cottage: Maximum 3 guests, children and pets welcome.</p>
                        
                        <h3>5. Minimum Stay Requirements</h3>
                        <p>Minimum 2-night stay applies to Lakeside Cottage during peak season (October to May). Single night bookings may be available during off-peak periods for all accommodations.</p>
                        
                        <h3>6. Special Requests</h3>
                        <p>Special requests (early check-in, late check-out, dietary requirements) should be made at time of booking. We will accommodate requests where possible but cannot guarantee availability.</p>
                    `
                },
                cancellation: {
                    title: 'Cancellation Policy',
                    content: `
                        <h2>Cancellation Policy</h2>
                        <p><strong>Last updated: January 2024</strong></p>
                        
                        <h3>1. Standard Cancellation</h3>
                        <p>Cancellations made 14 days or more before your scheduled arrival date will receive a full refund minus a $50 processing fee.</p>
                        
                        <h3>2. Late Cancellation</h3>
                        <p>Cancellations made within 14 days of arrival are non-refundable. We recommend travel insurance to protect against unforeseen circumstances.</p>
                        
                        <h3>3. No-Show Policy</h3>
                        <p>Guests who do not arrive on their scheduled check-in date without prior notice will be charged the full amount of their booking.</p>
                        
                        <h3>4. Weather & Natural Events</h3>
                        <p>No refunds will be given for weather-related cancellations or natural events. We recommend travel insurance for protection against such events.</p>
                        
                        <h3>5. COVID-19 Policy</h3>
                        <p>If you are unable to travel due to COVID-19 restrictions, we will offer a full refund or credit for a future stay. Proof of restriction may be required.</p>
                        
                        <h3>6. Modification Requests</h3>
                        <p>Date changes are subject to availability and may incur additional charges. Contact us directly to discuss modification options.</p>
                    `
                },
                safety: {
                    title: 'Health & Safety Policy',
                    content: `
                        <h2>Health & Safety Policy</h2>
                        <p><strong>Last updated: January 2024</strong></p>
                        
                        <h3>1. Fire Safety</h3>
                        <p>All accommodations are equipped with smoke detectors, fire extinguishers, and emergency evacuation plans posted in each unit. Guests must familiarize themselves with emergency exit routes upon arrival.</p>
                        
                        <h3>2. Electrical Safety</h3>
                        <p>Our solar power system is professionally installed and regularly maintained. Report any electrical concerns immediately. Do not use unauthorized electrical equipment.</p>
                        
                        <h3>3. Water Safety</h3>
                        <p>Lake access is provided but guests swim at their own risk. No lifeguard on duty. Children must be supervised at all times near water. Hot tubs and spas must be used responsibly.</p>
                        
                        <h3>4. Emergency Procedures</h3>
                        <p>In case of emergency, dial 111. Emergency contact details are provided in each accommodation. Stephen & Sandy are available 24/7 for urgent assistance: +64 21 368 682</p>
                        
                        <h3>5. Building Safety</h3>
                        <p>All buildings comply with New Zealand Building Code requirements. Regular safety inspections are conducted. Report any maintenance issues immediately.</p>
                        
                        <h3>6. First Aid</h3>
                        <p>Basic first aid supplies are available in each accommodation. For serious medical emergencies, contact emergency services immediately.</p>
                    `
                },
                accessibility: {
                    title: 'Accessibility Information',
                    content: `
                        <h2>Accessibility Information</h2>
                        <p><strong>Last updated: January 2024</strong></p>
                        
                        <h3>1. Physical Access</h3>
                        <p>Our property has natural terrain with some sloped areas. Dome accommodations have steps and are not wheelchair accessible. The Lakeside Cottage has level access and wider doorways for easier mobility.</p>
                        
                        <h3>2. Parking</h3>
                        <p>Designated parking spaces are available close to all accommodations. Cottage guests have garage access for weather protection.</p>
                        
                        <h3>3. Communication Support</h3>
                        <p>We welcome guests with hearing or speech impairments. Email communication is available for all booking and service requests. Visual aids and written instructions can be provided upon request.</p>
                        
                        <h3>4. Service Animals</h3>
                        <p>Registered service animals are welcome in all accommodations at no additional charge. Please notify us at booking to ensure appropriate preparations.</p>
                        
                        <h3>5. Special Requirements</h3>
                        <p>We are committed to reasonable accommodations for guests with disabilities. Please contact us before booking to discuss specific needs and ensure we can provide appropriate support.</p>
                        
                        <h3>6. Local Accessibility Services</h3>
                        <p>Information about accessible attractions, restaurants, and services in Central Otago can be provided. We work with local operators to ensure inclusive experiences.</p>
                    `
                }
            };

            const content = legalContent[legalType];
            if (!content) return;

            modal.innerHTML = `
                <div style="background: white; max-width: 800px; max-height: 90vh; overflow-y: auto; border-radius: 15px; padding: 2rem; position: relative;">
                    <button onclick="closeLegalModal()" style="position: absolute; top: 1rem; right: 1rem; background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #666;">&times;</button>
                    <div style="color: #333; line-height: 1.6;">
                        ${content.content}
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            
            // Store current scroll position
            modal.dataset.scrollPosition = window.pageYOffset;
            
            // Close modal when clicking outside
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeLegalModal();
                }
            });
        }

        function closeLegalModal() {
            const modal = document.querySelector('div[style*="position: fixed"][style*="z-index: 10000"]');
            if (modal) {
                const scrollPosition = modal.dataset.scrollPosition || window.pageYOffset;
                modal.remove();
                // Restore scroll position to prevent jumping to top
                window.scrollTo(0, parseInt(scrollPosition));
            }
        }


        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'center' 
                });
            }
        }

        function scrollToAccommodations() {
            // Find the "Three Unique Experiences" section
            const accommodationsSection = document.querySelector('h2.section-title');
            if (accommodationsSection && accommodationsSection.textContent.includes('Three Unique Experiences')) {
                accommodationsSection.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }
        }

        function toggleGuide(headerElement) {
            const guideItem = headerElement.closest('.guide-item');
            const guideContent = guideItem.querySelector('.guide-content');
            const arrow = headerElement.querySelector('.guide-arrow');
            
            if (guideContent.style.maxHeight && guideContent.style.maxHeight !== '0px') {
                // Close the guide
                guideContent.style.maxHeight = '0px';
                arrow.style.transform = 'rotate(0deg)';
            } else {
                // Open the guide
                guideContent.style.maxHeight = guideContent.scrollHeight + 'px';
                arrow.style.transform = 'rotate(180deg)';
            }
        }

        function toggleMobileMenu() {
            const mobileNav = document.getElementById('mobileNav');
            mobileNav.classList.toggle('active');
            
            if (mobileNav.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }

        function handleTouchStart(e) {
            touchStartX = e.touches[0].clientX;
        }

        function handleTouchEnd(e) {
            touchEndX = e.changedTouches[0].clientX;
            handleSwipe();
        }

        function handleSwipe() {
            const swipeThreshold = 100;
            const swipeDistance = touchEndX - touchStartX;
            
            if (Math.abs(swipeDistance) > swipeThreshold) {
                const currentIndex = pages.indexOf(currentPage);
                
                if (swipeDistance > 0 && currentIndex > 0) {
                    showPage(pages[currentIndex - 1]);
                } else if (swipeDistance < 0 && currentIndex < pages.length - 1) {
                    showPage(pages[currentIndex + 1]);
                }
            }
        }

        function openSearch() {
            document.getElementById('searchOverlay').classList.add('active');
            document.getElementById('searchInput').focus();
            document.body.style.overflow = 'hidden';
        }

        function closeSearch() {
            document.getElementById('searchOverlay').classList.remove('active');
            document.getElementById('searchInput').value = '';
            document.getElementById('searchResults').innerHTML = '';
            document.body.style.overflow = '';
        }

        function performSearch() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const results = searchData.filter(item => 
                item.title.toLowerCase().includes(query) || 
                item.description.toLowerCase().includes(query)
            );

            const resultsContainer = document.getElementById('searchResults');
            
            if (query.length === 0) {
                resultsContainer.innerHTML = '';
                return;
            }

            if (results.length === 0) {
                resultsContainer.innerHTML = '<div class="search-result">No results found</div>';
                return;
            }

            resultsContainer.innerHTML = results.map(result => 
                `<div class="search-result" onclick="showPage('${result.page}'); closeSearch();">
                    <strong>${result.title}</strong><br>
                    <small>${result.description}</small>
                </div>`
            ).join('');
        }

        // Enhanced Gallery System
        // Carousel navigation functionality
        const carouselStates = {
            'carousel-pinot': { currentIndex: 0, totalImages: 5 },
            'carousel-rose': { currentIndex: 0, totalImages: 5 },
            'carousel-cottage': { currentIndex: 0, totalImages: 5 }
        };

        const miniGalleryStates = {
            'mini-gallery-pinot': { currentIndex: 0, totalImages: 8, visibleImages: 4 }
        };

        function navigateCarousel(carouselId, direction) {
            const carousel = document.getElementById(carouselId);
            const counter = document.getElementById('counter-' + carouselId.split('-')[1]);
            const state = carouselStates[carouselId];

            if (!carousel || !state) return;

            if (direction === 'next') {
                state.currentIndex = (state.currentIndex + 1) % state.totalImages;
            } else if (direction === 'prev') {
                state.currentIndex = state.currentIndex === 0 ? state.totalImages - 1 : state.currentIndex - 1;
            }

            const translateX = -state.currentIndex * 100;
            carousel.style.transform = `translateX(${translateX}%)`;

            if (counter) {
                counter.textContent = `${state.currentIndex + 1} / ${state.totalImages}`;
            }
        }

        function initializeCarousels() {
            // Reset all carousel states and positions
            Object.keys(carouselStates).forEach(carouselId => {
                const carousel = document.getElementById(carouselId);
                const counter = document.getElementById('counter-' + carouselId.split('-')[1]);
                const state = carouselStates[carouselId];

                if (carousel && state) {
                    // Reset to first image
                    state.currentIndex = 0;
                    carousel.style.transform = 'translateX(0%)';

                    if (counter) {
                        counter.textContent = `1 / ${state.totalImages}`;
                    }
                }
            });
        }

        function navigateMiniGallery(galleryId, direction) {
            const gallery = document.getElementById(galleryId);
            const state = miniGalleryStates[galleryId];

            if (!gallery || !state) return;

            if (direction === 'next') {
                // Move forward by 1 image, but don't go past the end
                if (state.currentIndex < state.totalImages - state.visibleImages) {
                    state.currentIndex++;
                }
            } else if (direction === 'prev') {
                // Move backward by 1 image, but don't go before the start
                if (state.currentIndex > 0) {
                    state.currentIndex--;
                }
            }

            // Calculate the translate value - each image is 25% width + gap
            const translateX = -state.currentIndex * 25;
            gallery.style.transform = `translateX(${translateX}%)`;
        }

        function openLightbox(imageSrc, imageTitle = '') {
            const lightbox = document.getElementById('lightbox');
            const lightboxImage = document.getElementById('lightboxImage');
            const lightboxTitle = document.getElementById('lightboxTitle');

            lightboxImage.src = imageSrc;
            lightbox.classList.add('active');
            document.body.style.overflow = 'hidden';

            // Set title if provided
            if (lightboxTitle && imageTitle) {
                lightboxTitle.textContent = imageTitle;
                lightboxTitle.style.display = 'block';
            } else if (lightboxTitle) {
                lightboxTitle.style.display = 'none';
            }

            currentImageIndex = galleryImages.indexOf(imageSrc);
            if (currentImageIndex === -1) currentImageIndex = 0;

            // Update thumbnail navigation
            updateThumbnailNav();
        }

        function openCarouselLightbox(imageSrc, carouselType, imageTitle = '') {
            const lightbox = document.getElementById('lightbox');
            const lightboxImage = document.getElementById('lightboxImage');
            const lightboxTitle = document.getElementById('lightboxTitle');

            lightboxImage.src = imageSrc;
            lightbox.classList.add('active');
            document.body.style.overflow = 'hidden';

            // Set current carousel context
            currentCarouselContext = carouselType;

            // Set title if provided
            if (lightboxTitle && imageTitle) {
                lightboxTitle.textContent = imageTitle;
                lightboxTitle.style.display = 'block';
            } else if (lightboxTitle) {
                lightboxTitle.style.display = 'none';
            }

            // Find the index in the appropriate carousel
            const carouselImageArray = carouselImages[carouselType] || [];
            currentImageIndex = carouselImageArray.indexOf(imageSrc);
            if (currentImageIndex === -1) currentImageIndex = 0;

            // Update thumbnail navigation with carousel images
            updateCarouselThumbnailNav();

            // Add loading state
            lightboxImage.style.opacity = '0.5';
            lightboxImage.onload = function() {
                this.style.opacity = '1';
            };
        }

        function closeLightbox() {
            document.getElementById('lightbox').classList.remove('active');
            document.body.style.overflow = '';
            // Reset carousel context when lightbox is closed
            currentCarouselContext = null;
        }

        function nextImage() {
            const imageArray = currentCarouselContext ? carouselImages[currentCarouselContext] : galleryImages;
            currentImageIndex = (currentImageIndex + 1) % imageArray.length;
            const lightboxImage = document.getElementById('lightboxImage');
            lightboxImage.style.opacity = '0.5';
            lightboxImage.src = imageArray[currentImageIndex];
            lightboxImage.onload = function() {
                this.style.opacity = '1';
            };

            if (currentCarouselContext) {
                updateCarouselThumbnailNav();
            } else {
                updateThumbnailNav();
            }
        }

        function prevImage() {
            const imageArray = currentCarouselContext ? carouselImages[currentCarouselContext] : galleryImages;
            currentImageIndex = currentImageIndex === 0 ? imageArray.length - 1 : currentImageIndex - 1;
            const lightboxImage = document.getElementById('lightboxImage');
            lightboxImage.style.opacity = '0.5';
            lightboxImage.src = imageArray[currentImageIndex];
            lightboxImage.onload = function() {
                this.style.opacity = '1';
            };

            if (currentCarouselContext) {
                updateCarouselThumbnailNav();
            } else {
                updateThumbnailNav();
            }
        }
        
        function updateThumbnailNav() {
            const thumbnailContainer = document.getElementById('lightboxThumbnails');
            if (!thumbnailContainer) return;

            thumbnailContainer.innerHTML = '';
            galleryImages.forEach((img, index) => {
                const thumb = document.createElement('div');
                thumb.className = `thumbnail ${index === currentImageIndex ? 'active' : ''}`;
                thumb.style.cssText = `
                    width: 60px; height: 40px; margin: 0 4px; cursor: pointer; border-radius: 4px;
                    background-image: url('${img}'); background-size: cover; background-position: center;
                    border: 2px solid ${index === currentImageIndex ? 'var(--brand-teal)' : 'transparent'};
                    transition: all 0.3s ease;
                `;
                thumb.onclick = () => {
                    currentImageIndex = index;
                    document.getElementById('lightboxImage').src = galleryImages[currentImageIndex];
                    updateThumbnailNav();
                };
                thumbnailContainer.appendChild(thumb);
            });
        }

        function updateCarouselThumbnailNav() {
            const thumbnailContainer = document.getElementById('lightboxThumbnails');
            if (!thumbnailContainer || !currentCarouselContext) return;

            const imageArray = carouselImages[currentCarouselContext];
            thumbnailContainer.innerHTML = '';

            imageArray.forEach((img, index) => {
                const thumb = document.createElement('div');
                thumb.className = `thumbnail ${index === currentImageIndex ? 'active' : ''}`;
                thumb.style.cssText = `
                    width: 60px; height: 40px; margin: 0 4px; cursor: pointer; border-radius: 4px;
                    background-image: url('${img}'); background-size: cover; background-position: center;
                    border: 2px solid ${index === currentImageIndex ? 'var(--brand-teal)' : 'transparent'};
                    transition: all 0.3s ease;
                `;
                thumb.onclick = () => {
                    currentImageIndex = index;
                    document.getElementById('lightboxImage').src = imageArray[currentImageIndex];
                    updateCarouselThumbnailNav();
                };
                thumbnailContainer.appendChild(thumb);
            });
        }

        // Virtual Tour Functionality (placeholder)
        function startVirtualTour(accommodation) {
            alert(`Virtual tour feature coming soon! For now, browse through our ${accommodation} photo gallery above or contact us for a video tour.`);
        }

        function showSocialProof() {
            const socialProof = document.getElementById('socialProof');
            const message = socialProofMessages[socialProofIndex];
            
            document.getElementById('socialProofText').textContent = `${message.name} ${message.action}!`;
            document.getElementById('socialProofTime').textContent = message.time;
            
            socialProof.classList.add('show');
            
            setTimeout(() => {
                socialProof.classList.remove('show');
            }, 4000);
            
            socialProofIndex = (socialProofIndex + 1) % socialProofMessages.length;
            setTimeout(showSocialProof, Math.random() * 30000 + 45000);
        }

        function acceptCookies() {
            document.getElementById('cookieButtons').style.display = 'none';
            trackEvent('cookies', 'accepted');
        }

        function declineCookies() {
            document.getElementById('cookieButtons').style.display = 'none';
            trackEvent('cookies', 'declined');
        }
        
        // Toggle FAQ dropdown functionality
        function toggleFAQ(element) {
            const answer = element.nextElementSibling;
            const arrow = element.querySelector('.faq-arrow');
            
            if (answer.style.maxHeight && answer.style.maxHeight !== '0px') {
                // Close
                answer.style.maxHeight = '0';
                arrow.style.transform = 'rotate(0deg)';
            } else {
                // Open
                answer.style.maxHeight = answer.scrollHeight + 'px';
                arrow.style.transform = 'rotate(180deg)';
            }
        }

        function toggleFooterFAQ() {
            const faqContent = document.getElementById('footerFaqContent');
            const faqBtnText = document.getElementById('faqBtnText');
            const faqBtnArrow = document.getElementById('faqBtnArrow');
            const faqBtn = document.getElementById('faqToggleBtn');
            
            if (faqContent.classList.contains('footer-faq-expanded')) {
                // Collapse
                faqContent.classList.remove('footer-faq-expanded');
                faqBtnText.textContent = 'Frequently Asked Questions';
                faqBtnArrow.style.transform = 'rotate(0deg)';
                faqBtn.setAttribute('aria-expanded', 'false');
                faqContent.setAttribute('aria-hidden', 'true');
                
                // Add a subtle animation to the button
                faqBtn.style.transform = 'scale(0.98)';
                setTimeout(() => {
                    faqBtn.style.transform = 'scale(1)';
                }, 150);
            } else {
                // Expand
                faqContent.classList.add('footer-faq-expanded');
                faqBtnText.textContent = 'Hide FAQ';
                faqBtnArrow.style.transform = 'rotate(180deg)';
                faqBtn.setAttribute('aria-expanded', 'true');
                faqContent.setAttribute('aria-hidden', 'false');
                
                // Add a subtle animation to the button
                faqBtn.style.transform = 'scale(1.02)';
                setTimeout(() => {
                    faqBtn.style.transform = 'scale(1)';
                }, 150);
                
                // Smooth scroll to FAQ section after expansion
                setTimeout(() => {
                    faqBtn.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'start' 
                    });
                }, 300);
            }
        }

        function trackEvent(action, category) {
            if (typeof gtag !== 'undefined' && action === 'booking_intent') {
                trackBookingIntent(category);
            }
            // Event tracked
        }

        function trackPageView(page) {
            if (typeof gtag !== 'undefined') {
                gtag('event', 'page_view', {
                    'page_title': page,
                    'page_location': window.location.href
                });
            }
            // Page view tracked
        }

        function updateScrollIndicator() {
            const scrollHeight = document.documentElement.scrollHeight - window.innerHeight;
            const scrollTop = window.scrollY;
            const scrollPercentage = (scrollTop / scrollHeight) * 100;
            
            document.getElementById('scrollIndicator').style.width = `${scrollPercentage}%`;
        }

        function loadMoreReviews() {
            alert('Loading more reviews... (This would connect to your review database or API)');
        }

        // Accordion functionality
        function toggleAccordion(id) {
            const content = document.getElementById(id);
            const header = content.previousElementSibling;
            
            // Toggle active class
            content.classList.toggle('active');
            header.classList.toggle('active');
            
            // Close other accordions in the same container
            const container = content.closest('.accordion-container');
            const otherContents = container.querySelectorAll('.accordion-content');
            const otherHeaders = container.querySelectorAll('.accordion-header');
            
            otherContents.forEach(item => {
                if (item !== content && item.classList.contains('active')) {
                    item.classList.remove('active');
                }
            });
            
            otherHeaders.forEach(item => {
                if (item !== header && item.classList.contains('active')) {
                    item.classList.remove('active');
                }
            });
        }

        // Keyboard Navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeSearch();
                closeLightbox();
                closeBookingModal();
                
                const mobileNav = document.getElementById('mobileNav');
                if (mobileNav.classList.contains('active')) {
                    toggleMobileMenu();
                }
            }
            
            if (document.getElementById('lightbox').classList.contains('active')) {
                if (e.key === 'ArrowLeft') prevImage();
                if (e.key === 'ArrowRight') nextImage();
            }
        });

        // Close overlays when clicking outside
        document.addEventListener('click', function(e) {
            const searchOverlay = document.getElementById('searchOverlay');
            const lightbox = document.getElementById('lightbox');
            const bookingModal = document.getElementById('bookingModal');
            
            if (e.target === searchOverlay) closeSearch();
            if (e.target === lightbox) closeLightbox();
            if (e.target === bookingModal) closeBookingModal();
        });

        // SEO performance monitoring
        window.addEventListener('load', () => {
            if (typeof PerformanceObserver !== 'undefined') {
                new PerformanceObserver((entryList) => {
                    for (const entry of entryList.getEntries()) {
                        if (entry.entryType === 'navigation') {
                            if (typeof gtag !== 'undefined') {
                                gtag('event', 'page_load_time', {
                                    'event_category': 'Performance',
                                    'event_label': 'Navigation',
                                    'value': Math.round(entry.loadEventEnd - entry.loadEventStart)
                                });
                            }
                        }
                    }
                }).observe({entryTypes: ['navigation']});
            }
        });
    </script>
	<!-- STEP 1: Find the end of your existing JavaScript (around line 1800-2000) -->
        
        // ... your existing functions end here
        
    </script>
    
    <!-- STEP 2: ADD THIS NEW SCRIPT SECTION RIGHT HERE -->
    <script>
        // ===========================================
        // BACKEND API CONNECTION - ADD THIS SECTION
        // ===========================================

        // Local backend URL for development
        const API_BASE_URL = window.location.origin;

        // Test backend connection on page load
        async function testBackendConnection() {
            try {
                const response = await fetch(`${API_BASE_URL}/health`);
                const data = await response.json();
                // Console statement removed for production
                
                // Optional: Show connection status for debugging
                if (window.location.search.includes('debug')) {
                    // Console statement removed for production
                }
                
                return true;
            } catch (error) {
                // Console statement removed for production
                return false;
            }
        }

        // Get CSRF token before making POST requests
        // csrfToken already declared above

        async function getCSRFToken() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/csrf-token`, {
                    credentials: 'include'
                });
                const data = await response.json();
                csrfToken = data.csrfToken;
                return csrfToken;
            } catch (error) {
                // Console statement removed for production
                return null;
            }
        }

        // Secure API call wrapper
        async function secureApiCall(endpoint, options = {}) {
            const url = `${API_BASE_URL}${endpoint}`;
            
            const defaultOptions = {
                credentials: 'include',
                headers: {
                    'Content-Type': 'application/json',
                    'X-Requested-With': 'XMLHttpRequest'
                }
            };
            
            // Add CSRF token for POST requests
            if (options.method === 'POST' && csrfToken) {
                defaultOptions.headers['X-CSRF-Token'] = csrfToken;
            }
            
            const finalOptions = {
                ...defaultOptions,
                ...options,
                headers: { ...defaultOptions.headers, ...options.headers }
            };
            
            try {
                const response = await fetch(url, finalOptions);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                return await response.json();
            } catch (error) {
                // Console statement removed for production
                throw error;
            }
        }

        // Load accommodations from backend
        async function loadAccommodations() {
            try {
                const data = await secureApiCall('/api/accommodations');
                const accommodations = data.accommodations;
                
                // Console statement removed for production
                
                // Update accommodation cards with real data
                accommodations.forEach(accommodation => {
                    updateAccommodationCard(accommodation);
                });
                
                return accommodations;
            } catch (error) {
                // Console statement removed for production
                // Continue with static data - no user impact
            }
        }

        function updateAccommodationCard(accommodation) {
            // Find accommodation cards by data attribute
            const cardElement = document.querySelector(`[data-accommodation="${accommodation.id}"]`);
            
            if (cardElement) {
                // Update price
                const priceElement = cardElement.querySelector('.price, .card-price');
                if (priceElement) {
                    priceElement.textContent = `$${accommodation.price}/night`;
                }
                
                // Update description
                const descElement = cardElement.querySelector('.description, .card-text');
                if (descElement) {
                    descElement.textContent = accommodation.description;
                }
                
                // Update max guests
                const guestsElement = cardElement.querySelector('.max-guests, .guests');
                if (guestsElement) {
                    guestsElement.textContent = `Up to ${accommodation.maxGuests} guests`;
                }
            }
        }

        // Enhanced booking function (integrate with your existing booking)
        async function createBookingWithBackend(bookingData) {
            try {
                // Ensure we have a CSRF token
                if (!csrfToken) {
                    await getCSRFToken();
                }
                
                const response = await secureApiCall('/api/create-booking', {
                    method: 'POST',
                    body: JSON.stringify(bookingData)
                });
                
                // Console statement removed for production
                return response;
            } catch (error) {
                // Console statement removed for production
                // Fallback to your existing booking flow
                throw error;
            }
        }

        // Initialize backend connection when page loads
        document.addEventListener('DOMContentLoaded', async function() {
            // Console statement removed for production
            
            // Test backend connection
            const backendConnected = await testBackendConnection();
            
            if (backendConnected) {
                // Get CSRF token
                await getCSRFToken();
                
                // Load dynamic accommodations data
                await loadAccommodations();
                
                // Console statement removed for production
            } else {
                // Console statement removed for production
            }
        });

        // ========================================
        // FLOATING BOOK NOW BUTTON
        // ========================================
        function createFloatingBookButton() {
            const floatingButton = document.createElement('div');
            floatingButton.id = 'floating-book-button';
            floatingButton.innerHTML = `
                <button onclick="openBookingModal()" style="
                    background: linear-gradient(135deg, #753742 0%, #1a3a3a 100%);
                    color: white;
                    border: none;
                    padding: 15px 25px;
                    border-radius: 50px;
                    font-weight: 600;
                    font-size: 1rem;
                    box-shadow: 0 8px 25px rgba(45, 90, 90, 0.3);
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    transition: all 0.3s ease;
                    min-width: 160px;
                    justify-content: center;
                " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 12px 35px rgba(45, 90, 90, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 25px rgba(45, 90, 90, 0.3)'">
                    <span style="font-size: 1.2rem;">üìÖ</span>
                    Book Now
                </button>
                
                <!-- WhatsApp Quick Contact -->
                <a href="https://wa.me/642136868?text=Hi! I'm interested in booking a stay at Lakeside Retreat. Can you help me with availability and pricing?" target="_blank" style="
                    background: #25D366;
                    color: white;
                    border: none;
                    padding: 12px;
                    border-radius: 50%;
                    font-size: 1.2rem;
                    box-shadow: 0 6px 20px rgba(37, 211, 102, 0.3);
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    text-decoration: none;
                    margin-top: 15px;
                    width: 50px;
                    height: 50px;
                    transition: all 0.3s ease;
                " onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 8px 25px rgba(37, 211, 102, 0.4)'" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 6px 20px rgba(37, 211, 102, 0.3)'" title="Chat with us on WhatsApp">
                    üí¨
                </a>
            `;
            
            floatingButton.style.cssText = `
                position: fixed;
                bottom: 30px;
                right: 30px;
                z-index: 1000;
                opacity: 0;
                visibility: hidden;
                transform: translateY(20px);
                transition: all 0.3s ease;
                pointer-events: none;
                display: flex;
                flex-direction: column;
                align-items: center;
            `;
            
            document.body.appendChild(floatingButton);
            return floatingButton;
        }

        // Show/hide floating button based on scroll
        function handleFloatingButton() {
            const floatingButton = document.getElementById('floating-book-button');
            const heroSection = document.querySelector('.hero');
            
            if (!floatingButton || !heroSection) return;
            
            const heroBottom = heroSection.offsetTop + heroSection.offsetHeight;
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            if (scrollTop > heroBottom + 100) {
                // Show button
                floatingButton.style.opacity = '1';
                floatingButton.style.visibility = 'visible';
                floatingButton.style.transform = 'translateY(0)';
                floatingButton.style.pointerEvents = 'auto';
            } else {
                // Hide button
                floatingButton.style.opacity = '0';
                floatingButton.style.visibility = 'hidden';
                floatingButton.style.transform = 'translateY(20px)';
                floatingButton.style.pointerEvents = 'none';
            }
        }

        // FAQ INLINE ONCLICK - NO EXTERNAL FUNCTION NEEDED

        // Performance Optimization: Lazy Loading Images
        function initLazyLoading() {
            const images = document.querySelectorAll('img[data-src]');
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        img.classList.remove('lazy');
                        imageObserver.unobserve(img);
                    }
                });
            });

            images.forEach(img => {
                imageObserver.observe(img);
            });
        }

        // WebP Detection and Image Optimization
        function initWebPSupport() {
            // Check WebP support
            const webpSupport = (function() {
                const canvas = document.createElement('canvas');
                canvas.width = 1;
                canvas.height = 1;
                return canvas.toDataURL('image/webp').indexOf('data:image/webp') === 0;
            })();
            
            // Add class to document for CSS feature detection
            if (webpSupport) {
                document.documentElement.classList.add('webp');
            } else {
                document.documentElement.classList.add('no-webp');
            }
            
            return webpSupport;
        }

        // Performance Monitoring (Basic)
        function initPerformanceMonitoring() {
            // Web Vitals monitoring
            if ('web-vital' in window) {
                // Track Core Web Vitals when available
                return;
            }
            
            // Basic performance tracking
            window.addEventListener('load', () => {
                const perfData = performance.getEntriesByType('navigation')[0];
                const loadTime = perfData.loadEventEnd - perfData.loadEventStart;
                
                // Track load time (for future analytics integration)
                if (loadTime > 3000) {
                    console.info('Page load time:', loadTime + 'ms - Consider optimization');
                }
            });
        }

        // Critical Resource Hints
        function addResourceHints() {
            const head = document.head;
            
            // Preload critical images
            const criticalImages = [
                'images/vineyard.jpeg',
                'images/logormbg.png'
            ];
            
            criticalImages.forEach(src => {
                const link = document.createElement('link');
                link.rel = 'preload';
                link.as = 'image';
                link.href = src;
                head.appendChild(link);
            });
        }

        // Initialize floating button, FAQ system, and FORCE V2 VOUCHER SYSTEM  
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üéÅ FORCING V2 VOUCHER SYSTEM ON PAGE LOAD');
            
            // Initialize performance optimizations
            initLazyLoading();
            addResourceHints();
            initWebPSupport();
            initPerformanceMonitoring();
            
            // Initialize back to top button
            initBackToTopButton();
            
            // FAQ dropdowns use inline onclick - no initialization needed
            
            // Force replace old voucher HTML with new V2 system
            setTimeout(() => {
                const oldVoucherOptions = document.querySelectorAll('.voucher-option:not(.voucher-option-v2-new)');
                console.log('Found old voucher elements to replace:', oldVoucherOptions.length);
                
                oldVoucherOptions.forEach(oldOption => {
                    const amount = oldOption.getAttribute('data-amount');
                    if (amount && !amount.includes('-v2')) {
                        oldOption.setAttribute('data-amount', amount + '-v2');
                        oldOption.className = oldOption.className.replace('voucher-option', 'voucher-option-v2-new');
                        
                        // Update all child elements
                        const header = oldOption.querySelector('.voucher-option-header');
                        if (header) header.className = 'voucher-option-header-v2-new';
                        
                        const price = oldOption.querySelector('.voucher-price');
                        if (price) price.className = 'voucher-price-v2-new';
                        
                        // Update onclick handler
                        const newAmount = amount + '-v2';
                        oldOption.setAttribute('onclick', `selectVoucherAmountV2New('${newAmount}')`);
                        console.log('‚úÖ Converted voucher option:', amount, '‚Üí', newAmount);
                    }
                });
                
                // Force initialize new system
                if (typeof selectVoucherAmountV2New === 'function') {
                    selectVoucherAmountV2New('flexible-550-v2');
                    console.log('‚úÖ V2 voucher system forcefully initialized');
                } else {
                    console.error('‚ùå V2 voucher functions not loaded');
                }
            }, 100);
            
            createFloatingBookButton();
            window.addEventListener('scroll', handleFloatingButton);

            // Initialize Parallax Scrolling System
            initializeParallaxScrolling();
        });

        // DUPLICATE FAQ FUNCTION REMOVED - NOW DEFINED ABOVE

        // VOUCHER SYSTEM V2 - NEW FUNCTIONS - FORCE OVERRIDE
        console.log('üéÅ NEW VOUCHER SYSTEM V2 LOADING...', new Date());
        let selectedVoucherAmountV2New = 'flexible-550-v2'; // Default selection
        let voucherDataV2New = {
            amount: 'flexible-550-v2',
            recipientName: '',
            recipientEmail: '',
            message: '',
            occasion: '',
            purchaserName: '',
            purchaserEmail: '',
            purchaserPhone: '',
            voucherCode: '',
            customAmount: null
        };
        
        // FORCE OVERRIDE OLD FUNCTIONS
        if (typeof selectVoucherAmount !== 'undefined') {
            console.log('‚ö†Ô∏è Overriding old selectVoucherAmount function');
            window.selectVoucherAmount = selectVoucherAmountV2New;
        }
        if (typeof updateVoucherSummary !== 'undefined') {
            console.log('‚ö†Ô∏è Overriding old updateVoucherSummary function');
            window.updateVoucherSummary = updateVoucherSummaryV2New;
        }

      


</script>
    
    <!-- Back to Top Button -->
    <button id="backToTopBtn" onclick="scrollToTop()" style="
        position: fixed !important;
        bottom: 30px !important;
        right: 30px !important;
        z-index: 9999 !important;
        border: none !important;
        outline: none !important;
        background-color: var(--brand-teal) !important;
        color: white !important;
        cursor: pointer !important;
        padding: 15px !important;
        border-radius: 50% !important;
        font-size: 18px !important;
        width: 50px !important;
        height: 50px !important;
        transition: all 0.3s ease !important;
        box-shadow: 0 4px 12px rgba(0,0,0,0.2) !important;
        opacity: 0 !important;
        visibility: hidden !important;
        display: block !important;
    " title="Go to top" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script>
        // Back to Top Button functionality - COMPLETE DEBUG VERSION
        let backToTopVisible = false;
        
        function initBackToTopButton() {
            console.log('üîù Starting back-to-top button initialization...');
            
            const backToTopBtn = document.getElementById("backToTopBtn");
            if (!backToTopBtn) {
                console.error('‚ùå Back to top button element not found!');
                return;
            }
            
            console.log('‚úÖ Back to top button element found');
            
            // Force initial styles - override everything
            backToTopBtn.style.cssText = `
                display: block !important;
                position: fixed !important;
                bottom: 30px !important;
                right: 30px !important;
                z-index: 9999 !important;
                background-color: #753742 !important;
                color: white !important;
                border: none !important;
                border-radius: 50% !important;
                width: 50px !important;
                height: 50px !important;
                font-size: 18px !important;
                cursor: pointer !important;
                box-shadow: 0 4px 12px rgba(0,0,0,0.2) !important;
                transition: all 0.3s ease !important;
                opacity: 0 !important;
                visibility: hidden !important;
            `;
            
            function handleScroll() {
                const scrollY = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
                console.log('üìè Scroll:', scrollY);
                
                if (scrollY > 100) {
                    console.log('üîº Should show button');
                    backToTopBtn.style.setProperty('opacity', '1', 'important');
                    backToTopBtn.style.setProperty('visibility', 'visible', 'important');
                    backToTopBtn.style.setProperty('display', 'block', 'important');
                    backToTopVisible = true;
                } else {
                    console.log('üîΩ Should hide button');
                    backToTopBtn.style.setProperty('opacity', '0', 'important');
                    backToTopBtn.style.setProperty('visibility', 'hidden', 'important');
                    backToTopVisible = false;
                }
            }
            
            // Multiple event listeners
            window.addEventListener('scroll', handleScroll, { passive: true });
            document.addEventListener('scroll', handleScroll, { passive: true });
            document.body.addEventListener('scroll', handleScroll, { passive: true });
            
            // Immediate test
            setTimeout(() => {
                console.log('üß™ Testing - forcing button visible for 3 seconds...');
                backToTopBtn.style.setProperty('opacity', '1', 'important');
                backToTopBtn.style.setProperty('visibility', 'visible', 'important');
                backToTopBtn.style.setProperty('display', 'block', 'important');
                
                setTimeout(() => {
                    handleScroll(); // Back to normal
                }, 3000);
            }, 1000);
            
            console.log('üéØ Initialization complete');
        }

        // ===== PARALLAX SCROLLING SYSTEM =====
        function initializeParallaxScrolling() {
            console.log('üåä Initializing Parallax Scrolling System');

            // Detect if device supports smooth parallax
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            const isLowPerformanceDevice = navigator.hardwareConcurrency && navigator.hardwareConcurrency < 4;

            // Disable complex parallax on mobile/low-performance devices
            if (isMobile || isLowPerformanceDevice) {
                console.log('üì± Mobile/Low-performance device detected - using simplified parallax');
                return;
            }

            let ticking = false;

            function updateParallax() {
                const scrollY = window.pageYOffset;
                const windowHeight = window.innerHeight;

                // Update hero parallax layers
                const heroSection = document.querySelector('.hero');
                if (heroSection) {
                    const heroRect = heroSection.getBoundingClientRect();
                    const heroCenter = heroRect.top + heroRect.height / 2;
                    const distanceFromCenter = Math.abs(heroCenter - windowHeight / 2);
                    const maxDistance = windowHeight;
                    const parallaxStrength = Math.min(distanceFromCenter / maxDistance, 1);

                    // Apply different transform speeds for layered effect
                    const parallaxLayers = heroSection.querySelectorAll('.parallax-layer');
                    parallaxLayers.forEach((layer, index) => {
                        const speed = 0.5 + (index * 0.3); // Different speeds for each layer
                        const yPos = -(scrollY * speed);
                        layer.style.transform = `translate3d(0, ${yPos}px, 0)`;
                    });
                }

                // Update section transitions
                const sectionTransitions = document.querySelectorAll('.section-transition');
                sectionTransitions.forEach(section => {
                    const rect = section.getBoundingClientRect();
                    const elementTop = rect.top;
                    const elementBottom = rect.bottom;

                    // Only apply parallax if element is in viewport
                    if (elementBottom >= 0 && elementTop <= windowHeight) {
                        const scrollPercent = (windowHeight - elementTop) / (windowHeight + rect.height);
                        const parallaxOffset = scrollPercent * 100;
                        section.style.backgroundPosition = `center ${50 - parallaxOffset * 0.5}%`;
                    }
                });

                ticking = false;
            }

            function requestParallaxUpdate() {
                if (!ticking) {
                    requestAnimationFrame(updateParallax);
                    ticking = true;
                }
            }

            // Optimized scroll listener with passive flag
            window.addEventListener('scroll', requestParallaxUpdate, { passive: true });

            // Initial parallax setup
            updateParallax();

            console.log('‚ú® Parallax scrolling system initialized');
        }

        // ===== PARALLAX LAYER CREATION HELPER =====
        function createParallaxLayers(container, backgroundImages) {
            if (!container || !backgroundImages) return;

            // Clear existing parallax layers
            const existingLayers = container.querySelectorAll('.parallax-layer');
            existingLayers.forEach(layer => layer.remove());

            // Create new parallax layers
            backgroundImages.forEach((imageSrc, index) => {
                const layer = document.createElement('div');
                layer.className = `parallax-layer parallax-layer-${index === 0 ? 'bg' : index === 1 ? 'mid' : 'front'}`;
                layer.style.backgroundImage = `url('${imageSrc}')`;
                container.appendChild(layer);
            });

            console.log(`üé® Created ${backgroundImages.length} parallax layers`);
        }

        // ===== PARALLAX TESTING & DEBUGGING =====
        function testParallaxSystem() {
            console.log('üß™ Testing Parallax System...');

            // Test mobile detection
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            console.log('üì± Mobile detected:', isMobile);

            // Test parallax elements
            const heroSections = document.querySelectorAll('.hero.parallax-container');
            console.log('üéØ Hero sections with parallax:', heroSections.length);

            const parallaxLayers = document.querySelectorAll('.parallax-layer');
            console.log('üåä Total parallax layers:', parallaxLayers.length);

            const sectionTransitions = document.querySelectorAll('.section-transition');
            console.log('üîÑ Section transitions:', sectionTransitions.length);

            // Test performance
            const hardwareConcurrency = navigator.hardwareConcurrency || 'unknown';
            console.log('‚ö° CPU cores:', hardwareConcurrency);

            return {
                mobile: isMobile,
                heroSections: heroSections.length,
                parallaxLayers: parallaxLayers.length,
                sectionTransitions: sectionTransitions.length,
                cpuCores: hardwareConcurrency
            };
        }

        // Call test function in development
        window.testParallax = testParallaxSystem;

        function scrollToTop() {
            console.log('Scrolling to top...');
            
            // Force scroll to top immediately
            document.documentElement.scrollTop = 0;
            document.body.scrollTop = 0;
            window.scrollTo(0, 0);
            
            // Also try smooth scroll as backup
            try {
                window.scrollTo({
                    top: 0,
                    left: 0,
                    behavior: 'smooth'
                });
            } catch (e) {
                console.log('Smooth scroll not supported, using instant scroll');
            }
        }

        // Initialize page navigation when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the home page as active
            showPage('home');
        });
    </script>

</body>
</html>
