<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=yes" name="viewport"/>
<meta content="no-cache, no-store, must-revalidate" http-equiv="cache-control"/>
<meta content="no-cache" http-equiv="pragma"/>
<meta content="0" http-equiv="expires"/>
<meta content="v2-force-override-20250824-1145" name="cache-buster-v2-new"/>
<meta content="true" name="force-reload"/>
<script>
        // Cache management - only clear on version change
        (function() {
            var currentVersion = 'v2-20250104';
            var storedVersion = localStorage.getItem('site-version');
            if (storedVersion !== currentVersion) {
                if ('serviceWorker' in navigator && 'caches' in window) {
                    caches.keys().then(function(names) {
                        names.forEach(function(name) { caches.delete(name); });
                    });
                }
                localStorage.setItem('site-version', currentVersion);
            }
        })();
    </script>
<meta content="nosniff" http-equiv="X-Content-Type-Options"/>
<meta content="strict-origin-when-cross-origin" http-equiv="Referrer-Policy"/>
    <title>Central Otago Luxury Glamping Dome Accommodation in Cromwell, on Lake Dunstan by Lakeside Retreat </title>
<!-- Critical CSS - Inline for performance -->
<style>
      /* Critical above-the-fold styles */
      body { font-family: 'Space Grotesk', sans-serif; margin: 0; line-height: 1.6; background: #F6F1F4; }
      .hero { min-height: 100vh; background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); }
      .nav { position: fixed; top: 0; width: 100%; z-index: 50; background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(10px); }
      .text-4xl { font-size: 2.25rem; line-height: 2.5rem; }
      .text-white { color: #ffffff; }
      .font-bold { font-weight: 700; }
      .mb-6 { margin-bottom: 1.5rem; }
    </style>
<!-- Enhanced SEO Meta Tags -->
<meta content="Experience New Zealand's first energy-positive luxury accommodation on Lake Dunstan. Just 55min from Queenstown, 30min from Wanaka. Geodesic domes &amp; lakeside cottage with private spas, 16.72kW solar system, direct cycle trail access. Book your sustainable Central Otago escape today. ★★★★★ 4.9/5 from 127 reviews." name="description"/>
<meta content="Central Otago accommodation, Queenstown alternative accommodation, Wanaka alternative accommodation, Lake Dunstan glamping, solar powered glamping NZ" name="keywords"/>
<meta content="Stephen &amp; Sandy - Lakeside Retreat" name="author"/>
<!-- Advanced SEO meta tags -->
<meta content="en-NZ" name="language"/>
<meta content="3 days" name="revisit-after"/>
<meta content="web" name="distribution"/>
<meta content="general" name="rating"/>
<meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name="robots"/>
<meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name="googlebot"/>
<meta content="index, follow" name="bingbot"/>
<!-- Geographic Targeting (CRITICAL for local SEO) -->
<meta content="NZ-OTA" name="geo.region"/>
<meta content="Cromwell, Central Otago, New Zealand" name="geo.placename"/>
<meta content="-45.038710, 169.197693" name="geo.position"/>
<meta content="-45.038710, 169.197693" name="ICBM"/>
<!-- Mobile optimization -->
<meta content="yes" name="mobile-web-app-capable"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
<meta content="#2d5a5a" name="theme-color"/>
<!-- Open Graph / Facebook -->
<meta content="website" property="og:type"/>
<meta content="https://lakesideretreat.co.nz/" property="og:url"/>
<meta content="Central Otago Luxury Accommodation | Lake Dunstan Glamping Domes" property="og:title"/>
<meta content="Luxury glamping domes and cottage in Central Otago wine country with Lake Dunstan views. Grid-tied solar powered, 300m to cycle trail, near Cromwell." property="og:description"/>
<meta content="Lakeside Retreat" property="og:site_name"/>
<meta content="https://lakesideretreat.co.nz/images/vineyard.jpeg" property="og:image"/>
<meta content="1200" property="og:image:width"/>
<meta content="630" property="og:image:height"/>
<meta content="Luxury glamping dome with panoramic Lake Dunstan views in Central Otago wine country" property="og:image:alt"/>
<meta content="en_NZ" property="og:locale"/>
<!-- Twitter Cards for Social Sharing -->
<meta content="summary_large_image" name="twitter:card"/>
<meta content="https://lakesideretreat.co.nz/" name="twitter:url"/>
<meta content="Central Otago Luxury Accommodation | Lake Dunstan Glamping" name="twitter:title"/>
<meta content="Luxury glamping domes with Lake Dunstan views in Central Otago wine country. Grid-tied solar powered, 300m to cycle trail. 4.9★ rated sustainable accommodation." name="twitter:description"/>
<meta content="images/dome-pinot-hero.jpeg" name="twitter:image"/>
<meta content="Luxury glamping dome with panoramic Lake Dunstan views in Central Otago wine country near Cromwell" name="twitter:image:alt"/>
<!-- Canonical URL -->
<link href="https://lakesideretreat.co.nz/" rel="canonical"/>
<!-- Multilingual Support -->
<link href="https://lakesideretreat.co.nz/" hreflang="en-nz" rel="alternate"/>
<link href="https://lakesideretreat.co.nz/" hreflang="en-au" rel="alternate"/>
<link href="https://lakesideretreat.co.nz/" hreflang="en" rel="alternate"/>
<!-- Performance Optimizations -->
<link crossorigin="" href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://cdnjs.cloudflare.com" rel="preconnect"/>
<link href="//images.unsplash.com" rel="dns-prefetch"/>
<link as="style" href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&amp;display=swap" onload="this.onload=null;this.rel='stylesheet'" rel="preload"/>
<link as="style" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&amp;display=swap" onload="this.onload=null;this.rel='stylesheet'" rel="preload"/>
<!-- Enhanced Performance Optimizations -->
<link crossorigin="" href="https://images.unsplash.com" rel="preconnect"/>
<link crossorigin="" href="https://www.googletagmanager.com" rel="preconnect"/>
<!-- Resource hints for better loading -->
<meta content="telephone=no" name="format-detection"/>
<meta content="no" name="msapplication-tap-highlight"/>
<!-- Enhanced viewport for better mobile experience -->
<meta content="true" name="HandheldFriendly"/>
<meta content="width" name="MobileOptimized"/>
<!-- Favicons -->
<link href="images/favicon.ico" rel="icon" type="image/x-icon"/>
<link href="images/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/>
<link href="images/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/>
<link href="images/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/>
<!-- Font Awesome -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
<!-- Flatpickr Date Picker (self-hosted) -->
<link href="/vendor/flatpickr/flatpickr.min.css" rel="stylesheet"/>
<!-- Stripe.js for Payment Processing -->
<script src="https://js.stripe.com/v3/"></script>
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&amp;family=Playfair+Display:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>
<!-- Google Analytics 4 -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-M6TC9MB5CR"></script>
<script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-M6TC9MB5CR', {
        'enhanced_ecommerce': true,
        'send_page_view': true,
        'custom_map': {
          'custom_parameter_1': 'accommodation_type',
          'custom_parameter_2': 'booking_source'
        }
      });
      
      // Enhanced tracking for accommodation bookings
      function trackBookingIntent(accommodationType) {
        gtag('event', 'booking_intent', {
          'accommodation_type': accommodationType,
          'page_location': window.location.href
        });
      }
      
      // Wine tour interest tracking
      function trackWineTourInterest() {
        gtag('event', 'wine_tour_interest', {
          'content_category': 'central_otago_activities'
        });
      }
    </script>
<!-- Search Console Verification - Add your verification code when available -->
<!-- <meta name="google-site-verification" content=""> -->
<!-- Clarity Analytics for heat mapping -->
<script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "sxhpz96ywu");
    </script>
<!-- Performance monitoring -->
<script>
      // Core Web Vitals monitoring with error handling
      if (typeof PerformanceObserver !== 'undefined') {
        try {
          new PerformanceObserver((entryList) => {
            for (const entry of entryList.getEntries()) {
              if (entry.entryType === 'navigation' && typeof gtag !== 'undefined') {
                gtag('event', 'page_load_time', {
                  'event_category': 'Performance',
                  'event_label': 'Navigation',
                  'value': Math.round(entry.loadEventEnd - entry.loadEventStart)
                });
              }
            }
          }).observe({entryTypes: ['navigation']});
        } catch (e) {
          // PerformanceObserver not supported or failed - silently ignore
        }
      }
    </script>
<!-- Service Worker for Enhanced Caching -->
<script>
// Register service worker for caching and offline support
if ('serviceWorker' in navigator && 'caches' in window) {
    window.addEventListener('load', () => {
        // Simple service worker for caching static assets
        const swCode = `
            const CACHE_NAME = 'lakeside-retreat-v1';
            const urlsToCache = [
                '/',
                '/index.html',
                'https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap',
                'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css'
            ];
            
            self.addEventListener('install', (event) => {
                event.waitUntil(
                    caches.open(CACHE_NAME)
                        .then((cache) => cache.addAll(urlsToCache))
                );
            });
            
            self.addEventListener('fetch', (event) => {
                event.respondWith(
                    caches.match(event.request)
                        .then((response) => {
                            return response || fetch(event.request);
                        }
                    )
                );
            });
        `;
        
        // Create and register service worker
        const blob = new Blob([swCode], { type: 'application/javascript' });
        const swUrl = URL.createObjectURL(blob);
        
        navigator.serviceWorker.register(swUrl)
            .then(() => {}) // Console statement removed for production
            .catch(() => {}); // Console statement removed for production
    });
}

// Enhanced WebP detection and image optimization
function detectWebPSupport() {
    const webP = new Image();
    webP.onload = webP.onerror = () => {
        document.documentElement.classList.add(webP.height === 2 ? 'webp' : 'no-webp');
    };
    webP.src = 'data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA';
}
</script>
<script>
// Initialize optimizations
document.addEventListener('DOMContentLoaded', () => {
    detectWebPSupport();
    
    // Optimize images with lazy loading
    if ('IntersectionObserver' in window) {
        const imageObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    if (img.dataset.src) {
                        img.src = img.dataset.src;
                        img.classList.remove('lazy');
                        imageObserver.unobserve(img);
                    }
                }
            });
        });
        
        // Observe images with data-src attribute
        document.querySelectorAll('img[data-src]').forEach(img => {
            imageObserver.observe(img);
        });
    }
});
</script>
</head>
<body>
<!-- COMPREHENSIVE STRUCTURED DATA -->
<!-- Main Business Schema -->
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LodgingBusiness",
      "@id": "https://lakesideretreat.co.nz/#organization",
      "name": "Lakeside Retreat Central Otago",
      "alternateName": "Lakeside Glamping",
      "description": "Central Otago's premier luxury glamping accommodation on Lake Dunstan with solar power system, Powerwall, direct Otago Rail Trail access, and proximity to 30+ wineries",
      "url": "https://lakesideretreat.co.nz/",
      "logo": "https://lakesideretreat.co.nz/images/logo.png",
      "image": [
        "https://lakesideretreat.co.nz/images/dome-pinot-exterior.jpg",
        "https://lakesideretreat.co.nz/images/dome-rose-spa1.jpg",
        "https://lakesideretreat.co.nz/images/lakeside-cottage-lake-view.jpg"
      ],
      "telephone": "+64-21-368-682",
      "email": "info@lakesideretreat.co.nz",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "96 Smiths Way, Mount Pisa",
        "addressLocality": "Cromwell",
        "addressRegion": "Otago",
        "postalCode": "9310",
        "addressCountry": "NZ"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": -45.038710,
        "longitude": 169.197693
      },
      "openingHoursSpecification": {
        "@type": "OpeningHoursSpecification",
        "dayOfWeek": [
          "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"
        ],
        "opens": "08:00",
        "closes": "20:00"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.9",
        "reviewCount": "127",
        "bestRating": "5",
        "worstRating": "1"
      },
      "amenityFeature": [
        {
          "@type": "LocationFeatureSpecification",
          "name": "Commercial-Grade Solar System",
          "value": "16.72kW Solar Array with 38 x 440W Helios Panels"
        },
        {
          "@type": "LocationFeatureSpecification", 
          "name": "Energy Storage System",
          "value": "Signergy Battery Storage)"
        },
        {
          "@type": "LocationFeatureSpecification",
          "name": "Smart Energy Management",
          "value": "20kW Hybrid Inverter with Real-time Monitoring"
        },
        {
          "@type": "LocationFeatureSpecification",
          "name": "Energy Independence",
          "value": "Energy-Positive Operations Contributing to NZ Grid"
        },
        {
          "@type": "LocationFeatureSpecification",
          "name": "Private Hot Tub",
          "value": true
        },
        {
          "@type": "LocationFeatureSpecification",
          "name": "Lake Access",
          "value": "Direct Lake Dunstan access"
        },
        {
          "@type": "LocationFeatureSpecification",
          "name": "Cycle Trail Access",
          "value": "Otago Rail Trail - 300 metre walk"
        },
        {
          "@type": "LocationFeatureSpecification",
          "name": "Wine Country Location",
          "value": "15+ wineries within 15km"
        }
      ],
      "starRating": {
        "@type": "Rating",
        "ratingValue": "5"
      },
      "priceRange": "$$$",
      "currenciesAccepted": "NZD",
      "paymentAccepted": "Cash, Credit Card, Debit Card",
      "checkinTime": "15:00",
      "checkoutTime": "10:00",
      "petsAllowed": "Lakeside Cottage only",
      "smokingAllowed": false,
      "numberOfRooms": "3",
      "maximumAttendeeCapacity": "6",
      "hasMap": "https://maps.google.com/?q=-45.038710,169.197693",
      "sameAs": [
        "https://www.facebook.com/lakesideretreat",
        "https://www.instagram.com/lakesideretreat",
        "https://www.airbnb.com/h/lakesideretreat",
        "https://www.booking.com/hotel/nz/lakeside-retreat.html"
      ]
    }
    </script>
<!-- Organization Schema -->
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Lakeside Retreat Central Otago",
      "alternateName": "Lakeside Retreat",
      "url": "https://lakesideretreat.co.nz",
      "logo": "https://lakesideretreat.co.nz/images/logo.png",
      "foundingDate": "2019",
      "founder": {
        "@type": "Person",
        "name": "Stephen & Sandy"
      },
      "description": "Sustainable luxury accommodation specialists in Central Otago, pioneering grid-tied solar tourism experiences",
      "knowsAbout": [
        "Solar Energy Systems",
        "Sustainable Tourism", 
        "Central Otago Wine Region",
        "Otago Rail Trail",
        "Lake Dunstan Activities",
        "Eco Glamping"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+64-21-368-682",
        "contactType": "customer service",
        "availableLanguage": ["English"],
        "areaServed": "NZ"
      },
      "sameAs": [
        "https://www.facebook.com/lakesideretreat",
        "https://www.instagram.com/lakesideretreat",
        "https://www.tripadvisor.com/lakesideretreat",
        "https://www.booking.com/lakesideretreat"
      ]
    }
    </script>
<!-- FAQ Schema Markup for SEO -->
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "Where is Lakeside Retreat located in Central Otago?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Lakeside Retreat is located at 96 Smiths Way, Mount Pisa, just 12km from Cromwell town centre. We're positioned directly on Lake Dunstan in the heart of Central Otago wine country, with the cycle trail just 300m from our accommodation."
        }
      },{
        "@type": "Question",
        "name": "What type of accommodation do you offer in Central Otago?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "We offer luxury glamping domes and a family cottage, all with Lake Dunstan and mountains view. Dome Pinot (50sqm) and Dome Rosé (40sqm) are perfect for couples, while our Lakeside Cottage accommodates families with direct lake access. All accommodation is powered by grid-tied solar with battery backup."
        }
      },{
        "@type": "Question",
        "name": "How close are you to Central Otago wineries?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "We're located in the heart of Central Otago wine country with 15+ wineries within 15km. Our own vineyard setting puts you amongst award-winning Pinot Noir producers, with many cellar doors accessible by bike via the cycle trail."
        }
      },{
        "@type": "Question",
        "name": "How does your 16.72kW solar power system work?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Our 16.72kW grid-tied solar system with 16kWh Signergy battery provides clean energy while maintaining 100% reliability for guests. Being grid-tied means you'll never experience power outages, while we contribute excess renewable energy back to New Zealand's grid."
        }
      },{
        "@type": "Question",
        "name": "Can I access the Otago Rail Trail from your accommodation?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes! The famous Otago Rail Trail is just a 300-metre walk from our domes. You can easily access the Cromwell to Clyde section, rent bikes in Cromwell, and arrange luggage transfers. It's perfect for wine country cycling and exploring Central Otago's heritage."
        }
      },{
        "@type": "Question",
        "name": "What activities are available on Lake Dunstan?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Lake Dunstan offers kayaking, paddleboarding, fishing, and scenic walks right from our doorstep. The lake is perfect for photography, bird watching, and water sports. The Cromwell Gorge walks provide stunning views and heritage sites."
        }
      }]
    }
    </script>
<!-- Breadcrumb Schema Markup -->
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Central Otago Accommodation",
        "item": "https://lakesideretreat.co.nz/"
      },{
        "@type": "ListItem", 
        "position": 2,
        "name": "Lake Dunstan Accommodation",
        "item": "https://lakesideretreat.co.nz/#accommodations"
      },{
        "@type": "ListItem",
        "position": 3,
        "name": "Cromwell Wine Country Activities", 
        "item": "https://lakesideretreat.co.nz/#explore"
      }]
    }
    </script>
<!-- Website Schema -->
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Lakeside Retreat Central Otago",
      "url": "https://lakesideretreat.co.nz",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://lakesideretreat.co.nz/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      },
      "sameAs": [
        "https://www.facebook.com/lakesideretreat",
        "https://www.instagram.com/lakesideretreat"
      ]
    }
    </script>
<!-- Blog Collection Schema -->
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Blog",
      "name": "Central Otago Wine Country & Solar Energy Blog",
      "description": "Expert guides for Central Otago wine country, sustainable travel, and renewable energy tourism",
      "url": "https://lakesideretreat.co.nz/blog",
      "author": {
        "@type": "Organization",
        "name": "Lakeside Retreat Central Otago"
      },
      "publisher": {
        "@type": "Organization",
        "name": "Lakeside Retreat Central Otago",
        "logo": {
          "@type": "ImageObject",
          "url": "https://lakesideretreat.co.nz/images/logo.png"
        }
      },
      "inLanguage": "en-NZ"
    }
    </script>
<!-- Security and Performance optimization -->
<script>
      // WebP support detection
      function supportsWebP() {
        return new Promise(resolve => {
          const webP = new Image();
          webP.onload = webP.onerror = () => resolve(webP.height === 2);
          webP.src = 'data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA';
        });
      }
      
      supportsWebP().then(supported => {
        document.documentElement.classList.add(supported ? 'webp' : 'no-webp');
        
        // Progressive image loading for mobile
        if (supported) {
          implementProgressiveImageLoading();
        }
        
        // Initialize lazy loading for images
        if ('IntersectionObserver' in window) {
          const imageObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                const img = entry.target;
                if (img.dataset.src) {
                  img.src = img.dataset.src;
                  img.classList.remove('lazy');
                  imageObserver.unobserve(img);
                }
              }
            });
          }, {
            rootMargin: '50px 0px',
            threshold: 0.01
          });
          
          // Apply lazy loading to images below the fold
          document.querySelectorAll('img[data-src]').forEach(img => {
            imageObserver.observe(img);
          });
        }
      });
      
      function implementProgressiveImageLoading() {
        // Convert JPEG images to WebP format dynamically for supported browsers
        document.querySelectorAll('img[src*=".jpeg"], img[src*=".jpg"]').forEach(img => {
          const webpSrc = img.src.replace(/\.(jpe?g)$/i, '.webp');
          
          // Test if WebP version exists
          const testImg = new Image();
          testImg.onload = () => {
            img.src = webpSrc;
          };
          testImg.onerror = () => {
            // Keep original if WebP doesn't exist
          };
          testImg.src = webpSrc;
        });
      }
      
      // Service Worker for caching - disabled as sw.js not available
      // if ('serviceWorker' in navigator) {
      //   navigator.serviceWorker.register('/sw.js');
      // }
      
      // Initialize security on page load
      document.addEventListener('DOMContentLoaded', function() {
        // Initialize secure frontend functions
        if (window.SecureFrontend) {
          window.SecureFrontend.logSecurityEvent('page_loaded', {
            url: window.location.href,
            timestamp: new Date().toISOString()
          });
        }
      });
    </script>
<style>
        :root {
            /* Color System */
            --primary: linear-gradient(135deg, #2d5a5a 0%, #1e4040 100%);
            --secondary: linear-gradient(135deg, #7a8471 0%, #6b7562 100%);
            --accent: linear-gradient(135deg, #2d5a5a 0%, #7a8471 100%);
            --brand-teal: #2d5a5a;
            --brand-teal-light: #4a7c7c;
            --brand-teal-dark: #1e4040;
            --brand-sage: #7a8471;
            --light-teal: rgba(45, 90, 90, 0.1);
            --dark: #0f172a;
            --light: #f8fafc;
            --white: #ffffff;
            --text: #334155;
            --text-light: #64748b;
            --text-muted: #94a3b8;
            --border: #e2e8f0;
            --border-light: #f1f5f9;
            --shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-sm: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            
            /* Typography Scale */
            --font-size-xs: 0.75rem;    /* 12px */
            --font-size-sm: 0.875rem;   /* 14px */
            --font-size-base: 1rem;     /* 16px */
            --font-size-lg: 1.125rem;   /* 18px */
            --font-size-xl: 1.25rem;    /* 20px */
            --font-size-2xl: 1.5rem;    /* 24px */
            --font-size-3xl: 2rem;      /* 32px */
            --font-size-4xl: 2.5rem;    /* 40px */
            --font-size-5xl: 3rem;      /* 48px */
            
            /* Font Weights */
            --font-weight-normal: 400;
            --font-weight-medium: 500;
            --font-weight-semibold: 600;
            --font-weight-bold: 700;
            
            /* Line Heights */
            --line-height-tight: 1.25;
            --line-height-normal: 1.5;
            --line-height-relaxed: 1.625;
            
            /* Spacing Scale */
            --space-1: 0.25rem;   /* 4px */
            --space-2: 0.5rem;    /* 8px */
            --space-3: 0.75rem;   /* 12px */
            --space-4: 1rem;      /* 16px */
            --space-5: 1.25rem;   /* 20px */
            --space-6: 1.5rem;    /* 24px */
            --space-8: 2rem;      /* 32px */
            --space-10: 2.5rem;   /* 40px */
            --space-12: 3rem;     /* 48px */
            --space-16: 4rem;     /* 64px */
            --space-20: 5rem;     /* 80px */
            
            /* Border Radius */
            --radius: 15px;
            --radius-sm: 8px;
            --radius-lg: 20px;
            --radius-xl: 24px;
            
            /* Transitions */
            --transition: all 0.3s ease;
            --transition-fast: all 0.15s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Typography System */
        .text-xs { font-size: var(--font-size-xs); }
        .text-sm { font-size: var(--font-size-sm); }
        .text-base { font-size: var(--font-size-base); }
        .text-lg { font-size: var(--font-size-lg); }
        .text-xl { font-size: var(--font-size-xl); }
        .text-2xl { font-size: var(--font-size-2xl); }
        .text-3xl { font-size: var(--font-size-3xl); }
        .text-4xl { font-size: var(--font-size-4xl); }
        .text-5xl { font-size: var(--font-size-5xl); }

        .font-normal { font-weight: var(--font-weight-normal); }
        .font-medium { font-weight: var(--font-weight-medium); }
        .font-semibold { font-weight: var(--font-weight-semibold); }
        .font-bold { font-weight: var(--font-weight-bold); }

        .leading-tight { line-height: var(--line-height-tight); }
        .leading-normal { line-height: var(--line-height-normal); }
        .leading-relaxed { line-height: var(--line-height-relaxed); }

        .text-brand { color: var(--brand-teal); }
        .text-dark { color: var(--dark); }
        .text-base-color { color: var(--text); }
        .text-light { color: var(--text-light); }
        .text-muted { color: var(--text-muted); }

        /* Spacing System */
        .p-4 { padding: var(--space-4); } .p-6 { padding: var(--space-6); }
        .p-8 { padding: var(--space-8); } .p-12 { padding: var(--space-12); }

        .py-4 { padding-top: var(--space-4); padding-bottom: var(--space-4); }
        .py-6 { padding-top: var(--space-6); padding-bottom: var(--space-6); }
        .py-8 { padding-top: var(--space-8); padding-bottom: var(--space-8); }
        .py-12 { padding-top: var(--space-12); padding-bottom: var(--space-12); }
        .py-16 { padding-top: var(--space-16); padding-bottom: var(--space-16); }

        .px-4 { padding-left: var(--space-4); padding-right: var(--space-4); }
        .px-6 { padding-left: var(--space-6); padding-right: var(--space-6); }
        .px-8 { padding-left: var(--space-8); padding-right: var(--space-8); }

        .mb-2 { margin-bottom: var(--space-2); } .mb-4 { margin-bottom: var(--space-4); }
        .mb-6 { margin-bottom: var(--space-6); } .mb-8 { margin-bottom: var(--space-8); }
        .mb-12 { margin-bottom: var(--space-12); }

        .mt-4 { margin-top: var(--space-4); } .mt-6 { margin-top: var(--space-6); }
        .mt-8 { margin-top: var(--space-8); }

        /* Border Radius System */
        .rounded { border-radius: var(--radius); }
        .rounded-sm { border-radius: var(--radius-sm); }
        .rounded-lg { border-radius: var(--radius-lg); }
        .rounded-xl { border-radius: var(--radius-xl); }

        /* Shadow System */
        .shadow { box-shadow: var(--shadow); }
        .shadow-sm { box-shadow: var(--shadow-sm); }
        .shadow-lg { box-shadow: var(--shadow-lg); }

        /* Performance: Lazy Loading */
        img.lazy {
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        img.lazy.loaded {
            opacity: 1;
        }
        
        /* Image aspect ratio containers */
        .image-container {
            position: relative;
            overflow: hidden;
            background: var(--border-light);
        }
        
        .image-container::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 40px;
            height: 40px;
            margin: -20px 0 0 -20px;
            border: 3px solid var(--border);
            border-radius: 50%;
            border-top-color: var(--brand-teal);
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: var(--light);
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Navigation */
        .navbar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            border-bottom: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .nav-container {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 2rem;
        }

        /* Navigation Styles */
        .logo {
            margin-right: 0.25rem;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--brand-teal);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo-icon {
            width: auto;
            height: 3.0rem;
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            fill: var(--brand-teal);
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            text-decoration: none;
            color: var(--text);
            font-weight: 500;
            transition: color 0.3s ease;
            cursor: pointer;
        }

        .nav-link:hover, .nav-link.active {
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Enhanced focus states for accessibility */
        .nav-link:focus {
            outline: 2px solid var(--brand-teal);
            outline-offset: 4px;
            border-radius: 4px;
        }
        
        .nav-link:focus-visible {
            outline: 2px solid var(--brand-teal);
            outline-offset: 4px;
            border-radius: 4px;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text);
        }

        /* Mobile Navigation */
        .mobile-nav {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            z-index: 1001;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 2rem;
        }

        .mobile-nav.active {
            display: flex;
        }

        .mobile-nav .nav-link {
            font-size: 1.5rem;
            padding: 1rem;
        }

        .close-mobile-menu {
            position: absolute;
            top: 2rem;
            right: 2rem;
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: var(--brand-teal);
        }

        /* Search Overlay */
        .search-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .search-overlay.active {
            display: flex;
        }

        .search-container {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }

        .search-results {
            max-height: 300px;
            overflow-y: auto;
        }

        .search-result {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .search-result:hover {
            background: var(--light);
        }

        .close-search {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Cookie Consent */
        .cookie-consent {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--dark);
            color: white;
            padding: 1rem;
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .cookie-consent.active {
            display: flex;
        }

        /* Social Proof Notifications */
        .social-proof {
            position: fixed;
            bottom: 2rem;
            left: 2rem;
            background: white;
            border-radius: 10px;
            padding: 1rem 1.5rem;
            box-shadow: var(--shadow);
            z-index: 999;
            transform: translateX(-120%);
            transition: transform 0.5s ease;
            max-width: 300px;
        }

        .social-proof.show {
            transform: translateX(0);
        }

        /* Skeleton Loading */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Main Content */
        main {
            margin-top: 80px;
        }

        .page {
            display: none;
            min-height: calc(100vh - 80px);
        }

        .page.active {
            display: block;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80') center/cover;
            color: white;
            padding: 8rem 0 4rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            min-height: 70vh;
            display: flex;
            align-items: center;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            width: 100%;
        }

        .hero h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.2;
        }

        .hero .tagline {
            font-size: 1.4rem;
            font-weight: 600;
            letter-spacing: 2px;
            margin-bottom: 1.5rem;
            color: var(--brand-teal);
            text-transform: uppercase;
        }

        .hero p {
            font-size: 1.25rem;
            margin-bottom: 2rem;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            opacity: 0.9;
            line-height: 1.7;
        }

        /* Buttons */
        .btn {
            display: inline-block;
            padding: 1rem 2rem;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #8b2635 0%, #6b1a26 100%);
            color: white;
            box-shadow: var(--shadow);
            border: 2px solid #8b2635;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #a02d3f 0%, #8b2635 100%);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(139, 38, 53, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #7a8471 0%, #6b7562 100%);
            color: white;
            box-shadow: var(--shadow);
            border: 2px solid #7a8471;
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #8a9480 0%, #7a8471 100%);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(122, 132, 113, 0.3);
        }

        .btn-outline {
            background: transparent;
            color: var(--text);
            border: 2px solid var(--border);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
            border-color: transparent;
        }
        
        /* Global focus states for buttons - accessibility */
        .btn:focus,
        .btn:focus-visible {
            outline: 3px solid var(--brand-teal);
            outline-offset: 3px;
        }
        
        button:focus,
        button:focus-visible {
            outline: 2px solid var(--brand-teal);
            outline-offset: 2px;
        }
        
        /* Focus states for form inputs */
        input:focus,
        select:focus,
        textarea:focus {
            outline: 2px solid var(--brand-teal);
            outline-offset: 1px;
            border-color: var(--brand-teal);
        }
        
        /* Focus states for links */
        a:focus,
        a:focus-visible {
            outline: 2px solid var(--brand-teal);
            outline-offset: 2px;
            border-radius: 4px;
        }
        
        /* Skip link for keyboard users */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--brand-teal);
            color: white;
            padding: 8px 16px;
            z-index: 10000;
            transition: top 0.3s;
        }
        
        .skip-link:focus {
            top: 0;
        }

        /* Sections */
        .section {
            padding: 4rem 0;
        }

        .section-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section-subtitle {
            font-size: 1.1rem;
            opacity: 0.7;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Grid */
        .grid {
            display: grid;
            gap: 2rem;
        }

        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        .grid-3 {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }

        .grid-4 {
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(30px);
        }

        .card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-lg);
        }

        .card-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .card-image:hover {
            transform: scale(1.05);
        }

        .card-content {
            padding: 2rem;
        }

        .card-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--dark);
        }

        .card-text {
            margin-bottom: 1.5rem;
            opacity: 0.8;
        }

        /* Amenities Grid */
        .amenities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .amenity-category {
            background: rgba(45, 90, 90, 0.05);
            padding: 1rem;
            border-radius: 10px;
            border-left: 3px solid var(--brand-teal);
        }

        .amenity-category h5 {
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--dark);
            font-size: 0.9rem;
        }

        .amenity-category ul {
            list-style: none;
            padding: 0;
        }

        .amenity-category li {
            margin-bottom: 0.25rem;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
        }

        .amenity-category li i {
            color: #10b981;
            margin-right: 0.5rem;
            font-size: 0.7rem;
        }

        /* Stats */
        .stats {
            display: flex;
            justify-content: space-around;
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--shadow);
            margin: 2rem 0;
        }

        .stat {
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.7;
            margin-top: 0.5rem;
        }

        /* STREAMLINED 3-BUTTON BOOKING MODAL STYLES */
        .booking-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            overflow-y: auto;
        }

        .booking-modal.active {
            display: flex;
        }

        .booking-modal-content {
            background: white;
            border-radius: 20px;
            max-width: 700px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .booking-modal-header {
            background: var(--primary);
            color: white;
            padding: 2rem;
            border-radius: 20px 20px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .booking-modal-header h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            margin: 0;
        }

        .close-booking-modal {
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            padding: 0;
        }

        .booking-modal-body {
            padding: 2rem;
        }

        .booking-step {
            display: none;
        }

        .booking-step.active {
            display: block;
        }


        .booking-form-group {
            margin-bottom: 1.5rem;
        }

        .booking-form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--brand-teal);
        }

        .booking-form-input, .booking-form-select {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .booking-form-input:focus, .booking-form-select:focus {
            outline: none;
            border-color: var(--brand-teal);
        }

        .booking-form-input.error, .booking-form-select.error {
            border-color: #dc2626;
            background-color: #fef2f2;
        }

        .booking-form-input.error:focus, .booking-form-select.error:focus {
            border-color: #dc2626;
        }

        .form-error-message {
            color: #dc2626;
            font-size: 0.85rem;
            margin-top: 0.25rem;
            display: none;
        }

        .form-error-message.show {
            display: block;
        }

        /* Image Loading Optimization */
        .card-image.lazy {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        .card-image {
            transition: opacity 0.3s ease;
            will-change: opacity;
        }
        
        .card-image.loaded {
            opacity: 1;
        }
        
        /* WebP Progressive Enhancement */
        .webp .hero-background {
            background-image: url('https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/hero-background.webp');
        }
        
        .no-webp .hero-background {
            background-image: url('https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/hero-background.jpg');
        }
        
        /* Mobile Image Optimization */
        @media (max-width: 768px) {
            .card-image {
                height: 250px;
                object-fit: cover;
                object-position: center;
            }
            
            .webp .card-image[src*=".jpeg"] {
                content-visibility: auto;
                contain-intrinsic-size: 250px;
            }
        }

        .booking-date-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .booking-guests-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .booking-accommodation-selector {
            display: grid;
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .accommodation-option {
            border: 2px solid var(--border);
            border-radius: 15px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .accommodation-option:hover {
            border-color: var(--brand-teal);
            background: rgba(45, 90, 90, 0.05);
        }

        .accommodation-option.selected {
            border-color: var(--brand-teal);
            background: rgba(45, 90, 90, 0.1);
        }

        .accommodation-option h4 {
            color: var(--brand-teal);
            margin-bottom: 0.5rem;
        }

        .accommodation-price {
            font-weight: 600;
            color: var(--brand-teal);
            font-size: 1.1rem;
            margin-top: 0.5rem;
        }

        .availability-result {
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
            text-align: center;
        }

        .availability-success {
            background: #dcfdf7;
            border: 1px solid #10b981;
            color: #047857;
        }

        .availability-error {
            background: #fee2e2;
            border: 1px solid #f87171;
            color: #dc2626;
        }

        .price-breakdown {
            background: #f8fafc;
            border-radius: 15px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .price-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            padding: 0.25rem 0;
        }

        .price-total {
            border-top: 2px solid var(--border);
            padding-top: 1rem;
            margin-top: 1rem;
            font-weight: 600;
            font-size: 1.2rem;
        }

        .guest-details-form {
            display: grid;
            gap: 1rem;
        }

        .guest-form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .booking-success {
            text-align: center;
            padding: 2rem;
        }

        .success-icon {
            font-size: 4rem;
            color: #10b981;
            margin-bottom: 1rem;
        }

        .booking-security-badges {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
            font-size: 0.9rem;
            color: #666;
            flex-wrap: wrap;
        }

        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--brand-teal);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Footer */
        .footer {
            background: var(--dark);
            color: white;
            padding: 3rem 0 2rem;
            margin-top: 4rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 3rem;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .footer-section p, .footer-section a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            margin-bottom: 0.5rem;
            display: block;
        }

        .footer-section a:hover {
            color: white;
        }

        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 2rem;
            text-align: center;
            opacity: 0.7;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-input, .form-textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-input:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--brand-teal);
        }

        .form-input.valid {
            border-color: #10b981;
        }

        .form-input.invalid {
            border-color: #ef4444;
        }

        .form-error {
            color: #ef4444;
            font-size: 0.9rem;
            margin-top: 0.5rem;
            display: none;
        }

        .form-error.show {
            display: block;
        }

        /* Gallery Lightbox */
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .lightbox.active {
            display: flex;
        }

        .lightbox-content {
            max-width: 90%;
            max-height: 90%;
            position: relative;
        }

        .lightbox-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .lightbox-close {
            position: absolute;
            top: -40px;
            right: 0;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            background: none;
            border: none;
        }

        .lightbox-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 2rem;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.5);
            border: none;
            padding: 1rem;
            border-radius: 50%;
        }

        .lightbox-prev {
            left: -60px;
        }

        .lightbox-next {
            right: -60px;
        }

        /* Breadcrumbs */
        .breadcrumbs {
            background: rgba(255, 255, 255, 0.8);
            padding: 1rem 0;
            font-size: 0.9rem;
            border-bottom: 1px solid var(--border);
        }

        .breadcrumb-item {
            display: inline;
            opacity: 0.6;
        }

        .breadcrumb-item.active {
            opacity: 1;
            font-weight: 500;
        }

        .breadcrumb-item:not(:last-child)::after {
            content: ' / ';
            margin: 0 0.5rem;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.6s ease forwards;
        }

        /* Accordion Styles */
        .accordion-container {
            margin: 1.5rem 0;
        }

        .accordion-item {
            border: 1px solid var(--border);
            border-radius: 10px;
            margin-bottom: 0.5rem;
            overflow: hidden;
        }

        .accordion-header {
            width: 100%;
            padding: 1rem 1.5rem;
            background: white;
            border: none;
            text-align: left;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: var(--brand-teal);
            transition: all 0.3s ease;
        }

        .accordion-header:hover {
            background: rgba(45, 90, 90, 0.05);
        }

        .accordion-header.active {
            background: rgba(45, 90, 90, 0.1);
        }

        .accordion-icon {
            transition: transform 0.3s ease;
        }

        .accordion-header.active .accordion-icon {
            transform: rotate(180deg);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background: white;
        }

        .accordion-content.active {
            max-height: 1000px;
        }

        .accordion-content > div {
            padding: 1.5rem;
            border-top: 1px solid var(--border);
        }

        /* Mobile-First Responsive Design */
        
        /* Small Mobile Devices (320px - 480px) */
        @media (max-width: 480px) {
            .container {
                padding: 0 1rem;
            }

            .hero h1 {
                font-size: 2rem;
                line-height: 1.1;
            }

            .hero .tagline {
                font-size: 1rem;
            }

            .hero p {
                font-size: 1rem;
                margin-bottom: 1.5rem;
            }

            .section-title {
                font-size: 1.8rem;
                line-height: 1.2;
            }

            .section-subtitle {
                font-size: 1rem;
            }

            .card-content {
                padding: 1rem;
            }

            .card-title {
                font-size: 1.2rem;
            }

            .btn {
                padding: 0.8rem 1.5rem;
                font-size: 0.9rem;
                width: 100%;
                margin-bottom: 0.5rem;
            }

            /* Mobile Booking Modal */
            .booking-modal {
                padding: 1rem;
                align-items: flex-start;
                padding-top: 2rem;
            }

            .booking-modal-content {
                width: 100%;
                max-height: 95vh;
                margin: 0;
            }

            .booking-modal-header {
                padding: 1.5rem 1rem;
                border-radius: 20px 20px 0 0;
            }

            .booking-modal-header h2 {
                font-size: 1.4rem;
            }

            .booking-modal-body {
                padding: 1rem;
            }

            .booking-form-input, .booking-form-select {
                padding: 0.8rem;
                font-size: 1rem;
                border-radius: 8px;
            }

            .accommodation-option {
                padding: 1rem;
                margin-bottom: 0.5rem;
            }

            .accommodation-option h4 {
                font-size: 1.1rem;
            }

            .accommodation-price {
                font-size: 1rem;
            }
        }

        /* Medium Mobile Devices (481px - 768px) */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .mobile-menu-btn {
                display: block;
                padding: 0.5rem;
                touch-action: manipulation;
            }

            .hero {
                padding: 3rem 0;
                text-align: center;
            }

            .hero h1 {
                font-size: 2rem;
                margin-bottom: 1rem;
                line-height: 1.2;
            }

            .hero .tagline {
                font-size: 1.1rem;
            }

            .hero p {
                font-size: 1rem;
                margin-bottom: 2rem;
                padding: 0 1rem;
            }

            .section {
                padding: 3rem 0;
            }

            .section-title {
                font-size: 2rem;
                margin-bottom: 0.8rem;
            }

            .container {
                padding: 0 1.5rem;
            }

            /* Mobile Grid Adjustments */
            .grid-2, .grid-3, .grid-4 {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .stats {
                flex-direction: column;
                gap: 1.5rem;
                padding: 1.5rem;
            }

            .stat {
                padding: 1rem;
                border-bottom: 1px solid var(--border);
            }

            .stat:last-child {
                border-bottom: none;
            }

            /* Mobile Card Optimizations */
            .card {
                margin-bottom: 1rem;
                border-radius: 15px;
            }

            .card-content {
                padding: 1.5rem;
            }

            .card-image {
                height: 200px;
            }

            /* Mobile Amenities */
            .amenities-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .amenity-category {
                padding: 1rem;
                border-radius: 8px;
            }

            .amenity-category h5 {
                font-size: 0.95rem;
                margin-bottom: 0.8rem;
            }

            .amenity-category li {
                font-size: 0.85rem;
                margin-bottom: 0.3rem;
            }

            /* Mobile Booking Form */
            .booking-date-row,
            .booking-guests-row,
            .guest-form-row {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .booking-form-group {
                margin-bottom: 1rem;
            }

            .booking-form-label {
                font-size: 0.9rem;
                margin-bottom: 0.3rem;
            }

            .booking-form-input, .booking-form-select {
                padding: 1rem;
                font-size: 1rem;
                border-radius: 10px;
                min-height: 50px; /* Better touch targets */
            }

            .price-breakdown {
                padding: 1rem;
                border-radius: 10px;
                margin: 1rem 0;
            }

            .price-row {
                padding: 0.5rem 0;
                font-size: 0.95rem;
            }

            .price-total {
                font-size: 1.1rem;
                padding-top: 1rem;
                margin-top: 1rem;
            }

            /* Mobile Footer */
            .footer {
                padding: 2rem 0 1rem;
            }

            .footer-content {
                grid-template-columns: 1fr;
                gap: 2rem;
                text-align: center;
            }

            .footer-section {
                padding: 1rem 0;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }

            .footer-section:last-child {
                border-bottom: none;
            }

            /* Mobile Social Proof */
            .social-proof {
                left: 1rem;
                right: 1rem;
                max-width: none;
                padding: 0.8rem 1rem;
                border-radius: 8px;
            }

            /* Mobile Lightbox */
            .lightbox-nav {
                display: none;
            }

            .lightbox-close {
                top: -30px;
                font-size: 1.5rem;
            }

            /* Mobile Search */
            .search-container {
                width: 95%;
                padding: 1.5rem;
                border-radius: 15px;
            }

            .search-input {
                padding: 0.8rem;
                font-size: 1rem;
                border-radius: 8px;
            }

            .search-result {
                padding: 0.8rem;
                font-size: 0.9rem;
            }

            /* Mobile Forms */
            .form-input, .form-textarea {
                padding: 1rem;
                font-size: 1rem;
                border-radius: 10px;
                min-height: 50px;
            }

            .form-textarea {
                min-height: 120px;
            }

            /* Mobile Trust Badges */
            .trust-badges {
                flex-direction: column;
                gap: 1rem;
            }
            
            /* Mobile Touch Optimizations */
            .btn, .card, .nav-link, .lightbox-close {
                touch-action: manipulation;
                -webkit-tap-highlight-color: rgba(45, 90, 90, 0.3);
                min-height: 44px;
                min-width: 44px;
            }
            
            /* Mobile Active States */
            .btn:active {
                transform: scale(0.98);
                transition: transform 0.1s ease;
            }
            
            .card:active {
                transform: scale(0.995);
                transition: transform 0.1s ease;
            }
            
            /* WebP Image Optimization */
            .webp .card-image {
                background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"><rect width="100%" height="100%" fill="%23f0f0f0"/></svg>');
                background-size: cover;
                background-position: center;
            }
            
            /* Mobile Performance - Reduce motion for battery */
            @media (prefers-reduced-motion: reduce) {
                *, *::before, *::after {
                    animation-duration: 0.01ms !important;
                    animation-iteration-count: 1 !important;
                    transition-duration: 0.01ms !important;
                }
            }
            
            /* Mobile Accessibility */
            @media (max-width: 480px) {
                .text-sm { font-size: 0.9rem !important; }
                .text-base { font-size: 1rem !important; }
                .text-lg { font-size: 1.1rem !important; }
                
                /* Ensure touch targets are at least 44px */
                button, .btn, a[role="button"] {
                    min-height: 44px;
                    padding: 12px 16px;
                }
                
                /* Improve form usability on mobile */
                input, textarea, select {
                    font-size: 16px; /* Prevents zoom on iOS */
                    -webkit-appearance: none;
                    appearance: none;
                }
                
                /* Better mobile scroll performance */
                .modal-content, .lightbox, .booking-modal {
                    -webkit-overflow-scrolling: touch;
                    overscroll-behavior: contain;
                }
            }
        }

        /* Ultra Small Screens (320px and below) - iPhone SE, older devices */
        @media (max-width: 375px) {
            .container {
                padding: 0 0.75rem;
            }
            
            .hero-content h1 {
                font-size: 2rem !important;
                line-height: 1.2;
            }
            
            .hero-content p {
                font-size: 0.9rem;
                margin-bottom: 1.5rem;
            }
            
            .btn {
                padding: 0.8rem 1.2rem;
                font-size: 0.9rem;
                width: 100%;
                margin-bottom: 0.5rem;
            }
            
            .section-title {
                font-size: 1.8rem !important;
            }
            
            .card-content {
                padding: 1rem;
            }
            
            .nav {
                padding: 0.5rem 1rem;
            }
            
            .logo-icon {
                height: 35px;
            }
            
            /* Ultra small form improvements */
            .booking-form {
                padding: 1rem;
            }
            
            .booking-form-group {
                margin-bottom: 1rem;
            }
            
            .booking-date-row {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            /* Improve modal on small screens */
            .modal-content {
                margin: 0.5rem;
                max-height: calc(100vh - 1rem);
                border-radius: 12px;
            }
            
            .lightbox {
                padding: 0.5rem;
            }
            
            /* Better gallery thumbnails */
            .gallery-thumbnails {
                gap: 0.25rem;
            }
            
            .gallery-thumbnails img {
                width: 60px;
                height: 60px;
            }
        }

        /* Large Mobile/Small Tablet (769px - 1024px) */
        @media (max-width: 1024px) {
            .hero-content h1 {
                font-size: 3rem;
            }

            .section-title {
                font-size: 2.2rem;
            }

            .container {
                padding: 0 2rem;
            }

            .grid-3 {
                grid-template-columns: repeat(2, 1fr);
            }

            .grid-4 {
                grid-template-columns: repeat(3, 1fr);
            }

            .booking-modal-content {
                max-width: 600px;
            }

            .amenities-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Scroll Indicator */
        .scroll-indicator {
            position: fixed;
            top: 80px;
            left: 0;
            height: 4px;
            background: var(--primary);
            z-index: 999;
            transition: width 0.3s ease;
        }

        /* Honeypot (hidden spam protection) */
        .honeypot {
            position: absolute;
            left: -9999px;
            opacity: 0;
        }

        /* Progressive Enhancement */
        .webp .hero { background-image: url('hero-background.webp'); }
        .no-webp .hero { background-image: url('hero-background.jpg'); }

        /* Reduce motion for accessibility */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        .btn-primary.book-now-highlight {
            outline: 1px solid #592741;
            outline-offset: 2px;
            background: #F6F1F4;
            color: #592741;
        }

        /* Collapsible FAQ Styles */
        .footer-faq-expanded {
            max-height: 2000px !important;
            opacity: 1 !important;
        }

        #faqToggleBtn {
            position: relative;
            overflow: hidden;
        }

        #faqToggleBtn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        #faqToggleBtn:hover::before {
            left: 100%;
        }

        @media (max-width: 768px) {
            #faqToggleBtn {
                width: 100%;
                max-width: 300px;
                font-size: 1rem;
                padding: 0.8rem 1.5rem;
            }
            
            .faq-item {
                margin-bottom: 0.5rem !important;
            }
            
            .faq-question {
                padding: 1rem !important;
                font-size: 0.9rem;
            }
            
            .faq-answer div {
                padding: 1rem !important;
                font-size: 0.85rem;
            }
        }

        /* Small Mobile Devices (max-width: 480px) */
        @media (max-width: 480px) {
            /* Social Proof Badge Mobile Fix */
            .hero-content > div[style*="display: inline-block"] {
                padding: 0.8rem 1rem !important;
                width: 90% !important;
                margin: 1rem auto !important;
            }
            
            .hero-content > div[style*="display: inline-block"] > div {
                flex-direction: column !important;
                gap: 0.8rem !important;
                text-align: center;
            }
            
            .hero-content > div[style*="display: inline-block"] > div > div[style*="height: 20px"] {
                display: none !important;
            }

            /* Progress Indicator Mobile */
            .progress-indicator {
                padding: 1rem;
            }
            
            .progress-step span {
                display: none;
            }
            
            .progress-step::after {
                content: attr(data-step);
                display: block;
                font-size: 0.75rem;
                margin-top: 0.5rem;
            }

            /* Booking Modal Mobile */
            .modal-content {
                width: 95%;
                margin: 1rem auto;
                max-height: 90vh;
                overflow-y: auto;
            }

            /* Button Sizes for Mobile */
            .btn {
                font-size: 0.95rem;
                padding: 0.8rem 1.5rem;
                min-height: 44px; /* iOS touch target */
            }

            /* Cards on Mobile */
            .card {
                margin-bottom: 1rem;
            }

            /* Back to Top Button Mobile */
            #backToTopBtn {
                bottom: 20px !important;
                right: 20px !important;
                width: 45px !important;
                height: 45px !important;
                font-size: 16px !important;
            }

            /* Form Inputs Mobile */
            input[type="text"],
            input[type="email"],
            input[type="tel"],
            input[type="date"],
            select,
            textarea {
                font-size: 16px !important; /* Prevents zoom on iOS */
            }

            /* Animation Squares Mobile */
            .animation-container {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
                padding: 1rem;
            }

            .animation-square {
                min-height: 120px;
                font-size: 0.9rem;
                padding: 1rem;
            }

            /* Trust badges mobile */
            .stats > div {
                width: 100%;
            }
        }
    </style>
<!-- Enhanced Security & Performance Manager -->
<script>
class WebsiteSecurityManager {
    constructor() {
        this.csrfToken = '';
        this.apiCallLimits = new Map();
        this.init();
    }
    
    async init() {
        try {
            this.setupFormValidation();
            this.setupRateLimiting();
            this.monitorPerformance();
            // Console statement removed for production
        } catch (error) {
            // Console statement removed for production
        }
    }
    
    // Enhanced email validation
    validateEmail(email) {
        const emailRegex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;
        return emailRegex.test(email) && email.length <= 254;
    }
    
    // Input sanitization
    sanitizeInput(input) {
        if (typeof input !== 'string') return input;
        return input
            .replace(/[<>]/g, '')
            .replace(/javascript:/gi, '')
            .replace(/on\w+=/gi, '')
            .trim();
    }
    
    // Rate limiting for API calls
    checkRateLimit(endpoint, maxCalls = 10) {
        const now = Date.now();
        const calls = this.apiCallLimits.get(endpoint) || [];
        const recentCalls = calls.filter(time => now - time < 60000);
        
        if (recentCalls.length >= maxCalls) {
            throw new Error('Rate limit exceeded. Please try again later.');
        }
        
        recentCalls.push(now);
        this.apiCallLimits.set(endpoint, recentCalls);
        return true;
    }
    
    // Form validation setup
    setupFormValidation() {
        document.addEventListener('submit', (event) => {
            const form = event.target;
            if (form.tagName === 'FORM') {
                const inputs = form.querySelectorAll('input[type="email"]');
                let isValid = true;
                
                inputs.forEach(input => {
                    if (input.value && !this.validateEmail(input.value)) {
                        isValid = false;
                        this.showFieldError(input, 'Please enter a valid email address');
                    }
                });
                
                if (!isValid) {
                    event.preventDefault();
                }
            }
        });
    }
    
    // Enhanced error display
    showFieldError(field, message) {
        const existingError = field.parentNode.querySelector('.field-error');
        if (existingError) existingError.remove();
        
        const errorDiv = document.createElement('div');
        errorDiv.className = 'field-error';
        errorDiv.style.cssText = 'color: #dc2626; font-size: 0.875rem; margin-top: 0.25rem;';
        errorDiv.textContent = message;
        
        field.parentNode.appendChild(errorDiv);
        field.style.borderColor = '#dc2626';
        
        // Clear error on input
        field.addEventListener('input', () => {
            errorDiv.remove();
            field.style.borderColor = '';
        }, { once: true });
    }
    
    // Performance monitoring
    monitorPerformance() {
        if ('PerformanceObserver' in window) {
            new PerformanceObserver((entryList) => {
                const entries = entryList.getEntries();
                const lastEntry = entries[entries.length - 1];
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'web_vitals', {
                        'metric_name': 'LCP',
                        'metric_value': Math.round(lastEntry.startTime)
                    });
                }
            }).observe({entryTypes: ['largest-contentful-paint']});
        }
    }
    
    setupRateLimiting() {
        window.limitedBookingAttempt = (callback) => {
            try {
                this.checkRateLimit('booking', 5);
                callback();
            } catch (error) {
                alert('Too many booking attempts. Please wait a moment before trying again.');
            }
        };
    }
}

// Enhanced Error Handling
window.addEventListener('error', (event) => {
    // Script error caught - handled silently in production
});

window.addEventListener('unhandledrejection', (event) => {
    // Promise rejection caught - handled silently in production
});

// Initialize on DOM load
document.addEventListener('DOMContentLoaded', () => {
    window.securityManager = new WebsiteSecurityManager();
});
</script>

<!-- STEP 1: Skip Navigation -->
<a class="skip-link" href="#mainContent">Skip to main content</a>
<!-- Scroll Indicator -->
<div class="scroll-indicator" id="scrollIndicator"></div>
<!-- Navigation -->
<nav class="navbar" id="navbar">
<div class="nav-container">
<a aria-label="Go to home page" class="logo" href="#" onclick="showPage('home'); return false;">
<img alt="Lakeside Retreat Logo" class="logo-icon" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/logormbg.png"/>
</a>
<ul class="nav-links">
<li><a class="nav-link" href="#" onclick="showPage('home'); return false;">Home</a></li>
<li><a class="nav-link" href="#" onclick="showPage('stay'); return false;">Stay</a></li>
<li><a class="nav-link" href="#" onclick="showPage('gallery'); return false;">Gallery</a></li>
<li><a class="nav-link" href="#" onclick="showPage('blog'); return false;">Guides</a></li>
<li><a class="nav-link" href="#" onclick="showPage('reviews'); return false;">Reviews</a></li>
<li><a class="nav-link" href="#" onclick="showPage('story'); return false;">Our Story</a></li>
<li><a class="nav-link" href="#" onclick="showPage('explore'); return false;">Explore</a></li>
<li><a class="nav-link" href="#" onclick="showPage('contact'); return false;">Contact</a></li>
<li><a class="nav-link" href="#" onclick="openSearch()"><i class="fas fa-search"></i></a></li>
<li><a aria-label="Check accommodation availability and make booking" class="btn btn-primary book-now-highlight" href="#" onclick="openBookingModal()">Check Availability</a></li>
</ul>
<button aria-label="Open mobile navigation menu" class="mobile-menu-btn" onclick="toggleMobileMenu()">
<i class="fas fa-bars"></i>
</button>
</div>
</nav>
<!-- Mobile Navigation -->
<div class="mobile-nav" id="mobileNav">
<button class="close-mobile-menu" onclick="toggleMobileMenu()">
<i class="fas fa-times"></i>
</button>
<a class="nav-link" href="#" onclick="showPage('home'); toggleMobileMenu(); return false;">Home</a>
<a class="nav-link" href="#" onclick="showPage('stay'); toggleMobileMenu(); return false;">Stay</a>
<a class="nav-link" href="#" onclick="showPage('gallery'); toggleMobileMenu(); return false;">Gallery</a>
<a class="nav-link" href="#" onclick="showPage('blog'); toggleMobileMenu(); return false;">Guides</a>
<a class="nav-link" href="#" onclick="showPage('reviews'); toggleMobileMenu(); return false;">Reviews</a>
<a class="nav-link" href="#" onclick="showPage('story'); toggleMobileMenu(); return false;">Our Story</a>
<a class="nav-link" href="#" onclick="showPage('explore'); toggleMobileMenu(); return false;">Explore</a>
<a class="nav-link" href="#" onclick="showPage('contact'); toggleMobileMenu(); return false;">Contact</a>
<a class="btn btn-primary book-now-highlight" href="#" onclick="openBookingModal(); toggleMobileMenu()">Check Availability</a>
</div>
<!-- Search Overlay -->
<div class="search-overlay" id="searchOverlay">
<div class="search-container">
<button class="close-search" onclick="closeSearch()">
<i class="fas fa-times"></i>
</button>
<input aria-label="Search accommodations, amenities, and activities" class="search-input" id="searchInput" oninput="performSearch()" placeholder="Search accommodations, amenities, activities..." type="text"/>
<div class="search-results" id="searchResults"></div>
</div>
</div>
<!-- Floating Cookie Buttons Only -->
<div id="cookieButtons" style="position: fixed; bottom: 20px; right: 20px; z-index: 1001; display: none; gap: 10px;">
<button class="btn btn-primary" onclick="acceptCookies()" style="margin-right: 10px;">Accept</button>
<button class="btn btn-outline" onclick="declineCookies()" style="background: white; color: var(--dark);">Decline</button>
</div>
<!-- Social Proof Notification -->
<div class="social-proof" id="socialProof">
<div style="display: flex; align-items: center; gap: 1rem;">
<div style="width: 40px; height: 40px; border-radius: 50%; background: var(--primary); display: flex; align-items: center; justify-content: center; color: white;">
<i class="fas fa-user"></i>
</div>
<div>
<div id="socialProofText" style="font-weight: 600;">Sarah from Auckland just booked Dome Pinot!</div>
<div id="socialProofTime" style="font-size: 0.8rem; opacity: 0.7;">2 minutes ago</div>
</div>
</div>
</div>
<!-- Gallery Lightbox -->
<div class="lightbox" id="lightbox">
<div class="lightbox-content">
<button class="lightbox-close" onclick="closeLightbox()">
<i class="fas fa-times"></i>
</button>
<button class="lightbox-nav lightbox-prev" onclick="prevImage()">
<i class="fas fa-chevron-left"></i>
</button>
<img alt="Gallery Image" class="lightbox-image" id="lightboxImage"/>
<button class="lightbox-nav lightbox-next" onclick="nextImage()">
<i class="fas fa-chevron-right"></i>
</button>
</div>
</div>
<!-- STREAMLINED 3-BUTTON BOOKING MODAL -->
<div class="booking-modal" id="bookingModal">
<div class="booking-modal-content">
<div class="booking-modal-header">
<h2>Book Your Commercial-Grade Solar Experience</h2>
<button class="close-booking-modal" onclick="closeBookingModal()">
<i class="fas fa-times"></i>
</button>
</div>
<!-- Progress Indicator -->
<div style="padding: 1rem 2rem; border-bottom: 1px solid #e5e7eb;">
<div style="display: flex; justify-content: space-between; align-items: center; max-width: 500px; margin: 0 auto;">
<div class="progress-step active" id="progressStep1" style="display: flex; align-items: center; color: var(--brand-teal); font-weight: 600;">
<div style="width: 30px; height: 30px; border-radius: 50%; background: var(--brand-teal); color: white; display: flex; align-items: center; justify-content: center; margin-right: 0.5rem; font-size: 0.9rem;">1</div>
                        Accommodation
                    </div>
<div style="flex: 1; height: 2px; background: #e5e7eb; margin: 0 1rem; position: relative;">
<div id="progressBar1" style="height: 100%; background: var(--brand-teal); width: 0%; transition: width 0.3s ease;"></div>
</div>
<div class="progress-step" id="progressStep2" style="display: flex; align-items: center; color: #6b7280; font-weight: 600;">
<div style="width: 30px; height: 30px; border-radius: 50%; background: #e5e7eb; color: #6b7280; display: flex; align-items: center; justify-content: center; margin-right: 0.5rem; font-size: 0.9rem;">2</div>
                        Details
                    </div>
<div style="flex: 1; height: 2px; background: #e5e7eb; margin: 0 1rem; position: relative;">
<div id="progressBar2" style="height: 100%; background: var(--brand-teal); width: 0%; transition: width 0.3s ease;"></div>
</div>
<div class="progress-step" id="progressStep3" style="display: flex; align-items: center; color: #6b7280; font-weight: 600;">
<div style="width: 30px; height: 30px; border-radius: 50%; background: #e5e7eb; color: #6b7280; display: flex; align-items: center; justify-content: center; margin-right: 0.5rem; font-size: 0.9rem;">3</div>
                        Confirm
                    </div>
</div>
</div>
<div class="booking-modal-body">
<!-- Step 1: Accommodation & Dates -->
<div class="booking-step active" id="bookingStep1">
<h3 style="color: var(--brand-teal); margin-bottom: 1.5rem;">Choose Your Energy-Positive Experience</h3>
<div class="booking-accommodation-selector">
<div class="accommodation-option" data-accommodation="dome-pinot" onclick="selectAccommodation('dome-pinot')">
<h4>Dome Pinot</h4>
<p>Flagship 50sqm luxury dome with panoramic views and private spa</p>
<div class="accommodation-price">From <span data-price="dome_pinot">$450</span>/night <span style="font-size: 0.8em; color: #666;">(GST incl.)</span></div>
</div>
<div class="accommodation-option" data-accommodation="dome-rose" onclick="selectAccommodation('dome-rose')">
<h4>Dome Rosé</h4>
<p>Romantic 40sqm retreat perfect for couples</p>
<div class="accommodation-price">From <span data-price="dome_rose">$380</span>/night <span style="font-size: 0.8em; color: #666;">(GST incl.)</span></div>
</div>
<div class="accommodation-option" data-accommodation="lakeside-cottage" onclick="selectAccommodation('lakeside-cottage')">
<h4>Lakeside Cottage</h4>
<p>Family-friendly cottage with direct lake access</p>
<div class="accommodation-price">From <span data-price="lakeside_cottage">$580</span>/night <span style="font-size: 0.8em; color: #666;">(GST incl.)</span></div>
</div>
</div>
<div class="booking-date-row">
<div class="booking-form-group">
<label class="booking-form-label" for="bookingCheckin">Check-in</label>
<input class="booking-form-input" id="bookingCheckin" onfocus="scrollToBookingButton()" required="" type="date"/>
</div>
<div class="booking-form-group">
<label class="booking-form-label" for="bookingCheckout">Check-out</label>
<input class="booking-form-input" id="bookingCheckout" onfocus="scrollToBookingButton()" required="" type="date"/>
</div>
</div>
<!-- Cottage Minimum Stay Warning -->
<div id="cottageMinimumStayWarning" style="display: none; background: #fef3c7; border: 1px solid #f59e0b; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
<div style="display: flex; align-items: center; gap: 0.5rem;">
<span style="color: #f59e0b; font-size: 1.2rem;">⚠️</span>
<div>
<strong style="color: #92400e;">Lakeside Cottage - Peak Season Notice</strong>
<p style="margin: 0.5rem 0 0 0; color: #92400e; font-size: 0.9rem;">Minimum 2-night stay required during peak season (October to May)</p>
</div>
</div>
</div>
<div class="booking-guests-row">
<div class="booking-form-group">
<label class="booking-form-label" for="bookingAdults">Adults</label>
<select class="booking-form-select" id="bookingAdults" required="">
<option value="1">1 Adult</option>
<option selected="" value="2">2 Adults</option>
<option value="3">3 Adults</option>
<option value="4">4 Adults</option>
<option value="5">5 Adults</option>
<option value="6">6 Adults</option>
</select>
</div>
<div class="booking-form-group">
<label class="booking-form-label" for="bookingChildren">Children</label>
<select class="booking-form-select" id="bookingChildren">
<option selected="" value="0">0 Children</option>
<option value="1">1 Child</option>
<option value="2">2 Children</option>
<option value="3">3 Children</option>
<option value="4">4 Children</option>
</select>
</div>
<div class="booking-form-group" id="petSelectionGroup" style="display: none;">
<label class="booking-form-label" for="bookingPets">Pets</label>
<select class="booking-form-select" id="bookingPets">
<option selected="" value="0">No Pets</option>
<option value="1">1 Pet ($25 per night)</option>
<option value="2">2 Pets ($50 per night)</option>
</select>
</div>
</div>
<!-- Price Preview (shown before booking) -->
<div id="pricePreviewSection" style="display: none; background: linear-gradient(135deg, rgba(45, 90, 90, 0.05) 0%, rgba(45, 90, 90, 0.1) 100%); padding: 1rem; border-radius: 10px; margin: 1rem 0; border: 1px solid rgba(45, 90, 90, 0.2);">
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
<span style="font-weight: 600; color: var(--brand-teal);">Estimated Total</span>
<span id="pricePreviewTotal" style="font-size: 1.25rem; font-weight: 700; color: var(--brand-teal);">$0 NZD</span>
</div>
<div id="pricePreviewDetails" style="font-size: 0.85rem; color: #666;">
Select accommodation and dates to see pricing
</div>
<div style="font-size: 0.75rem; color: #888; margin-top: 0.5rem;">
* Final price confirmed after availability check
</div>
</div>
<div style="display: flex; gap: 1rem; margin-top: 1rem;">
<button class="btn btn-primary" onclick="instantBookingWithPayment()" style="width: 100%;">
                            Check Availability &amp; Book Instantly
                        </button>
</div>
</div>
<!-- Step 2: Combined Availability, Pricing & Guest Details -->
<div class="booking-step" id="bookingStep2">
<h3 style="color: var(--brand-teal); margin-bottom: 1.5rem;">Availability &amp; Guest Information</h3>
<div id="selectedDetailsDisplay" style="background: rgba(45, 90, 90, 0.05); padding: 1rem; border-radius: 10px; margin-bottom: 1.5rem;">
<!-- Selected accommodation and dates will be displayed here -->
</div>
<div class="availability-result" id="availabilityResult">
<!-- Availability status will be shown here -->
</div>
<div class="price-breakdown" id="pricingBreakdown" style="display: none;">
<h4 style="color: var(--brand-teal); margin-bottom: 1rem;">Price Breakdown (NZD)</h4>
<div class="price-row">
<span>Accommodation Rate:</span>
<span id="accommodationRate">$0</span>
</div>
<div class="price-row">
<span>Number of Nights:</span>
<span id="numberOfNights">0</span>
</div>
<div class="price-row">
<span>Subtotal:</span>
<span id="subtotal">$0</span>
</div>
<div class="price-row" id="extraGuestRow" style="display: none;">
<span>Extra Guest Charge:</span>
<span id="extraGuestCharge">$0</span>
</div>
<div class="price-row" id="petFeeRow" style="display: none;">
<span>Pet Cleaning Fee:</span>
<span id="petFee">$0</span>
</div>
<div class="price-row">
<span>Cleaning Fee:</span>
<span id="cleaningFee">$75</span>
</div>
<div class="price-row">
<span>Service Fee:</span>
<span id="serviceFee">$0</span>
</div>
<div class="price-row price-total">
<span>Total Amount (GST Incl.):</span>
<span id="totalAmount">$0</span>
</div>
<div class="price-row" style="font-size: 0.85em; color: #666;">
<span>GST Included (15%):</span>
<span id="gst">$0</span>
</div>
</div>
<div id="guestDetailsSection" style="display: none;">
<h4 style="color: var(--brand-teal); margin: 2rem 0 1rem;">Guest Information</h4>
<div class="guest-details-form">
<div class="guest-form-row">
<div class="booking-form-group">
<label class="booking-form-label" for="guestFirstName">First Name</label>
<input class="booking-form-input" id="guestFirstName" oninput="clearFormError('guestFirstName')" required="" type="text"/>
<div class="form-error-message" id="guestFirstNameError">First name is required</div>
</div>
<div class="booking-form-group">
<label class="booking-form-label" for="guestLastName">Last Name</label>
<input class="booking-form-input" id="guestLastName" oninput="clearFormError('guestLastName')" required="" type="text"/>
<div class="form-error-message" id="guestLastNameError">Last name is required</div>
</div>
</div>
<div class="booking-form-group">
<label class="booking-form-label" for="guestEmail">Email Address</label>
<input class="booking-form-input" id="guestEmail" onblur="validateEmail(this)" oninput="clearFormError('guestEmail')" required="" type="email"/>
<div class="form-error-message" id="guestEmailError">Email address is required</div>
</div>
<div class="booking-form-group">
<label class="booking-form-label" for="guestPhone">Phone Number</label>
<input class="booking-form-input" id="guestPhone" onblur="validatePhoneField(this)" oninput="clearFormError('guestPhone')" placeholder="e.g., (03) 123-4567 or +64 21 123 456" required="" type="tel"/>
<div class="form-error-message" id="guestPhoneError">Phone number is required</div>
</div>
<div class="booking-form-group">
<label class="booking-form-label" for="specialRequests">Special Requests (Optional)</label>
<input class="booking-form-input" id="specialRequests" placeholder="Early check-in, dietary requirements, etc." type="text"/>
</div>
<!-- Pet Option for Lakeside Cottage -->
<div id="petOptionSection" style="display: none; background: #dcfdf7; border: 1px solid #10b981; padding: 1rem; border-radius: 10px; margin-top: 1rem;">
<div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
<span style="font-size: 1.2rem;">🐾</span>
<h5 style="margin: 0; color: #047857; font-size: 1rem;">Pet-Friendly Option</h5>
</div>
<p style="margin: 0 0 1rem 0; color: #047857; font-size: 0.9rem;">Lakeside Cottage welcomes well-behaved pets with prior approval.</p>
<div class="booking-form-group">
<label class="booking-form-label" for="petDetails">Pet Details (Optional)</label>
<input class="booking-form-input" id="petDetails" placeholder="Breed, size, special requirements" type="text"/>
</div>
<div style="background: #f0fdf4; padding: 0.75rem; border-radius: 8px; margin-top: 0.5rem; font-size: 0.85rem; color: #166534;">
<p style="margin: 0;"><strong>Pet Policy:</strong> Maximum 2 pets. $25 cleaning fee per pet. Pets must be supervised and not left alone in the cottage.</p>
</div>
</div>
</div>
</div>
<!-- Secure Payment Section -->
<div id="instantPaymentSection" style="display: none; margin-top: 2rem;">
<h4 style="color: var(--brand-teal); margin-bottom: 1rem;">Secure Payment with Stripe</h4>
<div id="securePaymentContainer">
<!-- Secure payment form will be loaded here -->
</div>
<div style="background: #f8f9fa; padding: 1rem; border-radius: 10px; margin: 1rem 0; font-size: 0.9rem; color: #666;">
<p style="margin: 0;"><strong>🔒 Secure Payment:</strong> Your payment is processed securely through Stripe. We never store your card details.</p>
<p style="margin: 0.5rem 0 0;"><strong>💳 Accepted Cards:</strong> Visa, Mastercard, American Express</p>
<p style="margin: 0.5rem 0 0;"><strong>🔐 SSL Encrypted:</strong> All data is encrypted in transit</p>
</div>
</div>
<div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
<button class="btn btn-outline" onclick="goToBookingStep(1)" style="flex: 1;">
                            Back to Dates
                        </button>
<button class="btn btn-primary" onclick="validateGuestDetailsAndContinue()" style="flex: 1;">
                            Continue to Payment
                        </button>
</div>
</div>
<!-- Step 3: Payment & Confirmation (Combined) -->
<div class="booking-step" id="bookingStep3">
<h3 style="color: var(--brand-teal); margin-bottom: 1.5rem;">Complete Your Booking</h3>
<div class="price-breakdown">
<h4 style="color: var(--brand-teal); margin-bottom: 1rem;">Booking Summary</h4>
<div class="price-row">
<span>Accommodation:</span>
<span id="finalAccommodationName">-</span>
</div>
<div class="price-row">
<span>Dates:</span>
<span id="finalDates">-</span>
</div>
<div class="price-row">
<span>Guests:</span>
<span id="finalGuests">-</span>
</div>
<div class="price-row">
<span>Duration:</span>
<span id="finalNights">-</span>
</div>
</div>
<div class="price-breakdown">
<h4 style="color: var(--brand-teal); margin-bottom: 1rem;">Price Breakdown (NZD)</h4>
<div class="price-row">
<span>Accommodation Rate:</span>
<span id="finalAccommodationRate">$0</span>
</div>
<div class="price-row">
<span>Number of Nights:</span>
<span id="finalNumberOfNights">0</span>
</div>
<div class="price-row">
<span>Subtotal:</span>
<span id="finalSubtotal">$0</span>
</div>
<div class="price-row">
<span>Cleaning Fee:</span>
<span id="finalCleaningFee">$75</span>
</div>
<div class="price-row">
<span>Service Fee:</span>
<span id="finalServiceFee">$0</span>
</div>
<div class="price-row" id="finalExtraGuestRow" style="display: none;">
<span>Extra Guest Charge:</span>
<span id="finalExtraGuestFee">$0</span>
</div>
<div class="price-row" id="finalPetFeeRow" style="display: none;">
<span>Pet Fee:</span>
<span id="finalPetFee">$0</span>
</div>
<div class="price-row price-total">
<span>Total Amount (GST Incl.):</span>
<span id="finalTotalAmount">$0</span>
</div>
<div class="price-row" style="font-size: 0.85em; color: #666;">
<span>GST Included (15%):</span>
<span id="finalGST">$0</span>
</div>
</div>
<div style="background: #fee2e2; border: 1px solid #f87171; padding: 1rem; border-radius: 10px; margin: 1.5rem 0;">
<p style="margin: 0; color: #dc2626; font-size: 0.9rem;"><strong>Payment Integration:</strong> This demo shows the booking flow. In production, this would integrate with Stripe/PayPal for secure payment processing.</p>
</div>
<div id="bookingResultSection">
<!-- This will show either booking success or form for additional info -->
</div>
<div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
<button class="btn btn-outline" onclick="goToBookingStep(2)" style="flex: 1;">
                            Back to Details
                        </button>
<button class="btn btn-primary" onclick="processBookingAndConfirm()" style="flex: 1;">
                            Confirm &amp; Pay
                        </button>
</div>
</div>
<div class="booking-security-badges">
<span>🔒 Secure SSL Encryption</span>
<span>✓ Instant Confirmation</span>
<span>📞 24/7 Support</span>
<span>💯 100% Uplisting Integration</span>
</div>
</div>
</div>
</div>
<!-- Main Content -->
<main id="mainContent">
<!-- Breadcrumbs -->
<div class="breadcrumbs">
<div class="container">
<span class="breadcrumb-item">Home</span>
<span class="breadcrumb-item active" id="currentPage">Lakeside Retreat</span>
</div>
</div>
<!-- Home Page -->
<div class="page active" id="homePage">
<!-- Streamlined Hero Section -->
<section class="hero" style="background-image: linear-gradient(rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.1)), url('https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/vineyard.jpeg'); background-size: cover; background-position: center; background-repeat: no-repeat; min-height: 75vh;">
<div class="container">
<div class="hero-content">
<h1>Lake Dunstan Meets Wine Country Magic</h1>
<p style="font-size: 1.4rem; margin: 1.5rem 0; color: #2d3748; max-width: 600px; text-align: center;">New Zealand's first energy-positive accommodation experience in the heart of Central Otago's wine country</p>
<div style="margin-top: 2rem; padding: 1rem 2rem; background: rgba(255,255,255,0.9); border-radius: 50px; display: inline-block; backdrop-filter: blur(10px);">
<div style="display: flex; align-items: center; gap: 1.5rem; color: var(--brand-teal); font-weight: 600;">
<div style="display: flex; align-items: center; gap: 0.5rem;">
<span style="color: #fbbf24; font-size: 1.2rem;">★★★★★</span>
<span>4.9/5</span>
</div>
<div style="height: 20px; width: 1px; background: var(--brand-teal); opacity: 0.3;"></div>
<span>127 Five-Star Reviews</span>
<div style="height: 20px; width: 1px; background: var(--brand-teal); opacity: 0.3;"></div>
<span>45% Return Guests</span>
</div>
</div>
</div>
</div>
</section>
<!-- Simple Introduction -->
<section class="section" style="padding: 3rem 0;">
<div class="container">
<div style="text-align: center; max-width: 800px; margin: 0 auto;">
<h2 style="font-family: 'Playfair Display', serif; font-size: 2.5rem; margin-bottom: 1.5rem; color: var(--brand-teal);">Luxury Domes &amp; Cottage on Lake Dunstan</h2>
<div style="font-size: 1.1rem; margin-bottom: 2rem; line-height: 1.6; text-align: left; max-width: 600px; margin-left: auto; margin-right: auto;">
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
<div>
<div style="font-weight: 600; color: var(--brand-teal); margin-bottom: 0.5rem;">📍 Perfect Location</div>
<div style="font-size: 0.95rem; color: var(--text);">• 55min to Queenstown<br/>• 30min to Wanaka<br/>• 300m to Cycle Trail</div>
</div>
<div>
<div style="font-weight: 600; color: var(--brand-teal); margin-bottom: 0.5rem;">🔋 Energy Positive</div>
<div style="font-size: 0.95rem; color: var(--text);">• 16.72kW Solar System<br/>• Battery Backup<br/>• Zero Grid Dependence</div>
</div>
</div>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
<div>
<div style="font-weight: 600; color: var(--brand-teal); margin-bottom: 0.5rem;">🏠 Luxury Features</div>
<div style="font-size: 0.95rem; color: var(--text);">• Private Spas<br/>• Stargazing Skylights<br/>• Lake Views</div>
</div>
<div>
<div style="font-weight: 600; color: var(--brand-teal); margin-bottom: 0.5rem;">💚 Eco-Luxury</div>
<div style="font-size: 0.95rem; color: var(--text);">• Zero Environmental Impact<br/>• Premium Comfort<br/>• Sustainable Tourism</div>
</div>
</div>
</div>
<div style="display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap;">
<a class="btn btn-primary" href="#" onclick="openBookingModal()" style="padding: 1rem 2rem; font-size: 1.1rem;">Check Availability &amp; Prices</a>
<a class="btn btn-outline" href="#" onclick="showPage('gallery'); return false;">View Gallery</a>
</div>
</div>
</div>
</section>
<!-- Simple Trust Badges -->
<section class="section" style="background: rgba(45, 90, 90, 0.05); padding: 2rem 0;">
<div class="container">
<div style="background: #F5E6D3; border-radius: 20px; padding: 2rem; box-shadow: var(--shadow); text-align: center;">
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 2rem;">
<div>
<div style="font-size: 2.5rem; font-weight: 700; color: var(--brand-teal);">4.9</div>
<div style="color: #fbbf24;">★★★★★</div>
<div style="font-size: 0.9rem; opacity: 0.8;">127 Reviews</div>
</div>
<div>
<div style="font-size: 2.5rem; font-weight: 700; color: var(--brand-teal);">98%</div>
<div style="font-size: 0.9rem; opacity: 0.8;">Would Recommend</div>
</div>
<div>
<div style="font-size: 2.5rem; font-weight: 700; color: var(--brand-teal);">45%</div>
<div style="font-size: 0.9rem; opacity: 0.8;">Return Guests</div>
</div>
<div>
<div style="font-size: 2.5rem; font-weight: 700; color: var(--brand-teal);">100%</div>
<div style="font-size: 0.9rem; opacity: 0.8;">Grid-Tied Solar</div>
</div>
</div>
<div style="display: flex; justify-content: center; gap: 2rem; flex-wrap: wrap; padding-top: 1.5rem; border-top: 1px solid var(--border); margin-top: 1.5rem;">
<span style="background: #ff5a5f; color: white; padding: 0.4rem 0.8rem; border-radius: 6px; font-size: 0.8rem; font-weight: 600;">Airbnb Superhost</span>
<span style="background: #003580; color: white; padding: 0.4rem 0.8rem; border-radius: 6px; font-size: 0.8rem; font-weight: 600;">Booking.com 9.8/10</span>
<span style="background: #10b981; color: white; padding: 0.4rem 0.8rem; border-radius: 6px; font-size: 0.8rem; font-weight: 600;">300m to Cycle Trail</span>
</div>
</div>
</div>
</section>
<!-- Accommodations Section -->
<section class="section">
<div class="container">
<div class="section-header">
<h2 class="section-title">Three Unique Experiences</h2>
<p class="section-subtitle">Luxury domes for couples, family cottage with lake access. All sustainably powered with zero environmental impact.</p>
</div>
<!-- Clean accommodation cards with key highlights only -->
<div class="grid grid-3">
<div class="card">
<img alt="Dome Pinot luxury glamping accommodation with Lake Dunstan views Central Otago" class="card-image" loading="lazy" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/pinotinternal.jpeg"/>
<div class="card-content">
<h3 class="card-title">Dome Pinot</h3>
<p class="card-text">50sqm luxury dome with panoramic Lake Dunstan views, private spa, and stargazing skylight.</p>
<div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 1rem 0; font-size: 0.85rem; color: var(--brand-teal);">
<span>• Lake Views</span>
<span>• Private Spa</span>
<span>• Breakfast Included</span>
<span>• Reliable Power</span>
</div>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
<span style="font-weight: 600; color: var(--dark); font-size: 1.1rem;">From <span data-price="dome_pinot">$450</span>/night <span style="font-size: 0.75rem; color: #666;">(GST incl.)</span></span>
<div style="display: flex; gap: 0.5rem;">
<a class="btn btn-outline" href="#" onclick="showPage('stay'); return false;">View Details</a>
<a class="btn btn-primary" href="#" onclick="openBookingModal('dome-pinot')">Book Now</a>
</div>
</div>
</div>
</div>
<div class="card">
<img alt="Dome Rosé romantic glamping accommodation Central Otago wine country" class="card-image" loading="lazy" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/dome-rose-spa1.jpeg"/>
<div class="card-content">
<h3 class="card-title">Dome Rosé</h3>
<p class="card-text">40sqm romantic retreat with vineyard views, private spa, and complete cooking facilities.</p>
<div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 1rem 0; font-size: 0.85rem; color: #be185d;">
<span>• Vineyard Views</span>
<span>• Private Spa</span>
<span>• Breakfast Included</span>
<span>• Always Powered</span>
</div>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
<span style="font-weight: 600; color: var(--dark); font-size: 1.1rem;">From <span data-price="dome_rose">$380</span>/night <span style="font-size: 0.75rem; color: #666;">(GST incl.)</span></span>
<div style="display: flex; gap: 0.5rem;">
<a class="btn btn-outline" href="#" onclick="showPage('stay'); return false;">View Details</a>
<a class="btn btn-primary" href="#" onclick="openBookingModal('dome-rose')">Book Now</a>
</div>
</div>
</div>
</div>
<div class="card">
<img alt="Lakeside Cottage family accommodation Lake Dunstan Central Otago" class="card-image" loading="lazy" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/lakeside-cottage-exterior.jpeg"/>
<div class="card-content">
<h3 class="card-title">Lakeside Cottage</h3>
<p class="card-text">Family cottage with direct lake access, wood-fired spa, and complete cooking facilities.</p>
<div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 1rem 0; font-size: 0.85rem; color: var(--brand-teal);">
<span>• Lake Access</span>
<span>• Wood-Fired Spa</span>
<span>• Family Friendly</span>
<span>• Reliable Power</span>
</div>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
<span style="font-weight: 600; color: var(--dark); font-size: 1.1rem;">From <span data-price="lakeside_cottage">$580</span>/night <span style="font-size: 0.75rem; color: #666;">(GST incl.)</span></span>
<div style="display: flex; gap: 0.5rem;">
<a class="btn btn-outline" href="#" onclick="showPage('stay'); return false;">View Details</a>
<a class="btn btn-primary" href="#" onclick="openBookingModal('lakeside-cottage')">Book Now</a>
</div>
</div>
</div>
</div>
</div>
<div style="text-align: center; margin-top: 3rem;">
<a class="btn btn-outline" href="#" onclick="showPage('stay'); return false;">View Full Details &amp; Energy Systems</a>
</div>
</div>
</section>
<!-- Featured Guest Testimonials -->
<section class="section" style="padding: 3rem 0;">
<div class="container">
<div style="text-align: center; margin-bottom: 2rem;">
<h2 style="font-family: 'Playfair Display', serif; font-size: 2.5rem; color: var(--brand-teal);">What Our Guests Say</h2>
<p style="font-size: 1.1rem; color: #4a5568; margin-top: 0.5rem;">Real experiences from our wonderful guests</p>
</div>
<div class="grid grid-3">
<div class="card" style="border-left: 4px solid var(--brand-teal);">
<div class="card-content">
<div style="color: #fbbf24; margin-bottom: 1rem;">★★★★★</div>
<p style="font-style: italic; margin-bottom: 1rem;">"The solar system tour was fascinating! Stephen's expertise really shows. Beautiful location, immaculate accommodation, and the energy monitoring display is genuinely impressive."</p>
<div style="font-weight: 600;">Sarah &amp; Tom</div>
<div style="font-size: 0.9rem; color: #6b7280;">Wellington • November 2024</div>
</div>
</div>
<div class="card" style="border-left: 4px solid var(--brand-teal);">
<div class="card-content">
<div style="color: #fbbf24; margin-bottom: 1rem;">★★★★★</div>
<p style="font-style: italic; margin-bottom: 1rem;">"Perfect base for exploring Central Otago! The domes are magical at night with the skylight for stargazing. Loved the hot tub after cycling the trail."</p>
<div style="font-weight: 600;">Michael R.</div>
<div style="font-size: 0.9rem; color: #6b7280;">Auckland • October 2024</div>
</div>
</div>
<div class="card" style="border-left: 4px solid var(--brand-teal);">
<div class="card-content">
<div style="color: #fbbf24; margin-bottom: 1rem;">★★★★★</div>
<p style="font-style: italic; margin-bottom: 1rem;">"Sandy's local recommendations were spot on! The commercial-grade solar backup meant we had power during a grid outage - impressive!"</p>
<div style="font-weight: 600;">Emma &amp; James</div>
<div style="font-size: 0.9rem; color: #6b7280;">Sydney • September 2024</div>
</div>
</div>
</div>
<div style="text-align: center; margin-top: 2rem;">
<a class="btn btn-outline" href="#" onclick="showPage('reviews'); return false;">Read All 127 Reviews</a>
</div>
</div>
</section>
<!-- Simple Story Teaser -->
<section class="section" style="background: rgba(45, 212, 191, 0.05); padding: 3rem 0;">
<div class="container">
<div class="grid grid-2" style="align-items: center;">
<div>
<h2 style="font-family: 'Playfair Display', serif; font-size: 2rem; margin-bottom: 1rem; color: var(--brand-teal);">Stephen &amp; Sandy's Story</h2>
<p style="font-size: 1.1rem; line-height: 1.6; margin-bottom: 2rem;">From Wellington I.T. professionals to Central Otago hosts. A wrong turn in 2019 led us to this magical lakefront vineyard—and we never looked back.</p>
<a class="btn btn-primary" href="#" onclick="showPage('story'); return false;">Read Our Full Journey</a>
</div>
<div>
<div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: var(--shadow); text-align: center;">
<div style="width: 80px; height: 80px; border-radius: 50%; background: var(--primary); margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center; color: white; font-size: 2rem;">
<i class="fas fa-heart"></i>
</div>
<h3 style="color: var(--brand-teal); margin-bottom: 1rem;">Your Hosts</h3>
<p style="margin: 0; line-height: 1.6;">Five years of sharing our slice of Central Otago paradise with guests from around the world.</p>
</div>
</div>
</div>
</div>
</section>
<!-- Local Area SEO Section -->
<section class="section" style="background: rgba(251, 113, 133, 0.05); padding: 3rem 0;">
<div class="container">
<div class="section-header">
<h2 class="section-title">Central Otago's Premier Location</h2>
<p class="section-subtitle">Perfectly positioned in New Zealand's world-famous wine region</p>
</div>
<div class="grid grid-2">
<div class="card">
<div class="card-content">
<h3 class="card-title">🍷 Cromwell Wine Country</h3>
<div class="card-text" style="line-height: 1.6;">
<div style="font-weight: 600; margin-bottom: 0.5rem;">🏆 World-Class Wine Region</div>
<div style="margin-bottom: 1rem;">
                                        • <strong>12km to Cromwell</strong> town centre<br/>
                                        • <strong>Walking distance</strong> to award-winning wineries<br/>
                                        • <strong>Premium Pinot Noir</strong> cellar doors nearby
                                    </div>
</div>
<div style="margin-top: 1rem;">
<a href="#" onclick="showPage('explore'); return false;" style="color: var(--brand-teal); text-decoration: none; font-weight: 500;">Explore Wine Country Activities →</a>
</div>
</div>
</div>
<div class="card">
<div class="card-content">
<h3 class="card-title">🚴 Lake Dunstan Cycle Trail</h3>
<div class="card-text" style="line-height: 1.6;">
<div style="font-weight: 600; margin-bottom: 0.5rem;">🚴 Direct Trail Access</div>
<div style="margin-bottom: 1rem;">
                                        • <strong>300m to famous cycle trail</strong><br/>
                                        • <strong>Cromwell to Clyde route</strong> - scenic lakshore<br/>
                                        • <strong>All skill levels</strong> welcome
                                    </div>
</div>
<div style="margin-top: 1rem;">
<a href="#" onclick="showPage('explore'); return false;" style="color: var(--brand-teal); text-decoration: none; font-weight: 500;">View Cycling Information →</a>
</div>
</div>
</div>
<div class="card">
<div class="card-content">
<h3 class="card-title">🏔️ Alpine Adventure Access</h3>
<p class="card-text">Perfect <strong>Cromwell accommodation</strong> base for exploring <strong>Central Otago</strong>. Queenstown adventures (55 min), Wanaka activities (30 min), and five ski fields within driving distance. Experience the best of the South Island from our <strong>Lake Dunstan</strong> location.</p>
<div style="margin-top: 1rem;">
<a href="#" onclick="showPage('explore'); return false;" style="color: var(--brand-teal); text-decoration: none; font-weight: 500;">Plan Your Adventures →</a>
</div>
</div>
</div>
<div class="card">
<div class="card-content">
<h3 class="card-title">🌅 Lake Dunstan Views</h3>
<p class="card-text">Wake to panoramic <strong>Lake Dunstan views</strong> from every accommodation. Our <strong>sustainable accommodation Central Otago</strong> offers uninterrupted lake and mountain vistas, with direct water access from the cottage and lake views from all luxury domes.</p>
<div style="margin-top: 1rem;">
<a href="#" onclick="showPage('gallery'); return false;" style="color: var(--brand-teal); text-decoration: none; font-weight: 500;">View Gallery →</a>
</div>
</div>
</div>
</div>
</div>
</section>
<!-- Simplified Reviews Preview -->
<!-- Queenstown Wanaka Section -->
<section class="section" style="background: rgba(59, 130, 246, 0.05); padding: 3rem 0;">
<div class="container">
<div class="section-header">
<h2 class="section-title">Smart Base for Queenstown &amp; Wanaka</h2>
<p class="section-subtitle">Adventure by day, peaceful luxury by night</p>
</div>
<div class="grid grid-2">
<div class="card">
<div class="card-content">
<h3 class="card-title">🏔️ Queenstown Adventures (55 min)</h3>
<p class="card-text">Experience bungy jumping, skydiving, and jet boats, then return to peaceful luxury. Save 40-60% vs expensive Queenstown hotels while enjoying our unique solar-powered experience.</p>
</div>
</div>
<div class="card">
<div class="card-content">
<h3 class="card-title">🌊 Wanaka Gateway (30 min)</h3>
<p class="card-text">Perfect for Roy's Peak hiking and That Wanaka Tree photos. Enjoy Wanaka's beauty without the accommodation booking rush - guaranteed availability in our energy-positive sanctuary.</p>
</div>
</div>
</div>
</div>
</section>
<section class="section" style="background: rgba(251, 113, 133, 0.05);">
<div class="container">
<div class="section-header">
<h2 class="section-title">What Our Guests Say</h2>
<p class="section-subtitle">127 five-star reviews • 45% return guests • 98% would recommend</p>
<!-- Quick Stats Bar -->
<div style="display: flex; justify-content: center; gap: 2rem; margin: 1.5rem 0; padding: 1rem; background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); flex-wrap: wrap;">
<div style="text-align: center; min-width: 120px;">
<div style="font-size: 1.5rem; font-weight: 700; color: var(--brand-teal);">4.9/5</div>
<div style="font-size: 0.8rem; opacity: 0.7;">Average Rating</div>
</div>
<div style="text-align: center; min-width: 120px;">
<div style="font-size: 1.5rem; font-weight: 700; color: var(--brand-teal);">45%</div>
<div style="font-size: 0.8rem; opacity: 0.7;">Return Guests</div>
</div>
<div style="text-align: center; min-width: 120px;">
<div style="font-size: 1.5rem; font-weight: 700; color: var(--brand-teal);">5</div>
<div style="font-size: 0.8rem; opacity: 0.7;">Years Hosting</div>
</div>
<div style="text-align: center; min-width: 120px;">
<div style="font-size: 1.5rem; font-weight: 700; color: var(--brand-teal);">20+</div>
<div style="font-size: 0.8rem; opacity: 0.7;">Countries</div>
</div>
</div>
</div>
<div class="grid grid-2">
<div class="card">
<div class="card-content">
<div style="color: #fbbf24; margin-bottom: 1rem;">★★★★★</div>
<h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">🔋 "Commercial-Grade Impressive"</h4>
<p class="card-text">"Stephen and Sandy have created something truly special here. The dome was immaculate, their 16kW commercial-grade solar system is incredibly impressive, and waking up to Lake Dunstan views was magical. We'll definitely be back!"</p>
<div style="background: rgba(45, 90, 90, 0.05); padding: 0.5rem; border-radius: 5px; margin-top: 0.5rem; font-size: 0.8rem; font-style: italic;">Mentioned: Energy system, Lake views, Return visit planned</div>
<div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
<div style="width: 40px; height: 40px; border-radius: 50%; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">M</div>
<div>
<div style="font-weight: 600;">Michael R.</div>
<div style="font-size: 0.9rem; opacity: 0.7;">Auckland, New Zealand • March 2024</div>
</div>
</div>
</div>
</div>
<div class="card">
<div class="card-content">
<div style="color: #fbbf24; margin-bottom: 1rem;">★★★★★</div>
<h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">🌿 "Sustainable Luxury Excellence"</h4>
<p class="card-text">"Perfect family holiday! Kids loved the lake access and we appreciated the advanced renewable energy approach. The hybrid system with real-time monitoring is incredibly sophisticated—luxury with zero environmental guilt."</p>
<div style="background: rgba(45, 90, 90, 0.05); padding: 0.5rem; border-radius: 5px; margin-top: 0.5rem; font-size: 0.8rem; font-style: italic;">Mentioned: Family-friendly, Lake access, Environmental consciousness</div>
<div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
<div style="width: 40px; height: 40px; border-radius: 50%; background: var(--secondary); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">K</div>
<div>
<div style="font-weight: 600;">Kelly T.</div>
<div style="font-size: 0.9rem; opacity: 0.7;">Melbourne, Australia • February 2024</div>
</div>
</div>
</div>
</div>
</div>
<div style="text-align: center; margin-top: 2rem;">
<a class="btn btn-outline" href="#" onclick="showPage('reviews'); return false;">Read All 127 Reviews</a>
</div>
</div>
</section>
</div>
<!-- Stay Page -->
<div class="page" id="stayPage">
<section class="hero">
<div class="container">
<div class="hero-content">
<h1>Three Unique Luxury Experiences in Nature's Embrace</h1>
<div class="tagline">Dome Pinot • Dome Rosé • Lakeside Cottage</div>
<p>Each accommodation is powered by our sophisticated 16.72kW solar array with 16kWh Signergy battery storage. Couples escape to stargazing domes with private spas. Families create memories in our lakefront cottage with direct water access. All powered by energy-positive operations, all designed for five-star comfort, all positioned for Central Otago's most breathtaking views.</p>
<!-- EVERY STAY INCLUDES SECTION - ENHANCED -->
<div style="background: linear-gradient(135deg, #2d5a5a 0%, #1a3a3a 100%); padding: 3rem; border-radius: 20px; margin: 3rem 0; max-width: 900px; margin-left: auto; margin-right: auto; box-shadow: 0 20px 40px rgba(0,0,0,0.3); position: relative; overflow: hidden; border: 2px solid #4a7c7c;">
<!-- Decorative circles -->
<div style="position: absolute; top: -50px; right: -50px; width: 150px; height: 150px; background: rgba(255, 255, 255, 0.1); border-radius: 50%;"></div>
<div style="position: absolute; bottom: -30px; left: -30px; width: 100px; height: 100px; background: rgba(255, 255, 255, 0.1); border-radius: 50%;"></div>
<!-- Header -->
<div style="text-align: center; margin-bottom: 2.5rem;">
<div style="font-size: 3rem; margin-bottom: 1rem;">🌟</div>
<h3 style="color: white; font-size: 2.2rem; margin-bottom: 0.5rem; font-family: 'Playfair Display', serif; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">Every Stay Includes</h3>
<p style="color: rgba(255, 255, 255, 0.95); font-size: 1.2rem; font-weight: 300;">Premium amenities and experiences included with every booking</p>
</div>
<!-- Features Grid -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; text-align: left;">
<div style="background: rgba(255, 255, 255, 0.15); padding: 1.5rem; border-radius: 15px; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 8px 16px rgba(0,0,0,0.1);">
<div style="display: flex; align-items: center; gap: 1rem;">
<div style="width: 35px; height: 35px; background: rgba(255, 255, 255, 0.25); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 1.1rem;">✓</div>
<span style="color: white; font-weight: 600; font-size: 1.1rem;">Commercial-grade renewable energy</span>
</div>
</div>
<div style="background: rgba(255, 255, 255, 0.15); padding: 1.5rem; border-radius: 15px; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 8px 16px rgba(0,0,0,0.1);">
<div style="display: flex; align-items: center; gap: 1rem;">
<div style="width: 35px; height: 35px; background: rgba(255, 255, 255, 0.25); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 1.1rem;">✓</div>
<span style="color: white; font-weight: 600; font-size: 1.1rem;">Private spa access (domes include breakfast)</span>
</div>
</div>
<div style="background: rgba(255, 255, 255, 0.15); padding: 1.5rem; border-radius: 15px; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 8px 16px rgba(0,0,0,0.1);">
<div style="display: flex; align-items: center; gap: 1rem;">
<div style="width: 35px; height: 35px; background: rgba(255, 255, 255, 0.25); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 1.1rem;">✓</div>
<span style="color: white; font-weight: 600; font-size: 1.1rem;">300m to cycle trail access</span>
</div>
</div>
<div style="background: rgba(255, 255, 255, 0.15); padding: 1.5rem; border-radius: 15px; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 8px 16px rgba(0,0,0,0.1);">
<div style="display: flex; align-items: center; gap: 1rem;">
<div style="width: 35px; height: 35px; background: rgba(255, 255, 255, 0.25); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 1.1rem;">✓</div>
<span style="color: white; font-weight: 600; font-size: 1.1rem;">Real-time energy monitoring tour</span>
</div>
</div>
<div style="background: rgba(255, 255, 255, 0.15); padding: 1.5rem; border-radius: 15px; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 8px 16px rgba(0,0,0,0.1);">
<div style="display: flex; align-items: center; gap: 1rem;">
<div style="width: 35px; height: 35px; background: rgba(255, 255, 255, 0.25); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 1.1rem;">✓</div>
<span style="color: white; font-weight: 600; font-size: 1.1rem;">Onsite vineyard setting</span>
</div>
</div>
<div style="background: rgba(255, 255, 255, 0.15); padding: 1.5rem; border-radius: 15px; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); box-shadow: 0 8px 16px rgba(0,0,0,0.1);">
<div style="display: flex; align-items: center; gap: 1rem;">
<div style="width: 35px; height: 35px; background: rgba(255, 255, 255, 0.25); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 1.1rem;">✓</div>
<span style="color: white; font-weight: 600; font-size: 1.1rem;">Stephen &amp; Sandy's expert service</span>
</div>
</div>
</div>
<!-- Footer -->
<div style="text-align: center; margin-top: 2.5rem; padding-top: 2rem; border-top: 2px solid rgba(255, 255, 255, 0.3);">
<p style="color: rgba(255, 255, 255, 0.95); font-size: 1rem; margin: 0; font-weight: 500;">All amenities included • No hidden fees • Premium experience guaranteed</p>
</div>
</div>
</div>
</div>
</section>
<section class="section">
<div class="container">
<div class="section-header">
<h2 class="section-title">Detailed Accommodations</h2>
<p class="section-subtitle">All accommodations feature our 16.72kW solar array with 20kW hybrid inverter and smart energy management. Dome bookings include continental breakfast and private spa access. Cottage guests enjoy full cooking facilities and direct lake access. Stephen &amp; Sandy provide technical energy system tours upon request.</p>
</div>
<!-- ACCOMMODATION COMPARISON TABLE -->
<div style="margin: 3rem 0; overflow-x: auto;">
<div style="background: white; border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.1); padding: 0; overflow: hidden; min-width: 800px;">
<div style="background: linear-gradient(135deg, #2d5a5a 0%, #1a3a3a 100%); color: white; padding: 1.5rem; text-align: center;">
<h3 style="margin: 0; font-size: 1.4rem; font-family: 'Playfair Display', serif;">Quick Comparison</h3>
<p style="margin: 0.5rem 0 0 0; opacity: 0.9;">Choose your perfect luxury experience</p>
</div>
<table style="width: 100%; border-collapse: collapse; font-size: 0.95rem;">
<thead>
<tr style="background: rgba(45, 90, 90, 0.05);">
<th style="padding: 1.2rem; text-align: left; font-weight: 600; color: var(--brand-teal); border-bottom: 2px solid rgba(45, 90, 90, 0.1);"></th>
<th style="padding: 1.2rem; text-align: center; font-weight: 600; color: var(--brand-teal); border-bottom: 2px solid rgba(45, 90, 90, 0.1);">Dome Pinot</th>
<th style="padding: 1.2rem; text-align: center; font-weight: 600; color: #be185d; border-bottom: 2px solid rgba(190, 24, 93, 0.1);">Dome Rosé</th>
<th style="padding: 1.2rem; text-align: center; font-weight: 600; color: var(--brand-teal); border-bottom: 2px solid rgba(45, 90, 90, 0.1);">Lakeside Cottage</th>
</tr>
</thead>
<tbody>
<tr>
<td style="padding: 1rem; font-weight: 600; color: var(--dark); border-bottom: 1px solid #f0f0f0;">Perfect For</td>
<td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f0f0f0;">Couples seeking premium luxury</td>
<td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f0f0f0;">Romantic vineyard getaway</td>
<td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f0f0f0;">Families &amp; pet owners</td>
</tr>
<tr style="background: rgba(0,0,0,0.02);">
<td style="padding: 1rem; font-weight: 600; color: var(--dark); border-bottom: 1px solid #f0f0f0;">Guests</td>
<td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f0f0f0;">Up to 2</td>
<td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f0f0f0;">Adults only (2)</td>
<td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f0f0f0;">Up to 3 + pets</td>
</tr>
<tr>
<td style="padding: 1rem; font-weight: 600; color: var(--dark); border-bottom: 1px solid #f0f0f0;">Size</td>
<td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f0f0f0;">50sqm</td>
<td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f0f0f0;">40sqm</td>
<td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f0f0f0;">Self-contained</td>
</tr>
<tr style="background: rgba(0,0,0,0.02);">
<td style="padding: 1rem; font-weight: 600; color: var(--dark); border-bottom: 1px solid #f0f0f0;">Views</td>
<td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f0f0f0;">🏔️ Lake &amp; Mountains</td>
<td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f0f0f0;">🍷 Vineyard Views</td>
<td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f0f0f0;">🌊 Lake Access</td>
</tr>
<tr>
<td style="padding: 1rem; font-weight: 600; color: var(--dark); border-bottom: 1px solid #f0f0f0;">Spa</td>
<td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f0f0f0;">✅ Private spa</td>
<td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f0f0f0;">✅ Private spa</td>
<td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f0f0f0;">🔥 Wood-fired hot tub</td>
</tr>
<tr style="background: rgba(0,0,0,0.02);">
<td style="padding: 1rem; font-weight: 600; color: var(--dark); border-bottom: 1px solid #f0f0f0;">Cooking Facilities</td>
<td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f0f0f0;">Stovetop &amp; Weber BBQ</td>
<td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f0f0f0;">Stovetop &amp; Weber BBQ</td>
<td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f0f0f0;">Stovetop &amp; Weber BBQ</td>
</tr>
<tr>
<td style="padding: 1rem; font-weight: 600; color: var(--dark); border-bottom: 1px solid #f0f0f0;">Breakfast</td>
<td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f0f0f0;">✅ Included</td>
<td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f0f0f0;">✅ Included</td>
<td style="padding: 1rem; text-align: center; border-bottom: 1px solid #f0f0f0;">Self-catered</td>
</tr>
<tr style="background: rgba(0,0,0,0.02);">
<td style="padding: 1rem; font-weight: 600; color: var(--dark); border-bottom: 1px solid #f0f0f0;">Price from</td>
<td style="padding: 1rem; text-align: center; font-weight: 600; color: var(--brand-teal); border-bottom: 1px solid #f0f0f0;"><span data-price="dome_pinot">$450</span>/night</td>
<td style="padding: 1rem; text-align: center; font-weight: 600; color: #be185d; border-bottom: 1px solid #f0f0f0;"><span data-price="dome_rose">$380</span>/night</td>
<td style="padding: 1rem; text-align: center; font-weight: 600; color: var(--brand-teal); border-bottom: 1px solid #f0f0f0;"><span data-price="lakeside_cottage">$580</span>/night</td>
</tr>
<tr>
<td style="padding: 1.5rem 1rem; font-weight: 600; color: var(--dark);"></td>
<td style="padding: 1.5rem 1rem; text-align: center;">
<a class="btn btn-primary" href="#" onclick="openBookingModal('dome-pinot')" style="font-size: 0.9rem; padding: 0.7rem 1.5rem;">Book Pinot</a>
</td>
<td style="padding: 1.5rem 1rem; text-align: center;">
<a class="btn" href="#" onclick="openBookingModal('dome-rose')" style="background: #be185d; color: white; font-size: 0.9rem; padding: 0.7rem 1.5rem; text-decoration: none; border-radius: 25px; transition: all 0.3s ease;">Book Rosé</a>
</td>
<td style="padding: 1.5rem 1rem; text-align: center;">
<a class="btn btn-primary" href="#" onclick="openBookingModal('lakeside-cottage')" style="font-size: 0.9rem; padding: 0.7rem 1.5rem;">Book Cottage</a>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<!-- Full detailed accommodation content remains the same This is the stay page-->
<div class="grid grid-3">
<div class="card">
<img alt="Dome Pinot" class="card-image" loading="lazy" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/PinotLakeView.jpeg"/>
<!-- Mini Gallery - 4 smaller images showing details -->
<div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin: 15px; padding: 10px; background: rgba(0,0,0,0.03); border-radius: 8px;">
<img alt="Dome exterior" loading="lazy" onclick="openLightbox(this.src)" onmouseout="this.style.border='2px solid transparent'" onmouseover="this.style.border='2px solid #2d5a5a'" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/dome-pinot-hero.jpeg" style="width: 100%; height: 80px; object-fit: cover; border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;"/>
<img alt="Interior luxury" loading="lazy" onclick="openLightbox(this.src)" onmouseout="this.style.border='2px solid transparent'" onmouseover="this.style.border='2px solid #2d5a5a'" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/pinotinternal.jpeg" style="width: 100%; height: 80px; object-fit: cover; border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;"/>
<img alt="Private spa" loading="lazy" onclick="openLightbox(this.src)" onmouseout="this.style.border='2px solid transparent'" onmouseover="this.style.border='2px solid #2d5a5a'" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/pinotspa.jpeg" style="width: 100%; height: 80px; object-fit: cover; border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;"/>
<img alt="Living area" loading="lazy" onclick="openLightbox(this.src)" onmouseout="this.style.border='2px solid transparent'" onmouseover="this.style.border='2px solid #2d5a5a'" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/pinotsittingroom.jpeg" style="width: 100%; height: 80px; object-fit: cover; border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;"/>
</div>
<div class="card-content">
<h3 class="card-title">Dome Pinot</h3>
<p class="card-text">Welcome to Lakeside Glamping's flagship experience! Our largest and most spacious luxury dome offers an unforgettable 50sqm open living space, where the serenity of nature combines seamlessly with five-star accommodation comforts. Purposely built for couples seeking the ultimate romantic escape.</p>
<!-- Compact Key Features -->
<div style="background: rgba(45, 90, 90, 0.05); padding: 1.5rem; border-radius: 10px; margin: 1.5rem 0;">
<h4 style="color: var(--brand-teal); margin-bottom: 1rem; font-size: 1.1rem;">Key Features</h4>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem; font-size: 0.9rem;">
<div><i class="fas fa-bed"></i> Super king bed</div>
<div><i class="fas fa-bath"></i> Private spa</div>
<div><i class="fas fa-utensils"></i> Stovetop cooking</div>
<div><i class="fas fa-fire"></i> Weber BBQ</div>
<div><i class="fas fa-wifi"></i> Free WiFi</div>
<div><i class="fas fa-parking"></i> Free parking</div>
<div><i class="fas fa-snowflake"></i> Air conditioning</div>
<div><i class="fas fa-tv"></i> 55" OLED TV</div>
<div><i class="fas fa-leaf"></i> Mountain &amp; lake views</div>
<div><i class="fas fa-route"></i> Cycle trail 300m</div>
</div>
</div>
<!-- Quick Policies -->
<div style="background: #fef3c7; border: 1px solid #f59e0b; padding: 1rem; border-radius: 10px; margin: 1rem 0;">
<div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.9rem; color: #92400e;">
<span><i class="fas fa-users"></i> 2 guests max</span>
<span><i class="fas fa-clock"></i> Check-in 3PM</span>
<span><i class="fas fa-clock"></i> Check-out 10AM</span>
<span><i class="fas fa-paw"></i> No pets</span>
</div>
</div>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
<span style="font-weight: 600; color: var(--dark); font-size: 1.1rem;">From <span data-price="dome_pinot">$450</span>/night <span style="font-size: 0.75rem; color: #666;">(GST incl.)</span></span>
<a class="btn btn-primary" href="#" onclick="openBookingModal('dome-pinot')">Book Now</a>
</div>
</div>
</div>
<div class="card">
<img alt="Dome Rosé" class="card-image" loading="lazy" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/dome-rose-spa1.jpeg"/>
<!-- Mini Gallery - 4 smaller images showing details -->
<div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin: 15px; padding: 10px; background: rgba(0,0,0,0.03); border-radius: 8px;">
<img alt="Rose exterior" loading="lazy" onclick="openLightbox(this.src)" onmouseout="this.style.border='2px solid transparent'" onmouseover="this.style.border='2px solid #be185d'" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/dome-rose-exterior.jpeg" style="width: 100%; height: 80px; object-fit: cover; border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;"/>
<img alt="Rose interior" loading="lazy" onclick="openLightbox(this.src)" onmouseout="this.style.border='2px solid transparent'" onmouseover="this.style.border='2px solid #be185d'" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/dome-rose-interior.jpeg" style="width: 100%; height: 80px; object-fit: cover; border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;"/>
<img alt="Rose spa" loading="lazy" onclick="openLightbox(this.src)" onmouseout="this.style.border='2px solid transparent'" onmouseover="this.style.border='2px solid #be185d'" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/rosespa.jpeg" style="width: 100%; height: 80px; object-fit: cover; border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;"/>
<img alt="Rose comfort" loading="lazy" onclick="openLightbox(this.src)" onmouseout="this.style.border='2px solid transparent'" onmouseover="this.style.border='2px solid #be185d'" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/Roseinternal.jpeg" style="width: 100%; height: 80px; object-fit: cover; border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;"/>
</div>
<div class="card-content">
<h3 class="card-title">Dome Rosé</h3>
<p class="card-text">Welcome to Lakeside Glamping, where luxury meets nature in perfect harmony. Dome Rosé offers an intimate 40sqm open living space, purposely built for couples seeking a unique romantic getaway that combines the serenity of nature with five-star accommodation comforts.</p>
<!-- Compact Key Features -->
<div style="background: rgba(251, 113, 133, 0.05); padding: 1.5rem; border-radius: 10px; margin: 1.5rem 0;">
<h4 style="color: #be185d; margin-bottom: 1rem; font-size: 1.1rem;">Key Features</h4>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem; font-size: 0.9rem;">
<div><i class="fas fa-bed"></i> Super king bed</div>
<div><i class="fas fa-bath"></i> Private spa</div>
<div><i class="fas fa-utensils"></i> Stovetop cooking</div>
<div><i class="fas fa-fire"></i> Weber BBQ</div>
<div><i class="fas fa-wifi"></i> Free WiFi</div>
<div><i class="fas fa-parking"></i> Free parking</div>
<div><i class="fas fa-snowflake"></i> Air conditioning</div>
<div><i class="fas fa-tv"></i> 55" OLED TV</div>
<div><i class="fas fa-leaf"></i> Vineyard views</div>
<div><i class="fas fa-route"></i> Cycle trail 300m</div>
</div>
</div>
<!-- Quick Policies -->
<div style="background: #fee2e2; border: 1px solid #f87171; padding: 1rem; border-radius: 10px; margin: 1rem 0;">
<div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.9rem; color: #dc2626;">
<span><i class="fas fa-users"></i> 2 adults only</span>
<span><i class="fas fa-clock"></i> Check-in 3PM</span>
<span><i class="fas fa-clock"></i> Check-out 10AM</span>
<span><i class="fas fa-paw"></i> No pets</span>
</div>
</div>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
<span style="font-weight: 600; color: var(--dark); font-size: 1.1rem;">From <span data-price="dome_rose">$380</span>/night <span style="font-size: 0.75rem; color: #666;">(GST incl.)</span></span>
<a class="btn btn-primary" href="#" onclick="openBookingModal('dome-rose')">Book Now</a>
</div>
</div>
</div>
<div class="card">
<img alt="Lakeside Cottage" class="card-image" loading="lazy" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/lakeside-cottage-exterior.jpeg"/>
<!-- Mini Gallery - 4 smaller images showing details -->
<div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin: 15px; padding: 10px; background: rgba(0,0,0,0.03); border-radius: 8px;">
<img alt="Cottage exterior view" loading="lazy" onclick="openLightbox(this.src)" onmouseout="this.style.border='2px solid transparent'" onmouseover="this.style.border='2px solid #2d5a5a'" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/lakesidecottageexterior.jpeg" style="width: 100%; height: 80px; object-fit: cover; border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;"/>
<img alt="Cottage interior living" loading="lazy" onclick="openLightbox(this.src)" onmouseout="this.style.border='2px solid transparent'" onmouseover="this.style.border='2px solid #2d5a5a'" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/lakesidecottageinterior.jpeg" style="width: 100%; height: 80px; object-fit: cover; border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;"/>
<img alt="Lake access from cottage" loading="lazy" onclick="openLightbox(this.src)" onmouseout="this.style.border='2px solid transparent'" onmouseover="this.style.border='2px solid #2d5a5a'" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/lakesidecottagelakeview.jpeg" style="width: 100%; height: 80px; object-fit: cover; border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;"/>
<img alt="Cottage bedroom comfort" loading="lazy" onclick="openLightbox(this.src)" onmouseout="this.style.border='2px solid transparent'" onmouseover="this.style.border='2px solid #2d5a5a'" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/cottagebedroom.jpeg" style="width: 100%; height: 80px; object-fit: cover; border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.3s ease;"/>
</div>
<div class="card-content">
<h3 class="card-title">Lakeside Cottage</h3>
<p class="card-text">Welcome to your luxurious Central Otago escape! This stunning self-contained cottage offers breathtaking panoramic views over Lake Dunstan with the epic backdrop of Mt Pisa. Nestled in our boutique vineyard on the shores of Lake Dunstan, just 10 minutes from central Cromwell, 30 minutes from Wanaka, and 55 minutes from Queenstown.</p>
<!-- Compact Key Features -->
<div style="background: rgba(45, 90, 90, 0.05); padding: 1.5rem; border-radius: 10px; margin: 1.5rem 0;">
<h4 style="color: var(--brand-teal); margin-bottom: 1rem; font-size: 1.1rem;">Key Features</h4>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem; font-size: 0.9rem;">
<div><i class="fas fa-bed"></i> Queen bed + sofa bed</div>
<div><i class="fas fa-bath"></i> Private hot tub</div>
<div><i class="fas fa-utensils"></i> Stovetop cooking</div>
<div><i class="fas fa-fire"></i> Weber BBQ</div>
<div><i class="fas fa-wifi"></i> Free WiFi</div>
<div><i class="fas fa-parking"></i> Garage parking</div>
<div><i class="fas fa-snowflake"></i> Air conditioning</div>
<div><i class="fas fa-tv"></i> TV</div>
<div><i class="fas fa-leaf"></i> Lake &amp; mountain views</div>
<div><i class="fas fa-route"></i> Cycle trail 300m</div>
<div><i class="fas fa-tshirt"></i> Washing machine</div>
<div><i class="fas fa-paw"></i> Pet friendly</div>
</div>
</div>
<!-- Quick Policies -->
<div style="background: #dcfdf7; border: 1px solid #10b981; padding: 1rem; border-radius: 10px; margin: 1rem 0;">
<div style="display: flex; justify-content: space-between; align-items: center; font-size: 0.9rem; color: #047857;">
<span><i class="fas fa-users"></i> Up to 3 guests</span>
<span><i class="fas fa-clock"></i> Check-in 3PM</span>
<span><i class="fas fa-clock"></i> Check-out 10AM</span>
<span><i class="fas fa-paw"></i> Pets welcome</span>
</div>
</div>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
<span style="font-weight: 600; color: var(--dark); font-size: 1.1rem;">From <span data-price="lakeside_cottage">$580</span>/night <span style="font-size: 0.75rem; color: #666;">(GST incl.)</span></span>
<a class="btn btn-primary" href="#" onclick="openBookingModal('lakeside-cottage')">Book Now</a>
</div>
</div>
</div>
</div>
</div>
</section>
</div>
<!-- Gallery Page for the stay-->
<div class="page" id="galleryPage">
<section class="hero">
<div class="container">
<div class="hero-content">
<h1>Your Journey Through Paradise</h1>
<div class="tagline">From Arrival to Unforgettable Memories - Every Moment Captured</div>
<p>Follow the path our guests take: arriving through golden vineyards, settling into luxury domes with lake views, waking to mountain sunrises, soaking in private spas under stars, and discovering why 127 five-star reviews all mention "the views." This is more than a gallery - it's your future memories waiting to happen.</p>
<div style="background: white; border-radius: 15px; padding: 1.5rem; margin: 2rem 0; max-width: 500px; margin-left: auto; margin-right: auto; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
<div style="color: var(--brand-teal); font-weight: 600; margin-bottom: 1rem;">Most Photographed Moments:</div>
<div style="text-align: left; line-height: 1.8; color: #374151; font-size: 0.95rem;">
                                🌅 Sunrise over Lake Dunstan from dome skylights<br/>
                                🍷 Private spa sessions with vineyard views<br/>
                                ⭐ Stargazing through panoramic dome windows<br/>
                                🚴 Cycle trail access directly from property<br/>
                                🔋 38 solar panels powering luxury amenities<br/>
                                📊 Real-time energy monitoring displays
                            </div>
</div>
</div>
</div>
</section>
<section class="section">
<div class="container">
<!-- CHAPTER 1: YOUR ARRIVAL -->
<div style="text-align: center; margin: 3rem 0 2rem 0;">
<h2 style="font-family: 'Playfair Display', serif; color: var(--brand-teal); margin-bottom: 0.5rem;">Chapter 1: Your Arrival</h2>
<p style="color: var(--text); opacity: 0.8; font-style: italic;">"The moment you turn into our vineyard, time slows down..."</p>
</div>
<div class="grid grid-3" style="margin-bottom: 3rem;">
<div class="card">
<img alt="Welcome to Central Otago wine country" class="card-image" loading="lazy" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/vineyard.jpeg"/>
<div style="padding: 1rem; text-align: center;">
<p style="font-size: 0.9rem; color: var(--text);">Welcome to wine country - your first glimpse</p>
</div>
</div>
<div class="card">
<img alt="Golden autumn vineyard rows - Central Otago at its finest" class="card-image" loading="lazy" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/golden-vineyard-autumn.jpg"/>
<div style="padding: 1rem; text-align: center;">
<p style="font-size: 0.9rem; color: var(--text);">Golden autumn magic - the vineyard at its peak</p>
</div>
</div>
<div class="card">
<img alt="Lake Dunstan with snow-capped mountains" class="card-image" loading="lazy" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/lake-mountains-perfect.jpg"/>
<div style="padding: 1rem; text-align: center;">
<p style="font-size: 0.9rem; color: var(--text);">Lake Dunstan stretches before you</p>
</div>
</div>
</div>
<!-- CHAPTER 2: SETTLING IN -->
<div style="text-align: center; margin: 3rem 0 2rem 0;">
<h2 style="font-family: 'Playfair Display', serif; color: var(--brand-teal); margin-bottom: 0.5rem;">Chapter 2: Settling Into Luxury</h2>
<p style="color: var(--text); opacity: 0.8; font-style: italic;">"Choose your sanctuary - each one tells a different story"</p>
</div>
<div class="grid grid-3" style="margin-bottom: 3rem;">
<div class="card">
<img alt="Dome Pinot - Your romantic lake view retreat" class="card-image" loading="lazy" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/dome-pinot-hero.jpeg"/>
<div style="padding: 1rem; text-align: center;">
<p style="font-size: 0.9rem; color: var(--text);">Dome Pinot - where lake views steal your heart</p>
</div>
</div>
<div class="card">
<img alt="Wake up to this - Lake views from bed" class="card-image" loading="lazy" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/PinotLakeView.jpeg"/>
<div style="padding: 1rem; text-align: center;">
<p style="font-size: 0.9rem; color: var(--text);">Wake up to this every morning</p>
</div>
</div>
<div class="card">
<img alt="Private spa luxury in Dome Rose" class="card-image" loading="lazy" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/dome-rose-spa.jpeg"/>
<div style="padding: 1rem; text-align: center;">
<p style="font-size: 0.9rem; color: var(--text);">Your private spa awaits</p>
</div>
</div>
</div>
<!-- CHAPTER 3: NATURE'S SHOW -->
<div style="text-align: center; margin: 3rem 0 2rem 0;">
<h2 style="font-family: 'Playfair Display', serif; color: var(--brand-teal); margin-bottom: 0.5rem;">Chapter 3: Nature's Daily Performance</h2>
<p style="color: var(--text); opacity: 0.8; font-style: italic;">"Every day brings a new masterpiece"</p>
</div>
<div class="grid grid-3" style="margin-bottom: 3rem;">
<div class="card">
<img alt="Double rainbow over Lake Dunstan" class="card-image" loading="lazy" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/galleryrainbow.jpeg"/>
<div style="padding: 1rem; text-align: center;">
<p style="font-size: 0.9rem; color: var(--text);">When rainbows touch the lake</p>
</div>
</div>
<div class="card">
<img alt="Magical Central Otago sunset" class="card-image" loading="lazy" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/magical-sunset.jpg"/>
<div style="padding: 1rem; text-align: center;">
<p style="font-size: 0.9rem; color: var(--text);">Sunsets that stop conversations</p>
</div>
</div>
<div class="card">
<img alt="Morning serenity over the mountains" class="card-image" loading="lazy" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/20220125_091449.jpg"/>
<div style="padding: 1rem; text-align: center;">
<p style="font-size: 0.9rem; color: var(--text);">Morning serenity before the world wakes</p>
</div>
</div>
</div>
<!-- CHAPTER 4: LIVING THE DREAM -->
<div style="text-align: center; margin: 3rem 0 2rem 0;">
<h2 style="font-family: 'Playfair Display', serif; color: var(--brand-teal); margin-bottom: 0.5rem;">Chapter 4: Living the Dream</h2>
<p style="color: var(--text); opacity: 0.8; font-style: italic;">"This is what relaxation really means"</p>
</div>
<div class="grid grid-3" style="margin-bottom: 3rem;">
<div class="card">
<img alt="Spa with a view - pure relaxation" class="card-image" loading="lazy" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/pinotspa.jpeg"/>
<div style="padding: 1rem; text-align: center;">
<p style="font-size: 0.9rem; color: var(--text);">Spa sessions with million-dollar views</p>
</div>
</div>
<div class="card">
<img alt="Outdoor deck perfect for wine tasting" class="card-image" loading="lazy" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/gallerydeck.jpeg"/>
<div style="padding: 1rem; text-align: center;">
<p style="font-size: 0.9rem; color: var(--text);">Your private wine tasting deck</p>
</div>
</div>
<div class="card">
<img alt="Your reading spot with a view" class="card-image" loading="lazy" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/GallerySwingChair.jpeg"/>
<div style="padding: 1rem; text-align: center;">
<p style="font-size: 0.9rem; color: var(--text);">The perfect reading spot</p>
</div>
</div>
</div>
<!-- CHAPTER 5: WINE COUNTRY -->
<div style="text-align: center; margin: 3rem 0 2rem 0;">
<h2 style="font-family: 'Playfair Display', serif; color: var(--brand-teal); margin-bottom: 0.5rem;">Chapter 5: In the Heart of Wine Country</h2>
<p style="color: var(--text); opacity: 0.8; font-style: italic;">"Walk among the vines that produce world-class Pinot Noir"</p>
</div>
<div class="grid grid-3" style="margin-bottom: 3rem;">
<div class="card">
<img alt="Morning walk through the vineyard" class="card-image" loading="lazy" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/vineyard-path.jpg"/>
<div style="padding: 1rem; text-align: center;">
<p style="font-size: 0.9rem; color: var(--text);">Morning walks through our vineyard</p>
</div>
</div>
<div class="card">
<img alt="Domes nestled in wine country" class="card-image" loading="lazy" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/vineyarddomes.jpeg"/>
<div style="padding: 1rem; text-align: center;">
<p style="font-size: 0.9rem; color: var(--text);">Domes nestled among the vines</p>
</div>
</div>
<div class="card">
<img alt="Views from the vineyard" class="card-image" loading="lazy" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/ViewfromVineyard.jpeg"/>
<div style="padding: 1rem; text-align: center;">
<p style="font-size: 0.9rem; color: var(--text);">The view from our vineyard</p>
</div>
</div>
</div>
<!-- CHAPTER 6: FOUR SEASONS -->
<div style="text-align: center; margin: 3rem 0 2rem 0;">
<h2 style="font-family: 'Playfair Display', serif; color: var(--brand-teal); margin-bottom: 0.5rem;">Chapter 6: Four Seasons of Magic</h2>
<p style="color: var(--text); opacity: 0.8; font-style: italic;">"Every season brings its own special beauty"</p>
</div>
<div class="grid grid-3" style="margin-bottom: 3rem;">
<div class="card">
<img alt="Winter wonderland - cozy dome season" class="card-image" loading="lazy" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/20211122_185234.jpg"/>
<div style="padding: 1rem; text-align: center;">
<p style="font-size: 0.9rem; color: var(--text);">Winter wonderland - cozy dome season</p>
</div>
</div>
<div class="card">
<img alt="Autumn colors reflecting on the lake" class="card-image" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/lakeviewautumn.jpeg"/>
<div style="padding: 1rem; text-align: center;">
<p style="font-size: 0.9rem; color: var(--text);">Autumn paints the landscape gold</p>
</div>
</div>
<div class="card">
<img alt="Golden hour glow over property" class="card-image" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/HeadingWarm.jpeg"/>
<div style="padding: 1rem; text-align: center;">
<p style="font-size: 0.9rem; color: var(--text);">Golden hour perfection</p>
</div>
</div>
</div>
<!-- CHAPTER 7: YOUR STORY BEGINS -->
<div style="text-align: center; margin: 3rem 0 2rem 0;">
<h2 style="font-family: 'Playfair Display', serif; color: var(--brand-teal); margin-bottom: 0.5rem;">Chapter 7: Your Story Begins Here</h2>
<p style="color: var(--text); opacity: 0.8; font-style: italic;">"Join the 127 five-star reviews - create your own memories"</p>
</div>
<div class="grid grid-2" style="margin-bottom: 3rem; max-width: 700px; margin-left: auto; margin-right: auto;">
<div class="card">
<img alt="Luxury interior comfort" class="card-image" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/pinotinternal.jpeg"/>
<div style="padding: 1rem; text-align: center;">
<p style="font-size: 0.9rem; color: var(--text);">Luxury in every detail</p>
</div>
</div>
<div class="card">
<img alt="38 solar panels - luxury meets sustainability" class="card-image" onclick="openLightbox(this.src)" src="https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/solarpanel.jpeg"/>
<div style="padding: 1rem; text-align: center;">
<p style="font-size: 0.9rem; color: var(--text);">38 solar panels - guilt-free luxury</p>
</div>
</div>
</div>
</div>
</section></div>


<!-- Blog Page -->
<div class="page" id="blogPage">
<section class="hero">
<div class="container">
<div class="hero-content">
<h1>Local Secrets from Stephen &amp; Sandy</h1>
<div class="tagline">Five Years Living Here • 500+ Guests Guided • Commercial-Grade Energy Experts</div>
<p>From I.T. professionals to Central Otago hosts and renewable energy innovators—we've learned every cellar door worth visiting, every cycle route that takes your breath away, every season's hidden gems, plus how to design and maintain commercial-grade solar systems. Our comprehensive guides come from hosting guests from 20+ countries and calling this magical region home.</p>
<!-- GUIDE NAVIGATION -->
<div style="background: white; border-radius: 20px; padding: 2rem; margin: 2rem 0; box-shadow: 0 8px 25px rgba(0,0,0,0.1); max-width: 900px; margin-left: auto; margin-right: auto;">
<h3 style="color: var(--brand-teal); margin-bottom: 2rem; text-align: center; font-family: 'Playfair Display', serif; font-size: 1.8rem;">📚 Your Complete Central Otago Guide Collection</h3>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;">
<a href="#" onclick="scrollToSection('winery-guide'); return false;" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 12px 30px rgba(139, 92, 246, 0.3)'" style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; padding: 1.5rem; border-radius: 15px; text-decoration: none; transition: all 0.3s ease; display: block;">
<div style="font-size: 2rem; margin-bottom: 0.5rem;">🍷</div>
<h4 style="margin-bottom: 0.5rem; font-size: 1.1rem;">10 Best Wineries Within 15 Minutes</h4>
<p style="font-size: 0.9rem; opacity: 0.9; margin: 0;">Walking distance gems + world-class Pinot Noir</p>
</a>
<a href="#" onclick="scrollToSection('restaurant-guide'); return false;" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 12px 30px rgba(245, 158, 11, 0.3)'" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; padding: 1.5rem; border-radius: 15px; text-decoration: none; transition: all 0.3s ease; display: block;">
<div style="font-size: 2rem; margin-bottom: 0.5rem;">🍽️</div>
<h4 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Restaurant Guide by Budget</h4>
<p style="font-size: 0.9rem; opacity: 0.9; margin: 0;">Budget eats to fine dining experiences</p>
</a>
<a href="#" onclick="scrollToSection('queenstown-guide'); return false;" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 12px 30px rgba(16, 185, 129, 0.3)'" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 1.5rem; border-radius: 15px; text-decoration: none; transition: all 0.3s ease; display: block;">
<div style="font-size: 2rem; margin-bottom: 0.5rem;">🏔️</div>
<h4 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Queenstown Day Trip Planner</h4>
<p style="font-size: 0.9rem; opacity: 0.9; margin: 0;">Perfect 55-minute adventure to NZ's playground</p>
</a>
<a href="#" onclick="scrollToSection('wanaka-guide'); return false;" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 12px 30px rgba(14, 165, 233, 0.3)'" style="background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%); color: white; padding: 1.5rem; border-radius: 15px; text-decoration: none; transition: all 0.3s ease; display: block;">
<div style="font-size: 2rem; margin-bottom: 0.5rem;">🌊</div>
<h4 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Wanaka Day Trip Planner</h4>
<p style="font-size: 0.9rem; opacity: 0.9; margin: 0;">Perfect 30-minute drive to alpine adventures</p>
</a>
<a href="#" onclick="scrollToSection('winery-guide'); return false;" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 12px 30px rgba(236, 72, 153, 0.3)'" style="background: linear-gradient(135deg, #ec4899 0%, #be185d 100%); color: white; padding: 1.5rem; border-radius: 15px; text-decoration: none; transition: all 0.3s ease; display: block;">
<div style="font-size: 2rem; margin-bottom: 0.5rem;">🌸</div>
<h4 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Seasonal Activities Calendar</h4>
<p style="font-size: 0.9rem; opacity: 0.9; margin: 0;">Best activities for each season &amp; weather</p>
</a>
<a href="#" onclick="scrollToSection('photography-guide'); return false;" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 12px 30px rgba(109, 40, 217, 0.3)'" style="background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%); color: white; padding: 1.5rem; border-radius: 15px; text-decoration: none; transition: all 0.3s ease; display: block;">
<div style="font-size: 2rem; margin-bottom: 0.5rem;">📸</div>
<h4 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Photography Spots Guide</h4>
<p style="font-size: 0.9rem; opacity: 0.9; margin: 0;">Instagram-worthy locations around Lake Dunstan</p>
</a>
<a href="#" onclick="scrollToSection('cycle-guide'); return false;" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 12px 30px rgba(6, 182, 212, 0.3)'" style="background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%); color: white; padding: 1.5rem; border-radius: 15px; text-decoration: none; transition: all 0.3s ease; display: block;">
<div style="font-size: 2rem; margin-bottom: 0.5rem;">🚴</div>
<h4 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Central Otago Rail Trail Guide</h4>
<p style="font-size: 0.9rem; opacity: 0.9; margin: 0;">Historic 150km trail with vineyard stops</p>
</a>
<a href="#" onclick="scrollToSection('solar-guide'); return false;" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 12px 30px rgba(22, 163, 74, 0.3)'" style="background: linear-gradient(135deg, #16a34a 0%, #15803d 100%); color: white; padding: 1.5rem; border-radius: 15px; text-decoration: none; transition: all 0.3s ease; display: block;">
<div style="font-size: 2rem; margin-bottom: 0.5rem;">⚡</div>
<h4 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Commercial-Grade Solar Journey</h4>
<p style="font-size: 0.9rem; opacity: 0.9; margin: 0;">Our 16.72kW renewable energy story</p>
</a>
</div>
</div>
</div>
</div>
</section>
<section class="section">
<div class="container">
<div class="section-header">
<h2 class="section-title">Local Expertise &amp; Energy Innovation</h2>
<p class="section-subtitle">Comprehensive guides from your hosts Stephen &amp; Sandy, combining local knowledge with renewable energy expertise</p>
<div style="text-align: center; margin: 1rem 0;">
<a href="#" onclick="showPage('explore'); return false;" onmouseout="this.style.background='transparent'; this.style.color='var(--brand-teal)'" onmouseover="this.style.background='var(--brand-teal)'; this.style.color='white'" style="color: var(--brand-teal); text-decoration: none; font-weight: 500; padding: 0.5rem 1rem; border: 1px solid var(--brand-teal); border-radius: 25px; display: inline-block; transition: all 0.3s ease;">← Back to Location &amp; Activities Overview</a>
</div>
</div>
<!-- Collapsible Guide Sections -->
<div style="max-width: 1200px; margin: 0 auto; padding: 2rem 0;">
<!-- Restaurant Guide by Budget -->
<div class="guide-item" id="restaurant-guide" style="background: white; border-radius: 15px; margin-bottom: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); overflow: hidden; border: 1px solid #e5e7eb;">
<div class="guide-header" onclick="toggleGuide(this)" onmouseout="this.style.background='linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%)'" onmouseover="this.style.background='linear-gradient(135deg, #fed7aa 0%, #fdba74 100%)'" style="padding: 1.8rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%); user-select: none; transition: all 0.3s ease;">
<div style="flex: 1;">
<h3 style="color: #f59e0b; margin: 0 0 0.5rem 0; font-size: 1.4rem; display: flex; align-items: center; gap: 0.5rem;">
<span style="font-size: 1.6rem;">🍽️</span>
                                        Restaurant Guide by Budget
                                    </h3>
<p style="color: #6b7280; margin: 0; font-size: 0.95rem;">Budget eats to fine dining experiences - Stephen &amp; Sandy's 5 years of local dining</p>
</div>
<span class="guide-arrow" style="font-size: 1.5rem; color: #f59e0b; transition: transform 0.3s ease;">▼</span>
</div>
<div class="guide-content" style="max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out;">
<div style="padding: 2rem; border-top: 1px solid #e5e7eb;">
<!-- BUDGET FRIENDLY ($10-25) -->
<div style="background: rgba(34, 197, 94, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #22c55e;">
<h4 style="color: #22c55e; margin-bottom: 0.8rem; font-size: 1rem;">💚 BUDGET FRIENDLY ($10-25)</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>Cromwell (10min drive):</strong><br/>
                                        • <strong>Cromwell Bakery</strong> - Famous pies, fresh sandwiches, local favorite<br/>
                                        • <strong>Thai Siam</strong> - Authentic Thai, great portions, BYO wine<br/>
                                        • <strong>Subway Central Otago</strong> - Reliable, quick, healthy options<br/><br/>
<strong>Bannockburn (5min drive):</strong><br/>
                                        • <strong>Bannockburn General Store</strong> - Gourmet sandwiches, local produce<br/>
                                        • <strong>Saddlers Arms Pub</strong> - Hearty pub meals, local atmosphere
                                    </div>
</div>
<!-- MID-RANGE ($25-50) -->
<div style="background: rgba(251, 191, 36, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #fbbf24;">
<h4 style="color: #f59e0b; margin-bottom: 0.8rem; font-size: 1rem;">🧡 MID-RANGE ($25-50)</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>Cromwell:</strong><br/>
                                        • <strong>The Load of Mischief</strong> - Gastropub, craft beer, wood-fired pizza<br/>
                                        • <strong>Grain &amp; Seed Cafe</strong> - All-day dining, great coffee, healthy options<br/>
                                        • <strong>Armchair Cinema Cafe</strong> - Unique dine-in cinema experience<br/><br/>
<strong>Bannockburn:</strong><br/>
                                        • <strong>Carrick Winery Restaurant</strong> - Vineyard dining, seasonal menu<br/>
                                        • <strong>Mt Difficulty Restaurant</strong> - Award-winning cellar door dining
                                    </div>
</div>
<!-- FINE DINING ($50+) -->
<div style="background: rgba(236, 72, 153, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #ec4899;">
<h4 style="color: #ec4899; margin-bottom: 0.8rem; font-size: 1rem;">💖 FINE DINING ($50+)</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>Special Occasion Dining:</strong><br/>
                                        • <strong>Aurum Restaurant</strong> - Award-winning fine dining, wine matching<br/>
                                        • <strong>Gibbston Valley Winery</strong> - Premium dining, cave tours (25min drive)<br/>
                                        • <strong>Felton Road Cellar Door</strong> - Exclusive tastings with food matching<br/><br/>
<strong>Booking Essential:</strong><br/>
                                        • Peak season (Dec-Mar): Book 2-3 days ahead<br/>
                                        • Harvest season (Mar-Apr): Book 1 week ahead<br/>
                                        • Weekend dinners: Always book ahead
                                    </div>
</div>
<!-- INSIDER TIPS -->
<div style="background: #e0f2fe; border: 1px solid #0ea5e9; padding: 1rem; border-radius: 10px; margin: 1.5rem 0;">
<div style="font-weight: 600; color: #0c4a6e; margin-bottom: 0.5rem;">💡 Host Insider Tips:</div>
<div style="font-size: 0.85rem; color: #0c4a6e; line-height: 1.5;">
                                        • <strong>BYO Wine:</strong> Most restaurants allow BYO with small corkage fee<br/>
                                        • <strong>Local Produce:</strong> Summer stone fruit, winter game meats are specialties<br/>
                                        • <strong>Early Bird Specials:</strong> Many places offer 5:30-6:30pm specials<br/>
                                        • <strong>Lunch Deals:</strong> Often better value than dinner at same venues<br/>
                                        • <strong>Food Trucks:</strong> Check Cromwell events - amazing gourmet trucks visit
                                    </div>
</div>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
<span style="color: var(--brand-teal); font-size: 0.9rem; font-weight: 500;">8 min read • Restaurant Guide • 500+ Local Meals</span>
</div>
</div>
</div>
</div>
<!-- Photography Spots Guide -->
<div class="guide-item" id="photography-guide" style="background: white; border-radius: 15px; margin-bottom: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); overflow: hidden; border: 1px solid #e5e7eb;">
<div class="guide-header" onclick="toggleGuide(this)" onmouseout="this.style.background='linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)'" onmouseover="this.style.background='linear-gradient(135deg, #e9d5ff 0%, #ddd6fe 100%)'" style="padding: 1.8rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%); user-select: none; transition: all 0.3s ease;">
<div style="flex: 1;">
<h3 style="color: #8b5cf6; margin: 0 0 0.5rem 0; font-size: 1.4rem; display: flex; align-items: center; gap: 0.5rem;">
<span style="font-size: 1.6rem;">📸</span>
                                        Photography Spots Guide
                                    </h3>
<p style="color: #6b7280; margin: 0; font-size: 0.95rem;">Instagram-worthy locations around Lake Dunstan - Stephen &amp; Sandy's 5 years of hosting photographers</p>
</div>
<span class="guide-arrow" style="font-size: 1.5rem; color: #8b5cf6; transition: transform 0.3s ease;">▼</span>
</div>
<div class="guide-content" style="max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out;">
<div style="padding: 2rem; border-top: 1px solid #e5e7eb;">
<!-- SUNRISE & GOLDEN HOUR -->
<div style="background: rgba(168, 85, 247, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #8b5cf6;">
<h4 style="color: #8b5cf6; margin-bottom: 0.8rem; font-size: 1rem;">🌅 SUNRISE &amp; GOLDEN HOUR SPOTS</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>From Your Accommodation (0-5min walk):</strong><br/>
                                        • <strong>Lake Dunstan Shoreline</strong> - Mirror reflections, accessible path<br/>
                                        • <strong>Vineyard Rows</strong> - Leading lines through morning mist<br/>
                                        • <strong>Dome Skylight Views</strong> - Shoot from inside looking out<br/><br/>
<strong>Elevated Views (10-15min drive):</strong><br/>
                                        • <strong>Bendigo Historic Reserve</strong> - Valley overview, mountain backdrop<br/>
                                        • <strong>Mt Difficulty Lookout</strong> - Classic Central Otago panorama
                                    </div>
</div>
<!-- LAKE & WATER SHOTS -->
<div style="background: rgba(34, 197, 94, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #22c55e;">
<h4 style="color: #22c55e; margin-bottom: 0.8rem; font-size: 1rem;">🏞️ LAKE &amp; WATER PHOTOGRAPHY</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>Lake Dunstan Access Points:</strong><br/>
                                        • <strong>Property Beach Access</strong> - Private shoreline, boat ramp nearby<br/>
                                        • <strong>Cromwell Marina</strong> - 10min drive, jetty compositions<br/>
                                        • <strong>Lowburn Inlet</strong> - 15min, shallow reflections, mountain backdrop<br/><br/>
<strong>Seasonal Water Features:</strong><br/>
                                        • <strong>Spring Fed Streams</strong> - Year-round flow through vineyard<br/>
                                        • <strong>Irrigation Channels</strong> - Geometric lines, agricultural patterns<br/>
                                        • <strong>Winter Ice Formations</strong> - Shoreline crystals (June-August)
                                    </div>
</div>
<!-- INSTAGRAM HOTSPOTS -->
<div style="background: rgba(251, 191, 36, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #fbbf24;">
<h4 style="color: #f59e0b; margin-bottom: 0.8rem; font-size: 1rem;">📱 INSTAGRAM HOTSPOTS</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>Most Tagged Locations:</strong><br/>
                                        • <strong>Cromwell Heritage Precinct</strong> - Historic buildings, 10min drive<br/>
                                        • <strong>Bendigo Station Woolshed</strong> - Rustic architecture, 15min<br/>
                                        • <strong>Kawarau Gorge Bridge</strong> - World's first bungy, 25min<br/><br/>
<strong>Hidden Gems (Guest Discoveries):</strong><br/>
                                        • <strong>Old Cromwell Town</strong> - Submerged ruins visible in low water<br/>
                                        • <strong>Vineyard Swing Chair</strong> - At property, perfect framing<br/>
                                        • <strong>Solar Panel Reflections</strong> - Modern agriculture meets tech
                                    </div>
</div>
<!-- SEASONAL VARIATIONS -->
<div style="background: rgba(45, 90, 90, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
<h4 style="color: var(--brand-teal); margin-bottom: 0.8rem; font-size: 1rem;">📅 SEASONAL PHOTOGRAPHY</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>Autumn (Mar-May) - Most Popular:</strong><br/>
                                        • <strong>Golden Vineyard Rows</strong> - Peak color late April<br/>
                                        • <strong>Lake Reflections</strong> - Calm conditions, mirror shots<br/><br/>
<strong>Spring (Sep-Nov) - Wildflowers:</strong><br/>
                                        • <strong>Blossom Season</strong> - Stone fruit orchards nearby<br/>
                                        • <strong>Lupins &amp; Poppies</strong> - Roadside displays<br/>
                                        • <strong>Snow-Capped Mountains</strong> - Clear air, dramatic backdrop
                                    </div>
</div>
<!-- PRO PHOTOGRAPHY TIPS -->
<div style="background: #fef3c7; border: 1px solid #f59e0b; padding: 1rem; border-radius: 10px; margin: 1rem 0;">
<div style="font-weight: 600; color: #92400e; margin-bottom: 0.5rem;">📸 Pro Tips from 500+ Guest Photos:</div>
<div style="font-size: 0.85rem; color: #92400e; line-height: 1.5;">
                                        • <strong>Golden Hour:</strong> 6:30-7:30am &amp; 7:30-8:30pm (summer)<br/>
                                        • <strong>Weather Apps:</strong> MetService NZ, Windy.com for conditions<br/>
                                        • <strong>Drone Rules:</strong> No-fly zones near airports, check AirShare NZ<br/>
                                        • <strong>Lake Access:</strong> Public walkways marked, respect private property<br/>
                                        • <strong>Best Gear:</strong> Wide-angle for landscapes, polarizing filter essential
                                    </div>
</div>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
<span style="color: var(--brand-teal); font-size: 0.9rem; font-weight: 500;">4 min read • Photography Guide • 500+ Guest Photos</span>
</div>
</div>
</div>
</div>
<!-- Seasonal Activities Calendar -->
<div class="guide-item" id="winery-guide" style="background: white; border-radius: 15px; margin-bottom: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); overflow: hidden; border: 1px solid #e5e7eb;">
<div class="guide-header" onclick="toggleGuide(this)" onmouseout="this.style.background='linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%)'" onmouseover="this.style.background='linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%)'" style="padding: 1.8rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%); user-select: none; transition: all 0.3s ease;">
<div style="flex: 1;">
<h3 style="color: #ec4899; margin: 0 0 0.5rem 0; font-size: 1.4rem; display: flex; align-items: center; gap: 0.5rem;">
<span style="font-size: 1.6rem;">🌸</span>
                                        Seasonal Activities Calendar
                                    </h3>
<p style="color: #6b7280; margin: 0; font-size: 0.95rem;">Best activities for each season &amp; weather - Stephen &amp; Sandy's 5 years of hosting seasonal guests</p>
</div>
<span class="guide-arrow" style="font-size: 1.5rem; color: #ec4899; transition: transform 0.3s ease;">▼</span>
</div>
<div class="guide-content" style="max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out;">
<div style="padding: 2rem; border-top: 1px solid #e5e7eb;">
<!-- SUMMER (DEC-FEB) -->
<div style="background: rgba(251, 191, 36, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #fbbf24;">
<h4 style="color: #f59e0b; margin-bottom: 0.8rem; font-size: 1rem;">☀️ SUMMER (Dec-Feb) - Peak Season</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>Perfect Weather Activities:</strong><br/>
                                        • <strong>Lake Dunstan Swimming &amp; Kayaking</strong> - Warm water, boat ramp access<br/>
                                        • <strong>Central Otago Rail Trail</strong> - Peak conditions, café stops open<br/>
                                        • <strong>Evening Wine Tasting</strong> - Extended daylight until 9:30pm<br/>
                                        • <strong>Outdoor Dining</strong> - All restaurants offer al fresco options<br/><br/>
<strong>Weather Pattern:</strong> 25-30°C days, 10-15°C nights, minimal rain<br/>
<strong>What to Pack:</strong> Sun protection, light layers, swimwear
                                    </div>
</div>
<!-- AUTUMN (MAR-MAY) -->
<div style="background: rgba(236, 72, 153, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #ec4899;">
<h4 style="color: #ec4899; margin-bottom: 0.8rem; font-size: 1rem;">🍂 AUTUMN (Mar-May) - Most Beautiful</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>Signature Autumn Experiences:</strong><br/>
                                        • <strong>Harvest Season Wine Tours</strong> - Watch grape picking, tastings<br/>
                                        • <strong>Golden Photography Walks</strong> - Vineyard colors peak in April<br/>
                                        • <strong>Comfortable Cycling</strong> - Perfect temperatures, clear skies<br/>
                                        • <strong>Outdoor Spa Sessions</strong> - Crisp air, mountain views<br/><br/>
<strong>Weather Pattern:</strong> 15-25°C days, 2-8°C nights, stable conditions<br/>
<strong>What to Pack:</strong> Layers for temperature changes, jacket for evenings
                                    </div>
</div>
<!-- WINTER (JUN-AUG) -->
<div style="background: rgba(34, 197, 94, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #22c55e;">
<h4 style="color: #22c55e; margin-bottom: 0.8rem; font-size: 1rem;">❄️ WINTER (Jun-Aug) - Cozy Season</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>Winter Luxury Activities:</strong><br/>
                                        • <strong>Hot Spa Under Stars</strong> - Clear nights, Milky Way visible<br/>
                                        • <strong>Fireplace Wine Tasting</strong> - Indoor comfort, cellar door visits<br/>
                                        • <strong>Queenstown Ski Day Trips</strong> - 1 hour to ski fields<br/>
                                        • <strong>Photography - Snow Mountains</strong> - Crystal clear air, dramatic shots<br/><br/>
<strong>Weather Pattern:</strong> 5-15°C days, -5 to 2°C nights, occasional frost<br/>
<strong>What to Pack:</strong> Warm clothes, thermal layers, waterproof jacket
                                    </div>
</div>
<!-- SPRING (SEP-NOV) -->
<div style="background: rgba(168, 85, 247, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #8b5cf6;">
<h4 style="color: #8b5cf6; margin-bottom: 0.8rem; font-size: 1rem;">🌱 SPRING (Sep-Nov) - Renewal Season</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>Spring Discovery Activities:</strong><br/>
                                        • <strong>Wildflower Photography</strong> - Lupins, poppies on roadsides<br/>
                                        • <strong>Blossom Tours</strong> - Stone fruit orchards nearby<br/>
                                        • <strong>Mild Weather Cycling</strong> - Comfortable temperatures return<br/>
                                        • <strong>Early Morning Lake Walks</strong> - Mist on water, serene conditions<br/><br/>
<strong>Weather Pattern:</strong> 10-20°C days, 0-8°C nights, changeable<br/>
<strong>What to Pack:</strong> Versatile layers, rain jacket, warm mornings/evenings
                                    </div>
</div>
<!-- WEATHER INSIDER TIPS -->
<div style="background: #fef3c7; border: 1px solid #f59e0b; padding: 1rem; border-radius: 10px; margin: 1rem 0;">
<div style="font-weight: 600; color: #92400e; margin-bottom: 0.5rem;">🌦️ Weather Tips from 500+ Guest Experiences:</div>
<div style="font-size: 0.85rem; color: #92400e; line-height: 1.5;">
                                        • <strong>Central Otago Climate:</strong> Continental - hot summers, cold winters, low rainfall<br/>
                                        • <strong>Daily Range:</strong> 15°C+ temperature swings common year-round<br/>
                                        • <strong>Best Apps:</strong> MetService NZ, Windy.com for local conditions<br/>
                                        • <strong>UV Alert:</strong> High altitude = intense sun even in winter<br/>
                                        • <strong>Microclimates:</strong> Lake moderates temperature, hills create wind patterns
                                    </div>
</div>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
<span style="color: var(--brand-teal); font-size: 0.9rem; font-weight: 500;">5 min read • Seasonal Guide • 500+ Guest Experiences</span>
</div>
</div>
</div>
</div>
<!-- Solar Journey Guide -->
<div class="guide-item" id="solar-guide" style="background: white; border-radius: 15px; margin-bottom: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); overflow: hidden; border: 1px solid #e5e7eb;">
<div class="guide-header" onclick="toggleGuide(this)" onmouseout="this.style.background='linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)'" onmouseover="this.style.background='linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%)'" style="padding: 1.8rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%); user-select: none; transition: all 0.3s ease;">
<div style="flex: 1;">
<h3 style="color: #16a34a; margin: 0 0 0.5rem 0; font-size: 1.4rem; display: flex; align-items: center; gap: 0.5rem;">
<span style="font-size: 1.6rem;">⚡</span>
                                        Commercial-Grade Solar: Our 16.72kW Journey
                                    </h3>
<p style="color: #6b7280; margin: 0; font-size: 0.95rem;">From I.T. professional to renewable energy designer - Sandy's technical story</p>
</div>
<span class="guide-arrow" style="font-size: 1.5rem; color: #16a34a; transition: transform 0.3s ease;">▼</span>
</div>
<div class="guide-content" style="max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out;">
<div style="padding: 2rem; border-top: 1px solid #e5e7eb;">
<p style="line-height: 1.8; margin-bottom: 1.5rem;">From I.T. professional to renewable energy designer - Sandy's technical story of achieving commercial-grade energy independence while maintaining five-star comfort.</p>
<div style="background: rgba(16, 185, 129, 0.05); padding: 1.5rem; border-radius: 10px; margin: 1.5rem 0;">
<h4 style="color: #16a34a; margin-bottom: 1rem;">System Specifications:</h4>
<ul style="line-height: 1.8; color: #374151;">
<li><strong>Solar Array:</strong> 38 x 440W Helios panels (16.72kW total)</li>
<li><strong>Battery Storage:</strong> 16kWh Signergy lithium batteries</li>
<li><strong>Inverter:</strong> 20kW hybrid inverter system</li>
<li><strong>Monitoring:</strong> Real-time production &amp; consumption tracking</li>
<li><strong>Daily Generation:</strong> 60-80kWh summer, 30-40kWh winter</li>
<li><strong>Grid Independence:</strong> 95%+ off-grid operation achieved</li>
</ul>
</div>
<div style="background: #fef3c7; border: 1px solid #f59e0b; padding: 1rem; border-radius: 10px; margin: 1.5rem 0;">
<div style="font-weight: 600; color: #92400e; margin-bottom: 0.5rem;">💡 Key Innovations:</div>
<div style="font-size: 0.9rem; color: #92400e; line-height: 1.6;">
                                            • Custom mounting system for NZ wind conditions<br/>
                                            • Smart load management for luxury amenities<br/>
                                            • Weather-predictive battery charging algorithms<br/>
                                            • Guest education dashboard in each accommodation<br/>
                                            • Net-positive energy generation year-round
                                        </div>
</div>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
<span style="color: #16a34a; font-size: 0.9rem; font-weight: 500;">12 min read • Technology Deep Dive</span>
<span style="background: #10b981; color: white; padding: 0.3rem 0.8rem; border-radius: 15px; font-size: 0.8rem; font-weight: 600;">✅ TECH GUIDE</span>
</div>
</div>
</div>
</div>
<!-- Winery Guide -->
<div class="guide-item" id="winery-guide" style="background: white; border-radius: 15px; margin-bottom: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); overflow: hidden; border: 1px solid #e5e7eb;">
<div class="guide-header" onclick="toggleGuide(this)" onmouseout="this.style.background='linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%)'" onmouseover="this.style.background='linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)'" style="padding: 1.8rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%); user-select: none; transition: all 0.3s ease;">
<div style="flex: 1;">
<h3 style="color: #7c3aed; margin: 0 0 0.5rem 0; font-size: 1.4rem; display: flex; align-items: center; gap: 0.5rem;">
<span style="font-size: 1.6rem;">🍷</span>
                                        10 Best Wineries Within 15 Minutes
                                    </h3>
<p style="color: #6b7280; margin: 0; font-size: 0.95rem;">Your insider guide to Central Otago's premier cellar doors</p>
</div>
<span class="guide-arrow" style="font-size: 1.5rem; color: #7c3aed; transition: transform 0.3s ease;">▼</span>
</div>
<div class="guide-content" style="max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out;">
<div style="padding: 2rem; border-top: 1px solid #e5e7eb;">
<!-- WALKING DISTANCE (0-5 MIN) -->
<div style="background: rgba(139, 92, 246, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
<h4 style="color: #8b5cf6; margin-bottom: 0.8rem; font-size: 1rem;">🚶 Walking Distance (0-5 minutes)</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>1. Rippon Vineyard</strong> - 5min walk<br/>
<em>Biodynamic pioneer, stunning lake views, $25 tastings</em><br/>
<span style="opacity: 0.8;">🕐 Open: 11am-5pm daily | 📞 Book ahead in summer</span>
<br/><br/>
<strong>2. Mt Difficulty Wines</strong> - 8min walk<br/>
<em>Award-winning Pinot Noir, restaurant on-site, $15 tastings</em><br/>
<span style="opacity: 0.8;">🕐 Open: 10:30am-5pm daily | 🍽️ Lunch bookings essential</span>
</div>
</div>
<!-- CLOSE DRIVE (5-10 MIN) -->
<div style="background: rgba(139, 92, 246, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
<h4 style="color: #8b5cf6; margin-bottom: 0.8rem; font-size: 1rem;">🚗 Short Drive (5-10 minutes)</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>3. Bannockburn Wineries Precinct</strong><br/>
                                        • <strong>Felton Road</strong> - Premium Pinot, $30 tastings, appointment only<br/>
                                        • <strong>Bannockburn Vineyards</strong> - Historic site, $20 tastings<br/>
                                        • <strong>Carrick Winery</strong> - Stunning views, restaurant, $25 tastings<br/><br/>
<strong>4. Two Paddocks</strong> - Sam Neill's winery<br/>
<em>Celebrity owner, excellent Pinot, $25 tastings</em><br/>
<span style="opacity: 0.8;">🎬 Movie memorabilia, scenic drive</span>
</div>
</div>
<!-- CROMWELL AREA (10-15 MIN) -->
<div style="background: rgba(139, 92, 246, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
<h4 style="color: #8b5cf6; margin-bottom: 0.8rem; font-size: 1rem;">🛣️ Cromwell Area (10-15 minutes)</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>5. Wooing Tree Vineyard</strong><br/>
<em>Family-owned, lake views, $20 tastings, dog-friendly</em><br/><br/>
<strong>6. Jackson Orchard</strong><br/>
<em>Fruit wines &amp; stone fruit tastings, unique experience</em><br/><br/>
<strong>7. Brennan Wines</strong><br/>
<em>Boutique producer, intimate tastings by appointment</em>
</div>
</div>
<!-- INSIDER TIPS -->
<div style="background: #fef3c7; border: 1px solid #f59e0b; padding: 1rem; border-radius: 10px; margin: 1rem 0;">
<div style="font-weight: 600; color: #92400e; margin-bottom: 0.5rem;">💡 Insider Tips from Stephen &amp; Sandy:</div>
<div style="font-size: 0.85rem; color: #92400e; line-height: 1.5;">
                                        • <strong>Best Time:</strong> 2-4pm for optimal tasting conditions<br/>
                                        • <strong>Harvest Season:</strong> March-April for special harvest experiences<br/>
                                        • <strong>Booking:</strong> Always call ahead in summer (Dec-Feb)<br/>
                                        • <strong>Designated Driver:</strong> We can recommend local wine tour companies<br/>
                                        • <strong>Purchase:</strong> Many offer delivery to your accommodation
                                    </div>
</div>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
<span style="color: var(--brand-teal); font-size: 0.9rem; font-weight: 500;">5 min read • Wine Country • Guest Tested</span>
</div>
</div>
</div>
</div>
<!-- Queenstown Day Trip Guide -->
<div class="guide-item" id="queenstown-guide" style="background: white; border-radius: 15px; margin-bottom: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); overflow: hidden; border: 1px solid #e5e7eb;">
<div class="guide-header" onclick="toggleGuide(this)" onmouseout="this.style.background='linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)'" onmouseover="this.style.background='linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%)'" style="padding: 1.8rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); user-select: none; transition: all 0.3s ease;">
<div style="flex: 1;">
<h3 style="color: #0284c7; margin: 0 0 0.5rem 0; font-size: 1.4rem; display: flex; align-items: center; gap: 0.5rem;">
<span style="font-size: 1.6rem;">🏔️</span>
                                        Queenstown Day Trip Planner
                                    </h3>
<p style="color: #6b7280; margin: 0; font-size: 0.95rem;">Experience Queenstown's thrills then return to peaceful luxury</p>
</div>
<span class="guide-arrow" style="font-size: 1.5rem; color: #0284c7; transition: transform 0.3s ease;">▼</span>
</div>
<div class="guide-content" style="max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out;">
<div style="padding: 2rem; border-top: 1px solid #e5e7eb;">
<!-- MORNING DEPARTURE -->
<div style="background: rgba(6, 182, 212, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #06b6d4;">
<h4 style="color: #06b6d4; margin-bottom: 0.8rem; font-size: 1rem;">🌅 MORNING (Leave 8-9am)</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>Drive Time:</strong> 55 minutes via SH6 (scenic route)<br/>
<strong>Fuel Stop:</strong> Cromwell (10min) - cheapest prices<br/>
<strong>Breakfast Option:</strong> Arrowtown (45min) - Fork &amp; Tap<br/>
<strong>Parking:</strong> Wilson's Parking or Remarkables Park (free)
                                    </div>
</div>
<!-- ACTIVITY OPTIONS -->
<div style="background: rgba(6, 182, 212, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
<h4 style="color: #06b6d4; margin-bottom: 0.8rem; font-size: 1rem;">⚡ ACTIVITIES (Choose 1-2)</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>🚁 MUST-DO THRILLS:</strong><br/>
                                        • <strong>AJ Hackett Bungy</strong> - Original Kawarau Bridge, $205<br/>
                                        • <strong>Shotover Jet</strong> - 360° spins, narrow canyons, $145<br/>
                                        • <strong>Skyline Gondola + Luge</strong> - Views + fun, $65-85<br/><br/>
<strong>🎆 ADRENALINE RUSH:</strong><br/>
                                        • <strong>Skydiving</strong> - Incredible views, $299-599<br/>
                                        • <strong>White Water Rafting</strong> - Shotover River, $185<br/>
                                        • <strong>Zipline</strong> - Ziptrek Ecotours, $119-179<br/><br/>
<strong>🌄 SCENIC OPTIONS:</strong><br/>
                                        • <strong>TSS Earnslaw Steamship</strong> - Historic cruise, $65<br/>
                                        • <strong>Arrowtown Historic Walk</strong> - Gold rush town, free<br/>
                                        • <strong>Queenstown Gardens</strong> - Lakefront walk, free
                                    </div>
</div>
<!-- LUNCH & AFTERNOON -->
<div style="background: rgba(6, 182, 212, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
<h4 style="color: #06b6d4; margin-bottom: 0.8rem; font-size: 1rem;">🍽️ LUNCH (12-2pm)</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>Waterfront Dining:</strong><br/>
                                        • <strong>Fishbone Bar &amp; Grill</strong> - Seafood, lake views<br/>
                                        • <strong>The Bunker</strong> - Upscale (book ahead)<br/><br/>
<strong>Casual &amp; Quick:</strong><br/>
                                        • <strong>Ferg Burger</strong> - Famous burgers (expect queues)<br/>
                                        • <strong>The Cow</strong> - Pizza &amp; pasta, local institution<br/>
                                        • <strong>Patagonia Chocolates</strong> - Ice cream &amp; treats
                                    </div>
</div>
<!-- RETURN JOURNEY -->
<div style="background: rgba(6, 182, 212, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
<h4 style="color: #06b6d4; margin-bottom: 0.8rem; font-size: 1rem;">🌆 RETURN (Leave 4-5pm)</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>Beat Traffic:</strong> Leave by 4:30pm to avoid congestion<br/>
<strong>Scenic Stop:</strong> Gibbston Valley - wine tasting<br/>
<strong>Dinner Option:</strong> Pick up takeaways for dome<br/>
<strong>Arrive Back:</strong> 6pm for spa &amp; relaxation
                                    </div>
</div>
<!-- MONEY SAVING TIPS -->
<div style="background: #fef3c7; border: 1px solid #f59e0b; padding: 1rem; border-radius: 10px; margin: 1rem 0;">
<div style="font-weight: 600; color: #92400e; margin-bottom: 0.5rem;">💰 Money-Saving Strategy:</div>
<div style="font-size: 0.85rem; color: #92400e; line-height: 1.5;">
                                        • <strong>Accommodation Savings:</strong> $200-400/night vs Queenstown hotels<br/>
                                        • <strong>Activity Combos:</strong> Book bundles for 10-20% savings<br/>
                                        • <strong>Off-Peak:</strong> Weekday activities often cheaper<br/>
                                        • <strong>Fuel:</strong> Fill up in Cromwell (cheaper than Queenstown)<br/>
                                        • <strong>Parking:</strong> Remarkables Park free + shuttle to town<br/>
                                        • <strong>Early Bird:</strong> Some activities cheaper before 10am
                                    </div>
</div>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
<span style="color: var(--brand-teal); font-size: 0.9rem; font-weight: 500;">6 min read • Day Trip • Save $200-400/night</span>
</div>
</div>
</div>
<!-- Spacing between destination guides -->
<div style="margin: 1rem 0; text-align: center; opacity: 0.3;">
<div style="height: 1px; background: linear-gradient(to right, transparent, #e5e7eb, transparent); margin: 0 auto; max-width: 200px;"></div>
</div>
<!-- Wanaka Day Trip Guide -->
<div class="guide-item" id="wanaka-guide" style="background: white; border-radius: 15px; margin-bottom: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); overflow: hidden; border: 1px solid #e5e7eb;">
<div class="guide-header" onclick="toggleGuide(this)" onmouseout="this.style.background='linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)'" onmouseover="this.style.background='linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%)'" style="padding: 1.8rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); user-select: none; transition: all 0.3s ease;">
<div style="flex: 1;">
<h3 style="color: #0ea5e9; margin: 0 0 0.5rem 0; font-size: 1.4rem; display: flex; align-items: center; gap: 0.5rem;">
<span style="font-size: 1.6rem;">🌊</span>
                                        Wanaka Day Trip Planner
                                    </h3>
<p style="color: #6b7280; margin: 0; font-size: 0.95rem;">Discover Wanaka's natural beauty and Instagram-famous spots in just 30 minutes away</p>
</div>
<span class="guide-arrow" style="font-size: 1.5rem; color: #0ea5e9; transition: transform 0.3s ease;">▼</span>
</div>
<div class="guide-content" style="max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out;">
<div style="padding: 2rem; border-top: 1px solid #e5e7eb;">
<!-- MORNING DEPARTURE -->
<div style="background: rgba(16, 185, 129, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #10b981;">
<h4 style="color: #10b981; margin-bottom: 0.8rem; font-size: 1rem;">🌅 MORNING (Leave 9-10am)</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>Drive Time:</strong> 30 minutes via Wanaka-Luggate Highway<br/>
<strong>Scenic Route:</strong> Take SH8 for vineyard views<br/>
<strong>First Stop:</strong> Wanaka i-SITE for maps &amp; current conditions<br/>
<strong>Parking:</strong> Lakefront parking (free 120min) or Ardmore Street
                                    </div>
</div>
<!-- MUST-DO ACTIVITIES -->
<div style="background: rgba(16, 185, 129, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
<h4 style="color: #10b981; margin-bottom: 0.8rem; font-size: 1rem;">📸 MUST-DO ACTIVITIES</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>🌳 THAT WANAKA TREE:</strong><br/>
                                        • <strong>Location:</strong> Lake Wanaka foreshore (10min walk from town)<br/>
                                        • <strong>Best Photos:</strong> Early morning or golden hour (6-8am or 5-7pm)<br/>
                                        • <strong>Pro Tip:</strong> Bring waders for closer shots, respect barriers<br/><br/>
<strong>🏔️ ROY'S PEAK TRACK:</strong><br/>
                                        • <strong>Difficulty:</strong> Challenging - 5-6 hours return<br/>
                                        • <strong>Start Early:</strong> 6am to avoid crowds &amp; heat<br/>
                                        • <strong>Shorter Option:</strong> Rocky Mountain track (2-3 hours)<br/><br/>
<strong>🚁 WANAKA TRANSPORT &amp; TOYS:</strong><br/>
                                        • <strong>Scenic Helicopter Flights</strong> - $299-599<br/>
                                        • <strong>Lake Cruises</strong> - Eco Adventures, $45-75<br/>
                                        • <strong>Kayak Hire</strong> - Lakeland Rentals, $35/half day
                                    </div>
</div>
<!-- DINING OPTIONS -->
<div style="background: rgba(16, 185, 129, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
<h4 style="color: #10b981; margin-bottom: 0.8rem; font-size: 1rem;">🍽️ DINING (with Lakefront Views)</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>Lunch with a View:</strong><br/>
                                        • <strong>Fisherman's Bar</strong> - Seafood, lakefront terrace, $25-40<br/>
                                        • <strong>The Lake House</strong> - Upscale, book ahead, $35-55<br/>
                                        • <strong>Kika</strong> - Modern bistro, busy but worth it, $28-45<br/><br/>
<strong>Casual &amp; Coffee:</strong><br/>
                                        • <strong>Federal Diner</strong> - American-style, great burgers, $18-28<br/>
                                        • <strong>Botswana Butchery</strong> - Steaks, special occasion, $45-75<br/>
                                        • <strong>Patagonia Chocolates</strong> - Ice cream &amp; treats, perfect for walks
                                    </div>
</div>
<!-- AFTERNOON OPTIONS -->
<div style="background: rgba(16, 185, 129, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
<h4 style="color: #10b981; margin-bottom: 0.8rem; font-size: 1rem;">🌆 AFTERNOON CHOICES</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>Active Options:</strong><br/>
                                        • <strong>Lakefront Walk</strong> - Easy 1-2 hours, sculptures &amp; cafes<br/>
                                        • <strong>Puzzling World</strong> - Quirky attraction, fun for families, $22<br/>
                                        • <strong>Wanaka Lavender Farm</strong> - Seasonal (Dec-Feb), cafe &amp; tours<br/><br/>
<strong>Relaxed Options:</strong><br/>
                                        • <strong>Local Markets</strong> - Saturday mornings (seasonal)<br/>
                                        • <strong>Gallery Browsing</strong> - Multiple local art galleries<br/>
                                        • <strong>Beer Tasting</strong> - Wanaka Beerworks, local craft brewery
                                    </div>
</div>
<!-- RETURN STRATEGY -->
<div style="background: #fef3c7; border: 1px solid #f59e0b; padding: 1rem; border-radius: 10px; margin: 1rem 0;">
<div style="font-weight: 600; color: #92400e; margin-bottom: 0.5rem;">🎆 Perfect Return Strategy:</div>
<div style="font-size: 0.85rem; color: #92400e; line-height: 1.5;">
                                        • <strong>Best Departure:</strong> 4-5pm to avoid traffic &amp; enjoy golden hour drive<br/>
                                        • <strong>Dinner Stop:</strong> Pick up Wanaka takeaways for dome dining<br/>
                                        • <strong>Photo Stop:</strong> Vineyard sunset shots on drive back<br/>
                                        • <strong>Evening Relaxation:</strong> Back by 5:30pm for spa &amp; wine<br/>
                                        • <strong>Weather Backup:</strong> Indoor activities if Roy's Peak closed<br/>
                                        • <strong>Booking Advantage:</strong> Guaranteed accommodation vs packed Wanaka
                                    </div>
</div>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
<span style="color: var(--brand-teal); font-size: 0.9rem; font-weight: 500;">5 min read • Day Trip • That Wanaka Tree</span>
</div>
</div>
</div>
</div>
<!-- Central Otago Rail Trail Guide -->
<div class="guide-item" id="cycle-guide" style="background: white; border-radius: 15px; margin-bottom: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); overflow: hidden; border: 1px solid #e5e7eb;">
<div class="guide-header" onclick="toggleGuide(this)" onmouseout="this.style.background='linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%)'" onmouseover="this.style.background='linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%)'" style="padding: 1.8rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%); user-select: none; transition: all 0.3s ease;">
<div style="flex: 1;">
<h3 style="color: #ec4899; margin: 0 0 0.5rem 0; font-size: 1.4rem; display: flex; align-items: center; gap: 0.5rem;">
<span style="font-size: 1.6rem;">🚴</span>
                                        Central Otago Rail Trail Guide
                                    </h3>
<p style="color: #6b7280; margin: 0; font-size: 0.95rem;">Your complete guide to New Zealand's most famous cycle trail, starting just 300m from your accommodation</p>
</div>
<span class="guide-arrow" style="font-size: 1.5rem; color: #ec4899; transition: transform 0.3s ease;">▼</span>
</div>
<div class="guide-content" style="max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out;">
<div style="padding: 2rem; border-top: 1px solid #e5e7eb;">
<!-- TRAIL ACCESS -->
<div style="background: rgba(236, 72, 153, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #ec4899;">
<h4 style="color: #ec4899; margin-bottom: 0.8rem; font-size: 1rem;">🏠 From Your Accommodation</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>Access Point:</strong> 300m walk to Cromwell section<br/>
<strong>Trail Surface:</strong> Sealed and gravel, suitable for all fitness levels<br/>
<strong>Bike Storage:</strong> Secure storage at property<br/>
<strong>We Provide:</strong> Trail maps, tire pump, basic tools<br/>
<strong>Bike Hire:</strong> Cromwell (10min drive) or Clyde (15min)
                                    </div>
</div>
<!-- POPULAR SECTIONS -->
<div style="background: rgba(236, 72, 153, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
<h4 style="color: #ec4899; margin-bottom: 0.8rem; font-size: 1rem;">🎯 Most Popular Sections</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
<strong>1. Cromwell to Clyde (15km)</strong> - Easy, 1-2 hours<br/>
<em>Lake views, historic gold mining sites, cafés in Clyde</em><br/><br/>
<strong>2. Clyde to Alexandra (33km)</strong> - Moderate, 2-4 hours<br/>
<em>Classic rail trail experience, Poolburn Gorge</em><br/><br/>
<strong>3. Alexandra to Omakau (20km)</strong> - Easy-moderate, 1-3 hours<br/>
<em>Rural farmland, historic railway stations</em>
</div>
</div>
<!-- WHAT TO BRING -->
<div style="background: rgba(236, 72, 153, 0.05); padding: 1.2rem; border-radius: 10px; margin: 1rem 0;">
<h4 style="color: #ec4899; margin-bottom: 0.8rem; font-size: 1rem;">🎒 Essential Items</h4>
<div style="font-size: 0.9rem; line-height: 1.6;">
                                        • <strong>Water:</strong> 2+ litres for longer sections<br/>
                                        • <strong>Sun Protection:</strong> Hat, sunglasses, sunscreen (high UV)<br/>
                                        • <strong>Snacks:</strong> Energy bars, lunch for longer rides<br/>
                                        • <strong>Layers:</strong> Weather changes quickly in Central Otago<br/>
                                        • <strong>Phone:</strong> Download offline maps, emergency contact<br/>
                                        • <strong>Cash:</strong> Some trail cafés are cash-only
                                    </div>
</div>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem;">
<span style="color: var(--brand-teal); font-size: 0.9rem; font-weight: 500;">5 min read • Cycling Guide • Local Access</span>
</div>
</div>
</div>
</div>
</div>
</div>
</div></section>
</div>
<!-- Reviews Page -->
<div class="page" id="reviewsPage">
<section class="hero">
<div class="container">
<div class="hero-content">
<h1>4.9 Stars • 127 Stories • 45% Return Rate</h1>
<div class="tagline">Airbnb • Booking.com • Direct Bookings • All Platforms</div>
<p>Read why guests choose Lakeside Retreat again and again. From first-time visitors amazed by our commercial-grade solar innovation to returning families who've made this their annual tradition. Every review tells the story of sustainable luxury that doesn't compromise on comfort.</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 2rem; margin: 2rem 0; background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
<div style="text-align: center;">
<div style="font-size: 2.5rem; font-weight: 700; color: var(--brand-teal);">98%</div>
<div style="font-size: 0.9rem; opacity: 0.8;">Would Recommend</div>
</div>
<div style="text-align: center;">
<div style="font-size: 2.5rem; font-weight: 700; color: var(--brand-teal);">45%</div>
<div style="font-size: 0.9rem; opacity: 0.8;">Return Guests</div>
</div>
<div style="text-align: center;">
<div style="font-size: 2.5rem; font-weight: 700; color: var(--brand-teal);">127</div>
<div style="font-size: 0.9rem; opacity: 0.8;">Verified Reviews</div>
</div>
<div style="text-align: center;">
<div style="font-size: 2.5rem; font-weight: 700; color: var(--brand-teal);">16.72kW</div>
<div style="font-size: 0.9rem; opacity: 0.8;">Solar System</div>
</div>
</div>
</div>
</div>
</section>
<section class="section">
<div class="container">
<!-- Review Statistics -->
<div style="background: white; border-radius: 20px; padding: 2rem; box-shadow: var(--shadow); margin-bottom: 3rem;">
<div class="stats" style="margin: 0;">
<div class="stat">
<div class="stat-number">4.9</div>
<div class="stat-label">Average Rating</div>
</div>
<div class="stat">
<div class="stat-number">127</div>
<div class="stat-label">Reviews</div>
</div>
<div class="stat">
<div class="stat-number">98%</div>
<div class="stat-label">Would Recommend</div>
</div>
<div class="stat">
<div class="stat-number">45%</div>
<div class="stat-label">Return Guests</div>
</div>
</div>
<!-- Platform Verification Badges -->
<div style="text-align: center; margin-top: 2rem; padding-top: 2rem; border-top: 1px solid var(--border);">
<p style="margin-bottom: 1rem; color: var(--text); opacity: 0.8;">Also verified on:</p>
<div style="display: flex; justify-content: center; gap: 2rem; flex-wrap: wrap;">
<a href="#" style="display: flex; align-items: center; gap: 0.5rem; color: var(--brand-teal); text-decoration: none; font-weight: 500;">
<span style="background: #ff5a5f; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.8rem;">Airbnb</span>
                                    4.9/5.0 (67 reviews)
                                </a>
<a href="#" style="display: flex; align-items: center; gap: 0.5rem; color: var(--brand-teal); text-decoration: none; font-weight: 500;">
<span style="background: #003580; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.8rem;">Booking.com</span>
                                    9.8/10 (60 reviews)
                                </a>
</div>
</div>
</div>
<!-- Guest Reviews -->
<div class="grid grid-2" id="reviewsContainer">
<div class="card">
<div class="card-content">
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
<div style="display: flex; align-items: center;">
<span style="color: #fbbf24;">★★★★★</span>
<span style="margin-left: 0.5rem; font-weight: 600; color: var(--brand-teal);">5.0</span>
</div>
</div>
<h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">Commercial-Grade System Impressive</h4>
<p class="card-text">"Stephen and Sandy have created something truly special here. The dome was immaculate, their 16kW commercial-grade solar system with real-time monitoring is incredibly impressive, and waking up to Lake Dunstan views was magical. We'll definitely be back!"</p>
<div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
<div style="width: 40px; height: 40px; border-radius: 50%; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">M</div>
<div>
<div style="font-weight: 600;">Michael R.</div>
<div style="font-size: 0.9rem; opacity: 0.7;">Auckland, New Zealand • March 2024</div>
</div>
</div>
</div>
</div>
<div class="card">
<div class="card-content">
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
<div style="display: flex; align-items: center;">
<span style="color: #fbbf24;">★★★★★</span>
<span style="margin-left: 0.5rem; font-weight: 600; color: var(--brand-teal);">5.0</span>
</div>
</div>
<h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">Sustainable Luxury Excellence</h4>
<p class="card-text">"The cottage was perfect for our family of four. Kids loved having direct access to the lake, and we appreciated the advanced renewable energy approach. The commercial-grade hybrid system generating way more power than they use is incredibly sophisticated."</p>
<div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
<div style="width: 40px; height: 40px; border-radius: 50%; background: var(--secondary); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">K</div>
<div>
<div style="font-weight: 600;">Kelly T.</div>
<div style="font-size: 0.9rem; opacity: 0.7;">Melbourne, Australia • February 2024</div>
</div>
</div>
</div>
</div>
<div class="card">
<div class="card-content">
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
<div style="display: flex; align-items: center;">
<span style="color: #fbbf24;">★★★★★</span>
<span style="margin-left: 0.5rem; font-weight: 600; color: var(--brand-teal);">5.0</span>
</div>
</div>
<h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">Energy Innovation Fascinating</h4>
<p class="card-text">"Dome Rosé was absolutely perfect for our anniversary. The attention to detail, sunset views, and champagne welcome made it unforgettable. Sandy's technical explanation of their 38-panel solar array was fascinating. Highly recommend for couples!"</p>
<div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
<div style="width: 40px; height: 40px; border-radius: 50%; background: #be185d; color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">L</div>
<div>
<div style="font-weight: 600;">Lisa &amp; James D.</div>
<div style="font-size: 0.9rem; opacity: 0.7;">Christchurch, New Zealand • January 2024</div>
</div>
</div>
</div>
</div>
<div class="card">
<div class="card-content">
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
<div style="display: flex; align-items: center;">
<span style="color: #fbbf24;">★★★★★</span>
<span style="margin-left: 0.5rem; font-weight: 600; color: var(--brand-teal);">5.0</span>
</div>
</div>
<h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">Tech Innovation Done Right</h4>
<p class="card-text">"As someone passionate about renewable technology, I was thrilled to find luxury accommodation that's genuinely energy-positive with commercial-grade equipment. The education about their Signergy battery management system was fascinating. Luxury with zero environmental guilt."</p>
<div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
<div style="width: 40px; height: 40px; border-radius: 50%; background: #047857; color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">A</div>
<div>
<div style="font-weight: 600;">Alex P.</div>
<div style="font-size: 0.9rem; opacity: 0.7;">Wellington, New Zealand • December 2023</div>
</div>
</div>
</div>
</div>
<div class="card">
<div class="card-content">
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
<div style="display: flex; align-items: center;">
<span style="color: #fbbf24;">★★★★★</span>
<span style="margin-left: 0.5rem; font-weight: 600; color: var(--brand-teal);">5.0</span>
</div>
</div>
<h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">Advanced Energy Paradise</h4>
<p class="card-text">"The location for cycling is unbeatable - step out the door and you're on the trail. After a day exploring Central Otago, coming back to their energy-positive accommodation with live monitoring dashboard was perfect. Stephen's energy system tour was incredibly educational."</p>
<div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
<div style="width: 40px; height: 40px; border-radius: 50%; background: #1d4ed8; color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">D</div>
<div>
<div style="font-weight: 600;">David M.</div>
<div style="font-size: 0.9rem; opacity: 0.7;">Sydney, Australia • November 2023</div>
</div>
</div>
</div>
</div>
<div class="card">
<div class="card-content">
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
<div style="display: flex; align-items: center;">
<span style="color: #fbbf24;">★★★★★</span>
<span style="margin-left: 0.5rem; font-weight: 600; color: var(--brand-teal);">5.0</span>
</div>
</div>
<h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">Third Time Visitors</h4>
<p class="card-text">"This was our third stay and it just keeps getting better. Stephen and Sandy's hospitality is unmatched, and we love supporting their advanced sustainable approach. Watching their energy dashboard show they're contributing to the grid while we enjoy luxury is amazing. Already booked for next year!"</p>
<div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">
<div style="width: 40px; height: 40px; border-radius: 50%; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">C</div>
<div>
<div style="font-weight: 600;">Claire &amp; Rob S.</div>
<div style="font-size: 0.9rem; opacity: 0.7;">Auckland, New Zealand • October 2023</div>
</div>
</div>
</div>
</div>
</div>
<!-- Load More Reviews Button -->
<div style="text-align: center; margin-top: 3rem;">
<button class="btn btn-outline" onclick="loadMoreReviews()">Load More Reviews</button>
</div>
</div>
</section>
</div>
<!-- Story Page -->
<div class="page" id="storyPage">
<section class="hero">
<div class="container">
<div class="hero-content">
<h1>From Wrong Turn to Grid-Tied Energy Pioneers</h1>
<div class="tagline">April 2019 • One Accidental Discovery • Five Years Perfecting Reliable Energy Innovation</div>
<p>Wellington I.T. professionals Stephen &amp; Sandy took the wrong turn on Smiths Way in 2019. Three hours later, sitting by Lake Dunstan surrounded by established Pinot Noir vines, they knew they'd found something extraordinary. Five years later, their "wrong turn" has become New Zealand's most innovative grid-tied renewable energy accommodation experience.</p>
<div style="background: rgba(45, 90, 90, 0.05); padding: 2rem; border-radius: 15px; margin: 2rem 0; max-width: 700px; margin-left: auto; margin-right: auto;">
<div style="text-align: center; font-style: italic; font-size: 1.1rem; line-height: 1.7; color: var(--text);">
                                "We sat on that lake shore for three hours, just talking about what if. What if we could wake up to this view every day? What if we could create something genuinely sustainable here using grid-tied technology that never compromises on reliability? What if that wrong turn was actually the right turn all along?"
                            </div>
<div style="text-align: center; margin-top: 1rem; font-weight: 600; color: var(--brand-teal);">
                                — Stephen &amp; Sandy, Grid-Tied Energy Innovators
                            </div>
</div>
</div>
</div>
</section>
<section class="section">
<div class="container" style="max-width: 800px;">
<div class="card">
<div class="card-content">
<div style="text-align: center; margin-bottom: 2rem;">
<h2 style="font-family: 'Playfair Display', serif; color: var(--brand-teal); margin-bottom: 0.5rem;">Stephen &amp; Sandy</h2>
<p style="font-style: italic; color: var(--text); opacity: 0.8;">Your Energy Technology Expert Hosts at Lakeside Retreat</p>
</div>
<h3 style="font-family: 'Playfair Display', serif; color: var(--brand-teal); margin-top: 2rem; margin-bottom: 1rem;">The Wrong Turn That Changed Everything</h3>
<p style="line-height: 1.8;">It was April 2019, and we were utterly exhausted. Sandy was working in I.T. in Wellington, and Stephen had spent years in retail. We desperately needed a weekend away from the city, so we loaded up the car and headed for Central Otago, thinking we'd find a nice hotel and do some wine tasting.</p>
<p style="line-height: 1.8;">That's when we took the wrong turn on Smiths Way.</p>
<p style="line-height: 1.8;">Instead of reaching our planned accommodation, we found ourselves pulling over at what can only be described as the most beautiful lakefront vineyard we'd ever seen. Five hectares of established Pinot Noir vines rolling down to the shores of Lake Dunstan, with the Remarkables rising majestically in the distance. There was a small 'For Sale' sign barely visible amongst the vines.</p>
<blockquote style="border-left: 4px solid var(--brand-teal); padding-left: 1.5rem; margin: 2rem 0; font-style: italic; color: var(--text); opacity: 0.9;">
                                "We sat on that lake shore for three hours, just talking about what if. What if we could wake up to this view every day? What if we could create something genuinely sustainable here using our technical backgrounds?"
                            </blockquote>
<h3 style="font-family: 'Playfair Display', serif; color: var(--brand-teal); margin-top: 2rem; margin-bottom: 1rem;">Taking the Leap Into Energy Innovation</h3>
<p style="line-height: 1.8;">Six months later, we owned 96 Smiths Way. It wasn't a rational decision by any measure. Sandy continued her I.T. work remotely, whilst Stephen left retail to focus on transforming this stunning vineyard into something extraordinary.</p>
<p style="line-height: 1.8;">We found the perfect solution for the vineyard: leasing it to experienced local wine growers who understand this terroir. This allows the vines to continue producing exceptional fruit under expert care, whilst we focus entirely on creating unforgettable renewable energy experiences for our guests.</p>
<p style="line-height: 1.8;">The sustainable approach wasn't just marketing – it was personal mission. Sandy's I.T. background proved invaluable for designing our commercial-grade solar systems, whilst Stephen's retail experience meant he understood exactly what guests would want from their stay.</p>
<h3 style="font-family: 'Playfair Display', serif; color: var(--brand-teal); margin-top: 2rem; margin-bottom: 1rem;">Building Our 16.72kW Commercial-Grade System</h3>
<p style="line-height: 1.8;">The commercial-grade solar installation was our biggest challenge and greatest achievement. We spent months researching, calculating angles, and learning about hybrid inverter systems. Sandy approached it like debugging complex I.T. infrastructure, whilst Stephen focused on ensuring our guests would never notice any compromise in comfort.</p>
<blockquote style="border-left: 4px solid var(--brand-teal); padding-left: 1.5rem; margin: 2rem 0; font-style: italic; color: var(--text); opacity: 0.9;">
                                "The day our 38 x 440W Helios panels went live and we achieved 16.72kW commercial-grade capacity was more satisfying than any I.T. system I'd ever optimised."
                            </blockquote>
<p style="line-height: 1.8;">Our first guest review mentioned the 'rustic charm' of having no hot water. We learned quickly that commercial-grade solar systems need sophisticated backup plans – and that YouTube University only gets you so far. That's when we invested in our 16kWh Signergy battery storage and 20kW hybrid inverter system.</p>
<h3 style="font-family: 'Playfair Display', serif; color: var(--brand-teal); margin-top: 2rem; margin-bottom: 1rem;">From I.T. Professional to Energy Designer</h3>
<p style="line-height: 1.8;">Sandy's technical journey from I.T. to renewable energy system design has been remarkable. The skills transferred perfectly – both require systematic thinking, troubleshooting complex problems, and ensuring reliable 24/7 operation. Our Signergy Energy Gateway monitoring system provides real-time data that would make any I.T. professional proud.</p>
<p style="line-height: 1.8;">Each accommodation tells a different story. Stephen designed Dome Pinot as the flagship experience – the views from the bed encompass the entire lake and surrounding mountains. The engineering challenge of creating panoramic windows whilst maintaining energy efficiency with our advanced heating and cooling systems kept us both awake for weeks.</p>
<p style="line-height: 1.8;">Dome Rosé became our romantic retreat. Sandy's idea to include the saltwater spa proved inspired – watching couples relax whilst enjoying sunset over Central Otago, all powered by clean energy, never gets old.</p>
<p style="line-height: 1.8;">The Lakeside Cottage was Sandy's solution for families. Direct lake access, complete cooking facilities with outdoor BBQ, and space for six people, all without compromising our energy-positive capability. The private spa overlooking the vineyard has become the most photographed spot on the property.</p>
<h3 style="font-family: 'Playfair Display', serif; color: var(--brand-teal); margin-top: 2rem; margin-bottom: 1rem;">Why We Share Our Energy Innovation</h3>
<p style="line-height: 1.8;">Every guest who chooses Lakeside Retreat is supporting our experiment in commercial-grade sustainable luxury. You're proving that travellers care about environmental impact whilst still expecting exceptional experiences. Our real-time monitoring dashboard shows guests exactly how much clean energy we're generating and contributing to New Zealand's grid.</p>
<p style="line-height: 1.8;">Sandy continues her I.T. work remotely, bringing her technical expertise to optimising our energy management systems. Stephen has found his calling in hospitality – his favourite part of each day is showing guests our energy monitoring dashboard and seeing their amazement when they realise they're staying at an energy-positive accommodation.</p>
<blockquote style="border-left: 4px solid var(--brand-teal); padding-left: 1.5rem; margin: 2rem 0; font-style: italic; color: var(--text); opacity: 0.9;">
                                "We're not just offering accommodation – we're sharing our experiment in commercial-grade sustainable living. Every guest becomes part of our renewable energy story."
                            </blockquote>
<h3 style="font-family: 'Playfair Display', serif; color: var(--brand-teal); margin-top: 2rem; margin-bottom: 1rem;">Today and Tomorrow</h3>
<p style="line-height: 1.8;">Five years later, we're still pinching ourselves. We wake up to Lake Dunstan literally at our doorstep every morning. Our 16.72kW solar system now produces more power than we use daily, contributing excess energy to New Zealand's renewable grid. The established vineyard continues to produce beautiful Pinot Noir grapes that our wine-growing partners transform into exceptional bottles.</p>
<p style="line-height: 1.8;">Most importantly, we've learned that luxury and commercial-grade sustainability aren't contradictory – they're complementary. Our guests consistently tell us that knowing their stay is not only carbon-neutral but actually energy-positive enhances their relaxation. Watching our real-time energy dashboard show we're contributing to the grid while they enjoy five-star comfort gives them a sense of purpose.</p>
<p style="line-height: 1.8;">When you stay with us, you're not just booking accommodation. You're joining our ongoing experiment in proving that commercial-grade renewable energy can power absolutely extraordinary hospitality experiences. You're supporting local wine growers who understand this special terroir. And you're experiencing Central Otago from one of its most magical vantage points, all while contributing to New Zealand's renewable energy future.</p>
<p style="line-height: 1.8; font-weight: 600; color: var(--brand-teal);">Come and be part of our energy-positive story.</p>
<div style="text-align: center; margin-top: 3rem; padding-top: 2rem; border-top: 1px solid var(--border);">
<p style="font-weight: 600; color: var(--brand-teal); margin-bottom: 0.5rem;">Stephen &amp; Sandy</p>
<p style="font-style: italic; color: var(--text); opacity: 0.8; margin-bottom: 0;">Renewable Energy Technology Experts &amp; Founders, Lakeside Retreat</p>
<p style="font-size: 0.9rem; color: var(--text); opacity: 0.7;">96 Smiths Way, Mount Pisa • 16.72kW Solar Array • 16kWh Battery Storage</p>
</div>
</div>
</div>
</div>
</section>
</div>
<!-- Explore Page -->
<div class="page" id="explorePage">
<section class="hero">
<div class="container">
<div class="hero-content">
<h1>Adventure Starts at Your Energy-Positive Doorstep</h1>
<div class="tagline">300m to Cycle Trail • Wine Country Centre • Five Ski Fields Within Range</div>
<p>Step from commercial-grade solar-powered luxury directly onto the Lake Dunstan Trail. Cycle to world-class wineries, hike dramatic alpine routes, or use our peaceful energy-positive vineyard as your base for Queenstown day trips. Central Otago's adventure playground surrounds you—we're perfectly positioned for it all, with zero environmental impact.</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin: 2rem 0;">
<div onclick="scrollToSection('cycling-section')" onmouseout="this.style.transform='translateY(0)'" onmouseover="this.style.transform='translateY(-5px)'" style="background: white; padding: 1.5rem; border-radius: 15px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.2s ease;">
<div style="font-size: 2rem; margin-bottom: 0.5rem;">🚴</div>
<div style="font-weight: 600; color: var(--brand-teal);">300 metres</div>
<div style="font-size: 0.9rem;">to Lake Dunstan Trail</div>
</div>
<div onclick="scrollToSection('wine-section')" onmouseout="this.style.transform='translateY(0)'" onmouseover="this.style.transform='translateY(-5px)'" style="background: white; padding: 1.5rem; border-radius: 15px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.2s ease;">
<div style="font-size: 2rem; margin-bottom: 0.5rem;">🍷</div>
<div style="font-weight: 600; color: var(--brand-teal);">15+ wineries</div>
<div style="font-size: 0.9rem;">within 15km radius</div>
</div>
<div onclick="scrollToSection('adventure-section')" onmouseout="this.style.transform='translateY(0)'" onmouseover="this.style.transform='translateY(-5px)'" style="background: white; padding: 1.5rem; border-radius: 15px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.2s ease;">
<div style="font-size: 2rem; margin-bottom: 0.5rem;">🏔️</div>
<div style="font-weight: 600; color: var(--brand-teal);">55 minutes</div>
<div style="font-size: 0.9rem;">to Queenstown adventures</div>
</div>
<div onclick="openBookingModal()" onmouseout="this.style.transform='translateY(0)'" onmouseover="this.style.transform='translateY(-5px)'" style="background: white; padding: 1.5rem; border-radius: 15px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.2s ease;">
<div style="font-size: 2rem; margin-bottom: 0.5rem;">⚡</div>
<div style="font-weight: 600; color: var(--brand-teal);">16.72kW</div>
<div style="font-size: 0.9rem;">energy-positive base</div>
</div>
</div>
</div>
</div>
</section>
<section class="section">
<div class="container">
<div class="grid grid-2">
<div class="card" id="cycling-section">
<div class="card-content">
<h3 class="card-title">🚴 Cycle the Lake Dunstan Trail</h3>
<p class="card-text">Step directly from our energy-positive property onto the historic Cromwell-Clyde Trail. This flat, family-friendly route follows the lake shore with stunning mountain views.</p>
<div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">300m from property • <a href="#" onclick="showPage('blog'); return false;" style="color: var(--brand-teal); text-decoration: none;">→ Get cycling guide</a></div>
</div>
</div>
<div class="card" id="wine-section">
<div class="card-content">
<h3 class="card-title">🍷 Wine Country Location</h3>
<p class="card-text">You're in the heart of Central Otago wine country, famous for world-class Pinot Noir. Multiple award-winning cellar doors within 15 minutes of your accommodation.</p>
<div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;"><a href="#" onclick="showPage('blog'); return false;" style="color: var(--brand-teal); text-decoration: none;">→ Get detailed winery guide</a></div>
</div>
</div>
<div class="card">
<div class="card-content">
<h3 class="card-title">🥾 Hiking &amp; Walking</h3>
<p class="card-text">Explore dramatic landscapes from gentle lake walks to challenging alpine hikes. The Pisa Range and Crown Range offer spectacular views and photography opportunities.</p>
<div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">Various difficulty levels available</div>
</div>
</div>
<div class="card">
<div class="card-content">
<h3 class="card-title">🏊 Lake Activities</h3>
<p class="card-text">Lake Dunstan offers swimming, kayaking, and fishing. Our cottage guests have direct lake access, whilst dome guests can easily reach the shore from our solar-powered sanctuary.</p>
<div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">Direct lake access from cottage</div>
</div>
</div>
<div class="card">
<div class="card-content">
<h3 class="card-title">🏎️ Highlands Motorsport Park</h3>
<p class="card-text">Experience world-class motorsport facilities with driving experiences, karting, and events. Perfect for car enthusiasts and adrenaline seekers looking for something unique.</p>
<div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">Short drive from property</div>
</div>
</div>
<div class="card">
<div class="card-content">
<h3 class="card-title">⛷️ Winter Ski Fields</h3>
<p class="card-text">Five fantastic ski fields within comfortable driving distance: Coronet Peak, The Remarkables, Cardrona, Treble Cone, and Snow Park. From beginner slopes to expert terrain.</p>
<div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">45-90 minutes drive • June-September</div>
</div>
</div>
<div class="card">
<div class="card-content">
<h3 class="card-title">🏘️ Cromwell Town</h3>
<p class="card-text">Historic Cromwell offers cafes, restaurants, boutique shopping, and the famous fruit stalls. Perfect for stocking up on local produce and artisan goods.</p>
<div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">12km to town centre</div>
</div>
</div>
<div class="card">
<div class="card-content">
<h3 class="card-title">🏔️ Strategic Location</h3>
<p class="card-text">Perfectly positioned between Queenstown (55min) and Wanaka (30min). Experience the best of both adventure destinations while staying in peaceful wine country.</p>
<div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;"><a href="#" onclick="showPage('blog'); return false;" style="color: var(--brand-teal); text-decoration: none;">→ Get detailed day trip planners</a></div>
</div>
</div>
<div class="card">
<div class="card-content">
<h3 class="card-title">🌊 Lake Access</h3>
<p class="card-text">Direct access to Lake Dunstan from your accommodation, plus easy reach to Lake Wanaka. Enjoy water activities, photography, and peaceful lake experiences.</p>
<div style="color: var(--brand-teal); font-weight: 600; margin-top: 1rem;">Direct lake access • Multiple lakes nearby</div>
</div>
</div>
</div>
<div style="text-align: center; margin-top: 3rem;">
<div class="card" style="max-width: 600px; margin: 0 auto;">
<div class="card-content">
<h3 class="card-title">Planning Your Energy-Positive Central Otago Adventure?</h3>
<p class="card-text">We're happy to help you plan the perfect itinerary based on your interests and the season of your visit. Plus, we love sharing insights about renewable energy technology!</p>
<a class="btn btn-primary" href="#" onclick="showPage('contact'); return false;">Get Local &amp; Tech Recommendations</a>
</div>
</div>
</div>
</div>
</section>
</div>
<!-- Contact Page -->
<div class="page" id="contactPage">
<section class="hero">
<div class="container">
<div class="hero-content">
<h1>Connect with Stephen &amp; Sandy</h1>
<div class="tagline">Personal Service • Local Knowledge • Energy Technology Expertise</div>
<p>Planning your Central Otago escape? Have questions about our commercial-grade solar systems? Need recommendations for wine tastings or cycle routes? As your onsite energy technology expert hosts, we're here to ensure your stay exceeds every expectation. Real people, real responses, real local and renewable energy expertise.</p>
<div style="background: rgba(45, 90, 90, 0.05); padding: 2rem; border-radius: 15px; margin: 2rem 0; max-width: 600px; margin-left: auto; margin-right: auto;">
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; text-align: left;">
<div>
<div style="font-weight: 600; color: var(--brand-teal); margin-bottom: 0.5rem;">Quick Response Guarantee</div>
<div style="font-size: 0.95rem; color: var(--text); opacity: 1;">📧 Email replies within 4 hours<br/>📱 Phone availability 8am-8pm<br/>💬 WhatsApp for instant queries</div>
</div>
<div>
<div style="font-weight: 600; color: var(--brand-teal); margin-bottom: 0.5rem;">We Love Helping With:</div>
<div style="font-size: 0.95rem; color: var(--text); opacity: 1;">🗓️ Activity planning &amp; bookings<br/>🍷 Winery recommendations<br/>🔋 Energy system tours &amp; tech talks<br/>🚴 Cycle route mapping</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="section">
<div class="container" style="max-width: 800px;">
<div class="grid grid-2">
<div class="card">
<div class="card-content">
<h3 class="card-title">Get in Touch</h3>
<!-- Contact Methods -->
<div style="margin-bottom: 1.5rem;">
<div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">📧 <strong>Email:</strong> info@lakesideretreat.co.nz</div>
<div style="font-size: 0.85rem; color: var(--text); opacity: 0.8; margin-left: 1.5rem;">Best for: Bookings, detailed questions, special requests</div>
</div>
<div style="margin-bottom: 1.5rem;">
<div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">📱 <strong>Phone/WhatsApp:</strong> 021 368 682 | 021 870 018</div>
<div style="font-size: 0.85rem; color: var(--text); opacity: 0.8; margin-left: 1.5rem;">Best for: Urgent queries, local recommendations, same-day bookings</div>
<div style="font-size: 0.85rem; color: var(--text); opacity: 0.8; margin-left: 1.5rem;"><strong>International:</strong> +64 21 368 682 | +64 21 870 018</div>
</div>
<div style="margin-bottom: 1.5rem;">
<div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">📍 <strong>Address:</strong></div>
<div style="margin-left: 1.5rem; line-height: 1.4;">96 Smiths Way, Mount Pisa<br/>Cromwell, Otago 9310<br/>New Zealand</div>
</div>
<div style="background: #fee2e2; border: 1px solid #fca5a5; border-radius: 8px; padding: 1rem; margin-bottom: 1.5rem;">
<div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; color: #dc2626; font-weight: 600;">🚨 <strong>Emergency Contact</strong></div>
<div style="font-size: 0.9rem; color: #991b1b; margin-left: 1.5rem;">
<strong>24/7 Emergency:</strong> 021 368 682<br/>
<strong>Police/Fire/Ambulance:</strong> 111<br/>
<strong>Property Location:</strong> GPS: -45.0446, 169.0836
                                    </div>
</div>
</div>
</div>
<div class="card">
<div class="card-content">
<h3 class="card-title">Send us a Message</h3>
<form id="contactForm" onsubmit="sendContactMessage(event)">
<div class="form-group">
<input class="form-input" id="contactName" placeholder="Your Name" required="" type="text"/>
</div>
<div class="form-group">
<input class="form-input" id="contactEmail" onblur="validateEmail(this)" oninput="clearEmailError(this)" placeholder="Your Email" required="" type="email"/>
<div class="email-error-message" id="contactEmailError" style="display: none; color: #dc2626; font-size: 0.85rem; margin-top: 0.25rem;"></div>
</div>
<div class="form-group">
<textarea class="form-textarea" id="contactMessage" placeholder="Your Message" required="" rows="4"></textarea>
</div>
<button class="btn btn-primary" id="contactSubmitBtn" type="submit">Send Message</button>
<div id="contactFormStatus" style="margin-top: 1rem; display: none;"></div>
</form>
</div>
</div>
</div>
</div>
</section>
</div>
</main>
<!-- Enhanced Footer with Advanced Internal Linking -->
<footer class="footer">
<a href="https://wa.me/6421368682?text=Hi Stephen &amp; Sandy! I have a question about booking Lakeside Retreat." onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 20px rgba(0,0,0,0.2)'" style="
                        background: white;
                        color: #25D366;
                        padding: 12px 24px;
                        border-radius: 25px;
                        text-decoration: none;
                        font-weight: 600;
                        display: inline-flex;
                        align-items: center;
                        gap: 8px;
                        transition: all 0.3s ease;
                        font-size: 0.95rem;
                    " target="_blank" rel="noopener noreferrer">
                        💬 WhatsApp Stephen &amp; Sandy
                    </a>



<div class="container">
<div class="footer-content">
<!-- Company Info -->
<div class="footer-section">
<h3>Lakeside Retreat Central Otago</h3>
<p>New Zealand's premier solar-powered luxury glamping accommodation on beautiful Lake Dunstan featuring commercial-grade solar array and batteries storage.</p>
<div style="margin-top: 1rem;">
<a href="https://facebook.com/lakesideretreatnz" target="_blank" rel="noopener noreferrer" style="margin-right: 1rem; color: rgba(255, 255, 255, 0.8);">Facebook</a>
<a href="https://instagram.com/lakesideretreatnz" target="_blank" rel="noopener noreferrer" style="margin-right: 1rem; color: rgba(255, 255, 255, 0.8);">Instagram</a>
<a href="mailto:info@lakesideretreat.co.nz" style="color: rgba(255, 255, 255, 0.8);">Email</a>
</div>
</div>
<!-- Accommodation Links -->
<div class="footer-section">
<h3>Accommodation</h3>
<a href="#" onclick="showPage('stay'); return false;">Solar-Powered Eco Domes</a>
<a href="#" onclick="showPage('stay'); return false;">Central Otago Glamping</a>
<a href="#" onclick="showPage('stay'); return false;">Lake Dunstan Accommodation</a>
<a href="#" onclick="showPage('stay'); return false;">Cromwell Luxury Lodging</a>
<a href="#" onclick="showPage('stay'); return false;">Sustainable Accommodation</a>
<a href="#" onclick="showPage('stay'); return false;">Wine Country Stays</a>
</div>
<!-- Activities & Local -->
<div class="footer-section">
<h3>Central Otago Experiences</h3>
<a href="#" onclick="showPage('explore'); return false;">Otago Rail Trail Cycling</a>
<a href="#" onclick="showPage('explore'); return false;">Wine Tours &amp; Tastings</a>
<a href="#" onclick="showPage('explore'); return false;">Lake Dunstan Activities</a>
<a href="#" onclick="showPage('explore'); return false;">Cromwell Attractions</a>
<a href="#" onclick="showPage('explore'); return false;">Gibbston Valley Tours</a>
<a href="#" onclick="showPage('explore'); return false;">Premium Winery Visits</a>
</div>
<!-- Legal Information -->
<div class="footer-section">
<h3>Legal Information</h3>
<button aria-controls="footerFaqContent" aria-expanded="false" id="faqToggleBtn" onclick="toggleFooterFAQ()" onmouseout="this.style.color='rgba(255, 255, 255, 0.8)'" onmouseover="this.style.color='white'" role="button" style="
                        background: transparent;
                        border: none;
                        color: rgba(255, 255, 255, 0.8);
                        font-size: inherit;
                        text-decoration: none;
                        cursor: pointer;
                        padding: 0;
                        text-align: left;
                        display: flex;
                        align-items: center;
                        gap: 0.5rem;
                        margin-bottom: 0.5rem;
                        transition: color 0.3s ease;
                    " tabindex="0">
<span id="faqBtnText">Frequently Asked Questions</span>
<span id="faqBtnArrow" style="transition: transform 0.3s ease; font-size: 0.8rem;">▼</span>
</button>
<a href="#" onclick="showLegalPage('terms')">Terms &amp; Conditions</a>
<a href="#" onclick="showLegalPage('privacy')">Privacy Policy</a>
<a href="#" onclick="showLegalPage('booking')">Booking Policy</a>
<a href="#" onclick="showLegalPage('cancellation')">Cancellation Policy</a>
<a href="#" onclick="showLegalPage('safety')">Health &amp; Safety</a>
<a href="#" onclick="showLegalPage('accessibility')">Accessibility</a>
</div>
</div>
<!-- Collapsible FAQ Content -->
<div aria-hidden="true" aria-labelledby="faqToggleBtn" id="footerFaqContent" role="region" style="
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.5s ease, opacity 0.3s ease;
                opacity: 0;
                margin-top: 1rem;
            ">
<div style="max-width: 800px; margin: 0 auto;">
<!-- FAQ Item 1 -->
<div class="faq-item" style="background: white; border-radius: 12px; margin-bottom: 1rem; box-shadow: 0 4px 6px rgba(0,0,0,0.05); overflow: hidden;">
<div class="faq-question" onclick="toggleFAQ(this)" style="padding: 1.5rem; cursor: pointer; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; font-weight: 600; color: var(--brand-teal); user-select: none;">
<span>What's included in my stay?</span>
<span class="faq-arrow" style="font-size: 1.2rem; transition: transform 0.3s ease;">▼</span>
</div>
<div class="faq-answer" style="padding: 0; max-height: 0; overflow: hidden; transition: all 0.3s ease;">
<div style="padding: 1.5rem; border-top: 1px solid #f0f0f0; color: var(--text); line-height: 1.6;">
<strong>Dome guests receive:</strong> Continental breakfast, private spa access, stovetop cooking &amp; Weber BBQ, 55" OLED TV, air conditioning, free WiFi, and parking.<br/><br/>
<strong>Cottage guests receive:</strong> Complete cooking facilities with outdoor BBQ, wood-fired hot tub, garage parking, washing machine, pet-friendly accommodation, and direct lake access.<br/><br/>
<strong>All guests enjoy:</strong> Access to 16.72kW solar system tours, cycle trail maps, local winery recommendations, and Stephen &amp; Sandy's personal hosting.
                            </div>
</div>
</div>
<!-- FAQ Item 2 -->
<div class="faq-item" style="background: white; border-radius: 12px; margin-bottom: 1rem; box-shadow: 0 4px 6px rgba(0,0,0,0.05); overflow: hidden;">
<div class="faq-question" onclick="toggleFAQ(this)" style="padding: 1.5rem; cursor: pointer; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; font-weight: 600; color: var(--brand-teal); user-select: none;">
<span>How close are the nearest wineries?</span>
<span class="faq-arrow" style="font-size: 1.2rem; transition: transform 0.3s ease;">▼</span>
</div>
<div class="faq-answer" style="padding: 0; max-height: 0; overflow: hidden; transition: all 0.3s ease;">
<div style="padding: 1.5rem; border-top: 1px solid #f0f0f0; color: var(--text); line-height: 1.6;">
<strong>Walking distance:</strong> Rippon Vineyard (5min walk), Mt Difficulty (8min walk)<br/>
<strong>Short drive:</strong> Gibbston Valley (15min), Chard Farm (20min), Peregrine (25min)<br/>
<strong>Wine tour operators:</strong> We can arrange private tours or recommend local operators<br/><br/>
                                Perfect for wine enthusiasts - you're literally in the heart of Central Otago's premium wine region!
                            </div>
</div>
</div>
<!-- FAQ Item 3 -->
<div class="faq-item" style="background: white; border-radius: 12px; margin-bottom: 1rem; box-shadow: 0 4px 6px rgba(0,0,0,0.05); overflow: hidden;">
<div class="faq-question" onclick="toggleFAQ(this)" style="padding: 1.5rem; cursor: pointer; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; font-weight: 600; color: var(--brand-teal); user-select: none;">
<span>What are your check-in and check-out times?</span>
<span class="faq-arrow" style="font-size: 1.2rem; transition: transform 0.3s ease;">▼</span>
</div>
<div class="faq-answer" style="padding: 0; max-height: 0; overflow: hidden; transition: all 0.3s ease;">
<div style="padding: 1.5rem; border-top: 1px solid #f0f0f0; color: var(--text); line-height: 1.6;">
<strong>Check-in:</strong> 3:00 PM (early check-in often available)<br/>
<strong>Check-out:</strong> 11:00 AM (late check-out by arrangement)<br/>
<strong>Self check-in:</strong> Digital codes provided for flexible arrival<br/>
<strong>Hosts available:</strong> Stephen &amp; Sandy live on-property for immediate assistance<br/><br/>
                                We provide detailed arrival instructions and local recommendations 48 hours before your stay.
                            </div>
</div>
</div>
<!-- FAQ Item 4 -->
<div class="faq-item" style="background: white; border-radius: 12px; margin-bottom: 1rem; box-shadow: 0 4px 6px rgba(0,0,0,0.05); overflow: hidden;">
<div class="faq-question" onclick="toggleFAQ(this)" style="padding: 1.5rem; cursor: pointer; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; font-weight: 600; color: var(--brand-teal); user-select: none;">
<span>What's the weather like year-round?</span>
<span class="faq-arrow" style="font-size: 1.2rem; transition: transform 0.3s ease;">▼</span>
</div>
<div class="faq-answer" style="padding: 0; max-height: 0; overflow: hidden; transition: all 0.3s ease;">
<div style="padding: 1.5rem; border-top: 1px solid #f0f0f0; color: var(--text); line-height: 1.6;">
<strong>Summer (Dec-Feb):</strong> Warm days (25-30°C), cool nights (10-15°C), perfect for outdoor activities<br/>
<strong>Autumn (Mar-May):</strong> Mild days (15-25°C), crisp nights (5-10°C), stunning vineyard colors<br/>
<strong>Winter (Jun-Aug):</strong> Cool days (5-15°C), cold nights (-5 to 5°C), occasional snow, cozy indoor comfort<br/>
<strong>Spring (Sep-Nov):</strong> Pleasant days (15-25°C), fresh nights (5-15°C), blooming landscapes<br/><br/>
                                All accommodations have heating/cooling for year-round comfort!
                            </div>
</div>
</div>
<!-- FAQ Item 5 -->
<div class="faq-item" style="background: white; border-radius: 12px; margin-bottom: 1rem; box-shadow: 0 4px 6px rgba(0,0,0,0.05); overflow: hidden;">
<div class="faq-question" onclick="toggleFAQ(this)" style="padding: 1.5rem; cursor: pointer; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; font-weight: 600; color: var(--brand-teal); user-select: none;">
<span>Can we bring our pet?</span>
<span class="faq-arrow" style="font-size: 1.2rem; transition: transform 0.3s ease;">▼</span>
</div>
<div class="faq-answer" style="padding: 0; max-height: 0; overflow: hidden; transition: all 0.3s ease;">
<div style="padding: 1.5rem; border-top: 1px solid #f0f0f0; color: var(--text); line-height: 1.6;">
                                The Lakeside Cottage is pet-friendly! Your furry friends are welcome with prior arrangement. The geodesic domes are not suitable for pets. Pet fee applies.
                            </div>
</div>
</div>
<!-- FAQ Item 6 -->
<div class="faq-item" style="background: white; border-radius: 12px; margin-bottom: 1rem; box-shadow: 0 4px 6px rgba(0,0,0,0.05); overflow: hidden;">
<div class="faq-question" onclick="toggleFAQ(this)" style="padding: 1.5rem; cursor: pointer; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; font-weight: 600; color: var(--brand-teal); user-select: none;">
<span>How far are you from Queenstown/Wanaka?</span>
<span class="faq-arrow" style="font-size: 1.2rem; transition: transform 0.3s ease;">▼</span>
</div>
<div class="faq-answer" style="padding: 0; max-height: 0; overflow: hidden; transition: all 0.3s ease;">
<div style="padding: 1.5rem; border-top: 1px solid #f0f0f0; color: var(--text); line-height: 1.6;">
                                We're perfectly positioned: 45 minutes from Queenstown Airport, 35 minutes from Wanaka, and just 5 minutes from Cromwell. Ideal for exploring all of Central Otago while enjoying peaceful lakeside luxury.
                            </div>
</div>
</div>
</div>
</div>
<!-- Bottom Footer -->
<div class="footer-bottom">
<div style="display: grid; grid-template-columns: 1fr auto; gap: 2rem; align-items: center;">
<div style="font-size: 0.9rem;">
<p>© 2024 Lakeside Retreat Central Otago. All rights reserved.</p>
<p style="margin-top: 0.5rem;">96 Smiths Way, Mount Pisa, Cromwell, Central Otago 9310, New Zealand</p>
<p style="margin-top: 0.5rem;">⚡ Powered by 16.72kW commercial-grade solar array with 16kWh battery storage</p>
<p style="margin-top: 0.5rem; font-size: 0.8rem; opacity: 0.8;">
                            Licensed Tourism Operator | Consumer Guarantees Act applies | Fair Trading Act compliance
                        </p>
</div>
<div>
<div style="font-size: 0.8rem;">
<span>Email: </span><a href="mailto:info@lakesideretreat.co.nz" style="color: rgba(255, 255, 255, 0.8);">info@lakesideretreat.co.nz</a>
</div>
</div>
</div>
</div>
</div>
</footer>
<script>
        // Security functions
        function sanitizeHTML(str) {
            const temp = document.createElement('div');
            temp.textContent = str;
            return temp.innerHTML;
        }
        
        function safeSetContent(elementId, content, isHTML = false) {
            const element = document.getElementById(elementId);
            if (!element) return;
            
            if (isHTML) {
                // Only allow specific safe HTML patterns
                const safeHTML = content
                    .replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '')
                    .replace(/javascript:/gi, '')
                    .replace(/on\w+="[^"]*"/gi, '')
                    .replace(/on\w+='[^']*'/gi, '');
                element.innerHTML = safeHTML;
            } else {
                element.textContent = content;
            }
        }
        
        function safeCreateSelectOptions(selectElement, options) {
            selectElement.innerHTML = ''; // Clear existing options
            options.forEach(option => {
                const optionElement = document.createElement('option');
                optionElement.value = option.value;
                optionElement.textContent = option.text;
                if (option.selected) optionElement.selected = true;
                selectElement.appendChild(optionElement);
            });
        }

        // Global variables
        let currentPage = 'home';
        let currentImageIndex = 0;
        let socialProofIndex = 0;
        let reviewsLoaded = 6;
        let touchStartX = 0;
        let touchEndX = 0;

        // Booking system variables
        let selectedAccommodation = null;
        let currentBookingStep = 1;
        let bookingData = {};

        // Mock Uplisting API rates (NZD)
        const accommodationRates = {
            'dome-pinot': { base: 450, peak: 530, offPeak: 350 },
            'dome-rose': { base: 380, peak: 450, offPeak: 300 },
            'lakeside-cottage': { base: 580, peak: 680, offPeak: 480 }
        };

        const accommodationNames = {
            'dome-pinot': 'Dome Pinot',
            'dome-rose': 'Dome Rosé',
            'lakeside-cottage': 'Lakeside Cottage'
        };

        // Page navigation data
        const pages = ['home', 'stay', 'gallery', 'blog', 'reviews', 'story', 'explore', 'contact'];

        // Gallery images from stay page click
        const galleryImages = [
            'images/galerryrose.jpeg',
            'images/gallerydecksideview.jpeg',
            'images/gallerydecksitting.jpeg',
            'images/gallerypinotbed.jpeg',
            'images/dome-pinot-hero.jpeg',
            'images/dome-pinot-interior.jpeg',
            'images/dome-rose-interior.jpeg',
            'images/gallerydeck.jpeg',
            'images/gallerypinotbed.jpeg',
	    'images/GallerySwingChair.jpeg',
        ];

        // Search data
        const searchData = [
            // Stay page
            { title: 'Central Otago Accommodation', page: 'stay', description: 'Luxury glamping domes and cottage with Lake Dunstan views' },
            { title: 'Cromwell Accommodation', page: 'stay', description: 'Premium accommodation 12km from Cromwell town centre' },
            { title: 'Lake Dunstan Accommodation', page: 'stay', description: 'Waterfront luxury with direct lake access and panoramic views' },
            { title: 'Dome Pinot', page: 'stay', description: '50sqm luxury dome with Lake Dunstan views and private spa - $450/night' },
            { title: 'Dome Rosé', page: 'stay', description: 'Romantic retreat perfect for couples in wine country - $380/night' },
            { title: 'Lakeside Cottage', page: 'stay', description: 'Family-friendly accommodation with direct lake access - $580/night' },
            { title: 'Booking', page: 'stay', description: 'Book your stay at Lakeside Retreat' },
            { title: 'Prices', page: 'stay', description: 'View accommodation pricing and availability' },
            // Explore page
            { title: 'Central Otago Wine Country', page: 'explore', description: 'World-class Pinot Noir wineries within 15km' },
            { title: 'Cycle Trail Accommodation', page: 'explore', description: 'Lake Dunstan Trail access 300m from accommodation' },
            { title: 'Cromwell to Clyde Cycle Trail', page: 'explore', description: 'Direct access to scenic cycling routes' },
            { title: 'Things to Do', page: 'explore', description: 'Activities and attractions near Lakeside Retreat' },
            { title: 'Wineries', page: 'explore', description: 'Discover Central Otago wine region' },
            { title: 'Cycling', page: 'explore', description: 'Bike trails and cycling routes nearby' },
            // Home page
            { title: 'Sustainable Accommodation', page: 'home', description: 'Grid-tied solar powered luxury with battery backup' },
            { title: 'Solar Power', page: 'home', description: '16.72kW commercial-grade solar system' },
            { title: 'Lakeside Retreat', page: 'home', description: 'Luxury glamping in Central Otago, New Zealand' },
            // Gallery page
            { title: 'Gallery', page: 'gallery', description: 'Photos of our accommodations and surroundings' },
            { title: 'Photos', page: 'gallery', description: 'View images of domes, cottage, and lake views' },
            // Guides page
            { title: 'Guides', page: 'blog', description: 'Local guides for wineries, restaurants, and activities' },
            { title: 'Winery Guide', page: 'blog', description: 'Best wineries to visit in Central Otago' },
            { title: 'Restaurant Guide', page: 'blog', description: 'Where to eat near Cromwell and Clyde' },
            { title: 'Day Trips', page: 'blog', description: 'Explore Queenstown, Wanaka, and more' },
            // Reviews page
            { title: 'Reviews', page: 'reviews', description: '4.9 star rating from 127 verified reviews' },
            { title: 'Guest Reviews', page: 'reviews', description: 'Read what our guests say about their stay' },
            { title: 'Testimonials', page: 'reviews', description: 'Guest experiences and feedback' },
            // Story page
            { title: 'Our Story', page: 'story', description: 'How Stephen and Sandy created Lakeside Retreat' },
            { title: 'About Us', page: 'story', description: 'Meet your hosts and learn our journey' },
            { title: 'Stephen and Sandy', page: 'story', description: 'The founders of Lakeside Retreat' },
            // Contact page
            { title: 'Contact', page: 'contact', description: 'Get in touch with Lakeside Retreat' },
            { title: 'Phone', page: 'contact', description: 'Call us at +64 21 368 682' },
            { title: 'Email', page: 'contact', description: 'Email info@lakesideretreat.co.nz' },
            { title: 'Location', page: 'contact', description: '96 Smiths Way, Mount Pisa, Cromwell' },
            { title: 'Directions', page: 'contact', description: 'How to find Lakeside Retreat' }
        ];

        // Social proof messages
        const socialProofMessages = [
            { name: 'Sarah from Auckland', action: 'just booked Dome Pinot', time: '2 minutes ago' },
            { name: 'Mike from Melbourne', action: 'just booked Lakeside Cottage', time: '5 minutes ago' },
            { name: 'Lisa from Wellington', action: 'just booked Dome Rosé', time: '8 minutes ago' },
            { name: 'David from Sydney', action: 'just booked an energy system tour', time: '12 minutes ago' },
            { name: 'Emma from Christchurch', action: 'just booked Lakeside Cottage', time: '15 minutes ago' }
        ];

        // CSRF Token Management
        let csrfToken = '';

        async function getCSRFToken() {
          try {
            const response = await fetch('/api/csrf-token', {
              credentials: 'include'
            });
            const data = await response.json();
            csrfToken = data.csrfToken;
            return csrfToken;
          } catch (error) {
            // Console statement removed for production
            return null;
          }
        }

        // Initialize website
        document.addEventListener('DOMContentLoaded', async function() {
          // Get CSRF token on page load
          await getCSRFToken();
          
          initializeWebsite();
        });

        function initializeWebsite() {
            // Set minimum dates for booking (only if elements exist)
            const today = new Date().toISOString().split('T')[0];
            const checkinInput = document.getElementById('bookingCheckin');
            const checkoutInput = document.getElementById('bookingCheckout');
            
            if (checkinInput) {
                checkinInput.min = today;
                checkinInput.addEventListener('click', function() {
                    this.showPicker();
                });
            }
            
            if (checkoutInput) {
                checkoutInput.min = today;
                checkoutInput.addEventListener('click', function() {
                    this.showPicker();
                });
            }

            // Initialize mobile optimizations
            detectTouch();
            setMobileViewportHeight();
            enhanceMobileMenu();

            // Show cookie buttons only
            setTimeout(() => {
                const cookieButtons = document.getElementById('cookieButtons');
                if (cookieButtons) {
                    cookieButtons.style.display = 'flex';
                }
            }, 2000);

            // Initialize social proof
            setTimeout(showSocialProof, 5000);

            // Initialize scroll animations
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.card').forEach(card => {
                observer.observe(card);
            });

            // Initialize scroll indicator
            window.addEventListener('scroll', updateScrollIndicator);

            // Initialize touch gestures for page navigation (only if element exists)
            const mainContent = document.getElementById('mainContent');
            if (mainContent) {
                mainContent.addEventListener('touchstart', handleTouchStart, { passive: true });
                mainContent.addEventListener('touchend', handleTouchEnd, { passive: true });
            }

            // Auto-close mobile menu on scroll
            window.addEventListener('scroll', () => {
                const mobileNav = document.getElementById('mobileNav');
                if (mobileNav && mobileNav.classList.contains('active')) {
                    toggleMobileMenu();
                }
            });

            // Booking form event listeners (only if elements exist)
            if (checkinInput) {
                checkinInput.addEventListener('change', updateCheckoutMinDate);
            }
            
            if (checkoutInput) {
                checkoutInput.addEventListener('change', validateCottageMinimumStay);
            }
            
            // Mobile-specific performance optimizations
            if (window.innerWidth <= 768) {
                // Reduce animation frequency on mobile
                const reducedMotionQuery = window.matchMedia('(prefers-reduced-motion: reduce)');
                if (reducedMotionQuery.matches) {
                    document.body.classList.add('reduce-motion');
                }
                
                // Optimize touch scrolling
                document.body.style.touchAction = 'pan-y';
                document.body.style.webkitOverflowScrolling = 'touch';
            }
        }

        // Mobile optimization functions
        let isTouch = false;
        let touchStartY = 0;
        let touchEndY = 0;
        let touchDevice = false;

        function detectTouch() {
            touchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
            if (touchDevice) {
                document.body.classList.add('touch-device');
            }
        }

        function setMobileViewportHeight() {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
            
            window.addEventListener('resize', () => {
                const vh = window.innerHeight * 0.01;
                document.documentElement.style.setProperty('--vh', `${vh}px`);
            });
        }

        function enhanceMobileMenu() {
            const mobileNav = document.getElementById('mobileNav');
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            
            if (mobileMenuBtn) {
                mobileMenuBtn.addEventListener('touchstart', function() {
                    this.style.opacity = '0.7';
                }, { passive: true });
                
                mobileMenuBtn.addEventListener('touchend', function() {
                    this.style.opacity = '1';
                }, { passive: true });
            }
            
            if (mobileNav) {
                mobileNav.addEventListener('touchmove', function(e) {
                    if (this.classList.contains('active')) {
                        e.preventDefault();
                    }
                }, { passive: false });
            }
        }








        // === STREAMLINED 3-BUTTON BOOKING SYSTEM ===

        // Store the element that had focus before modal opened
        let previouslyFocusedElement = null;
        
        function openBookingModal(preSelectedAccommodation = null) {
            // Store currently focused element to restore later
            previouslyFocusedElement = document.activeElement;
            
            const modal = document.getElementById('bookingModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Pre-select accommodation if specified BEFORE reset
            if (preSelectedAccommodation) {
                selectedAccommodation = preSelectedAccommodation;
            }
            
            resetBookingModal();
            
            // Apply selection after reset
            if (preSelectedAccommodation) {
                selectAccommodation(preSelectedAccommodation);
            }
            
            // Focus the modal for accessibility
            setTimeout(() => {
                const closeBtn = modal.querySelector('.booking-modal-close');
                if (closeBtn) closeBtn.focus();
            }, 100);
            
            // Add escape key listener
            document.addEventListener('keydown', handleModalEscape);
            
            // Add focus trap
            modal.addEventListener('keydown', trapFocusInModal);
        }

        function closeBookingModal() {
            const modal = document.getElementById('bookingModal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
            resetBookingModal();
            
            // Remove event listeners
            document.removeEventListener('keydown', handleModalEscape);
            modal.removeEventListener('keydown', trapFocusInModal);
            
            // Restore focus to previously focused element
            if (previouslyFocusedElement) {
                previouslyFocusedElement.focus();
            }
        }
        
        // Handle Escape key to close modal
        function handleModalEscape(e) {
            if (e.key === 'Escape') {
                closeBookingModal();
            }
        }
        
        // Trap focus within modal
        function trapFocusInModal(e) {
            if (e.key !== 'Tab') return;
            
            const modal = document.getElementById('bookingModal');
            const focusableElements = modal.querySelectorAll(
                'button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], [tabindex]:not([tabindex="-1"])'
            );
            
            if (focusableElements.length === 0) return;
            
            const firstElement = focusableElements[0];
            const lastElement = focusableElements[focusableElements.length - 1];
            
            if (e.shiftKey && document.activeElement === firstElement) {
                e.preventDefault();
                lastElement.focus();
            } else if (!e.shiftKey && document.activeElement === lastElement) {
                e.preventDefault();
                firstElement.focus();
            }
        }

        function resetBookingModal() {
            currentBookingStep = 1;
            bookingData = {};
            
            // Reset all steps
            document.querySelectorAll('.booking-step').forEach(step => {
                step.classList.remove('active');
            });
            document.getElementById('bookingStep1').classList.add('active');
            
            // Reset accommodation selection (but keep pre-selected if any)
            document.querySelectorAll('.accommodation-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Re-select accommodation if it was pre-selected
            if (selectedAccommodation) {
                selectAccommodation(selectedAccommodation);
            } else {
                // Reset to default form (cottage settings)
                updateBookingFormForAccommodation('cottage');
            }
            
            // Reset form
            document.getElementById('bookingCheckin').value = '';
            document.getElementById('bookingCheckout').value = '';
            document.getElementById('bookingAdults').value = '2';
            document.getElementById('bookingChildren').value = '0';
            
            // Hide sections that should be hidden initially
            document.getElementById('pricingBreakdown').style.display = 'none';
            document.getElementById('guestDetailsSection').style.display = 'none';
            document.getElementById('instantPaymentSection').style.display = 'none';
            const availabilityResult = document.getElementById('availabilityResult');
            if (availabilityResult) availabilityResult.textContent = '';
        }

        function selectAccommodation(accommodationType) {
            // Console statement removed for production
            selectedAccommodation = accommodationType;
            
            // Update UI
            document.querySelectorAll('.accommodation-option').forEach(option => {
                option.classList.remove('selected');
            });
            const selectedElement = document.querySelector(`[data-accommodation="${accommodationType}"]`);
            if (selectedElement) {
                selectedElement.classList.add('selected');
                // Console statement removed for production
            } else {
                // Console statement removed for production
            }
            
            // Update form based on accommodation type
            updateBookingFormForAccommodation(accommodationType);
            
            // Update blocked dates for the new accommodation (Flatpickr calendar)
            if (typeof window.updateFlatpickrAccommodation === 'function') {
                window.updateFlatpickrAccommodation(accommodationType);
            }
            
            // Immediately scroll to dates section after accommodation selection
            setTimeout(() => {
                const datesSection = document.querySelector('.booking-date-row');
                if (datesSection) {
                    datesSection.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                }
            }, 100);
            
            // Update price preview
            updatePricePreview();
        }
        
        // Update price preview in step 1 before booking
        function updatePricePreview() {
            const pricePreviewSection = document.getElementById('pricePreviewSection');
            const pricePreviewTotal = document.getElementById('pricePreviewTotal');
            const pricePreviewDetails = document.getElementById('pricePreviewDetails');
            
            if (!pricePreviewSection || !pricePreviewTotal || !pricePreviewDetails) return;
            
            const checkin = document.getElementById('bookingCheckin').value;
            const checkout = document.getElementById('bookingCheckout').value;
            
            // Show section if accommodation is selected
            if (selectedAccommodation) {
                pricePreviewSection.style.display = 'block';
                
                if (checkin && checkout) {
                    const checkinDate = new Date(checkin);
                    const checkoutDate = new Date(checkout);
                    const nights = Math.ceil((checkoutDate - checkinDate) / (1000 * 60 * 60 * 24));
                    
                    if (nights > 0) {
                        // Get base rate for accommodation
                        const rates = {
                            'dome-pinot': 450,
                            'dome-rose': 380,
                            'lakeside-cottage': 580
                        };
                        const baseRate = rates[selectedAccommodation] || 450;
                        const accommodationName = selectedAccommodation.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                        
                        // Calculate estimated total
                        const subtotal = baseRate * nights;
                        const pets = parseInt(document.getElementById('bookingPets')?.value || 0);
                        const petFee = pets * 25 * nights;
                        const total = subtotal + petFee;
                        
                        pricePreviewTotal.textContent = `$${total.toLocaleString()} NZD`;
                        pricePreviewDetails.innerHTML = `${accommodationName} &bull; ${nights} night${nights > 1 ? 's' : ''} &bull; $${baseRate}/night${petFee > 0 ? ` + $${petFee} pet fee` : ''}`;
                    } else {
                        pricePreviewTotal.textContent = '$0 NZD';
                        pricePreviewDetails.textContent = 'Check-out must be after check-in';
                    }
                } else {
                    const accommodationName = selectedAccommodation.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                    const rates = { 'dome-pinot': 450, 'dome-rose': 380, 'lakeside-cottage': 580 };
                    const baseRate = rates[selectedAccommodation] || 450;
                    pricePreviewTotal.textContent = `From $${baseRate}/night`;
                    pricePreviewDetails.textContent = `${accommodationName} selected - choose dates to see total`;
                }
            } else {
                pricePreviewSection.style.display = 'none';
            }
        }
        
        // Add event listeners for date changes to update price preview
        document.addEventListener('DOMContentLoaded', function() {
            const checkinInput = document.getElementById('bookingCheckin');
            const checkoutInput = document.getElementById('bookingCheckout');
            const petsSelect = document.getElementById('bookingPets');
            
            if (checkinInput) checkinInput.addEventListener('change', updatePricePreview);
            if (checkoutInput) checkoutInput.addEventListener('change', updatePricePreview);
            if (petsSelect) petsSelect.addEventListener('change', updatePricePreview);
        });
        
        function updateBookingFormForAccommodation(accommodationType) {
            const adultsSelect = document.getElementById('bookingAdults');
            const childrenSelect = document.getElementById('bookingChildren');
            const childrenGroup = childrenSelect.closest('.booking-form-group');
            const petSelectionGroup = document.getElementById('petSelectionGroup');
            const cottageWarning = document.getElementById('cottageMinimumStayWarning');
            
            if (accommodationType === 'dome-pinot' || accommodationType === 'dome-rose') {
                // Domes: Adults only (1-2), no children, no pets
                safeCreateSelectOptions(adultsSelect, [
                    {value: '1', text: '1 Adult'},
                    {value: '2', text: '2 Adults', selected: true}
                ]);
                
                // Hide children section for domes
                if (childrenGroup) {
                    childrenGroup.style.display = 'none';
                }
                
                // Hide pet option for domes
                if (petSelectionGroup) {
                    petSelectionGroup.style.display = 'none';
                    document.getElementById('bookingPets').value = '0';
                }
                
                // Set children to 0 for domes
                childrenSelect.value = '0';
                
                // Hide cottage minimum stay warning for domes
                if (cottageWarning) {
                    cottageWarning.style.display = 'none';
                }
                
                // Console statement removed for production
            } else {
                // Cottage: Maximum 4 people total, pets allowed
                safeCreateSelectOptions(adultsSelect, [
                    {value: '1', text: '1 Adult'},
                    {value: '2', text: '2 Adults', selected: true},
                    {value: '3', text: '3 Adults'},
                    {value: '4', text: '4 Adults'}
                ]);
                
                // Show children section for cottage (max 2 children to keep total at 4)
                if (childrenGroup) {
                    childrenGroup.style.display = 'block';
                    safeCreateSelectOptions(childrenSelect, [
                        {value: '0', text: '0 Children', selected: true},
                        {value: '1', text: '1 Child'},
                        {value: '2', text: '2 Children'}
                    ]);
                }
                
                // Show pet option for cottage
                if (petSelectionGroup) {
                    petSelectionGroup.style.display = 'block';
                }
                
                // Show cottage minimum stay warning
                if (cottageWarning) {
                    cottageWarning.style.display = 'block';
                }
                
                // Console statement removed for production
            }
        }

        function updateCheckoutMinDate() {
            const checkinDate = new Date(document.getElementById('bookingCheckin').value);
            if (checkinDate) {
                checkinDate.setDate(checkinDate.getDate() + 1);
                document.getElementById('bookingCheckout').min = checkinDate.toISOString().split('T')[0];
                
                // Clear checkout if it's before new minimum
                const checkoutInput = document.getElementById('bookingCheckout');
                if (checkoutInput.value && new Date(checkoutInput.value) <= new Date(document.getElementById('bookingCheckin').value)) {
                    checkoutInput.value = '';
                }
                
                // Check cottage minimum stay requirements
                validateCottageMinimumStay();
            }
        }

        function calculateNightsFrontend(checkIn, checkOut) {
            if (!checkIn || !checkOut) return 0;
            const checkInDate = new Date(checkIn);
            const checkOutDate = new Date(checkOut);
            const timeDifference = checkOutDate.getTime() - checkInDate.getTime();
            return Math.ceil(timeDifference / (1000 * 3600 * 24));
        }

        function isPeakSeason(date) {
            const month = new Date(date).getMonth() + 1; // JS months are 0-based
            return month >= 10 || month <= 5; // Oct (10) through May (5)
        }

        function validateCottageMinimumStay() {
            const checkIn = document.getElementById('bookingCheckin').value;
            const checkOut = document.getElementById('bookingCheckout').value;
            
            if (!checkIn || !checkOut || selectedAccommodation !== 'lakeside-cottage') {
                return true;
            }
            
            const nights = calculateNightsFrontend(checkIn, checkOut);
            const isPeak = isPeakSeason(checkIn);
            
            if (isPeak && nights < 2) {
                // Show error message
                showDateValidationError('Minimum 2-night stay required for Lakeside Cottage during peak season (October to May)');
                return false;
            } else {
                // Clear error message
                clearDateValidationError();
                return true;
            }
        }

        function showDateValidationError(message) {
            let errorDiv = document.getElementById('dateValidationError');
            if (!errorDiv) {
                errorDiv = document.createElement('div');
                errorDiv.id = 'dateValidationError';
                errorDiv.style.cssText = 'background: #fee2e2; border: 1px solid #ef4444; padding: 0.75rem; border-radius: 6px; margin: 0.5rem 0; color: #dc2626; font-size: 0.9rem;';
                
                const dateRow = document.querySelector('.booking-date-row');
                if (dateRow) {
                    dateRow.parentNode.insertBefore(errorDiv, dateRow.nextSibling);
                }
            }
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
        }

        function clearDateValidationError() {
            const errorDiv = document.getElementById('dateValidationError');
            if (errorDiv) {
                errorDiv.style.display = 'none';
            }
        }

        // Show availability check error with retry option and contact info
        function showAvailabilityError() {
            const availabilityResult = document.getElementById('availabilityResult');
            if (availabilityResult) {
                availabilityResult.innerHTML = `
                    <div style="background: #fef3c7; border: 1px solid #f59e0b; padding: 1rem; border-radius: 8px; text-align: center;">
                        <div style="color: #92400e; font-weight: 600; margin-bottom: 0.5rem;">
                            ⚠️ Couldn't Confirm Availability
                        </div>
                        <p style="color: #78350f; margin-bottom: 1rem; font-size: 0.9rem;">
                            We're having trouble checking availability right now. Please try again or contact us directly.
                        </p>
                        <div style="display: flex; gap: 0.5rem; justify-content: center; flex-wrap: wrap;">
                            <button onclick="instantBookingWithPayment()" class="btn" style="background: var(--brand-teal); color: white; padding: 0.5rem 1rem; border-radius: 6px; border: none; cursor: pointer;">
                                Try Again
                            </button>
                            <a href="https://wa.me/6421368682?text=Hi, I'm trying to book but having trouble with availability. Can you help?" 
                               style="background: #25D366; color: white; padding: 0.5rem 1rem; border-radius: 6px; text-decoration: none; display: inline-flex; align-items: center; gap: 0.25rem;">
                                📱 WhatsApp Us
                            </a>
                            <a href="tel:+6421368682" 
                               style="background: #6b7280; color: white; padding: 0.5rem 1rem; border-radius: 6px; text-decoration: none;">
                                📞 Call Us
                            </a>
                        </div>
                    </div>
                `;
            }
            document.getElementById('pricingBreakdown').style.display = 'none';
            document.getElementById('guestDetailsSection').style.display = 'none';
            document.getElementById('instantPaymentSection').style.display = 'none';
        }

        // Inline validation helper - show error under a field with ARIA support
        function showInlineError(fieldId, message) {
            clearInlineError(fieldId);
            const field = document.getElementById(fieldId);
            if (field) {
                field.style.borderColor = '#ef4444';
                field.setAttribute('aria-invalid', 'true');
                field.setAttribute('aria-describedby', fieldId + '-error');
                
                const errorDiv = document.createElement('div');
                errorDiv.id = fieldId + '-error';
                errorDiv.className = 'inline-error';
                errorDiv.setAttribute('role', 'alert');
                errorDiv.setAttribute('aria-live', 'polite');
                errorDiv.style.cssText = 'color: #dc2626; font-size: 0.8rem; margin-top: 0.25rem;';
                errorDiv.textContent = message;
                field.parentNode.appendChild(errorDiv);
            }
        }

        // Clear inline error for a field
        function clearInlineError(fieldId) {
            const field = document.getElementById(fieldId);
            if (field) {
                field.style.borderColor = '';
                field.removeAttribute('aria-invalid');
                field.removeAttribute('aria-describedby');
            }
            const errorDiv = document.getElementById(fieldId + '-error');
            if (errorDiv) {
                errorDiv.remove();
            }
        }

        // Clear all inline errors
        function clearAllInlineErrors() {
            document.querySelectorAll('.inline-error').forEach(el => el.remove());
            document.querySelectorAll('input, select').forEach(el => el.style.borderColor = '');
            // Also clear accommodation selection error
            const accomError = document.getElementById('accommodation-selection-error');
            if (accomError) accomError.remove();
        }

        // Show accommodation selection error
        function showAccommodationSelectionError(message) {
            clearAccommodationSelectionError();
            const accommodationOptions = document.querySelector('.accommodation-options');
            if (accommodationOptions) {
                const errorDiv = document.createElement('div');
                errorDiv.id = 'accommodation-selection-error';
                errorDiv.style.cssText = 'background: #fee2e2; border: 1px solid #ef4444; padding: 0.75rem; border-radius: 6px; margin: 0.5rem 0; color: #dc2626; font-size: 0.9rem; text-align: center;';
                errorDiv.textContent = message;
                accommodationOptions.parentNode.insertBefore(errorDiv, accommodationOptions.nextSibling);
            }
        }

        // Clear accommodation selection error
        function clearAccommodationSelectionError() {
            const errorDiv = document.getElementById('accommodation-selection-error');
            if (errorDiv) errorDiv.remove();
        }

        // Show date validation error (for minimum stay requirements, etc.)
        function showDateValidationError(message) {
            const dateSection = document.querySelector('.date-selection') || document.getElementById('bookingCheckout').parentNode;
            if (dateSection) {
                // Remove any existing date error
                const existingError = document.getElementById('date-validation-error');
                if (existingError) existingError.remove();
                
                const errorDiv = document.createElement('div');
                errorDiv.id = 'date-validation-error';
                errorDiv.style.cssText = 'background: #fee2e2; border: 1px solid #ef4444; padding: 0.75rem; border-radius: 6px; margin: 0.5rem 0; color: #dc2626; font-size: 0.9rem; text-align: center;';
                errorDiv.textContent = message;
                dateSection.parentNode.insertBefore(errorDiv, dateSection.nextSibling);
            }
        }

        // INSTANT BOOKING:Combined availability check, pricing, and immediate payment
        async function instantBookingWithPayment() {
            // Console statement removed for production
            // Console statement removed for production
            // Console statement removed for production
            // Console statement removed for production
            
            // Clear previous inline errors
            clearAllInlineErrors();
            
            if (!selectedAccommodation) {
                // Show inline error for accommodation selection
                showAccommodationSelectionError('Please select an accommodation type');
                return;
            }

            const checkin = document.getElementById('bookingCheckin').value;
            const checkout = document.getElementById('bookingCheckout').value;
            const adults = document.getElementById('bookingAdults').value;
            const children = document.getElementById('bookingChildren').value;
            const pets = document.getElementById('bookingPets') ? document.getElementById('bookingPets').value : '0';

            let hasErrors = false;

            if (!checkin) {
                showInlineError('bookingCheckin', 'Please select a check-in date');
                hasErrors = true;
            }
            
            if (!checkout) {
                showInlineError('bookingCheckout', 'Please select a check-out date');
                hasErrors = true;
            }
            
            if (hasErrors) return;

            const checkinDate = new Date(checkin);
            const checkoutDate = new Date(checkout);
            
            if (checkoutDate <= checkinDate) {
                showInlineError('bookingCheckout', 'Check-out date must be after check-in date');
                return;
            }

            // Validate cottage minimum stay requirements
            if (!validateCottageMinimumStay()) {
                showDateValidationError('Minimum 2-night stay required for Lakeside Cottage during peak season (October to May)');
                return;
            }

            // Store booking data
            bookingData = {
                accommodation: selectedAccommodation,
                checkin: checkin,
                checkout: checkout,
                adults: parseInt(adults),
                children: parseInt(children),
                pets: parseInt(pets),
                nights: Math.ceil((checkoutDate - checkinDate) / (1000 * 60 * 60 * 24))
            };

            // Console statement removed for production

            // Show loading state
            const availabilityResult = document.getElementById('availabilityResult');
            if (window.SecureFrontend) {
          window.SecureFrontend.safeSetInnerHTML(availabilityResult, '<div style="text-align: center;">Checking availability and calculating pricing <span class="loading-spinner"></span></div>');
        } else {
          availabilityResult.textContent = 'Checking availability and calculating pricing...';
        }

            // Console statement removed for production

            // Real API call to Uplisting via backend with fail-safe handling
            let isAvailable = false;
            let availabilityError = false;
            try {
                const propertyId = UPLISTING_PROPERTY_IDS[selectedAccommodation];
                const response = await fetch(`${API_BASE_URL}/api/availability`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    credentials: 'include',
                    body: JSON.stringify({
                        propertyId: propertyId,
                        accommodation: selectedAccommodation,
                        checkIn: checkin,
                        checkOut: checkout,
                        guests: parseInt(adults) + parseInt(children)
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    isAvailable = data.available;
                } else {
                    availabilityError = true;
                }
            } catch (error) {
                availabilityError = true;
            }
            
            // Handle availability check error - fail safe, don't assume available
            if (availabilityError) {
                showAvailabilityError();
                return;
            }
            
            if (isAvailable) {
                // Console statement removed for production
                calculatePricingWithGST();
                updateSelectedDetails();
                if (window.SecureFrontend) {
          window.SecureFrontend.updateAvailabilityResult('Available for Instant Booking! Your selected dates are available. Complete your booking below.', true);
        } else {
          availabilityResult.textContent = '✅ Available for Instant Booking! Your selected dates are available. Complete your booking below.';
        }
                document.getElementById('pricingBreakdown').style.display = 'block';
                document.getElementById('guestDetailsSection').style.display = 'block';
                document.getElementById('instantPaymentSection').style.display = 'block';
                
                // Move to step 2 to show the booking details
                goToBookingStep(2);
                
                // Console statement removed for production
                // Console statement removed for production
            } else {
                if (window.SecureFrontend) {
          window.SecureFrontend.updateAvailabilityResult('Not Available. These dates are not available. Please try different dates.', false);
        } else {
          availabilityResult.textContent = '❌ Not Available. These dates are not available. Please try different dates.';
        }
                document.getElementById('pricingBreakdown').style.display = 'none';
                document.getElementById('guestDetailsSection').style.display = 'none';
                document.getElementById('instantPaymentSection').style.display = 'none';
            }
        }

        // ENHANCED PRICING CALCULATION WITH NZ GST
        function calculatePricingWithGST() {
            const rates = accommodationRates[selectedAccommodation];
            
            // Determine rate type based on season (mock logic)
            const checkinDate = new Date(bookingData.checkin);
            const month = checkinDate.getMonth();
            let rateType = 'base';
            if (month >= 11 || month <= 2) rateType = 'peak'; // Summer
            if (month >= 5 && month <= 8) rateType = 'offPeak'; // Winter
            
            const nightlyRate = rates[rateType];
            let subtotal = nightlyRate * bookingData.nights;
            
            // Calculate extra guest charges for cottage (beyond 2 people)
            let extraGuestCharge = 0;
            if (selectedAccommodation === 'lakeside-cottage') {
                const totalGuests = bookingData.adults + bookingData.children;
                if (totalGuests > 2) {
                    const extraGuests = totalGuests - 2;
                    extraGuestCharge = extraGuests * 100 * bookingData.nights; // $100 per extra guest per night
                    subtotal += extraGuestCharge;
                }
            }
            
            // Calculate pet fees for cottage
            let petFee = 0;
            if (selectedAccommodation === 'lakeside-cottage' && bookingData.pets > 0) {
                petFee = bookingData.pets * 25 * bookingData.nights; // $25 per pet per night
                subtotal += petFee;
            }
            
            const cleaningFee = 75;
            const serviceFee = Math.round(subtotal * 0.03); // 3% service fee
            
            // Calculate total (all prices already include GST)
            const total = subtotal + cleaningFee + serviceFee;
            // GST is already included in all prices (15% of total)
            const gst = Math.round(total * 0.13); // GST portion is 15/115 = 13% of GST-inclusive price

            // Update booking data
            bookingData.nightlyRate = nightlyRate;
            bookingData.subtotal = subtotal;
            bookingData.extraGuestCharge = extraGuestCharge;
            bookingData.petFee = petFee;
            bookingData.cleaningFee = cleaningFee;
            bookingData.serviceFee = serviceFee;
            bookingData.gst = gst;
            bookingData.total = total;

            // Update UI with NZD formatting
            document.getElementById('accommodationRate').textContent = `${nightlyRate} NZD`;
            document.getElementById('numberOfNights').textContent = bookingData.nights;
            document.getElementById('subtotal').textContent = `${subtotal} NZD`;
            
            // Show/hide extra guest charge for cottage
            const extraGuestRow = document.getElementById('extraGuestRow');
            const extraGuestChargeElement = document.getElementById('extraGuestCharge');
            if (selectedAccommodation === 'lakeside-cottage' && extraGuestCharge > 0) {
                extraGuestRow.style.display = 'flex';
                extraGuestChargeElement.textContent = `${extraGuestCharge} NZD`;
            } else {
                extraGuestRow.style.display = 'none';
                extraGuestChargeElement.textContent = '$0';
            }
            
            // Show/hide pet fee for cottage
            const petFeeRow = document.getElementById('petFeeRow');
            const petFeeElement = document.getElementById('petFee');
            if (selectedAccommodation === 'lakeside-cottage' && petFee > 0) {
                if (petFeeRow) {
                    petFeeRow.style.display = 'flex';
                    petFeeElement.textContent = `${petFee} NZD`;
                }
            } else {
                if (petFeeRow) {
                    petFeeRow.style.display = 'none';
                    petFeeElement.textContent = '$0';
                }
            }
            
            document.getElementById('cleaningFee').textContent = `${cleaningFee} NZD`;
            document.getElementById('serviceFee').textContent = `${serviceFee} NZD`;
            document.getElementById('gst').textContent = `${gst} NZD`;
            document.getElementById('totalAmount').textContent = `${total} NZD`;
        }

        // SECURE PAYMENT: Process payment securely with Stripe Checkout
        async function processInstantPayment() {
            try {
                // Validate guest details are filled
                const firstName = document.getElementById('guestFirstName').value;
                const lastName = document.getElementById('guestLastName').value;
                const emailInput = document.getElementById('guestEmail');
                const phone = document.getElementById('guestPhone').value;

                // Validate all guest details with inline errors
                let hasErrors = false;
                
                if (!firstName) {
                    showInlineError('guestFirstName', 'First name is required');
                    hasErrors = true;
                }
                
                if (!lastName) {
                    showInlineError('guestLastName', 'Last name is required');
                    hasErrors = true;
                }
                
                // Validate email
                if (!validateEmail(emailInput)) {
                    hasErrors = true;
                }
                
                if (!phone) {
                    showInlineError('guestPhone', 'Phone number is required');
                    hasErrors = true;
                }
                
                if (hasErrors) return;

                // Show loading state
                const paymentBtn = document.getElementById('instantPaymentBtn');
                const originalBtnText = paymentBtn.textContent;
                paymentBtn.textContent = 'Processing...';
                paymentBtn.disabled = true;

                // Initialize Stripe if not already done
                if (!stripeInstance) {
                    stripeInstance = Stripe(STRIPE_PUBLIC_KEY);
                }

                // Prepare booking data for Stripe Checkout
                const propertyId = UPLISTING_PROPERTY_IDS[selectedAccommodation];
                const checkoutData = {
                    accommodation: selectedAccommodation,
                    propertyId: propertyId,
                    checkIn: document.getElementById('bookingCheckin').value,
                    checkOut: document.getElementById('bookingCheckout').value,
                    guests: parseInt(document.getElementById('bookingAdults').value) + parseInt(document.getElementById('bookingChildren').value || 0),
                    adults: parseInt(document.getElementById('bookingAdults').value),
                    children: parseInt(document.getElementById('bookingChildren').value || 0),
                    pets: parseInt(document.getElementById('bookingPets') ? document.getElementById('bookingPets').value : 0),
                    guestName: firstName + ' ' + lastName,
                    guestEmail: emailInput.value,
                    guestPhone: phone,
                    specialRequests: document.getElementById('specialRequests') ? document.getElementById('specialRequests').value : '',
                    totalAmount: bookingData.total,
                    currency: 'nzd',
                    successUrl: window.location.origin + '?booking=success',
                    cancelUrl: window.location.origin + '?booking=cancelled'
                };

                // Create Stripe Checkout Session via backend
                const response = await fetch(`${API_BASE_URL}/api/create-checkout-session`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    credentials: 'include',
                    body: JSON.stringify(checkoutData)
                });

                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(errorData.message || 'Failed to create checkout session');
                }

                const session = await response.json();

                // Redirect to Stripe Checkout
                if (session.url) {
                    window.location.href = session.url;
                } else if (session.sessionId) {
                    const result = await stripeInstance.redirectToCheckout({
                        sessionId: session.sessionId
                    });
                    if (result.error) {
                        throw new Error(result.error.message);
                    }
                } else {
                    throw new Error('Invalid checkout session response');
                }
                
            } catch (error) {
                // Reset button state
                const paymentBtn = document.getElementById('instantPaymentBtn');
                if (paymentBtn) {
                    paymentBtn.textContent = 'Complete Booking & Pay';
                    paymentBtn.disabled = false;
                }
                
                // Show payment error with retry and contact options
                showPaymentError(error.message);
            }
        }
        
        // Show payment error with retry option and contact info
        function showPaymentError(errorMessage) {
            const paymentSection = document.getElementById('instantPaymentSection');
            if (paymentSection) {
                // Remove any existing payment error
                const existingError = document.getElementById('payment-error-message');
                if (existingError) existingError.remove();
                
                const errorDiv = document.createElement('div');
                errorDiv.id = 'payment-error-message';
                errorDiv.innerHTML = `
                    <div style="background: #fee2e2; border: 1px solid #ef4444; padding: 1rem; border-radius: 8px; margin-top: 1rem; text-align: center;">
                        <div style="color: #dc2626; font-weight: 600; margin-bottom: 0.5rem;">
                            Payment Processing Failed
                        </div>
                        <p style="color: #7f1d1d; margin-bottom: 1rem; font-size: 0.9rem;">
                            ${errorMessage || 'An error occurred while processing your payment.'}
                        </p>
                        <div style="display: flex; gap: 0.5rem; justify-content: center; flex-wrap: wrap;">
                            <button onclick="processInstantPayment()" class="btn" style="background: var(--brand-teal); color: white; padding: 0.5rem 1rem; border-radius: 6px; border: none; cursor: pointer;">
                                Try Again
                            </button>
                            <a href="https://wa.me/6421368682?text=Hi, I'm having trouble completing my booking payment. Can you help?" 
                               style="background: #25D366; color: white; padding: 0.5rem 1rem; border-radius: 6px; text-decoration: none; display: inline-flex; align-items: center; gap: 0.25rem;">
                                WhatsApp Us
                            </a>
                            <a href="tel:+6421368682" 
                               style="background: #6b7280; color: white; padding: 0.5rem 1rem; border-radius: 6px; text-decoration: none;">
                                Call Us
                            </a>
                        </div>
                    </div>
                `;
                paymentSection.appendChild(errorDiv);
            }
        }
        
        // Check for booking success/cancel on page load with server-side verification
        async function checkBookingStatus() {
            const urlParams = new URLSearchParams(window.location.search);
            const bookingStatus = urlParams.get('booking');
            const sessionId = urlParams.get('session_id');
            
            if (bookingStatus === 'success') {
                // Verify the Stripe session server-side if session_id is present
                if (sessionId) {
                    try {
                        const response = await fetch(`${API_BASE_URL}/api/verify-session`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'X-Requested-With': 'XMLHttpRequest'
                            },
                            credentials: 'include',
                            body: JSON.stringify({ sessionId: sessionId })
                        });
                        
                        if (response.ok) {
                            const data = await response.json();
                            if (data.verified && data.status === 'complete') {
                                showBookingConfirmation(data);
                            } else {
                                showBookingPending();
                            }
                        } else {
                            // Verification failed, show pending message
                            showBookingPending();
                        }
                    } catch (error) {
                        // Network error, show pending message
                        showBookingPending();
                    }
                } else {
                    // No session_id, show generic success (legacy support)
                    showBookingConfirmation(null);
                }
                window.history.replaceState({}, document.title, window.location.pathname);
            } else if (bookingStatus === 'cancelled') {
                showBookingCancelled();
                window.history.replaceState({}, document.title, window.location.pathname);
            }
        }
        
        // Show booking confirmation modal
        function showBookingConfirmation(data) {
            const modal = document.createElement('div');
            modal.id = 'booking-confirmation-modal';
            modal.style.cssText = 'position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 10000;';
            modal.innerHTML = `
                <div style="background: white; padding: 2rem; border-radius: 12px; max-width: 500px; margin: 1rem; text-align: center;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">🎉</div>
                    <h2 style="color: var(--brand-teal); margin-bottom: 1rem;">Booking Confirmed!</h2>
                    <p style="color: #374151; margin-bottom: 1.5rem;">
                        Thank you for choosing Lakeside Retreat. You will receive a confirmation email shortly with all the details of your stay.
                    </p>
                    ${data && data.bookingReference ? `<p style="color: #6b7280; font-size: 0.9rem;">Booking Reference: <strong>${data.bookingReference}</strong></p>` : ''}
                    <button onclick="document.getElementById('booking-confirmation-modal').remove()" 
                            style="background: var(--brand-teal); color: white; padding: 0.75rem 2rem; border-radius: 6px; border: none; cursor: pointer; font-size: 1rem;">
                        Continue
                    </button>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        // Show booking pending message
        function showBookingPending() {
            const modal = document.createElement('div');
            modal.id = 'booking-pending-modal';
            modal.style.cssText = 'position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 10000;';
            modal.innerHTML = `
                <div style="background: white; padding: 2rem; border-radius: 12px; max-width: 500px; margin: 1rem; text-align: center;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">⏳</div>
                    <h2 style="color: #f59e0b; margin-bottom: 1rem;">Booking Processing</h2>
                    <p style="color: #374151; margin-bottom: 1.5rem;">
                        Your payment is being processed. You will receive a confirmation email once your booking is confirmed. If you don't receive an email within 24 hours, please contact us.
                    </p>
                    <div style="display: flex; gap: 0.5rem; justify-content: center; flex-wrap: wrap;">
                        <button onclick="document.getElementById('booking-pending-modal').remove()" 
                                style="background: var(--brand-teal); color: white; padding: 0.75rem 1.5rem; border-radius: 6px; border: none; cursor: pointer;">
                            OK
                        </button>
                        <a href="https://wa.me/6421368682?text=Hi, I just made a booking but haven't received confirmation. Can you help?" 
                           style="background: #25D366; color: white; padding: 0.75rem 1.5rem; border-radius: 6px; text-decoration: none;">
                            WhatsApp Us
                        </a>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        // Show booking cancelled message
        function showBookingCancelled() {
            const modal = document.createElement('div');
            modal.id = 'booking-cancelled-modal';
            modal.style.cssText = 'position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 10000;';
            modal.innerHTML = `
                <div style="background: white; padding: 2rem; border-radius: 12px; max-width: 500px; margin: 1rem; text-align: center;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">😔</div>
                    <h2 style="color: #6b7280; margin-bottom: 1rem;">Booking Cancelled</h2>
                    <p style="color: #374151; margin-bottom: 1.5rem;">
                        Your booking was cancelled. Feel free to try again when you're ready, or contact us if you need any assistance.
                    </p>
                    <div style="display: flex; gap: 0.5rem; justify-content: center; flex-wrap: wrap;">
                        <button onclick="document.getElementById('booking-cancelled-modal').remove(); openBookingModal();" 
                                style="background: var(--brand-teal); color: white; padding: 0.75rem 1.5rem; border-radius: 6px; border: none; cursor: pointer;">
                            Try Again
                        </button>
                        <button onclick="document.getElementById('booking-cancelled-modal').remove()" 
                                style="background: #6b7280; color: white; padding: 0.75rem 1.5rem; border-radius: 6px; border: none; cursor: pointer;">
                            Close
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        // Call on page load
        document.addEventListener('DOMContentLoaded', checkBookingStatus);

        // Process booking with Uplisting after successful payment
        async function processBookingWithUplisting() {
            const paymentButton = document.getElementById('instantPaymentBtn');
            safeSetContent('instantPaymentBtn', 'Creating Booking with Uplisting', true);
            // Add loading spinner safely
            const spinner = document.createElement('span');
            spinner.className = 'loading-spinner';
            paymentButton.appendChild(spinner);

            // Real API call to create booking in Uplisting via backend
            let bookingReference = 'LR' + Date.now().toString().slice(-6);
            try {
                const propertyId = UPLISTING_PROPERTY_IDS[selectedAccommodation];
                const response = await fetch(`${API_BASE_URL}/api/create-booking`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    credentials: 'include',
                    body: JSON.stringify({
                        propertyId: propertyId,
                        accommodation: selectedAccommodation,
                        checkIn: bookingData.checkin,
                        checkOut: bookingData.checkout,
                        guests: bookingData.adults + bookingData.children,
                        guestName: document.getElementById('guestFirstName').value + ' ' + document.getElementById('guestLastName').value,
                        guestEmail: document.getElementById('guestEmail').value,
                        guestPhone: document.getElementById('guestPhone').value,
                        totalAmount: bookingData.total
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.bookingReference) {
                        bookingReference = data.bookingReference;
                    }
                }
            } catch (error) {
                // Continue with local reference if API fails
            }
            
            // Show success message securely
            if (window.SecureFrontend && window.SecureFrontend.updateBookingResult) {
                window.SecureFrontend.updateBookingResult(true, 'Instant Booking Confirmed! Thank you for choosing Lakeside Retreat. Your booking has been instantly confirmed and you\'ll receive a confirmation email shortly.');
            } else {
                const bookingResultSection = document.getElementById('bookingResultSection');
                const successDiv = document.createElement('div');
                successDiv.className = 'booking-success';
                // Create success content safely without innerHTML
                const iconDiv = document.createElement('div');
                iconDiv.className = 'success-icon';
                iconDiv.textContent = '✅';
                
                const heading = document.createElement('h3');
                heading.style.color = 'var(--brand-teal)';
                heading.style.marginBottom = '1rem';
                heading.textContent = 'Instant Booking Confirmed!';
                
                const description = document.createElement('p');
                description.textContent = 'Thank you for choosing Lakeside Retreat. Your booking has been instantly confirmed and you\'ll receive a confirmation email shortly.';
                
                const detailsDiv = document.createElement('div');
                detailsDiv.style.background = 'rgba(45, 90, 90, 0.05)';
                detailsDiv.style.padding = '1rem';
                detailsDiv.style.borderRadius = '10px';
                detailsDiv.style.margin = '1.5rem 0';
                
                // Create detail paragraphs with safe text content
                const refP = document.createElement('p');
                refP.innerHTML = '<strong>Booking Reference:</strong> ';
                refP.appendChild(document.createTextNode(sanitizeHTML(bookingReference)));
                
                const totalP = document.createElement('p');
                totalP.innerHTML = '<strong>Total Paid (incl. GST):</strong> ';
                totalP.appendChild(document.createTextNode(sanitizeHTML(bookingData.total + ' NZD')));
                
                const methodP = document.createElement('p');
                methodP.innerHTML = '<strong>Payment Method:</strong> Credit Card via Stripe';
                
                const emailP = document.createElement('p');
                emailP.innerHTML = '<strong>Confirmation sent to:</strong> ';
                emailP.appendChild(document.createTextNode(sanitizeHTML(document.getElementById('guestEmail').value)));
                
                detailsDiv.appendChild(refP);
                detailsDiv.appendChild(totalP);
                detailsDiv.appendChild(methodP);
                detailsDiv.appendChild(emailP);
                
                const closeButton = document.createElement('button');
                closeButton.className = 'btn btn-primary';
                closeButton.style.marginTop = '1rem';
                closeButton.textContent = 'Close & Plan Your Stay';
                closeButton.onclick = closeBookingModal;
                
                successDiv.appendChild(iconDiv);
                successDiv.appendChild(heading);
                successDiv.appendChild(description);
                successDiv.appendChild(detailsDiv);
                successDiv.appendChild(closeButton);
                bookingResultSection.textContent = '';
                bookingResultSection.appendChild(successDiv);
            }

            // Hide the payment section
            document.getElementById('instantPaymentSection').style.display = 'none';
            paymentButton.parentElement.style.display = 'none';

            // In real implementation, this would:
            // 1. Process payment through Stripe API
            // 2. Create booking in Uplisting via API
            // 3. Send confirmation emails
            // 4. Update calendar availability
            // 5. Sync with all booking platforms
        }

        function updateSelectedDetails() {
            const checkinDate = new Date(bookingData.checkin);
            const checkoutDate = new Date(bookingData.checkout);
            
            document.getElementById('selectedDetailsDisplay').innerHTML = `
                <h4 style="color: var(--brand-teal); margin-bottom: 0.5rem;">Selected Energy-Positive Experience</h4>
                <p><strong>Accommodation:</strong> ${accommodationNames[selectedAccommodation]}</p>
                <p><strong>Check-in:</strong> ${checkinDate.toLocaleDateString()} | <strong>Check-out:</strong> ${checkoutDate.toLocaleDateString()}</p>
                <p><strong>Guests:</strong> ${bookingData.adults} Adults${bookingData.children > 0 ? `, ${bookingData.children} Children` : ''}${bookingData.pets > 0 ? `, ${bookingData.pets} Pet${bookingData.pets > 1 ? 's' : ''}` : ''}</p>
                <p><strong>Duration:</strong> ${bookingData.nights} night${bookingData.nights > 1 ? 's' : ''}</p>
                <p style="color: #10b981; font-weight: 600;">✓ Powered by 16.72kW commercial-grade solar system</p>
            `;
        }

        function goToBookingStep(stepNumber) {
            currentBookingStep = stepNumber;
            
            // Hide all steps
            document.querySelectorAll('.booking-step').forEach(step => {
                step.classList.remove('active');
            });
            
            // Show selected step
            document.getElementById(`bookingStep${stepNumber}`).classList.add('active');

            // Update progress indicator
            document.querySelectorAll('.progress-step').forEach((step, index) => {
                const stepNum = index + 1;
                if (stepNum < stepNumber) {
                    step.classList.add('completed');
                    step.classList.remove('active');
                } else if (stepNum === stepNumber) {
                    step.classList.add('active');
                    step.classList.remove('completed');
                } else {
                    step.classList.remove('active', 'completed');
                }
            });

            // Update progress bars
            document.querySelectorAll('.progress-bar').forEach((bar, index) => {
                if (index + 1 < stepNumber) {
                    bar.classList.add('completed');
                } else {
                    bar.classList.remove('completed');
                }
            });

            // Update final booking summary if going to step 3
            if (stepNumber === 3) {
                updateFinalSummary();
            }
        }

        function updateFinalSummary() {
            const checkinDate = new Date(bookingData.checkin);
            const checkoutDate = new Date(bookingData.checkout);
            
            // Update booking summary
            document.getElementById('finalAccommodationName').textContent = accommodationNames[selectedAccommodation];
            document.getElementById('finalDates').textContent = `${checkinDate.toLocaleDateString()} - ${checkoutDate.toLocaleDateString()}`;
            document.getElementById('finalGuests').textContent = `${bookingData.adults} Adults${bookingData.children > 0 ? `, ${bookingData.children} Children` : ''}`;
            document.getElementById('finalNights').textContent = `${bookingData.nights} night${bookingData.nights > 1 ? 's' : ''}`;
            
            // Update price breakdown
            document.getElementById('finalAccommodationRate').textContent = `$${bookingData.nightlyRate}`;
            document.getElementById('finalNumberOfNights').textContent = bookingData.nights;
            document.getElementById('finalSubtotal').textContent = `$${bookingData.subtotal}`;
            document.getElementById('finalCleaningFee').textContent = `$${bookingData.cleaningFee}`;
            document.getElementById('finalServiceFee').textContent = `$${bookingData.serviceFee}`;
            
            // Show/hide optional fees
            const finalExtraGuestRow = document.getElementById('finalExtraGuestRow');
            const finalPetFeeRow = document.getElementById('finalPetFeeRow');
            
            if (bookingData.extraGuestCharge && bookingData.extraGuestCharge > 0) {
                finalExtraGuestRow.style.display = 'flex';
                document.getElementById('finalExtraGuestFee').textContent = `$${bookingData.extraGuestCharge}`;
            } else {
                finalExtraGuestRow.style.display = 'none';
            }
            
            if (bookingData.petFee && bookingData.petFee > 0) {
                finalPetFeeRow.style.display = 'flex';
                document.getElementById('finalPetFee').textContent = `$${bookingData.petFee}`;
            } else {
                finalPetFeeRow.style.display = 'none';
            }
            
            document.getElementById('finalGST').textContent = `$${bookingData.gst}`;
            document.getElementById('finalTotalAmount').textContent = `$${bookingData.total}`;
        }

        // Validate guest details before proceeding to step 3
        function validateGuestDetailsAndContinue() {
            // Collect guest data for validation
            const guestData = {
                firstName: document.getElementById('guestFirstName').value.trim(),
                lastName: document.getElementById('guestLastName').value.trim(),
                email: document.getElementById('guestEmail').value.trim(),
                phone: document.getElementById('guestPhone').value.trim()
            };

            // Validate required fields first with visual feedback
            let hasErrors = false;
            
            if (!guestData.firstName) {
                showFormError('guestFirstName', 'First name is required');
                hasErrors = true;
            }
            
            if (!guestData.lastName) {
                showFormError('guestLastName', 'Last name is required');
                hasErrors = true;
            }
            
            if (!guestData.email) {
                showFormError('guestEmail', 'Email address is required');
                hasErrors = true;
            }
            
            if (!guestData.phone) {
                showFormError('guestPhone', 'Phone number is required');
                hasErrors = true;
            } else {
                // Validate phone format if provided
                const phoneInput = document.getElementById('guestPhone');
                if (!validatePhoneNumber(phoneInput)) {
                    showFormError('guestPhone', 'Please enter a valid phone number (7-15 digits)');
                    hasErrors = true;
                }
            }
            
            if (hasErrors) {
                return;
            }

            // Validate email format
            const emailInput = document.getElementById('guestEmail');
            if (!validateEmail(emailInput)) {
                showFormError('guestEmail', 'Please enter a valid email address');
                return;
            }

            // If all validation passes, proceed to step 3
            goToBookingStep(3);
        }

        // BUTTON 3: Process booking and show confirmation
        async function processBookingAndConfirm() {
            // Collect guest data
            const guestData = {
                firstName: document.getElementById('guestFirstName').value,
                lastName: document.getElementById('guestLastName').value,
                email: document.getElementById('guestEmail').value,
                phone: document.getElementById('guestPhone').value,
                specialRequests: document.getElementById('specialRequests').value
            };

            // Validate required fields first
            if (!guestData.firstName || !guestData.lastName || !guestData.email || !guestData.phone) {
                alert('Please fill in all required fields');
                return;
            }

            // Validate email format
            const emailInput = document.getElementById('guestEmail');
            if (!validateEmail(emailInput)) {
                return;
            }

            // Update button state
            const button = event.target;
            button.innerHTML = 'Processing Booking with Uplisting <span class="loading-spinner"></span>';
            button.disabled = true;

            // Simulate booking API call to Uplisting
            await new Promise(resolve => setTimeout(resolve, 3000));

            // Mock successful booking
            const bookingReference = 'LR' + Date.now().toString().slice(-6);
            
            // Show success directly in step 3
            document.getElementById('bookingResultSection').innerHTML = `
                <div class="booking-success">
                    <div class="success-icon">✅</div>
                    <h3 style="color: var(--brand-teal); margin-bottom: 1rem;">Booking Confirmed!</h3>
                    <p>Thank you for choosing Lakeside Retreat. You'll receive a confirmation email shortly with all the details for your stay.</p>
                    <div style="background: rgba(45, 90, 90, 0.05); padding: 1rem; border-radius: 10px; margin: 1.5rem 0;">
                        <p><strong>Booking Reference:</strong> ${bookingReference}</p>
                        <p><strong>Total Paid (incl. GST):</strong> ${bookingData.total} NZD</p>
                        <p><strong>Confirmation sent to:</strong> ${guestData.email}</p>
                    </div>
                    <button class="btn btn-primary" onclick="closeBookingModal()" style="margin-top: 1rem;">Close & Plan Your Stay</button>
                </div>
            `;

            // Hide the back/confirm buttons
            button.parentElement.style.display = 'none';

            // In real implementation, this would:
            // 1. Process payment through Stripe/PayPal
            // 2. Create booking in Uplisting via API
            // 3. Send confirmation emails
            // 4. Update calendar availability
            // 5. Sync with all booking platforms
        }

        // === EMAIL VALIDATION FUNCTIONS ===

        function validateEmail(input) {
            const email = input.value.trim();
            const errorElement = document.getElementById(input.id + 'Error');
            
            // Email regex pattern
            const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            
            // Clear previous error
            if (errorElement) {
                errorElement.style.display = 'none';
                input.style.borderColor = '';
            }
            
            // Check if email is empty
            if (!email) {
                if (errorElement) {
                    errorElement.textContent = 'Please enter your email address';
                    errorElement.style.display = 'block';
                    input.style.borderColor = '#dc2626';
                }
                return false;
            }
            
            // Check email format
            if (!emailPattern.test(email)) {
                if (errorElement) {
                    errorElement.textContent = 'Please enter a valid email address (e.g., yourname@example.com)';
                    errorElement.style.display = 'block';
                    input.style.borderColor = '#dc2626';
                }
                return false;
            }
            
            // Check for common mistakes
            if (email.includes('..') || email.includes('@@') || email.startsWith('.') || email.endsWith('.')) {
                if (errorElement) {
                    errorElement.textContent = 'Please check your email address format';
                    errorElement.style.display = 'block';
                    input.style.borderColor = '#dc2626';
                }
                return false;
            }
            
            // Check domain
            const domain = email.split('@')[1];
            if (!domain || domain.length < 3) {
                if (errorElement) {
                    errorElement.textContent = 'Please enter a valid email domain';
                    errorElement.style.display = 'block';
                    input.style.borderColor = '#dc2626';
                }
                return false;
            }
            
            // Email is valid
            if (errorElement) {
                errorElement.style.display = 'none';
                input.style.borderColor = '#10b981';
            }
            return true;
        }

        function clearEmailError(input) {
            const errorElement = document.getElementById(input.id + 'Error');
            if (errorElement) {
                errorElement.style.display = 'none';
                input.style.borderColor = '';
            }
        }

        // Form validation helper functions
        function showFormError(fieldId, message) {
            const input = document.getElementById(fieldId);
            const errorElement = document.getElementById(fieldId + 'Error');
            
            if (input) {
                input.classList.add('error');
            }
            
            if (errorElement) {
                errorElement.textContent = message;
                errorElement.classList.add('show');
            }
        }

        function clearFormError(fieldId) {
            const input = document.getElementById(fieldId);
            const errorElement = document.getElementById(fieldId + 'Error');
            
            if (input) {
                input.classList.remove('error');
            }
            
            if (errorElement) {
                errorElement.classList.remove('show');
            }
        }

        // Phone number validation function
        function validatePhoneNumber(input) {
            const phone = input.value.trim();
            
            // Allow empty for optional fields
            if (!phone) return true;
            
            // Remove all non-digit characters to count actual numbers
            const digitsOnly = phone.replace(/\D/g, '');
            
            // Check minimum and maximum length
            if (digitsOnly.length < 7) {
                return false;
            }
            
            if (digitsOnly.length > 15) {
                return false;
            }
            
            // Check for common valid patterns (basic format check)
            // Allows: +64 3 123 4567, (03) 123-4567, 021 123 456, 0312341234, etc.
            const phonePattern = /^[\+]?[\d\s\-\(\)]{7,20}$/;
            
            if (!phonePattern.test(phone)) {
                return false;
            }
            
            return true;
        }

        // Phone field validation with error display
        function validatePhoneField(input) {
            const phone = input.value.trim();
            
            if (!phone) {
                // Don't show error for empty field during blur, will be caught on submit
                return true;
            }
            
            if (!validatePhoneNumber(input)) {
                showFormError('guestPhone', 'Please enter a valid phone number (7-15 digits)');
                return false;
            } else {
                clearFormError('guestPhone');
                return true;
            }
        }

        // Auto-scroll to booking button when date fields are focused
        function scrollToBookingButton() {
            // Small delay to allow date picker to open first
            setTimeout(() => {
                // Find the "Check Availability & Book Instantly" button
                const bookingButton = document.querySelector('button[onclick="instantBookingWithPayment()"]');
                
                if (bookingButton) {
                    bookingButton.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                }
            }, 300);
        }

        // === CONTACT FORM EMAIL HANDLER ===
        
        async function sendContactMessage(event) {
            event.preventDefault();
            
            const submitBtn = document.getElementById('contactSubmitBtn');
            const statusDiv = document.getElementById('contactFormStatus');
            
            // Get form values
            const name = document.getElementById('contactName').value.trim();
            const email = document.getElementById('contactEmail').value.trim();
            const message = document.getElementById('contactMessage').value.trim();
            
            // Validate email
            const emailInput = document.getElementById('contactEmail');
            if (!validateEmail(emailInput)) {
                return;
            }
            
            // Update button state
            submitBtn.disabled = true;
            submitBtn.innerHTML = 'Sending... <span class="loading-spinner"></span>';
            
            try {
                // Check if backend server is available
                const backendUrl = window.location.hostname === 'localhost' 
                    ? 'http://localhost:3000' 
                    : window.location.origin;
                
                // Send to backend API
                const response = await fetch(`${backendUrl}/api/contact`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        name: name,
                        email: email,
                        message: message,
                        timestamp: new Date().toISOString()
                    })
                });
                
                if (response.ok) {
                    // Success
                    statusDiv.style.display = 'block';
                    statusDiv.style.color = '#10b981';
                    statusDiv.innerHTML = '✅ Message sent successfully! We\'ll get back to you within 24 hours.';
                    
                    // Reset form
                    document.getElementById('contactForm').reset();
                    
                    // Hide status after 5 seconds
                    setTimeout(() => {
                        statusDiv.style.display = 'none';
                    }, 5000);
                } else {
                    throw new Error('Failed to send message');
                }
                
            } catch (error) {
                // Fallback to mailto if backend is not available
                const subject = encodeURIComponent('Website Contact from ' + name);
                const body = encodeURIComponent(`Name: ${name}\nEmail: ${email}\n\nMessage:\n${message}`);
                const mailtoLink = `mailto:info@lakesideretreat.co.nz?subject=${subject}&body=${body}`;
                
                // Open mailto link
                window.location.href = mailtoLink;
                
                // Show fallback message
                statusDiv.style.display = 'block';
                statusDiv.style.color = '#f59e0b';
                statusDiv.innerHTML = '📧 Opening your email client to send message...';
                
                // Reset form after short delay
                setTimeout(() => {
                    document.getElementById('contactForm').reset();
                    statusDiv.style.display = 'none';
                }, 3000);
            } finally {
                // Reset button
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'Send Message';
            }
        }

        // === ORIGINAL WEBSITE FUNCTIONS ===

        function showPage(pageName, updateHash = true) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });

            const pageElement = document.getElementById(pageName + 'Page');
            if (pageElement) {
                pageElement.classList.add('active');
            }

            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            const activeLink = document.querySelector(`[onclick="showPage('${pageName}'); return false;"]`);
            if (activeLink && activeLink.classList.contains('nav-link')) {
                activeLink.classList.add('active');
            }

            updateBreadcrumbs(pageName);
            currentPage = pageName;
            
            // Update URL hash for deep linking and back button support
            if (updateHash && window.location.hash !== '#' + pageName) {
                history.pushState({ page: pageName }, '', '#' + pageName);
            }
            
            // FORCE scroll to top - multiple methods for reliability
            document.documentElement.scrollTop = 0;
            document.body.scrollTop = 0;
            window.scrollTo(0, 0);
            
            // Also try smooth scroll
            setTimeout(() => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, 50);
            
            trackPageView(pageName);
        }
        
        // Handle browser back/forward buttons
        window.addEventListener('popstate', function(event) {
            if (event.state && event.state.page) {
                showPage(event.state.page, false);
            } else {
                // Check hash in URL
                var hash = window.location.hash.substring(1);
                if (hash && document.getElementById(hash + 'Page')) {
                    showPage(hash, false);
                } else {
                    showPage('home', false);
                }
            }
        });
        
        // Handle initial page load with hash (deep linking)
        function initializeFromHash() {
            var hash = window.location.hash.substring(1);
            var validPages = ['home', 'stay', 'gallery', 'blog', 'reviews', 'story', 'explore', 'contact'];
            
            // Check for booking intent from URL parameters or hash
            var urlParams = new URLSearchParams(window.location.search);
            var pageParam = urlParams.get('page');
            var accommodationParam = urlParams.get('accommodation');
            
            // Handle ?page=book or #booking - open booking modal
            if (pageParam === 'book' || hash === 'booking' || hash === 'book') {
                showPage('home', false);
                // Small delay to ensure page is loaded before opening modal
                setTimeout(function() {
                    openBookingModal(accommodationParam || null);
                    // Clean up URL to avoid modal reopening on refresh
                    if (window.history.replaceState) {
                        window.history.replaceState({}, document.title, window.location.pathname);
                    }
                }, 300);
                return;
            }
            
            if (hash && validPages.includes(hash)) {
                showPage(hash, false);
            } else {
                showPage('home', false);
            }
        }

        function showLegalPage(legalType) {
            // Create modal for legal pages
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                z-index: 10000;
                display: flex;
                justify-content: center;
                align-items: center;
                padding: 20px;
            `;

            const legalContent = {
                terms: {
                    title: 'Terms & Conditions',
                    content: `
                        <h2>Terms & Conditions</h2>
                        <p><strong>Last updated: January 2024</strong></p>
                        
                        <h3>1. Booking & Payment</h3>
                        <p>All bookings require a valid credit card for reservation. Payment is processed through Stripe for secure transactions. Full payment is required at time of booking unless otherwise specified.</p>
                        
                        <h3>2. Cancellation Policy</h3>
                        <p>Cancellations made 14 days or more before arrival receive a full refund. Cancellations within 14 days are non-refundable. No-shows will be charged the full amount.</p>
                        
                        <h3>3. Check-in & Check-out</h3>
                        <p>Check-in is available from 3:00 PM. Check-out is required by 10:00 AM. Early check-in or late check-out may be available upon request and subject to availability.</p>
                        
                        <h3>4. Guest Responsibilities</h3>
                        <p>Guests are responsible for the accommodation during their stay. Any damage or excessive cleaning required will be charged to the guest's account. Smoking is not permitted inside any accommodation.</p>
                        
                        <h3>5. Pet Policy</h3>
                        <p>Pets are welcome in Lakeside Cottage only, subject to prior approval. A pet fee of $50 per stay applies. Pets must be well-behaved and not left unattended.</p>
                        
                        <h3>6. Solar System</h3>
                        <p>Our accommodation is powered by a commercial-grade solar system. While we maintain 99.9% uptime, we cannot guarantee uninterrupted power supply. No refunds will be given for power-related issues.</p>
                    `
                },
                privacy: {
                    title: 'Privacy Policy',
                    content: `
                        <h2>Privacy Policy</h2>
                        <p><strong>Last updated: January 2024</strong></p>
                        
                        <h3>1. Information We Collect</h3>
                        <p>We collect information you provide directly to us, such as when you make a booking, contact us, or sign up for our newsletter. This may include your name, email address, phone number, and payment information.</p>
                        
                        <h3>2. How We Use Your Information</h3>
                        <p>We use the information we collect to process your bookings, communicate with you about your stay, send you marketing materials (with your consent), and improve our services.</p>
                        
                        <h3>3. Information Sharing</h3>
                        <p>We do not sell, trade, or otherwise transfer your personal information to third parties except as described in this policy. We may share information with our booking partners (Uplisting) and payment processors (Stripe) as necessary to provide our services.</p>
                        
                        <h3>4. Data Security</h3>
                        <p>We implement appropriate security measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction.</p>
                        
                        <h3>5. Cookies</h3>
                        <p>We use cookies to enhance your browsing experience and analyze website traffic. You can control cookie settings through your browser preferences.</p>
                        
                        <h3>6. Your Rights</h3>
                        <p>You have the right to access, correct, or delete your personal information. Contact us at info@lakesideretreat.co.nz to exercise these rights.</p>
                    `
                },
                booking: {
                    title: 'Booking Policy',
                    content: `
                        <h2>Booking Policy</h2>
                        <p><strong>Last updated: January 2024</strong></p>
                        
                        <h3>1. Reservation Process</h3>
                        <p>All bookings are confirmed immediately upon payment processing. You will receive a confirmation email with booking details and arrival instructions within 24 hours.</p>
                        
                        <h3>2. Payment Methods</h3>
                        <p>We accept all major credit cards through our secure Stripe payment system. Payment is processed in New Zealand Dollars (NZD).</p>
                        
                        <h3>3. Rate Information</h3>
                        <p>Rates are subject to change without notice. The rate confirmed at time of booking is guaranteed for your stay. Rates include GST (Goods and Services Tax).</p>
                        
                        <h3>4. Occupancy Limits</h3>
                        <p>Dome Pinot & Dome Rosé: Maximum 2 adults, no children permitted. Lakeside Cottage: Maximum 3 guests, children and pets welcome.</p>
                        
                        <h3>5. Minimum Stay Requirements</h3>
                        <p>Minimum 2-night stay applies to Lakeside Cottage during peak season (October to May). Single night bookings may be available during off-peak periods for all accommodations.</p>
                        
                        <h3>6. Special Requests</h3>
                        <p>Special requests (early check-in, late check-out, dietary requirements) should be made at time of booking. We will accommodate requests where possible but cannot guarantee availability.</p>
                    `
                },
                cancellation: {
                    title: 'Cancellation Policy',
                    content: `
                        <h2>Cancellation Policy</h2>
                        <p><strong>Last updated: January 2024</strong></p>
                        
                        <h3>1. Standard Cancellation</h3>
                        <p>Cancellations made 14 days or more before your scheduled arrival date will receive a full refund minus a $50 processing fee.</p>
                        
                        <h3>2. Late Cancellation</h3>
                        <p>Cancellations made within 14 days of arrival are non-refundable. We recommend travel insurance to protect against unforeseen circumstances.</p>
                        
                        <h3>3. No-Show Policy</h3>
                        <p>Guests who do not arrive on their scheduled check-in date without prior notice will be charged the full amount of their booking.</p>
                        
                        <h3>4. Weather & Natural Events</h3>
                        <p>No refunds will be given for weather-related cancellations or natural events. We recommend travel insurance for protection against such events.</p>
                        
                        <h3>5. COVID-19 Policy</h3>
                        <p>If you are unable to travel due to COVID-19 restrictions, we will offer a full refund or credit for a future stay. Proof of restriction may be required.</p>
                        
                        <h3>6. Modification Requests</h3>
                        <p>Date changes are subject to availability and may incur additional charges. Contact us directly to discuss modification options.</p>
                    `
                },
                safety: {
                    title: 'Health & Safety Policy',
                    content: `
                        <h2>Health & Safety Policy</h2>
                        <p><strong>Last updated: January 2024</strong></p>
                        
                        <h3>1. Fire Safety</h3>
                        <p>All accommodations are equipped with smoke detectors, fire extinguishers, and emergency evacuation plans posted in each unit. Guests must familiarize themselves with emergency exit routes upon arrival.</p>
                        
                        <h3>2. Electrical Safety</h3>
                        <p>Our solar power system is professionally installed and regularly maintained. Report any electrical concerns immediately. Do not use unauthorized electrical equipment.</p>
                        
                        <h3>3. Water Safety</h3>
                        <p>Lake access is provided but guests swim at their own risk. No lifeguard on duty. Children must be supervised at all times near water. Hot tubs and spas must be used responsibly.</p>
                        
                        <h3>4. Emergency Procedures</h3>
                        <p>In case of emergency, dial 111. Emergency contact details are provided in each accommodation. Stephen & Sandy are available 24/7 for urgent assistance: +64 21 368 682</p>
                        
                        <h3>5. Building Safety</h3>
                        <p>All buildings comply with New Zealand Building Code requirements. Regular safety inspections are conducted. Report any maintenance issues immediately.</p>
                        
                        <h3>6. First Aid</h3>
                        <p>Basic first aid supplies are available in each accommodation. For serious medical emergencies, contact emergency services immediately.</p>
                    `
                },
                accessibility: {
                    title: 'Accessibility Information',
                    content: `
                        <h2>Accessibility Information</h2>
                        <p><strong>Last updated: January 2024</strong></p>
                        
                        <h3>1. Physical Access</h3>
                        <p>Our property has natural terrain with some sloped areas. Dome accommodations have steps and are not wheelchair accessible. The Lakeside Cottage has level access and wider doorways for easier mobility.</p>
                        
                        <h3>2. Parking</h3>
                        <p>Designated parking spaces are available close to all accommodations. Cottage guests have garage access for weather protection.</p>
                        
                        <h3>3. Communication Support</h3>
                        <p>We welcome guests with hearing or speech impairments. Email communication is available for all booking and service requests. Visual aids and written instructions can be provided upon request.</p>
                        
                        <h3>4. Service Animals</h3>
                        <p>Registered service animals are welcome in all accommodations at no additional charge. Please notify us at booking to ensure appropriate preparations.</p>
                        
                        <h3>5. Special Requirements</h3>
                        <p>We are committed to reasonable accommodations for guests with disabilities. Please contact us before booking to discuss specific needs and ensure we can provide appropriate support.</p>
                        
                        <h3>6. Local Accessibility Services</h3>
                        <p>Information about accessible attractions, restaurants, and services in Central Otago can be provided. We work with local operators to ensure inclusive experiences.</p>
                    `
                }
            };

            const content = legalContent[legalType];
            if (!content) return;

            modal.innerHTML = `
                <div style="background: white; max-width: 800px; max-height: 90vh; overflow-y: auto; border-radius: 15px; padding: 2rem; position: relative;">
                    <button onclick="closeLegalModal()" style="position: absolute; top: 1rem; right: 1rem; background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #666;">&times;</button>
                    <div style="color: #333; line-height: 1.6;">
                        ${content.content}
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            
            // Store current scroll position
            modal.dataset.scrollPosition = window.pageYOffset;
            
            // Close modal when clicking outside
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeLegalModal();
                }
            });
        }

        function closeLegalModal() {
            const modal = document.querySelector('div[style*="position: fixed"][style*="z-index: 10000"]');
            if (modal) {
                const scrollPosition = modal.dataset.scrollPosition || window.pageYOffset;
                modal.remove();
                // Restore scroll position to prevent jumping to top
                window.scrollTo(0, parseInt(scrollPosition));
            }
        }

        function updateBreadcrumbs(pageName) {
            const breadcrumbNames = {
                home: 'Home',
                stay: 'Accommodations',
                gallery: 'Gallery',
                blog: 'Central Otago Guides',
                reviews: 'Reviews',
                story: 'Our Story',
                explore: 'Explore',
                contact: 'Contact'
            };

            document.getElementById('currentPage').textContent = breadcrumbNames[pageName] || 'Lakeside Retreat';
        }

        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'center' 
                });
            }
        }

        function toggleGuide(headerElement) {
            const guideItem = headerElement.closest('.guide-item');
            const guideContent = guideItem.querySelector('.guide-content');
            const arrow = headerElement.querySelector('.guide-arrow');
            
            if (guideContent.style.maxHeight && guideContent.style.maxHeight !== '0px') {
                // Close the guide
                guideContent.style.maxHeight = '0px';
                arrow.style.transform = 'rotate(0deg)';
            } else {
                // Open the guide
                guideContent.style.maxHeight = guideContent.scrollHeight + 'px';
                arrow.style.transform = 'rotate(180deg)';
            }
        }

        function toggleMobileMenu() {
            const mobileNav = document.getElementById('mobileNav');
            mobileNav.classList.toggle('active');
            
            if (mobileNav.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }

        function handleTouchStart(e) {
            touchStartX = e.touches[0].clientX;
        }

        function handleTouchEnd(e) {
            touchEndX = e.changedTouches[0].clientX;
            handleSwipe();
        }

        function handleSwipe() {
            const swipeThreshold = 100;
            const swipeDistance = touchEndX - touchStartX;
            
            if (Math.abs(swipeDistance) > swipeThreshold) {
                const currentIndex = pages.indexOf(currentPage);
                
                if (swipeDistance > 0 && currentIndex > 0) {
                    showPage(pages[currentIndex - 1]);
                } else if (swipeDistance < 0 && currentIndex < pages.length - 1) {
                    showPage(pages[currentIndex + 1]);
                }
            }
        }

        function openSearch() {
            document.getElementById('searchOverlay').classList.add('active');
            document.getElementById('searchInput').focus();
            document.body.style.overflow = 'hidden';
        }

        function closeSearch() {
            document.getElementById('searchOverlay').classList.remove('active');
            document.getElementById('searchInput').value = '';
            document.getElementById('searchResults').innerHTML = '';
            document.body.style.overflow = '';
        }

        function performSearch() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const results = searchData.filter(item => 
                item.title.toLowerCase().includes(query) || 
                item.description.toLowerCase().includes(query)
            );

            const resultsContainer = document.getElementById('searchResults');
            
            if (query.length === 0) {
                resultsContainer.innerHTML = '';
                return;
            }

            if (results.length === 0) {
                resultsContainer.innerHTML = '<div class="search-result">No results found</div>';
                return;
            }

            resultsContainer.innerHTML = results.map(result => 
                `<div class="search-result" onclick="showPage('${result.page}'); closeSearch();">
                    <strong>${result.title}</strong><br>
                    <small>${result.description}</small>
                </div>`
            ).join('');
        }

        // Enhanced Gallery System
        function openLightbox(imageSrc, imageTitle = '') {
            const lightbox = document.getElementById('lightbox');
            const lightboxImage = document.getElementById('lightboxImage');
            const lightboxTitle = document.getElementById('lightboxTitle');
            
            lightboxImage.src = imageSrc;
            lightbox.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Set title if provided
            if (lightboxTitle && imageTitle) {
                lightboxTitle.textContent = imageTitle;
                lightboxTitle.style.display = 'block';
            } else if (lightboxTitle) {
                lightboxTitle.style.display = 'none';
            }
            
            currentImageIndex = galleryImages.indexOf(imageSrc);
            if (currentImageIndex === -1) currentImageIndex = 0;
            
            // Update thumbnail navigation
            updateThumbnailNav();
            
            // Add loading state
            lightboxImage.style.opacity = '0.5';
            lightboxImage.onload = function() {
                this.style.opacity = '1';
            };
        }

        function closeLightbox() {
            document.getElementById('lightbox').classList.remove('active');
            document.body.style.overflow = '';
        }

        function nextImage() {
            currentImageIndex = (currentImageIndex + 1) % galleryImages.length;
            const lightboxImage = document.getElementById('lightboxImage');
            lightboxImage.style.opacity = '0.5';
            lightboxImage.src = galleryImages[currentImageIndex];
            lightboxImage.onload = function() {
                this.style.opacity = '1';
            };
            updateThumbnailNav();
        }

        function prevImage() {
            currentImageIndex = currentImageIndex === 0 ? galleryImages.length - 1 : currentImageIndex - 1;
            const lightboxImage = document.getElementById('lightboxImage');
            lightboxImage.style.opacity = '0.5';
            lightboxImage.src = galleryImages[currentImageIndex];
            lightboxImage.onload = function() {
                this.style.opacity = '1';
            };
            updateThumbnailNav();
        }
        
        function updateThumbnailNav() {
            const thumbnailContainer = document.getElementById('lightboxThumbnails');
            if (!thumbnailContainer) return;
            
            thumbnailContainer.innerHTML = '';
            galleryImages.forEach((img, index) => {
                const thumb = document.createElement('div');
                thumb.className = `thumbnail ${index === currentImageIndex ? 'active' : ''}`;
                thumb.style.cssText = `
                    width: 60px; height: 40px; margin: 0 4px; cursor: pointer; border-radius: 4px;
                    background-image: url('${img}'); background-size: cover; background-position: center;
                    border: 2px solid ${index === currentImageIndex ? 'var(--brand-teal)' : 'transparent'};
                    transition: all 0.3s ease;
                `;
                thumb.onclick = () => {
                    currentImageIndex = index;
                    document.getElementById('lightboxImage').src = galleryImages[currentImageIndex];
                    updateThumbnailNav();
                };
                thumbnailContainer.appendChild(thumb);
            });
        }

        // Virtual Tour Functionality (placeholder)
        function startVirtualTour(accommodation) {
            alert(`Virtual tour feature coming soon! For now, browse through our ${accommodation} photo gallery above or contact us for a video tour.`);
        }

        function showSocialProof() {
            const socialProof = document.getElementById('socialProof');
            const message = socialProofMessages[socialProofIndex];
            
            document.getElementById('socialProofText').textContent = `${message.name} ${message.action}!`;
            document.getElementById('socialProofTime').textContent = message.time;
            
            socialProof.classList.add('show');
            
            setTimeout(() => {
                socialProof.classList.remove('show');
            }, 4000);
            
            socialProofIndex = (socialProofIndex + 1) % socialProofMessages.length;
            setTimeout(showSocialProof, Math.random() * 30000 + 45000);
        }

        function acceptCookies() {
            document.getElementById('cookieButtons').style.display = 'none';
            trackEvent('cookies', 'accepted');
        }

        function declineCookies() {
            document.getElementById('cookieButtons').style.display = 'none';
            trackEvent('cookies', 'declined');
        }
        
        // Toggle FAQ dropdown functionality
        function toggleFAQ(element) {
            const answer = element.nextElementSibling;
            const arrow = element.querySelector('.faq-arrow');
            
            if (answer.style.maxHeight && answer.style.maxHeight !== '0px') {
                // Close
                answer.style.maxHeight = '0';
                arrow.style.transform = 'rotate(0deg)';
            } else {
                // Open
                answer.style.maxHeight = answer.scrollHeight + 'px';
                arrow.style.transform = 'rotate(180deg)';
            }
        }

        function toggleFooterFAQ() {
            const faqContent = document.getElementById('footerFaqContent');
            const faqBtnText = document.getElementById('faqBtnText');
            const faqBtnArrow = document.getElementById('faqBtnArrow');
            const faqBtn = document.getElementById('faqToggleBtn');
            
            if (faqContent.classList.contains('footer-faq-expanded')) {
                // Collapse
                faqContent.classList.remove('footer-faq-expanded');
                faqBtnText.textContent = 'Frequently Asked Questions';
                faqBtnArrow.style.transform = 'rotate(0deg)';
                faqBtn.setAttribute('aria-expanded', 'false');
                faqContent.setAttribute('aria-hidden', 'true');
                
                // Add a subtle animation to the button
                faqBtn.style.transform = 'scale(0.98)';
                setTimeout(() => {
                    faqBtn.style.transform = 'scale(1)';
                }, 150);
            } else {
                // Expand
                faqContent.classList.add('footer-faq-expanded');
                faqBtnText.textContent = 'Hide FAQ';
                faqBtnArrow.style.transform = 'rotate(180deg)';
                faqBtn.setAttribute('aria-expanded', 'true');
                faqContent.setAttribute('aria-hidden', 'false');
                
                // Add a subtle animation to the button
                faqBtn.style.transform = 'scale(1.02)';
                setTimeout(() => {
                    faqBtn.style.transform = 'scale(1)';
                }, 150);
                
                // Smooth scroll to FAQ section after expansion
                setTimeout(() => {
                    faqBtn.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'start' 
                    });
                }, 300);
            }
        }

        function trackEvent(action, category) {
            if (typeof gtag !== 'undefined' && action === 'booking_intent') {
                trackBookingIntent(category);
            }
            // Event tracked
        }

        function trackPageView(page) {
            if (typeof gtag !== 'undefined') {
                gtag('event', 'page_view', {
                    'page_title': page,
                    'page_location': window.location.href
                });
            }
            // Page view tracked
        }

        function updateScrollIndicator() {
            const scrollHeight = document.documentElement.scrollHeight - window.innerHeight;
            const scrollTop = window.scrollY;
            const scrollPercentage = (scrollTop / scrollHeight) * 100;
            
            document.getElementById('scrollIndicator').style.width = `${scrollPercentage}%`;
        }

        // Additional reviews data for load more functionality
        var additionalReviews = [
            {
                rating: 5.0,
                title: "Perfect Romantic Getaway",
                text: "We celebrated our 10th anniversary here and it exceeded all expectations. The dome's panoramic views of Lake Dunstan at sunset were breathtaking. Stephen's passion for sustainable energy is infectious - we learned so much about their solar system!",
                name: "Sarah & Tom W.",
                location: "Brisbane, Australia",
                date: "September 2023",
                initial: "S",
                color: "#ec4899"
            },
            {
                rating: 5.0,
                title: "Best Cycling Base Camp",
                text: "As avid cyclists, we've stayed at many places along the trail, but Lakeside Retreat is hands down the best. Direct trail access, secure bike storage, and coming back to a luxurious dome after 80km on the saddle is pure bliss.",
                name: "Mark H.",
                location: "Dunedin, New Zealand",
                date: "August 2023",
                initial: "M",
                color: "#3b82f6"
            },
            {
                rating: 5.0,
                title: "Family Paradise",
                text: "Our kids (8 and 11) absolutely loved the cottage! Safe lake access, kayaks to use, and they were fascinated watching the solar monitoring dashboard. Sandy's local tips for family activities were invaluable. Already planning our return!",
                name: "Emma & John P.",
                location: "Perth, Australia",
                date: "July 2023",
                initial: "E",
                color: "#10b981"
            },
            {
                rating: 5.0,
                title: "Wine Country Dream",
                text: "We visited 12 wineries during our stay and Lakeside Retreat was the perfect base. The hosts' recommendations were spot-on, and returning to our dome each evening with a bottle of local Pinot was magical. The vineyard views are stunning!",
                name: "Rachel N.",
                location: "Singapore",
                date: "June 2023",
                initial: "R",
                color: "#8b5cf6"
            }
        ];
        
        var moreReviewsLoaded = false;
        
        function loadMoreReviews() {
            if (moreReviewsLoaded) {
                return;
            }
            
            var container = document.getElementById('reviewsContainer');
            var button = event.target;
            
            // Show loading state
            button.innerHTML = 'Loading...';
            button.disabled = true;
            
            // Simulate loading delay for better UX
            setTimeout(function() {
                additionalReviews.forEach(function(review) {
                    var reviewCard = document.createElement('div');
                    reviewCard.className = 'card';
                    reviewCard.style.opacity = '0';
                    reviewCard.style.transform = 'translateY(20px)';
                    reviewCard.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                    
                    reviewCard.innerHTML = 
                        '<div class="card-content">' +
                            '<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">' +
                                '<div style="display: flex; align-items: center;">' +
                                    '<span style="color: #fbbf24;">★★★★★</span>' +
                                    '<span style="margin-left: 0.5rem; font-weight: 600; color: var(--brand-teal);">' + review.rating.toFixed(1) + '</span>' +
                                '</div>' +
                            '</div>' +
                            '<h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--dark);">' + review.title + '</h4>' +
                            '<p class="card-text">"' + review.text + '"</p>' +
                            '<div style="display: flex; align-items: center; gap: 1rem; margin-top: 1.5rem;">' +
                                '<div style="width: 40px; height: 40px; border-radius: 50%; background: ' + review.color + '; color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">' + review.initial + '</div>' +
                                '<div>' +
                                    '<div style="font-weight: 600;">' + review.name + '</div>' +
                                    '<div style="font-size: 0.9rem; opacity: 0.7;">' + review.location + ' • ' + review.date + '</div>' +
                                '</div>' +
                            '</div>' +
                        '</div>';
                    
                    container.appendChild(reviewCard);
                    
                    // Trigger animation
                    setTimeout(function() {
                        reviewCard.style.opacity = '1';
                        reviewCard.style.transform = 'translateY(0)';
                    }, 50);
                });
                
                // Update button
                button.innerHTML = 'All Reviews Loaded';
                button.style.opacity = '0.6';
                button.style.cursor = 'default';
                moreReviewsLoaded = true;
            }, 500);
        }

        // Accordion functionality
        function toggleAccordion(id) {
            const content = document.getElementById(id);
            const header = content.previousElementSibling;
            
            // Toggle active class
            content.classList.toggle('active');
            header.classList.toggle('active');
            
            // Close other accordions in the same container
            const container = content.closest('.accordion-container');
            const otherContents = container.querySelectorAll('.accordion-content');
            const otherHeaders = container.querySelectorAll('.accordion-header');
            
            otherContents.forEach(item => {
                if (item !== content && item.classList.contains('active')) {
                    item.classList.remove('active');
                }
            });
            
            otherHeaders.forEach(item => {
                if (item !== header && item.classList.contains('active')) {
                    item.classList.remove('active');
                }
            });
        }

        // Keyboard Navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeSearch();
                closeLightbox();
                closeBookingModal();
                
                const mobileNav = document.getElementById('mobileNav');
                if (mobileNav.classList.contains('active')) {
                    toggleMobileMenu();
                }
            }
            
            if (document.getElementById('lightbox').classList.contains('active')) {
                if (e.key === 'ArrowLeft') prevImage();
                if (e.key === 'ArrowRight') nextImage();
            }
        });

        // Close overlays when clicking outside
        document.addEventListener('click', function(e) {
            const searchOverlay = document.getElementById('searchOverlay');
            const lightbox = document.getElementById('lightbox');
            const bookingModal = document.getElementById('bookingModal');
            
            if (e.target === searchOverlay) closeSearch();
            if (e.target === lightbox) closeLightbox();
            if (e.target === bookingModal) closeBookingModal();
        });

        // SEO performance monitoring
        window.addEventListener('load', () => {
            if (typeof PerformanceObserver !== 'undefined') {
                new PerformanceObserver((entryList) => {
                    for (const entry of entryList.getEntries()) {
                        if (entry.entryType === 'navigation') {
                            if (typeof gtag !== 'undefined') {
                                gtag('event', 'page_load_time', {
                                    'event_category': 'Performance',
                                    'event_label': 'Navigation',
                                    'value': Math.round(entry.loadEventEnd - entry.loadEventStart)
                                });
                            }
                        }
                    }
                }).observe({entryTypes: ['navigation']});
            }
        });
    </script>
<!-- STEP 1: Find the end of your existing JavaScript (around line 1800-2000) -->
        
        // ... your existing functions end here
        
    
<!-- STEP 2: ADD THIS NEW SCRIPT SECTION RIGHT HERE -->
<script>
        // ===========================================
        // BACKEND API CONNECTION - ADD THIS SECTION
        // ===========================================

        // Backend API URL - Render deployment
        const API_BASE_URL = 'https://lakeside-retreat-staging.onrender.com';
        
        // Uplisting Property ID Configuration
        const UPLISTING_PROPERTY_IDS = {
            'dome-pinot': '82753',
            'dome-rose': '82754',
            'lakeside-cottage': '80360'
        };
        
        // Stripe Configuration
        const STRIPE_PUBLIC_KEY = 'pk_live_51ObA6xDwsGZX1xFlqypkYd726EKN1efLay2VvnIXkYvdh6qPWC5GfMyB1SPyfd8OZHJZ3ftmOQqb1geV7mz4TgBH00p0Ve7KKX';
        let stripeInstance = null;

        // Test backend connection on page load
        async function testBackendConnection() {
            try {
                const response = await fetch(`${API_BASE_URL}/health`);
                const data = await response.json();
                // Console statement removed for production
                
                // Optional: Show connection status for debugging
                if (window.location.search.includes('debug')) {
                    // Console statement removed for production
                }
                
                return true;
            } catch (error) {
                // Console statement removed for production
                return false;
            }
        }

        // Get CSRF token before making POST requests
        // csrfToken already declared above

        async function getCSRFToken() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/csrf-token`, {
                    credentials: 'include'
                });
                const data = await response.json();
                csrfToken = data.csrfToken;
                return csrfToken;
            } catch (error) {
                // Console statement removed for production
                return null;
            }
        }

        // Secure API call wrapper
        async function secureApiCall(endpoint, options = {}) {
            const url = `${API_BASE_URL}${endpoint}`;
            
            const defaultOptions = {
                credentials: 'include',
                headers: {
                    'Content-Type': 'application/json',
                    'X-Requested-With': 'XMLHttpRequest'
                }
            };
            
            // Add CSRF token for POST requests
            if (options.method === 'POST' && csrfToken) {
                defaultOptions.headers['X-CSRF-Token'] = csrfToken;
            }
            
            const finalOptions = {
                ...defaultOptions,
                ...options,
                headers: { ...defaultOptions.headers, ...options.headers }
            };
            
            try {
                const response = await fetch(url, finalOptions);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                return await response.json();
            } catch (error) {
                // Console statement removed for production
                throw error;
            }
        }

        // Load accommodations from backend
        async function loadAccommodations() {
            try {
                const data = await secureApiCall('/api/accommodations');
                const accommodations = data.accommodations;
                
                // Console statement removed for production
                
                // Update accommodation cards with real data
                accommodations.forEach(accommodation => {
                    updateAccommodationCard(accommodation);
                });
                
                return accommodations;
            } catch (error) {
                // Console statement removed for production
                // Continue with static data - no user impact
            }
        }

        function updateAccommodationCard(accommodation) {
            // Find accommodation cards by data attribute
            const cardElement = document.querySelector(`[data-accommodation="${accommodation.id}"]`);
            
            if (cardElement) {
                // Update price
                const priceElement = cardElement.querySelector('.price, .card-price');
                if (priceElement) {
                    priceElement.textContent = `$${accommodation.price}/night`;
                }
                
                // Update description
                const descElement = cardElement.querySelector('.description, .card-text');
                if (descElement) {
                    descElement.textContent = accommodation.description;
                }
                
                // Update max guests
                const guestsElement = cardElement.querySelector('.max-guests, .guests');
                if (guestsElement) {
                    guestsElement.textContent = `Up to ${accommodation.maxGuests} guests`;
                }
            }
        }

        // Enhanced booking function (integrate with your existing booking)
        async function createBookingWithBackend(bookingData) {
            try {
                // Ensure we have a CSRF token
                if (!csrfToken) {
                    await getCSRFToken();
                }
                
                const response = await secureApiCall('/api/create-booking', {
                    method: 'POST',
                    body: JSON.stringify(bookingData)
                });
                
                // Console statement removed for production
                return response;
            } catch (error) {
                // Console statement removed for production
                // Fallback to your existing booking flow
                throw error;
            }
        }

        // Initialize backend connection when page loads
        document.addEventListener('DOMContentLoaded', async function() {
            // Console statement removed for production
            
            // Test backend connection
            const backendConnected = await testBackendConnection();
            
            if (backendConnected) {
                // Get CSRF token
                await getCSRFToken();
                
                // Load dynamic accommodations data
                await loadAccommodations();
                
                // Console statement removed for production
            } else {
                // Console statement removed for production
            }
        });

        // ========================================
        // FLOATING BOOK NOW BUTTON
        // ========================================
        function createFloatingBookButton() {
            const floatingButton = document.createElement('div');
            floatingButton.id = 'floating-book-button';
            floatingButton.innerHTML = `
                <button onclick="openBookingModal()" style="
                    background: linear-gradient(135deg, #2d5a5a 0%, #1a3a3a 100%);
                    color: white;
                    border: none;
                    padding: 15px 25px;
                    border-radius: 50px;
                    font-weight: 600;
                    font-size: 1rem;
                    box-shadow: 0 8px 25px rgba(45, 90, 90, 0.3);
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    transition: all 0.3s ease;
                    min-width: 160px;
                    justify-content: center;
                " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 12px 35px rgba(45, 90, 90, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 25px rgba(45, 90, 90, 0.3)'">
                    <span style="font-size: 1.2rem;">📅</span>
                    Book Now
                </button>
                
                <!-- WhatsApp Quick Contact -->
                <a href="https://wa.me/6421368682?text=Hi! I'm interested in booking a stay at Lakeside Retreat. Can you help me with availability and pricing?" target="_blank" rel="noopener noreferrer" style="
                    background: #25D366;
                    color: white;
                    border: none;
                    padding: 12px;
                    border-radius: 50%;
                    font-size: 1.2rem;
                    box-shadow: 0 6px 20px rgba(37, 211, 102, 0.3);
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    text-decoration: none;
                    margin-top: 15px;
                    width: 50px;
                    height: 50px;
                    transition: all 0.3s ease;
                " onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 8px 25px rgba(37, 211, 102, 0.4)'" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 6px 20px rgba(37, 211, 102, 0.3)'" title="Chat with us on WhatsApp">
                    💬
                </a>
            `;
            
            floatingButton.style.cssText = `
                position: fixed;
                bottom: 30px;
                right: 30px;
                z-index: 1000;
                opacity: 0;
                visibility: hidden;
                transform: translateY(20px);
                transition: all 0.3s ease;
                pointer-events: none;
                display: flex;
                flex-direction: column;
                align-items: center;
            `;
            
            document.body.appendChild(floatingButton);
            return floatingButton;
        }

        // Show/hide floating button based on scroll
        function handleFloatingButton() {
            const floatingButton = document.getElementById('floating-book-button');
            const heroSection = document.querySelector('.hero');
            
            if (!floatingButton || !heroSection) return;
            
            const heroBottom = heroSection.offsetTop + heroSection.offsetHeight;
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            if (scrollTop > heroBottom + 100) {
                // Show button
                floatingButton.style.opacity = '1';
                floatingButton.style.visibility = 'visible';
                floatingButton.style.transform = 'translateY(0)';
                floatingButton.style.pointerEvents = 'auto';
            } else {
                // Hide button
                floatingButton.style.opacity = '0';
                floatingButton.style.visibility = 'hidden';
                floatingButton.style.transform = 'translateY(20px)';
                floatingButton.style.pointerEvents = 'none';
            }
        }

        // FAQ INLINE ONCLICK - NO EXTERNAL FUNCTION NEEDED

        // Performance Optimization: Lazy Loading Images
        function initLazyLoading() {
            const images = document.querySelectorAll('img[data-src]');
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        img.classList.remove('lazy');
                        imageObserver.unobserve(img);
                    }
                });
            });

            images.forEach(img => {
                imageObserver.observe(img);
            });
        }

        // WebP Detection and Image Optimization
        function initWebPSupport() {
            // Check WebP support
            const webpSupport = (function() {
                const canvas = document.createElement('canvas');
                canvas.width = 1;
                canvas.height = 1;
                return canvas.toDataURL('image/webp').indexOf('data:image/webp') === 0;
            })();
            
            // Add class to document for CSS feature detection
            if (webpSupport) {
                document.documentElement.classList.add('webp');
            } else {
                document.documentElement.classList.add('no-webp');
            }
            
            return webpSupport;
        }

        // Performance Monitoring (Basic)
        function initPerformanceMonitoring() {
            // Web Vitals monitoring
            if ('web-vital' in window) {
                // Track Core Web Vitals when available
                return;
            }
            
            // Basic performance tracking
            window.addEventListener('load', () => {
                const perfData = performance.getEntriesByType('navigation')[0];
                const loadTime = perfData.loadEventEnd - perfData.loadEventStart;
                
                // Track load time (for future analytics integration)
                if (loadTime > 3000) {
                    console.info('Page load time:', loadTime + 'ms - Consider optimization');
                }
            });
        }

        // Critical Resource Hints
        function addResourceHints() {
            const head = document.head;
            
            // Preload critical images - using full GitHub URLs
            const criticalImages = [
                'https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/vineyard.jpeg',
                'https://raw.githubusercontent.com/Lakesideglamping/lakeside-retreat-staging/main/images/logormbg.png'
            ];
            
            criticalImages.forEach(src => {
                const link = document.createElement('link');
                link.rel = 'preload';
                link.as = 'image';
                link.href = src;
                head.appendChild(link);
            });
        }

        // Initialize floating button and FAQ system
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize performance optimizations
            initLazyLoading();
            addResourceHints();
            initWebPSupport();
            initPerformanceMonitoring();
            
            // Initialize back to top button
            initBackToTopButton();
            
            // FAQ dropdowns use inline onclick - no initialization needed
            
            createFloatingBookButton();
            window.addEventListener('scroll', handleFloatingButton);
        });

</script>
<!-- Back to Top Button -->
<button id="backToTopBtn" onclick="scrollToTop()" onmouseout="this.style.transform='scale(1)'" onmouseover="this.style.transform='scale(1.1)'" style="
        position: fixed !important;
        bottom: 30px !important;
        right: 30px !important;
        z-index: 9999 !important;
        border: none !important;
        outline: none !important;
        background-color: var(--brand-teal) !important;
        color: white !important;
        cursor: pointer !important;
        padding: 15px !important;
        border-radius: 50% !important;
        font-size: 18px !important;
        width: 50px !important;
        height: 50px !important;
        transition: all 0.3s ease !important;
        box-shadow: 0 4px 12px rgba(0,0,0,0.2) !important;
        opacity: 0 !important;
        visibility: hidden !important;
        display: block !important;
    " title="Go to top">
<i class="fas fa-arrow-up"></i>
</button>
<script>
        // Back to Top Button functionality - COMPLETE DEBUG VERSION
        let backToTopVisible = false;
        
        function initBackToTopButton() {
            console.log('🔝 Starting back-to-top button initialization...');
            
            const backToTopBtn = document.getElementById("backToTopBtn");
            if (!backToTopBtn) {
                console.error('❌ Back to top button element not found!');
                return;
            }
            
            console.log('✅ Back to top button element found');
            
            // Force initial styles - override everything
            backToTopBtn.style.cssText = `
                display: block !important;
                position: fixed !important;
                bottom: 30px !important;
                right: 30px !important;
                z-index: 9999 !important;
                background-color: #2d5a5a !important;
                color: white !important;
                border: none !important;
                border-radius: 50% !important;
                width: 50px !important;
                height: 50px !important;
                font-size: 18px !important;
                cursor: pointer !important;
                box-shadow: 0 4px 12px rgba(0,0,0,0.2) !important;
                transition: all 0.3s ease !important;
                opacity: 0 !important;
                visibility: hidden !important;
            `;
            
            function handleScroll() {
                const scrollY = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
                console.log('📏 Scroll:', scrollY);
                
                if (scrollY > 100) {
                    console.log('🔼 Should show button');
                    backToTopBtn.style.setProperty('opacity', '1', 'important');
                    backToTopBtn.style.setProperty('visibility', 'visible', 'important');
                    backToTopBtn.style.setProperty('display', 'block', 'important');
                    backToTopVisible = true;
                } else {
                    console.log('🔽 Should hide button');
                    backToTopBtn.style.setProperty('opacity', '0', 'important');
                    backToTopBtn.style.setProperty('visibility', 'hidden', 'important');
                    backToTopVisible = false;
                }
            }
            
            // Multiple event listeners
            window.addEventListener('scroll', handleScroll, { passive: true });
            document.addEventListener('scroll', handleScroll, { passive: true });
            document.body.addEventListener('scroll', handleScroll, { passive: true });
            
            // Immediate test
            setTimeout(() => {
                console.log('🧪 Testing - forcing button visible for 3 seconds...');
                backToTopBtn.style.setProperty('opacity', '1', 'important');
                backToTopBtn.style.setProperty('visibility', 'visible', 'important');
                backToTopBtn.style.setProperty('display', 'block', 'important');
                
                setTimeout(() => {
                    handleScroll(); // Back to normal
                }, 3000);
            }, 1000);
            
            console.log('🎯 Initialization complete');
        }

        function scrollToTop() {
            console.log('Scrolling to top...');
            
            // Force scroll to top immediately
            document.documentElement.scrollTop = 0;
            document.body.scrollTop = 0;
            window.scrollTo(0, 0);
            
            // Also try smooth scroll as backup
            try {
                window.scrollTo({
                    top: 0,
                    left: 0,
                    behavior: 'smooth'
                });
            } catch (e) {
                console.log('Smooth scroll not supported, using instant scroll');
            }
        }

        // Initialize page navigation when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize from URL hash for deep linking support
            initializeFromHash();
        });
    </script>
<!-- Flatpickr Date Picker (self-hosted) -->
<script src="/vendor/flatpickr/flatpickr.min.js"></script>
<script>
    // Flatpickr Calendar Integration with Blocked Dates
    (function() {
        let checkinPicker = null;
        let checkoutPicker = null;
        let blockedDates = [];
        let currentAccommodation = 'dome-pinot';
        let isLoadingDates = false;
        
        // Fetch blocked dates from API
        async function fetchBlockedDates(accommodation) {
            if (isLoadingDates) return;
            isLoadingDates = true;
            
            try {
                const response = await fetch(`${API_BASE_URL}/api/blocked-dates?accommodation=${accommodation}`);
                const data = await response.json();
                
                if (data.success && data.blockedDates) {
                    blockedDates = data.blockedDates;
                    console.log(`📅 Loaded ${blockedDates.length} blocked dates for ${accommodation}`);
                    
                    // Update both pickers with new blocked dates
                    if (checkinPicker) {
                        checkinPicker.set('disable', blockedDates);
                    }
                    if (checkoutPicker) {
                        checkoutPicker.set('disable', blockedDates);
                    }
                }
            } catch (error) {
                console.error('Failed to fetch blocked dates:', error);
                blockedDates = [];
            } finally {
                isLoadingDates = false;
            }
        }
        
        // Initialize Flatpickr on date inputs
        function initializeDatePickers() {
            const checkinInput = document.getElementById('bookingCheckin');
            const checkoutInput = document.getElementById('bookingCheckout');
            
            if (!checkinInput || !checkoutInput) return;
            
            // Destroy existing pickers if they exist
            if (checkinPicker) checkinPicker.destroy();
            if (checkoutPicker) checkoutPicker.destroy();
            
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            // Common configuration
            const commonConfig = {
                dateFormat: 'Y-m-d',
                altInput: true,
                altFormat: 'm/d/Y',
                minDate: today,
                maxDate: new Date().fp_incr(365),
                disable: blockedDates,
                disableMobile: false,
                locale: {
                    firstDayOfWeek: 0
                },
                onDayCreate: function(dObj, dStr, fp, dayElem) {
                    // Add visual indicator for blocked dates
                    const dateStr = dayElem.dateObj.toISOString().split('T')[0];
                    if (blockedDates.includes(dateStr)) {
                        dayElem.classList.add('blocked-date');
                        dayElem.title = 'Not available';
                    }
                }
            };
            
            // Check-in picker
            checkinPicker = flatpickr(checkinInput, {
                ...commonConfig,
                onChange: function(selectedDates, dateStr) {
                    if (selectedDates.length > 0) {
                        // Set minimum date for checkout to day after check-in
                        const minCheckout = new Date(selectedDates[0]);
                        minCheckout.setDate(minCheckout.getDate() + 1);
                        checkoutPicker.set('minDate', minCheckout);
                        
                        // Clear checkout if it's before new min date
                        const currentCheckout = checkoutPicker.selectedDates[0];
                        if (currentCheckout && currentCheckout <= selectedDates[0]) {
                            checkoutPicker.clear();
                        }
                        
                        // Trigger price update
                        if (typeof updateEstimatedTotal === 'function') {
                            updateEstimatedTotal();
                        }
                    }
                }
            });
            
            // Check-out picker
            checkoutPicker = flatpickr(checkoutInput, {
                ...commonConfig,
                minDate: new Date().fp_incr(1),
                onChange: function(selectedDates, dateStr) {
                    if (selectedDates.length > 0) {
                        // Trigger price update
                        if (typeof updateEstimatedTotal === 'function') {
                            updateEstimatedTotal();
                        }
                    }
                }
            });
            
            console.log('📅 Flatpickr date pickers initialized');
        }
        
        // Update blocked dates when accommodation changes
        function onAccommodationChange(accommodation) {
            if (accommodation !== currentAccommodation) {
                currentAccommodation = accommodation;
                fetchBlockedDates(accommodation);
            }
        }
        
        // Initialize when booking modal opens
        function initializeOnModalOpen() {
            // Wait for DOM to be ready
            setTimeout(() => {
                initializeDatePickers();
                fetchBlockedDates(currentAccommodation);
            }, 100);
        }
        
        // Expose functions globally
        window.initializeFlatpickrDates = initializeOnModalOpen;
        window.updateFlatpickrAccommodation = onAccommodationChange;
        window.refreshBlockedDates = function() {
            fetchBlockedDates(currentAccommodation);
        };
        
        // Auto-initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            // Watch for booking modal to open
            const bookingModal = document.getElementById('bookingModal');
            if (bookingModal) {
                const observer = new MutationObserver(function(mutations) {
                    mutations.forEach(function(mutation) {
                        if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
                            const display = window.getComputedStyle(bookingModal).display;
                            if (display !== 'none') {
                                initializeOnModalOpen();
                            }
                        }
                    });
                });
                observer.observe(bookingModal, { attributes: true });
            }
        });
    })();
</script>
<style>
    /* Flatpickr custom styles for blocked dates */
    .flatpickr-day.blocked-date {
        background: #ffebee !important;
        color: #c62828 !important;
        text-decoration: line-through;
        cursor: not-allowed !important;
    }
    .flatpickr-day.blocked-date:hover {
        background: #ffcdd2 !important;
    }
    .flatpickr-day.flatpickr-disabled {
        background: #f5f5f5 !important;
        color: #bdbdbd !important;
    }
    /* Make calendar more visible */
    .flatpickr-calendar {
        box-shadow: 0 4px 20px rgba(0,0,0,0.15) !important;
        border-radius: 8px !important;
    }
    .flatpickr-day.selected {
        background: #2d5a5a !important;
        border-color: #2d5a5a !important;
    }
    .flatpickr-day.selected:hover {
        background: #1e4040 !important;
    }
    /* Calendar legend */
    .calendar-legend {
        display: flex;
        gap: 15px;
        margin-top: 8px;
        font-size: 12px;
        color: #666;
    }
    .calendar-legend-item {
        display: flex;
        align-items: center;
        gap: 5px;
    }
    .legend-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
    }
    .legend-dot.available {
        background: #e8f5e9;
        border: 1px solid #4caf50;
    }
    .legend-dot.blocked {
        background: #ffebee;
        border: 1px solid #c62828;
    }
</style>
<script>
(function() {
    function loadPricing() {
        fetch('/api/pricing')
            .then(function(response) { return response.json(); })
            .then(function(data) {
                if (data.success && data.pricing) {
                    var priceElements = document.querySelectorAll('[data-price]');
                    priceElements.forEach(function(el) {
                        var key = el.getAttribute('data-price');
                        if (data.pricing[key] && data.pricing[key].base) {
                            el.textContent = '$' + data.pricing[key].base;
                        }
                    });
                    if (window.accommodationPrices) {
                        window.accommodationPrices = data.pricing;
                    }
                }
            })
            .catch(function(err) {
                console.log('Using default prices');
            });
    }
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', loadPricing);
    } else {
        loadPricing();
    }
})();
</script>
</body>
</html>
